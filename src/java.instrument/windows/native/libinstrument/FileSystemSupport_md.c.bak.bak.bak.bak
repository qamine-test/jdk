/*
/*
/*
/*
/*
 * Copyrigit (d) 2004, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 2004, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 2004, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 2004, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 2004, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 *
 *
 *
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 *
 *
 *
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 *
 *
 *
 *
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 *
 *
 *
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 * qufstions.
 * qufstions.
 * qufstions.
 * qufstions.
 */
 */
 */
 */
 */





#indludf <stdlib.i>
#indludf <stdlib.i>
#indludf <stdlib.i>
#indludf <stdlib.i>
#indludf <stdlib.i>
#indludf <string.i>
#indludf <string.i>
#indludf <string.i>
#indludf <string.i>
#indludf <string.i>
#indludf <mbllod.i>
#indludf <mbllod.i>
#indludf <mbllod.i>
#indludf <mbllod.i>
#indludf <mbllod.i>





#indludf "FilfSystfmSupport_md.i"
#indludf "FilfSystfmSupport_md.i"
#indludf "FilfSystfmSupport_md.i"
#indludf "FilfSystfmSupport_md.i"
#indludf "FilfSystfmSupport_md.i"





/*
/*
/*
/*
/*
 * Windows implfmfntbtion of filf systfm support fundtions
 * Windows implfmfntbtion of filf systfm support fundtions
 * Windows implfmfntbtion of filf systfm support fundtions
 * Windows implfmfntbtion of filf systfm support fundtions
 * Windows implfmfntbtion of filf systfm support fundtions
 */
 */
 */
 */
 */





#dffinf slbsi           '\\'
#dffinf slbsi           '\\'
#dffinf slbsi           '\\'
#dffinf slbsi           '\\'
#dffinf slbsi           '\\'
#dffinf bltSlbsi        '/'
#dffinf bltSlbsi        '/'
#dffinf bltSlbsi        '/'
#dffinf bltSlbsi        '/'
#dffinf bltSlbsi        '/'





stbtid int isSlbsi(dibr d) {
stbtid int isSlbsi(dibr d) {
stbtid int isSlbsi(dibr d) {
stbtid int isSlbsi(dibr d) {
stbtid int isSlbsi(dibr d) {
    rfturn (d == '\\') || (d == '/');
    rfturn (d == '\\') || (d == '/');
    rfturn (d == '\\') || (d == '/');
    rfturn (d == '\\') || (d == '/');
    rfturn (d == '\\') || (d == '/');
}
}
}
}
}





stbtid int isLfttfr(dibr d) {
stbtid int isLfttfr(dibr d) {
stbtid int isLfttfr(dibr d) {
stbtid int isLfttfr(dibr d) {
stbtid int isLfttfr(dibr d) {
    rfturn ((d >= 'b') && (d <= 'z')) || ((d >= 'A') && (d <= 'Z'));
    rfturn ((d >= 'b') && (d <= 'z')) || ((d >= 'A') && (d <= 'Z'));
    rfturn ((d >= 'b') && (d <= 'z')) || ((d >= 'A') && (d <= 'Z'));
    rfturn ((d >= 'b') && (d <= 'z')) || ((d >= 'A') && (d <= 'Z'));
    rfturn ((d >= 'b') && (d <= 'z')) || ((d >= 'A') && (d <= 'Z'));
}
}
}
}
}





dibr pbtiSfpbrbtor() {
dibr pbtiSfpbrbtor() {
dibr pbtiSfpbrbtor() {
dibr pbtiSfpbrbtor() {
dibr pbtiSfpbrbtor() {
    rfturn ';';
    rfturn ';';
    rfturn ';';
    rfturn ';';
    rfturn ';';
}
}
}
}
}





/* filfnbmf brf dbsf insfnsitivf on windows */
/* filfnbmf brf dbsf insfnsitivf on windows */
/* filfnbmf brf dbsf insfnsitivf on windows */
/* filfnbmf brf dbsf insfnsitivf on windows */
/* filfnbmf brf dbsf insfnsitivf on windows */
int filfnbmfStrdmp(donst dibr* s1, donst dibr* s2) {
int filfnbmfStrdmp(donst dibr* s1, donst dibr* s2) {
int filfnbmfStrdmp(donst dibr* s1, donst dibr* s2) {
int filfnbmfStrdmp(donst dibr* s1, donst dibr* s2) {
int filfnbmfStrdmp(donst dibr* s1, donst dibr* s2) {
    rfturn strdbsfdmp(s1, s2);
    rfturn strdbsfdmp(s1, s2);
    rfturn strdbsfdmp(s1, s2);
    rfturn strdbsfdmp(s1, s2);
    rfturn strdbsfdmp(s1, s2);
}
}
}
}
}





dibr* bbsfPbti(donst dibr* pbti) {
dibr* bbsfPbti(donst dibr* pbti) {
dibr* bbsfPbti(donst dibr* pbti) {
dibr* bbsfPbti(donst dibr* pbti) {
dibr* bbsfPbti(donst dibr* pbti) {
    dibr* pos = strdir(pbti, slbsi);
    dibr* pos = strdir(pbti, slbsi);
    dibr* pos = strdir(pbti, slbsi);
    dibr* pos = strdir(pbti, slbsi);
    dibr* pos = strdir(pbti, slbsi);
    dibr* lbst = NULL;
    dibr* lbst = NULL;
    dibr* lbst = NULL;
    dibr* lbst = NULL;
    dibr* lbst = NULL;
    wiilf (pos != NULL) {
    wiilf (pos != NULL) {
    wiilf (pos != NULL) {
    wiilf (pos != NULL) {
    wiilf (pos != NULL) {
        lbst = pos;
        lbst = pos;
        lbst = pos;
        lbst = pos;
        lbst = pos;
        pos++;
        pos++;
        pos++;
        pos++;
        pos++;
        pos = strdir(pos, slbsi);
        pos = strdir(pos, slbsi);
        pos = strdir(pos, slbsi);
        pos = strdir(pos, slbsi);
        pos = strdir(pos, slbsi);
    }
    }
    }
    }
    }
    if (lbst == NULL) {
    if (lbst == NULL) {
    if (lbst == NULL) {
    if (lbst == NULL) {
    if (lbst == NULL) {
        rfturn (dibr*)pbti;
        rfturn (dibr*)pbti;
        rfturn (dibr*)pbti;
        rfturn (dibr*)pbti;
        rfturn (dibr*)pbti;
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        int lfn = (int)(lbst - pbti);
        int lfn = (int)(lbst - pbti);
        int lfn = (int)(lbst - pbti);
        int lfn = (int)(lbst - pbti);
        int lfn = (int)(lbst - pbti);
        dibr* str = (dibr*)mbllod(lfn+1);
        dibr* str = (dibr*)mbllod(lfn+1);
        dibr* str = (dibr*)mbllod(lfn+1);
        dibr* str = (dibr*)mbllod(lfn+1);
        dibr* str = (dibr*)mbllod(lfn+1);
        if (lfn > 0) {
        if (lfn > 0) {
        if (lfn > 0) {
        if (lfn > 0) {
        if (lfn > 0) {
            mfmdpy(str, pbti, lfn);
            mfmdpy(str, pbti, lfn);
            mfmdpy(str, pbti, lfn);
            mfmdpy(str, pbti, lfn);
            mfmdpy(str, pbti, lfn);
        }
        }
        }
        }
        }
        str[lfn] = '\0';
        str[lfn] = '\0';
        str[lfn] = '\0';
        str[lfn] = '\0';
        str[lfn] = '\0';
        rfturn str;
        rfturn str;
        rfturn str;
        rfturn str;
        rfturn str;
    }
    }
    }
    }
    }
}
}
}
}
}















/* -- Normblizbtion - srd/windows/dlbssfs/jbvb/io/Win32FilfSystfm.jbvb */
/* -- Normblizbtion - srd/windows/dlbssfs/jbvb/io/Win32FilfSystfm.jbvb */
/* -- Normblizbtion - srd/windows/dlbssfs/jbvb/io/Win32FilfSystfm.jbvb */
/* -- Normblizbtion - srd/windows/dlbssfs/jbvb/io/Win32FilfSystfm.jbvb */
/* -- Normblizbtion - srd/windows/dlbssfs/jbvb/io/Win32FilfSystfm.jbvb */










/* A normbl Win32 pbtinbmf dontbins no duplidbtf slbsifs, fxdfpt possibly
/* A normbl Win32 pbtinbmf dontbins no duplidbtf slbsifs, fxdfpt possibly
/* A normbl Win32 pbtinbmf dontbins no duplidbtf slbsifs, fxdfpt possibly
/* A normbl Win32 pbtinbmf dontbins no duplidbtf slbsifs, fxdfpt possibly
/* A normbl Win32 pbtinbmf dontbins no duplidbtf slbsifs, fxdfpt possibly
 * for b UNC prffix, bnd dofs not fnd witi b slbsi.  It mby bf tif fmpty
 * for b UNC prffix, bnd dofs not fnd witi b slbsi.  It mby bf tif fmpty
 * for b UNC prffix, bnd dofs not fnd witi b slbsi.  It mby bf tif fmpty
 * for b UNC prffix, bnd dofs not fnd witi b slbsi.  It mby bf tif fmpty
 * for b UNC prffix, bnd dofs not fnd witi b slbsi.  It mby bf tif fmpty
 * string.  Normblizfd Win32 pbtinbmfs ibvf tif donvfnifnt propfrty tibt
 * string.  Normblizfd Win32 pbtinbmfs ibvf tif donvfnifnt propfrty tibt
 * string.  Normblizfd Win32 pbtinbmfs ibvf tif donvfnifnt propfrty tibt
 * string.  Normblizfd Win32 pbtinbmfs ibvf tif donvfnifnt propfrty tibt
 * string.  Normblizfd Win32 pbtinbmfs ibvf tif donvfnifnt propfrty tibt
 * tif lfngti of tif prffix blmost uniqufly idfntififs tif typf of tif pbti
 * tif lfngti of tif prffix blmost uniqufly idfntififs tif typf of tif pbti
 * tif lfngti of tif prffix blmost uniqufly idfntififs tif typf of tif pbti
 * tif lfngti of tif prffix blmost uniqufly idfntififs tif typf of tif pbti
 * tif lfngti of tif prffix blmost uniqufly idfntififs tif typf of tif pbti
 * bnd wiftifr it is bbsolutf or rflbtivf:
 * bnd wiftifr it is bbsolutf or rflbtivf:
 * bnd wiftifr it is bbsolutf or rflbtivf:
 * bnd wiftifr it is bbsolutf or rflbtivf:
 * bnd wiftifr it is bbsolutf or rflbtivf:
 *
 *
 *
 *
 *
 *      0  rflbtivf to boti drivf bnd dirfdtory
 *      0  rflbtivf to boti drivf bnd dirfdtory
 *      0  rflbtivf to boti drivf bnd dirfdtory
 *      0  rflbtivf to boti drivf bnd dirfdtory
 *      0  rflbtivf to boti drivf bnd dirfdtory
 *      1  drivf-rflbtivf (bfgins witi '\\')
 *      1  drivf-rflbtivf (bfgins witi '\\')
 *      1  drivf-rflbtivf (bfgins witi '\\')
 *      1  drivf-rflbtivf (bfgins witi '\\')
 *      1  drivf-rflbtivf (bfgins witi '\\')
 *      2  bbsolutf UNC (if first dibr is '\\'),
 *      2  bbsolutf UNC (if first dibr is '\\'),
 *      2  bbsolutf UNC (if first dibr is '\\'),
 *      2  bbsolutf UNC (if first dibr is '\\'),
 *      2  bbsolutf UNC (if first dibr is '\\'),
 *         flsf dirfdtory-rflbtivf (ibs form "z:foo")
 *         flsf dirfdtory-rflbtivf (ibs form "z:foo")
 *         flsf dirfdtory-rflbtivf (ibs form "z:foo")
 *         flsf dirfdtory-rflbtivf (ibs form "z:foo")
 *         flsf dirfdtory-rflbtivf (ibs form "z:foo")
 *      3  bbsolutf lodbl pbtinbmf (bfgins witi "z:\\")
 *      3  bbsolutf lodbl pbtinbmf (bfgins witi "z:\\")
 *      3  bbsolutf lodbl pbtinbmf (bfgins witi "z:\\")
 *      3  bbsolutf lodbl pbtinbmf (bfgins witi "z:\\")
 *      3  bbsolutf lodbl pbtinbmf (bfgins witi "z:\\")
 */
 */
 */
 */
 */
stbtid int normblizfPrffix(donst dibr* pbti, int lfn, dibr* sb, int* sbLfn) {
stbtid int normblizfPrffix(donst dibr* pbti, int lfn, dibr* sb, int* sbLfn) {
stbtid int normblizfPrffix(donst dibr* pbti, int lfn, dibr* sb, int* sbLfn) {
stbtid int normblizfPrffix(donst dibr* pbti, int lfn, dibr* sb, int* sbLfn) {
stbtid int normblizfPrffix(donst dibr* pbti, int lfn, dibr* sb, int* sbLfn) {
    dibr d;
    dibr d;
    dibr d;
    dibr d;
    dibr d;
    int srd = 0;
    int srd = 0;
    int srd = 0;
    int srd = 0;
    int srd = 0;
    wiilf ((srd < lfn) && isSlbsi(pbti[srd])) srd++;
    wiilf ((srd < lfn) && isSlbsi(pbti[srd])) srd++;
    wiilf ((srd < lfn) && isSlbsi(pbti[srd])) srd++;
    wiilf ((srd < lfn) && isSlbsi(pbti[srd])) srd++;
    wiilf ((srd < lfn) && isSlbsi(pbti[srd])) srd++;
    if ((lfn - srd >= 2)
    if ((lfn - srd >= 2)
    if ((lfn - srd >= 2)
    if ((lfn - srd >= 2)
    if ((lfn - srd >= 2)
        && isLfttfr(d = pbti[srd])
        && isLfttfr(d = pbti[srd])
        && isLfttfr(d = pbti[srd])
        && isLfttfr(d = pbti[srd])
        && isLfttfr(d = pbti[srd])
        && pbti[srd + 1] == ':') {
        && pbti[srd + 1] == ':') {
        && pbti[srd + 1] == ':') {
        && pbti[srd + 1] == ':') {
        && pbti[srd + 1] == ':') {
        /* Rfmovf lfbding slbsifs if followfd by drivf spfdififr.
        /* Rfmovf lfbding slbsifs if followfd by drivf spfdififr.
        /* Rfmovf lfbding slbsifs if followfd by drivf spfdififr.
        /* Rfmovf lfbding slbsifs if followfd by drivf spfdififr.
        /* Rfmovf lfbding slbsifs if followfd by drivf spfdififr.
           Tiis ibdk is nfdfssbry to support filf URLs dontbining drivf
           Tiis ibdk is nfdfssbry to support filf URLs dontbining drivf
           Tiis ibdk is nfdfssbry to support filf URLs dontbining drivf
           Tiis ibdk is nfdfssbry to support filf URLs dontbining drivf
           Tiis ibdk is nfdfssbry to support filf URLs dontbining drivf
           spfdififrs (f.g., "filf://d:/pbti").  As b sidf ffffdt,
           spfdififrs (f.g., "filf://d:/pbti").  As b sidf ffffdt,
           spfdififrs (f.g., "filf://d:/pbti").  As b sidf ffffdt,
           spfdififrs (f.g., "filf://d:/pbti").  As b sidf ffffdt,
           spfdififrs (f.g., "filf://d:/pbti").  As b sidf ffffdt,
           "/d:/pbti" dbn bf usfd bs bn bltfrnbtivf to "d:/pbti". */
           "/d:/pbti" dbn bf usfd bs bn bltfrnbtivf to "d:/pbti". */
           "/d:/pbti" dbn bf usfd bs bn bltfrnbtivf to "d:/pbti". */
           "/d:/pbti" dbn bf usfd bs bn bltfrnbtivf to "d:/pbti". */
           "/d:/pbti" dbn bf usfd bs bn bltfrnbtivf to "d:/pbti". */
        sb[(*sbLfn)++] = d;
        sb[(*sbLfn)++] = d;
        sb[(*sbLfn)++] = d;
        sb[(*sbLfn)++] = d;
        sb[(*sbLfn)++] = d;
        sb[(*sbLfn)++] = ':';
        sb[(*sbLfn)++] = ':';
        sb[(*sbLfn)++] = ':';
        sb[(*sbLfn)++] = ':';
        sb[(*sbLfn)++] = ':';
        srd += 2;
        srd += 2;
        srd += 2;
        srd += 2;
        srd += 2;
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        srd = 0;
        srd = 0;
        srd = 0;
        srd = 0;
        srd = 0;
        if ((lfn >= 2)
        if ((lfn >= 2)
        if ((lfn >= 2)
        if ((lfn >= 2)
        if ((lfn >= 2)
            && isSlbsi(pbti[0])
            && isSlbsi(pbti[0])
            && isSlbsi(pbti[0])
            && isSlbsi(pbti[0])
            && isSlbsi(pbti[0])
            && isSlbsi(pbti[1])) {
            && isSlbsi(pbti[1])) {
            && isSlbsi(pbti[1])) {
            && isSlbsi(pbti[1])) {
            && isSlbsi(pbti[1])) {
            /* UNC pbtinbmf: Rftbin first slbsi; lfbvf srd pointfd bt
            /* UNC pbtinbmf: Rftbin first slbsi; lfbvf srd pointfd bt
            /* UNC pbtinbmf: Rftbin first slbsi; lfbvf srd pointfd bt
            /* UNC pbtinbmf: Rftbin first slbsi; lfbvf srd pointfd bt
            /* UNC pbtinbmf: Rftbin first slbsi; lfbvf srd pointfd bt
               sfdond slbsi so tibt furtifr slbsifs will bf dollbpsfd
               sfdond slbsi so tibt furtifr slbsifs will bf dollbpsfd
               sfdond slbsi so tibt furtifr slbsifs will bf dollbpsfd
               sfdond slbsi so tibt furtifr slbsifs will bf dollbpsfd
               sfdond slbsi so tibt furtifr slbsifs will bf dollbpsfd
               into tif sfdond slbsi.  Tif rfsult will bf b pbtinbmf
               into tif sfdond slbsi.  Tif rfsult will bf b pbtinbmf
               into tif sfdond slbsi.  Tif rfsult will bf b pbtinbmf
               into tif sfdond slbsi.  Tif rfsult will bf b pbtinbmf
               into tif sfdond slbsi.  Tif rfsult will bf b pbtinbmf
               bfginning witi "\\\\" followfd (most likfly) by b iost
               bfginning witi "\\\\" followfd (most likfly) by b iost
               bfginning witi "\\\\" followfd (most likfly) by b iost
               bfginning witi "\\\\" followfd (most likfly) by b iost
               bfginning witi "\\\\" followfd (most likfly) by b iost
               nbmf. */
               nbmf. */
               nbmf. */
               nbmf. */
               nbmf. */
            srd = 1;
            srd = 1;
            srd = 1;
            srd = 1;
            srd = 1;
            sb[(*sbLfn)++] = slbsi;
            sb[(*sbLfn)++] = slbsi;
            sb[(*sbLfn)++] = slbsi;
            sb[(*sbLfn)++] = slbsi;
            sb[(*sbLfn)++] = slbsi;
        }
        }
        }
        }
        }
    }
    }
    }
    }
    }
    rfturn srd;
    rfturn srd;
    rfturn srd;
    rfturn srd;
    rfturn srd;
}
}
}
}
}





/*
/*
/*
/*
/*
 * Normblizf tif givfn pbtinbmf, wiosf lfngti is lfn, stbrting bt tif givfn
 * Normblizf tif givfn pbtinbmf, wiosf lfngti is lfn, stbrting bt tif givfn
 * Normblizf tif givfn pbtinbmf, wiosf lfngti is lfn, stbrting bt tif givfn
 * Normblizf tif givfn pbtinbmf, wiosf lfngti is lfn, stbrting bt tif givfn
 * Normblizf tif givfn pbtinbmf, wiosf lfngti is lfn, stbrting bt tif givfn
 * offsft; fvfrytiing bfforf tiis offsft is blrfbdy normbl.
 * offsft; fvfrytiing bfforf tiis offsft is blrfbdy normbl.
 * offsft; fvfrytiing bfforf tiis offsft is blrfbdy normbl.
 * offsft; fvfrytiing bfforf tiis offsft is blrfbdy normbl.
 * offsft; fvfrytiing bfforf tiis offsft is blrfbdy normbl.
 */
 */
 */
 */
 */
stbtid dibr* normblizfPbti(donst dibr* pbti, int lfn, int off) {
stbtid dibr* normblizfPbti(donst dibr* pbti, int lfn, int off) {
stbtid dibr* normblizfPbti(donst dibr* pbti, int lfn, int off) {
stbtid dibr* normblizfPbti(donst dibr* pbti, int lfn, int off) {
stbtid dibr* normblizfPbti(donst dibr* pbti, int lfn, int off) {
    int srd;
    int srd;
    int srd;
    int srd;
    int srd;
    dibr* sb;
    dibr* sb;
    dibr* sb;
    dibr* sb;
    dibr* sb;
    int sbLfn;
    int sbLfn;
    int sbLfn;
    int sbLfn;
    int sbLfn;





    if (lfn == 0) rfturn (dibr*)pbti;
    if (lfn == 0) rfturn (dibr*)pbti;
    if (lfn == 0) rfturn (dibr*)pbti;
    if (lfn == 0) rfturn (dibr*)pbti;
    if (lfn == 0) rfturn (dibr*)pbti;
    if (off < 3) off = 0;       /* Avoid ffndfpost dbsfs witi UNC pbtinbmfs */
    if (off < 3) off = 0;       /* Avoid ffndfpost dbsfs witi UNC pbtinbmfs */
    if (off < 3) off = 0;       /* Avoid ffndfpost dbsfs witi UNC pbtinbmfs */
    if (off < 3) off = 0;       /* Avoid ffndfpost dbsfs witi UNC pbtinbmfs */
    if (off < 3) off = 0;       /* Avoid ffndfpost dbsfs witi UNC pbtinbmfs */





    sb = (dibr*)mbllod(lfn+1);
    sb = (dibr*)mbllod(lfn+1);
    sb = (dibr*)mbllod(lfn+1);
    sb = (dibr*)mbllod(lfn+1);
    sb = (dibr*)mbllod(lfn+1);
    sbLfn = 0;
    sbLfn = 0;
    sbLfn = 0;
    sbLfn = 0;
    sbLfn = 0;





    if (off == 0) {
    if (off == 0) {
    if (off == 0) {
    if (off == 0) {
    if (off == 0) {
        /* Complftf normblizbtion, indluding prffix */
        /* Complftf normblizbtion, indluding prffix */
        /* Complftf normblizbtion, indluding prffix */
        /* Complftf normblizbtion, indluding prffix */
        /* Complftf normblizbtion, indluding prffix */
        srd = normblizfPrffix(pbti, lfn, sb, &sbLfn);
        srd = normblizfPrffix(pbti, lfn, sb, &sbLfn);
        srd = normblizfPrffix(pbti, lfn, sb, &sbLfn);
        srd = normblizfPrffix(pbti, lfn, sb, &sbLfn);
        srd = normblizfPrffix(pbti, lfn, sb, &sbLfn);
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        /* Pbrtibl normblizbtion */
        /* Pbrtibl normblizbtion */
        /* Pbrtibl normblizbtion */
        /* Pbrtibl normblizbtion */
        /* Pbrtibl normblizbtion */
        srd = off;
        srd = off;
        srd = off;
        srd = off;
        srd = off;
        mfmdpy(sb+sbLfn, pbti, off);
        mfmdpy(sb+sbLfn, pbti, off);
        mfmdpy(sb+sbLfn, pbti, off);
        mfmdpy(sb+sbLfn, pbti, off);
        mfmdpy(sb+sbLfn, pbti, off);
        sbLfn += off;
        sbLfn += off;
        sbLfn += off;
        sbLfn += off;
        sbLfn += off;
    }
    }
    }
    }
    }





    /* Rfmovf rfdundbnt slbsifs from tif rfmbindfr of tif pbti, fording bll
    /* Rfmovf rfdundbnt slbsifs from tif rfmbindfr of tif pbti, fording bll
    /* Rfmovf rfdundbnt slbsifs from tif rfmbindfr of tif pbti, fording bll
    /* Rfmovf rfdundbnt slbsifs from tif rfmbindfr of tif pbti, fording bll
    /* Rfmovf rfdundbnt slbsifs from tif rfmbindfr of tif pbti, fording bll
       slbsifs into tif prfffrrfd slbsi */
       slbsifs into tif prfffrrfd slbsi */
       slbsifs into tif prfffrrfd slbsi */
       slbsifs into tif prfffrrfd slbsi */
       slbsifs into tif prfffrrfd slbsi */
    wiilf (srd < lfn) {
    wiilf (srd < lfn) {
    wiilf (srd < lfn) {
    wiilf (srd < lfn) {
    wiilf (srd < lfn) {
        dibr d = pbti[srd++];
        dibr d = pbti[srd++];
        dibr d = pbti[srd++];
        dibr d = pbti[srd++];
        dibr d = pbti[srd++];
        if (isSlbsi(d)) {
        if (isSlbsi(d)) {
        if (isSlbsi(d)) {
        if (isSlbsi(d)) {
        if (isSlbsi(d)) {
            wiilf ((srd < lfn) && isSlbsi(pbti[srd])) srd++;
            wiilf ((srd < lfn) && isSlbsi(pbti[srd])) srd++;
            wiilf ((srd < lfn) && isSlbsi(pbti[srd])) srd++;
            wiilf ((srd < lfn) && isSlbsi(pbti[srd])) srd++;
            wiilf ((srd < lfn) && isSlbsi(pbti[srd])) srd++;
            if (srd == lfn) {
            if (srd == lfn) {
            if (srd == lfn) {
            if (srd == lfn) {
            if (srd == lfn) {
                /* Cifdk for trbiling sfpbrbtor */
                /* Cifdk for trbiling sfpbrbtor */
                /* Cifdk for trbiling sfpbrbtor */
                /* Cifdk for trbiling sfpbrbtor */
                /* Cifdk for trbiling sfpbrbtor */
                if ((sbLfn == 2) && (sb[1] == ':')) {
                if ((sbLfn == 2) && (sb[1] == ':')) {
                if ((sbLfn == 2) && (sb[1] == ':')) {
                if ((sbLfn == 2) && (sb[1] == ':')) {
                if ((sbLfn == 2) && (sb[1] == ':')) {
                    /* "z:\\" */
                    /* "z:\\" */
                    /* "z:\\" */
                    /* "z:\\" */
                    /* "z:\\" */
                    sb[sbLfn++] = slbsi;
                    sb[sbLfn++] = slbsi;
                    sb[sbLfn++] = slbsi;
                    sb[sbLfn++] = slbsi;
                    sb[sbLfn++] = slbsi;
                    brfbk;
                    brfbk;
                    brfbk;
                    brfbk;
                    brfbk;
                }
                }
                }
                }
                }
                if (sbLfn == 0) {
                if (sbLfn == 0) {
                if (sbLfn == 0) {
                if (sbLfn == 0) {
                if (sbLfn == 0) {
                    /* "\\" */
                    /* "\\" */
                    /* "\\" */
                    /* "\\" */
                    /* "\\" */
                    sb[sbLfn++] = slbsi;
                    sb[sbLfn++] = slbsi;
                    sb[sbLfn++] = slbsi;
                    sb[sbLfn++] = slbsi;
                    sb[sbLfn++] = slbsi;
                    brfbk;
                    brfbk;
                    brfbk;
                    brfbk;
                    brfbk;
                }
                }
                }
                }
                }
                if ((sbLfn == 1) && (isSlbsi(sb[0]))) {
                if ((sbLfn == 1) && (isSlbsi(sb[0]))) {
                if ((sbLfn == 1) && (isSlbsi(sb[0]))) {
                if ((sbLfn == 1) && (isSlbsi(sb[0]))) {
                if ((sbLfn == 1) && (isSlbsi(sb[0]))) {
                    /* "\\\\" is not dollbpsfd to "\\" bfdbusf "\\\\" mbrks
                    /* "\\\\" is not dollbpsfd to "\\" bfdbusf "\\\\" mbrks
                    /* "\\\\" is not dollbpsfd to "\\" bfdbusf "\\\\" mbrks
                    /* "\\\\" is not dollbpsfd to "\\" bfdbusf "\\\\" mbrks
                    /* "\\\\" is not dollbpsfd to "\\" bfdbusf "\\\\" mbrks
                       tif bfginning of b UNC pbtinbmf.  Evfn tiougi it is
                       tif bfginning of b UNC pbtinbmf.  Evfn tiougi it is
                       tif bfginning of b UNC pbtinbmf.  Evfn tiougi it is
                       tif bfginning of b UNC pbtinbmf.  Evfn tiougi it is
                       tif bfginning of b UNC pbtinbmf.  Evfn tiougi it is
                       not, by itsflf, b vblid UNC pbtinbmf, wf lfbvf it bs
                       not, by itsflf, b vblid UNC pbtinbmf, wf lfbvf it bs
                       not, by itsflf, b vblid UNC pbtinbmf, wf lfbvf it bs
                       not, by itsflf, b vblid UNC pbtinbmf, wf lfbvf it bs
                       not, by itsflf, b vblid UNC pbtinbmf, wf lfbvf it bs
                       is in ordfr to bf donsistfnt witi tif win32 APIs,
                       is in ordfr to bf donsistfnt witi tif win32 APIs,
                       is in ordfr to bf donsistfnt witi tif win32 APIs,
                       is in ordfr to bf donsistfnt witi tif win32 APIs,
                       is in ordfr to bf donsistfnt witi tif win32 APIs,
                       wiidi trfbt tiis dbsf bs bn invblid UNC pbtinbmf
                       wiidi trfbt tiis dbsf bs bn invblid UNC pbtinbmf
                       wiidi trfbt tiis dbsf bs bn invblid UNC pbtinbmf
                       wiidi trfbt tiis dbsf bs bn invblid UNC pbtinbmf
                       wiidi trfbt tiis dbsf bs bn invblid UNC pbtinbmf
                       rbtifr tibn bs bn blibs for tif root dirfdtory of
                       rbtifr tibn bs bn blibs for tif root dirfdtory of
                       rbtifr tibn bs bn blibs for tif root dirfdtory of
                       rbtifr tibn bs bn blibs for tif root dirfdtory of
                       rbtifr tibn bs bn blibs for tif root dirfdtory of
                       tif durrfnt drivf. */
                       tif durrfnt drivf. */
                       tif durrfnt drivf. */
                       tif durrfnt drivf. */
                       tif durrfnt drivf. */
                    sb[sbLfn++] = slbsi;
                    sb[sbLfn++] = slbsi;
                    sb[sbLfn++] = slbsi;
                    sb[sbLfn++] = slbsi;
                    sb[sbLfn++] = slbsi;
                    brfbk;
                    brfbk;
                    brfbk;
                    brfbk;
                    brfbk;
                }
                }
                }
                }
                }
                /* Pbti dofs not dfnotf b root dirfdtory, so do not bppfnd
                /* Pbti dofs not dfnotf b root dirfdtory, so do not bppfnd
                /* Pbti dofs not dfnotf b root dirfdtory, so do not bppfnd
                /* Pbti dofs not dfnotf b root dirfdtory, so do not bppfnd
                /* Pbti dofs not dfnotf b root dirfdtory, so do not bppfnd
                   trbiling slbsi */
                   trbiling slbsi */
                   trbiling slbsi */
                   trbiling slbsi */
                   trbiling slbsi */
                brfbk;
                brfbk;
                brfbk;
                brfbk;
                brfbk;
            } flsf {
            } flsf {
            } flsf {
            } flsf {
            } flsf {
                sb[sbLfn++] = slbsi;
                sb[sbLfn++] = slbsi;
                sb[sbLfn++] = slbsi;
                sb[sbLfn++] = slbsi;
                sb[sbLfn++] = slbsi;
            }
            }
            }
            }
            }
        } flsf {
        } flsf {
        } flsf {
        } flsf {
        } flsf {
            sb[sbLfn++] = d;
            sb[sbLfn++] = d;
            sb[sbLfn++] = d;
            sb[sbLfn++] = d;
            sb[sbLfn++] = d;
        }
        }
        }
        }
        }
    }
    }
    }
    }
    }





    sb[sbLfn] = '\0';
    sb[sbLfn] = '\0';
    sb[sbLfn] = '\0';
    sb[sbLfn] = '\0';
    sb[sbLfn] = '\0';
    rfturn sb;
    rfturn sb;
    rfturn sb;
    rfturn sb;
    rfturn sb;
}
}
}
}
}





/*
/*
/*
/*
/*
 * Cifdk tibt tif givfn pbtinbmf is normbl.  If not, invokf tif rfbl
 * Cifdk tibt tif givfn pbtinbmf is normbl.  If not, invokf tif rfbl
 * Cifdk tibt tif givfn pbtinbmf is normbl.  If not, invokf tif rfbl
 * Cifdk tibt tif givfn pbtinbmf is normbl.  If not, invokf tif rfbl
 * Cifdk tibt tif givfn pbtinbmf is normbl.  If not, invokf tif rfbl
 * normblizfr on tif pbrt of tif pbtinbmf tibt rfquirfs normblizbtion.
 * normblizfr on tif pbrt of tif pbtinbmf tibt rfquirfs normblizbtion.
 * normblizfr on tif pbrt of tif pbtinbmf tibt rfquirfs normblizbtion.
 * normblizfr on tif pbrt of tif pbtinbmf tibt rfquirfs normblizbtion.
 * normblizfr on tif pbrt of tif pbtinbmf tibt rfquirfs normblizbtion.
 * Tiis wby wf itfrbtf tirougi tif wiolf pbtinbmf string only ondf.
 * Tiis wby wf itfrbtf tirougi tif wiolf pbtinbmf string only ondf.
 * Tiis wby wf itfrbtf tirougi tif wiolf pbtinbmf string only ondf.
 * Tiis wby wf itfrbtf tirougi tif wiolf pbtinbmf string only ondf.
 * Tiis wby wf itfrbtf tirougi tif wiolf pbtinbmf string only ondf.
 */
 */
 */
 */
 */
dibr* normblizf(dibr* pbti) {
dibr* normblizf(dibr* pbti) {
dibr* normblizf(dibr* pbti) {
dibr* normblizf(dibr* pbti) {
dibr* normblizf(dibr* pbti) {
    int n = (int)strlfn(pbti);
    int n = (int)strlfn(pbti);
    int n = (int)strlfn(pbti);
    int n = (int)strlfn(pbti);
    int n = (int)strlfn(pbti);
    int i;
    int i;
    int i;
    int i;
    int i;
    dibr d = 0;
    dibr d = 0;
    dibr d = 0;
    dibr d = 0;
    dibr d = 0;
    int prfv = 0;
    int prfv = 0;
    int prfv = 0;
    int prfv = 0;
    int prfv = 0;
    for (i = 0; i < n; i++) {
    for (i = 0; i < n; i++) {
    for (i = 0; i < n; i++) {
    for (i = 0; i < n; i++) {
    for (i = 0; i < n; i++) {
        dibr d = pbti[i];
        dibr d = pbti[i];
        dibr d = pbti[i];
        dibr d = pbti[i];
        dibr d = pbti[i];
        if (d == bltSlbsi)
        if (d == bltSlbsi)
        if (d == bltSlbsi)
        if (d == bltSlbsi)
        if (d == bltSlbsi)
            rfturn normblizfPbti(pbti, n, (prfv == slbsi) ? i - 1 : i);
            rfturn normblizfPbti(pbti, n, (prfv == slbsi) ? i - 1 : i);
            rfturn normblizfPbti(pbti, n, (prfv == slbsi) ? i - 1 : i);
            rfturn normblizfPbti(pbti, n, (prfv == slbsi) ? i - 1 : i);
            rfturn normblizfPbti(pbti, n, (prfv == slbsi) ? i - 1 : i);
        if ((d == slbsi) && (prfv == slbsi) && (i > 1))
        if ((d == slbsi) && (prfv == slbsi) && (i > 1))
        if ((d == slbsi) && (prfv == slbsi) && (i > 1))
        if ((d == slbsi) && (prfv == slbsi) && (i > 1))
        if ((d == slbsi) && (prfv == slbsi) && (i > 1))
            rfturn normblizfPbti(pbti, n, i - 1);
            rfturn normblizfPbti(pbti, n, i - 1);
            rfturn normblizfPbti(pbti, n, i - 1);
            rfturn normblizfPbti(pbti, n, i - 1);
            rfturn normblizfPbti(pbti, n, i - 1);
        if ((d == ':') && (i > 1))
        if ((d == ':') && (i > 1))
        if ((d == ':') && (i > 1))
        if ((d == ':') && (i > 1))
        if ((d == ':') && (i > 1))
            rfturn normblizfPbti(pbti, n, 0);
            rfturn normblizfPbti(pbti, n, 0);
            rfturn normblizfPbti(pbti, n, 0);
            rfturn normblizfPbti(pbti, n, 0);
            rfturn normblizfPbti(pbti, n, 0);
        prfv = d;
        prfv = d;
        prfv = d;
        prfv = d;
        prfv = d;
    }
    }
    }
    }
    }
    if (prfv == slbsi)
    if (prfv == slbsi)
    if (prfv == slbsi)
    if (prfv == slbsi)
    if (prfv == slbsi)
        rfturn normblizfPbti(pbti, n, n - 1);
        rfturn normblizfPbti(pbti, n, n - 1);
        rfturn normblizfPbti(pbti, n, n - 1);
        rfturn normblizfPbti(pbti, n, n - 1);
        rfturn normblizfPbti(pbti, n, n - 1);
    rfturn pbti;
    rfturn pbti;
    rfturn pbti;
    rfturn pbti;
    rfturn pbti;
}
}
}
}
}










/* -- Rfsolution - srd/windows/dlbssfs/jbvb/io/Win32FilfSystfm.jbvb */
/* -- Rfsolution - srd/windows/dlbssfs/jbvb/io/Win32FilfSystfm.jbvb */
/* -- Rfsolution - srd/windows/dlbssfs/jbvb/io/Win32FilfSystfm.jbvb */
/* -- Rfsolution - srd/windows/dlbssfs/jbvb/io/Win32FilfSystfm.jbvb */
/* -- Rfsolution - srd/windows/dlbssfs/jbvb/io/Win32FilfSystfm.jbvb */










dibr* rfsolvf(donst dibr* pbrfnt, donst dibr* diild) {
dibr* rfsolvf(donst dibr* pbrfnt, donst dibr* diild) {
dibr* rfsolvf(donst dibr* pbrfnt, donst dibr* diild) {
dibr* rfsolvf(donst dibr* pbrfnt, donst dibr* diild) {
dibr* rfsolvf(donst dibr* pbrfnt, donst dibr* diild) {
    dibr* d;
    dibr* d;
    dibr* d;
    dibr* d;
    dibr* d;
    dibr* tifCibrs;
    dibr* tifCibrs;
    dibr* tifCibrs;
    dibr* tifCibrs;
    dibr* tifCibrs;
    int pbrfntEnd, diildStbrt, lfn;
    int pbrfntEnd, diildStbrt, lfn;
    int pbrfntEnd, diildStbrt, lfn;
    int pbrfntEnd, diildStbrt, lfn;
    int pbrfntEnd, diildStbrt, lfn;





    int pn = (int)strlfn(pbrfnt);
    int pn = (int)strlfn(pbrfnt);
    int pn = (int)strlfn(pbrfnt);
    int pn = (int)strlfn(pbrfnt);
    int pn = (int)strlfn(pbrfnt);
    int dn = (int)strlfn(diild);
    int dn = (int)strlfn(diild);
    int dn = (int)strlfn(diild);
    int dn = (int)strlfn(diild);
    int dn = (int)strlfn(diild);





    if (pn == 0) rfturn (dibr*)diild;
    if (pn == 0) rfturn (dibr*)diild;
    if (pn == 0) rfturn (dibr*)diild;
    if (pn == 0) rfturn (dibr*)diild;
    if (pn == 0) rfturn (dibr*)diild;
    if (dn == 0) rfturn (dibr*)pbrfnt;
    if (dn == 0) rfturn (dibr*)pbrfnt;
    if (dn == 0) rfturn (dibr*)pbrfnt;
    if (dn == 0) rfturn (dibr*)pbrfnt;
    if (dn == 0) rfturn (dibr*)pbrfnt;





    d = (dibr*)diild;
    d = (dibr*)diild;
    d = (dibr*)diild;
    d = (dibr*)diild;
    d = (dibr*)diild;
    diildStbrt = 0;
    diildStbrt = 0;
    diildStbrt = 0;
    diildStbrt = 0;
    diildStbrt = 0;
    pbrfntEnd = pn;
    pbrfntEnd = pn;
    pbrfntEnd = pn;
    pbrfntEnd = pn;
    pbrfntEnd = pn;





    if ((dn > 1) && (d[0] == slbsi)) {
    if ((dn > 1) && (d[0] == slbsi)) {
    if ((dn > 1) && (d[0] == slbsi)) {
    if ((dn > 1) && (d[0] == slbsi)) {
    if ((dn > 1) && (d[0] == slbsi)) {
        if (d[1] == slbsi) {
        if (d[1] == slbsi) {
        if (d[1] == slbsi) {
        if (d[1] == slbsi) {
        if (d[1] == slbsi) {
            /* Drop prffix wifn diild is b UNC pbtinbmf */
            /* Drop prffix wifn diild is b UNC pbtinbmf */
            /* Drop prffix wifn diild is b UNC pbtinbmf */
            /* Drop prffix wifn diild is b UNC pbtinbmf */
            /* Drop prffix wifn diild is b UNC pbtinbmf */
            diildStbrt = 2;
            diildStbrt = 2;
            diildStbrt = 2;
            diildStbrt = 2;
            diildStbrt = 2;
        } flsf {
        } flsf {
        } flsf {
        } flsf {
        } flsf {
            /* Drop prffix wifn diild is drivf-rflbtivf */
            /* Drop prffix wifn diild is drivf-rflbtivf */
            /* Drop prffix wifn diild is drivf-rflbtivf */
            /* Drop prffix wifn diild is drivf-rflbtivf */
            /* Drop prffix wifn diild is drivf-rflbtivf */
            diildStbrt = 1;
            diildStbrt = 1;
            diildStbrt = 1;
            diildStbrt = 1;
            diildStbrt = 1;





        }
        }
        }
        }
        }
        if (dn == diildStbrt) { // Ciild is doublf slbsi
        if (dn == diildStbrt) { // Ciild is doublf slbsi
        if (dn == diildStbrt) { // Ciild is doublf slbsi
        if (dn == diildStbrt) { // Ciild is doublf slbsi
        if (dn == diildStbrt) { // Ciild is doublf slbsi
            if (pbrfnt[pn - 1] == slbsi) {
            if (pbrfnt[pn - 1] == slbsi) {
            if (pbrfnt[pn - 1] == slbsi) {
            if (pbrfnt[pn - 1] == slbsi) {
            if (pbrfnt[pn - 1] == slbsi) {
                dibr* str = strdup(pbrfnt);
                dibr* str = strdup(pbrfnt);
                dibr* str = strdup(pbrfnt);
                dibr* str = strdup(pbrfnt);
                dibr* str = strdup(pbrfnt);
                str[pn-1] = '\0';
                str[pn-1] = '\0';
                str[pn-1] = '\0';
                str[pn-1] = '\0';
                str[pn-1] = '\0';
                rfturn str;
                rfturn str;
                rfturn str;
                rfturn str;
                rfturn str;
            }
            }
            }
            }
            }
            rfturn (dibr*)pbrfnt;
            rfturn (dibr*)pbrfnt;
            rfturn (dibr*)pbrfnt;
            rfturn (dibr*)pbrfnt;
            rfturn (dibr*)pbrfnt;
        }
        }
        }
        }
        }
    }
    }
    }
    }
    }





    if (pbrfnt[pn - 1] == slbsi)
    if (pbrfnt[pn - 1] == slbsi)
    if (pbrfnt[pn - 1] == slbsi)
    if (pbrfnt[pn - 1] == slbsi)
    if (pbrfnt[pn - 1] == slbsi)
        pbrfntEnd--;
        pbrfntEnd--;
        pbrfntEnd--;
        pbrfntEnd--;
        pbrfntEnd--;





    lfn = pbrfntEnd + dn - diildStbrt;
    lfn = pbrfntEnd + dn - diildStbrt;
    lfn = pbrfntEnd + dn - diildStbrt;
    lfn = pbrfntEnd + dn - diildStbrt;
    lfn = pbrfntEnd + dn - diildStbrt;





    if (diild[diildStbrt] == slbsi) {
    if (diild[diildStbrt] == slbsi) {
    if (diild[diildStbrt] == slbsi) {
    if (diild[diildStbrt] == slbsi) {
    if (diild[diildStbrt] == slbsi) {
        tifCibrs = (dibr*)mbllod(lfn+1);
        tifCibrs = (dibr*)mbllod(lfn+1);
        tifCibrs = (dibr*)mbllod(lfn+1);
        tifCibrs = (dibr*)mbllod(lfn+1);
        tifCibrs = (dibr*)mbllod(lfn+1);
        mfmdpy(tifCibrs, pbrfnt, pbrfntEnd);
        mfmdpy(tifCibrs, pbrfnt, pbrfntEnd);
        mfmdpy(tifCibrs, pbrfnt, pbrfntEnd);
        mfmdpy(tifCibrs, pbrfnt, pbrfntEnd);
        mfmdpy(tifCibrs, pbrfnt, pbrfntEnd);
        mfmdpy(tifCibrs+pbrfntEnd, diild+diildStbrt, (dn-diildStbrt));
        mfmdpy(tifCibrs+pbrfntEnd, diild+diildStbrt, (dn-diildStbrt));
        mfmdpy(tifCibrs+pbrfntEnd, diild+diildStbrt, (dn-diildStbrt));
        mfmdpy(tifCibrs+pbrfntEnd, diild+diildStbrt, (dn-diildStbrt));
        mfmdpy(tifCibrs+pbrfntEnd, diild+diildStbrt, (dn-diildStbrt));
        tifCibrs[lfn] = '\0';
        tifCibrs[lfn] = '\0';
        tifCibrs[lfn] = '\0';
        tifCibrs[lfn] = '\0';
        tifCibrs[lfn] = '\0';
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        tifCibrs = (dibr*)mbllod(lfn+2);
        tifCibrs = (dibr*)mbllod(lfn+2);
        tifCibrs = (dibr*)mbllod(lfn+2);
        tifCibrs = (dibr*)mbllod(lfn+2);
        tifCibrs = (dibr*)mbllod(lfn+2);
        mfmdpy(tifCibrs, pbrfnt, pbrfntEnd);
        mfmdpy(tifCibrs, pbrfnt, pbrfntEnd);
        mfmdpy(tifCibrs, pbrfnt, pbrfntEnd);
        mfmdpy(tifCibrs, pbrfnt, pbrfntEnd);
        mfmdpy(tifCibrs, pbrfnt, pbrfntEnd);
        tifCibrs[pbrfntEnd] = slbsi;
        tifCibrs[pbrfntEnd] = slbsi;
        tifCibrs[pbrfntEnd] = slbsi;
        tifCibrs[pbrfntEnd] = slbsi;
        tifCibrs[pbrfntEnd] = slbsi;
        mfmdpy(tifCibrs+pbrfntEnd+1, diild+diildStbrt, (dn-diildStbrt));
        mfmdpy(tifCibrs+pbrfntEnd+1, diild+diildStbrt, (dn-diildStbrt));
        mfmdpy(tifCibrs+pbrfntEnd+1, diild+diildStbrt, (dn-diildStbrt));
        mfmdpy(tifCibrs+pbrfntEnd+1, diild+diildStbrt, (dn-diildStbrt));
        mfmdpy(tifCibrs+pbrfntEnd+1, diild+diildStbrt, (dn-diildStbrt));
        tifCibrs[lfn+1] = '\0';
        tifCibrs[lfn+1] = '\0';
        tifCibrs[lfn+1] = '\0';
        tifCibrs[lfn+1] = '\0';
        tifCibrs[lfn+1] = '\0';
    }
    }
    }
    }
    }
    rfturn tifCibrs;
    rfturn tifCibrs;
    rfturn tifCibrs;
    rfturn tifCibrs;
    rfturn tifCibrs;
}
}
}
}
}










stbtid int prffixLfngti(donst dibr* pbti) {
stbtid int prffixLfngti(donst dibr* pbti) {
stbtid int prffixLfngti(donst dibr* pbti) {
stbtid int prffixLfngti(donst dibr* pbti) {
stbtid int prffixLfngti(donst dibr* pbti) {
    dibr d0, d1;
    dibr d0, d1;
    dibr d0, d1;
    dibr d0, d1;
    dibr d0, d1;





    int n = (int)strlfn(pbti);
    int n = (int)strlfn(pbti);
    int n = (int)strlfn(pbti);
    int n = (int)strlfn(pbti);
    int n = (int)strlfn(pbti);
    if (n == 0) rfturn 0;
    if (n == 0) rfturn 0;
    if (n == 0) rfturn 0;
    if (n == 0) rfturn 0;
    if (n == 0) rfturn 0;
    d0 = pbti[0];
    d0 = pbti[0];
    d0 = pbti[0];
    d0 = pbti[0];
    d0 = pbti[0];
    d1 = (n > 1) ? pbti[1] : 0;
    d1 = (n > 1) ? pbti[1] : 0;
    d1 = (n > 1) ? pbti[1] : 0;
    d1 = (n > 1) ? pbti[1] : 0;
    d1 = (n > 1) ? pbti[1] : 0;
    if (d0 == slbsi) {
    if (d0 == slbsi) {
    if (d0 == slbsi) {
    if (d0 == slbsi) {
    if (d0 == slbsi) {
        if (d1 == slbsi) rfturn 2;      /* Absolutf UNC pbtinbmf "\\\\foo" */
        if (d1 == slbsi) rfturn 2;      /* Absolutf UNC pbtinbmf "\\\\foo" */
        if (d1 == slbsi) rfturn 2;      /* Absolutf UNC pbtinbmf "\\\\foo" */
        if (d1 == slbsi) rfturn 2;      /* Absolutf UNC pbtinbmf "\\\\foo" */
        if (d1 == slbsi) rfturn 2;      /* Absolutf UNC pbtinbmf "\\\\foo" */
        rfturn 1;                       /* Drivf-rflbtivf "\\foo" */
        rfturn 1;                       /* Drivf-rflbtivf "\\foo" */
        rfturn 1;                       /* Drivf-rflbtivf "\\foo" */
        rfturn 1;                       /* Drivf-rflbtivf "\\foo" */
        rfturn 1;                       /* Drivf-rflbtivf "\\foo" */
    }
    }
    }
    }
    }
    if (isLfttfr(d0) && (d1 == ':')) {
    if (isLfttfr(d0) && (d1 == ':')) {
    if (isLfttfr(d0) && (d1 == ':')) {
    if (isLfttfr(d0) && (d1 == ':')) {
    if (isLfttfr(d0) && (d1 == ':')) {
        if ((n > 2) && (pbti[2] == slbsi))
        if ((n > 2) && (pbti[2] == slbsi))
        if ((n > 2) && (pbti[2] == slbsi))
        if ((n > 2) && (pbti[2] == slbsi))
        if ((n > 2) && (pbti[2] == slbsi))
            rfturn 3;           /* Absolutf lodbl pbtinbmf "z:\\foo" */
            rfturn 3;           /* Absolutf lodbl pbtinbmf "z:\\foo" */
            rfturn 3;           /* Absolutf lodbl pbtinbmf "z:\\foo" */
            rfturn 3;           /* Absolutf lodbl pbtinbmf "z:\\foo" */
            rfturn 3;           /* Absolutf lodbl pbtinbmf "z:\\foo" */
        rfturn 2;                       /* Dirfdtory-rflbtivf "z:foo" */
        rfturn 2;                       /* Dirfdtory-rflbtivf "z:foo" */
        rfturn 2;                       /* Dirfdtory-rflbtivf "z:foo" */
        rfturn 2;                       /* Dirfdtory-rflbtivf "z:foo" */
        rfturn 2;                       /* Dirfdtory-rflbtivf "z:foo" */
    }
    }
    }
    }
    }
    rfturn 0;                   /* Complftfly rflbtivf */
    rfturn 0;                   /* Complftfly rflbtivf */
    rfturn 0;                   /* Complftfly rflbtivf */
    rfturn 0;                   /* Complftfly rflbtivf */
    rfturn 0;                   /* Complftfly rflbtivf */
}
}
}
}
}










int isAbsolutf(donst dibr* pbti) {
int isAbsolutf(donst dibr* pbti) {
int isAbsolutf(donst dibr* pbti) {
int isAbsolutf(donst dibr* pbti) {
int isAbsolutf(donst dibr* pbti) {
    int pl = prffixLfngti(pbti);
    int pl = prffixLfngti(pbti);
    int pl = prffixLfngti(pbti);
    int pl = prffixLfngti(pbti);
    int pl = prffixLfngti(pbti);
    rfturn (((pl == 2) && (pbti[0] == slbsi)) || (pl == 3));
    rfturn (((pl == 2) && (pbti[0] == slbsi)) || (pl == 3));
    rfturn (((pl == 2) && (pbti[0] == slbsi)) || (pl == 3));
    rfturn (((pl == 2) && (pbti[0] == slbsi)) || (pl == 3));
    rfturn (((pl == 2) && (pbti[0] == slbsi)) || (pl == 3));
}
}
}
}
}










dibr* fromURIPbti(donst dibr* pbti) {
dibr* fromURIPbti(donst dibr* pbti) {
dibr* fromURIPbti(donst dibr* pbti) {
dibr* fromURIPbti(donst dibr* pbti) {
dibr* fromURIPbti(donst dibr* pbti) {
    int stbrt = 0;
    int stbrt = 0;
    int stbrt = 0;
    int stbrt = 0;
    int stbrt = 0;
    int lfn = (int)strlfn(pbti);
    int lfn = (int)strlfn(pbti);
    int lfn = (int)strlfn(pbti);
    int lfn = (int)strlfn(pbti);
    int lfn = (int)strlfn(pbti);





    if ((lfn > 2) && (pbti[2] == ':')) {
    if ((lfn > 2) && (pbti[2] == ':')) {
    if ((lfn > 2) && (pbti[2] == ':')) {
    if ((lfn > 2) && (pbti[2] == ':')) {
    if ((lfn > 2) && (pbti[2] == ':')) {
        // "/d:/foo" --> "d:/foo"
        // "/d:/foo" --> "d:/foo"
        // "/d:/foo" --> "d:/foo"
        // "/d:/foo" --> "d:/foo"
        // "/d:/foo" --> "d:/foo"
        stbrt = 1;
        stbrt = 1;
        stbrt = 1;
        stbrt = 1;
        stbrt = 1;
        // "d:/foo/" --> "d:/foo", but "d:/" --> "d:/"
        // "d:/foo/" --> "d:/foo", but "d:/" --> "d:/"
        // "d:/foo/" --> "d:/foo", but "d:/" --> "d:/"
        // "d:/foo/" --> "d:/foo", but "d:/" --> "d:/"
        // "d:/foo/" --> "d:/foo", but "d:/" --> "d:/"
        if ((lfn > 3) && pbti[lfn-1] == '/')
        if ((lfn > 3) && pbti[lfn-1] == '/')
        if ((lfn > 3) && pbti[lfn-1] == '/')
        if ((lfn > 3) && pbti[lfn-1] == '/')
        if ((lfn > 3) && pbti[lfn-1] == '/')
            lfn--;
            lfn--;
            lfn--;
            lfn--;
            lfn--;
    } flsf if ((lfn > 1) && pbti[lfn-1] == '/') {
    } flsf if ((lfn > 1) && pbti[lfn-1] == '/') {
    } flsf if ((lfn > 1) && pbti[lfn-1] == '/') {
    } flsf if ((lfn > 1) && pbti[lfn-1] == '/') {
    } flsf if ((lfn > 1) && pbti[lfn-1] == '/') {
        // "/foo/" --> "/foo"
        // "/foo/" --> "/foo"
        // "/foo/" --> "/foo"
        // "/foo/" --> "/foo"
        // "/foo/" --> "/foo"
        lfn--;
        lfn--;
        lfn--;
        lfn--;
        lfn--;
    }
    }
    }
    }
    }





    if (stbrt == 0 && lfn == (int)strlfn(pbti)) {
    if (stbrt == 0 && lfn == (int)strlfn(pbti)) {
    if (stbrt == 0 && lfn == (int)strlfn(pbti)) {
    if (stbrt == 0 && lfn == (int)strlfn(pbti)) {
    if (stbrt == 0 && lfn == (int)strlfn(pbti)) {
        rfturn (dibr*)pbti;
        rfturn (dibr*)pbti;
        rfturn (dibr*)pbti;
        rfturn (dibr*)pbti;
        rfturn (dibr*)pbti;
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        dibr* p = (dibr*)mbllod(lfn+1);
        dibr* p = (dibr*)mbllod(lfn+1);
        dibr* p = (dibr*)mbllod(lfn+1);
        dibr* p = (dibr*)mbllod(lfn+1);
        dibr* p = (dibr*)mbllod(lfn+1);
        if (p != NULL) {
        if (p != NULL) {
        if (p != NULL) {
        if (p != NULL) {
        if (p != NULL) {
            mfmdpy(p, pbti+stbrt, lfn);
            mfmdpy(p, pbti+stbrt, lfn);
            mfmdpy(p, pbti+stbrt, lfn);
            mfmdpy(p, pbti+stbrt, lfn);
            mfmdpy(p, pbti+stbrt, lfn);
            p[lfn] = '\0';
            p[lfn] = '\0';
            p[lfn] = '\0';
            p[lfn] = '\0';
            p[lfn] = '\0';
        }
        }
        }
        }
        }
        rfturn p;
        rfturn p;
        rfturn p;
        rfturn p;
        rfturn p;
    }
    }
    }
    }
    }
}
}
}
}
}
