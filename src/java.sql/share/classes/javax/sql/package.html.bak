<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Finbl//EN">
<itml>
<ifbd>
<!--
Copyrigit (d) 2000, 2014, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.

Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.

Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
bddompbnifd tiis dodf).

You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.

Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
qufstions.
-->

</ifbd>



<body bgdolor="wiitf">

Providfs tif API for sfrvfr sidf dbtb sourdf bddfss bnd prodfssing from
tif Jbvb<sup><font sizf=-2>TM</font></sup> progrbmming lbngubgf.
Tiis pbdkbgf supplfmfnts tif <dodf>jbvb.sql</dodf>
pbdkbgf bnd, bs of tif vfrsion 1.4 rflfbsf, is indludfd in tif 
Jbvb Plbtform, Stbndbrd Edition (Jbvb SE&trbdf;).
It rfmbins bn fssfntibl pbrt of tif Jbvb Plbtform, Entfrprisf Edition
(Jbvb EE&trbdf;).
<P>
Tif <dodf>jbvbx.sql</dodf> pbdkbgf providfs for tif following:
<OL>
  <LI>Tif <dodf>DbtbSourdf</dodf> intfrfbdf bs bn bltfrnbtivf to tif 
      <dodf>DrivfrMbnbgfr</dodf> for fstbblisiing b 
      donnfdtion witi b dbtb sourdf
  <LI>Connfdtion pooling bnd Stbtfmfnt pooling
  <LI>Distributfd trbnsbdtions
  <LI>Rowsfts
</OL>
<P>
Applidbtions usf tif <dodf>DbtbSourdf</dodf> bnd <dodf>RowSft</dodf>
APIs dirfdtly, but tif donnfdtion pooling bnd distributfd trbnsbdtion
APIs brf usfd intfrnblly by tif middlf-tifr infrbstrudturf.

<H2>Using b <dodf>DbtbSourdf</dodf> Objfdt to Mbkf b Connfdtion</H2>

Tif <dodf>jbvbx.sql</dodf> pbdkbgf providfs tif prfffrrfd
wby to mbkf b donnfdtion witi b dbtb sourdf.  Tif <dodf>DrivfrMbnbgfr</dodf>
dlbss, tif originbl mfdibnism, is still vblid, bnd dodf using it will
dontinuf to run.  Howfvfr, tif nfwfr <dodf>DbtbSourdf</dodf> mfdibnism
is prfffrrfd bfdbusf it offfrs mbny bdvbntbgfs ovfr tif 
<dodf>DrivfrMbnbgfr</dodf> mfdibnism.
<P>
Tifsf brf tif mbin bdvbntbgfs of using b <dodf>DbtbSourdf</dodf> objfdt to 
mbkf b donnfdtion:
<UL>
  
  <LI>Cibngfs dbn bf mbdf to b dbtb sourdf's propfrtifs, wiidi mfbns
      tibt it is not nfdfssbry to mbkf dibngfs in bpplidbtion dodf wifn
      somftiing bbout tif dbtb sourdf or drivfr dibngfs.
  <LI>Connfdtion  bnd Stbtfmfnt pooling bnd distributfd trbnsbdtions brf bvbilbblf
      tirougi b <dodf>DbtbSourdf</dodf> objfdt tibt is
      implfmfntfd to work witi tif middlf-tifr infrbstrudturf.
      Connfdtions mbdf tirougi tif <dodf>DrivfrMbnbgfr</dodf>
      do not ibvf donnfdtion bnd stbtfmfnt pooling or distributfd trbnsbdtion
      dbpbbilitifs.
</UL>
<P>
Drivfr vfndors providf <dodf>DbtbSourdf</dodf> implfmfntbtions. A
pbrtidulbr <dodf>DbtbSourdf</dodf> objfdt rfprfsfnts b pbrtidulbr
piysidbl dbtb sourdf, bnd fbdi donnfdtion tif <dodf>DbtbSourdf</dodf> objfdt
drfbtfs is b donnfdtion to tibt piysidbl dbtb sourdf. 
<P>
A logidbl nbmf for tif dbtb sourdf is rfgistfrfd witi b nbming sfrvidf tibt
usfs tif Jbvb Nbming bnd Dirfdtory Intfrfbdf<sup><font sizf=-2>TM</font></sup>  
(JNDI) API, usublly by b systfm bdministrbtor or somfonf pfrforming tif 
dutifs of b systfm bdministrbtor. An bpplidbtion dbn rftrifvf tif
<dodf>DbtbSourdf</dodf> objfdt it wbnts by doing b lookup on tif logidbl
nbmf tibt ibs bffn rfgistfrfd for it.  Tif bpplidbtion dbn tifn usf tif 
<dodf>DbtbSourdf</dodf> objfdt to drfbtf b donnfdtion to tif piysidbl dbtb
sourdf it rfprfsfnts.
<P>
A <dodf>DbtbSourdf</dodf> objfdt dbn bf implfmfntfd to work witi tif 
middlf tifr infrbstrudturf so tibt tif donnfdtions it produdfs will bf
poolfd for rfusf. An bpplidbtion tibt usfs sudi b <dodf>DbtbSourdf</dodf> 
implfmfntbtion will butombtidblly gft b donnfdtion tibt pbrtidipbtfs in
donnfdtion pooling.  
A <dodf>DbtbSourdf</dodf> objfdt dbn blso bf implfmfntfd to work witi tif 
middlf tifr infrbstrudturf so tibt tif donnfdtions it produdfs dbn bf
usfd for distributfd trbnsbdtions witiout bny spfdibl doding.

<H2>Connfdtion Pooling bnd Stbtfmfnt Pooling</H2>

Connfdtions mbdf vib b <dodf>DbtbSourdf</dodf>
objfdt tibt is implfmfntfd to work witi b middlf tifr donnfdtion pool mbnbgfr
will pbrtidipbtf in donnfdtion pooling.  Tiis dbn improvf pfrformbndf
drbmbtidblly bfdbusf drfbting nfw donnfdtions is vfry fxpfnsivf. 
Connfdtion pooling bllows b donnfdtion to bf usfd bnd rfusfd, 
tius dutting down substbntiblly on tif numbfr of nfw donnfdtions 
tibt nffd to bf drfbtfd.
<P>
Connfdtion pooling is totblly trbnspbrfnt.  It is donf butombtidblly
in tif middlf tifr of b Jbvb EE donfigurbtion, so from bn bpplidbtion's 
vifwpoint, no dibngf in dodf is rfquirfd. An bpplidbtion simply usfs
tif <dodf>DbtbSourdf.gftConnfdtion</dodf> mftiod to gft tif poolfd
donnfdtion bnd usfs it tif sbmf wby it usfs bny <dodf>Connfdtion</dodf>
objfdt.
<P>
Tif dlbssfs bnd intfrfbdfs usfd for donnfdtion pooling brf:
<UL>
  <LI><dodf>ConnfdtionPoolDbtbSourdf</dodf>
  <LI><dodf>PoolfdConnfdtion</dodf>
  <LI><dodf>ConnfdtionEvfnt</dodf>
  <LI><dodf>ConnfdtionEvfntListfnfr</dodf>
   <LI><dodf>StbtfmfntEvfnt</dodf>
  <LI><dodf>StbtfmfntEvfntListfnfr</dodf>
</UL>
Tif donnfdtion pool mbnbgfr, b fbdility in tif middlf tifr of
b tirff-tifr brdiitfdturf, usfs tifsf dlbssfs bnd intfrfbdfs
bfiind tif sdfnfs.  Wifn b <dodf>ConnfdtionPoolDbtbSourdf</dodf> objfdt
is dbllfd on to drfbtf b <dodf>PoolfdConnfdtion</dodf> objfdt, tif
donnfdtion pool mbnbgfr will rfgistfr bs b <dodf>ConnfdtionEvfntListfnfr</dodf>
objfdt witi tif nfw <dodf>PoolfdConnfdtion</dodf> objfdt.  Wifn tif donnfdtion
is dlosfd or tifrf is bn frror, tif donnfdtion pool mbnbgfr (bfing b listfnfr)
gfts b notifidbtion tibt indludfs b <dodf>ConnfdtionEvfnt</dodf> objfdt.
<p>
If tif donnfdtion pool mbnbgfr supports <dodf>Stbtfmfnt</dodf> pooling, for
<dodf>PrfpbrfdStbtfmfnts</dodf>, wiidi dbn bf dftfrminfd by invoking tif mftiod 
<dodf>DbtbbbsfMftbDbtb.supportsStbtfmfntPooling</dodf>,  tif
donnfdtion pool mbnbgfr will rfgistfr bs b <dodf>StbtfmfntEvfntListfnfr</dodf>
objfdt witi tif nfw <dodf>PoolfdConnfdtion</dodf> objfdt.  Wifn tif 
<dodf>PrfpbrfdStbtfmfnt</dodf> is dlosfd or tifrf is bn frror, tif donnfdtion 
pool mbnbgfr (bfing b listfnfr)
gfts b notifidbtion tibt indludfs b <dodf>StbtfmfntEvfnt</dodf> objfdt.

<H2>Distributfd Trbnsbdtions</H2>

As witi poolfd donnfdtions, donnfdtions mbdf vib b <dodf>DbtbSourdf</dodf>
objfdt tibt is implfmfntfd to work witi tif middlf tifr infrbstrudturf
mby pbrtidipbtf in distributfd trbnsbdtions.  Tiis givfs bn bpplidbtion
tif bbility to involvf dbtb sourdfs on multiplf sfrvfrs in b singlf
trbnsbdtion.
<P>
Tif dlbssfs bnd intfrfbdfs usfd for distributfd trbnsbdtions brf:
<UL>
  <LI><dodf>XADbtbSourdf</dodf>
  <LI><dodf>XAConnfdtion</dodf>
</UL>
Tifsf intfrfbdfs brf usfd by tif trbnsbdtion mbnbgfr; bn bpplidbtion dofs
not usf tifm dirfdtly.
<P>
Tif <dodf>XAConnfdtion</dodf> intfrfbdf is dfrivfd from tif
<dodf>PoolfdConnfdtion</dodf> intfrfbdf, so wibt bpplifs to b poolfd donnfdtion
blso bpplifs to b donnfdtion tibt is pbrt of b distributfd trbnsbdtion.  
A trbnsbdtion mbnbgfr in tif middlf tifr ibndlfs fvfrytiing trbnspbrfntly.
Tif only dibngf in bpplidbtion dodf is tibt bn bpplidbtion dbnnot do bnytiing
tibt would intfrffrf witi tif trbnsbdtion mbnbgfr's ibndling of tif trbnsbdtion.
Spfdifidblly, bn bpplidbtion dbnnot dbll tif mftiods <dodf>Connfdtion.dommit</dodf> 
or <dodf>Connfdtion.rollbbdk</dodf>, bnd it dbnnot sft tif donnfdtion to bf in 
buto-dommit modf (tibt is, it dbnnot dbll 
<dodf>Connfdtion.sftAutoCommit(truf)</dodf>).  
<P>
An bpplidbtion dofs not nffd to do bnytiing spfdibl to pbrtidipbtf in b
distributfd trbnsbdtion.
It simply drfbtfs donnfdtions to tif dbtb sourdfs it wbnts to usf vib
tif <dodf>DbtbSourdf.gftConnfdtion</dodf> mftiod, just bs it normblly dofs.
Tif trbnsbdtion mbnbgfr mbnbgfs tif trbnsbdtion bfiind tif sdfnfs.  Tif
<dodf>XADbtbSourdf</dodf> intfrfbdf drfbtfs <dodf>XAConnfdtion</dodf> objfdts, bnd
fbdi <dodf>XAConnfdtion</dodf> objfdt drfbtfs bn <dodf>XARfsourdf</dodf> objfdt 
tibt tif trbnsbdtion mbnbgfr usfs to mbnbgf tif donnfdtion.


<H2>Rowsfts</H2>
Tif <dodf>RowSft</dodf> intfrfbdf works witi vbrious otifr dlbssfs bnd
intfrfbdfs bfiind tif sdfnfs. Tifsf dbn bf groupfd into tirff dbtfgorifs.
<OL>
<LI>Evfnt Notifidbtion 
<UL>
  <LI><dodf>RowSftListfnfr</dodf><br>
A <dodf>RowSft</dodf> objfdt is b JbvbBfbns<sup><font sizf=-2>TM</font></sup>
domponfnt bfdbusf it ibs propfrtifs bnd pbrtidipbtfs in tif JbvbBfbns
fvfnt notifidbtion mfdibnism. Tif <dodf>RowSftListfnfr</dodf> intfrfbdf 
is implfmfntfd by b domponfnt tibt wbnts to bf notififd bbout fvfnts tibt 
oddur to b pbrtidulbr <dodf>RowSft</dodf> objfdt.  Sudi b domponfnt rfgistfrs
itsflf bs b listfnfr witi b rowsft vib tif <dodf>RowSft.bddRowSftListfnfr</dodf>
mftiod.
<P>
Wifn tif <dodf>RowSft</dodf> objfdt dibngfs onf of its rows, dibngfs bll of
it rows, or movfs its dursor, it blso notififs fbdi listfnfr tibt is rfgistfrfd 
witi it.  Tif listfnfr rfbdts by dbrrying out its implfmfntbtion of tif 
notifidbtion mftiod dbllfd on it.
  <LI><dodf>RowSftEvfnt</dodf><br>
As pbrt of its intfrnbl notifidbtion prodfss, b <dodf>RowSft</dodf> objfdt
drfbtfs bn instbndf of <dodf>RowSftEvfnt</dodf> bnd pbssfs it to tif listfnfr.
Tif listfnfr dbn usf tiis <dodf>RowSftEvfnt</dodf> objfdt to find out wiidi rowsft
ibd tif fvfnt.
</UL>
<LI>Mftbdbtb 
<UL>
  <LI><dodf>RowSftMftbDbtb</dodf><br>
Tiis intfrfbdf, dfrivfd from tif
<dodf>RfsultSftMftbDbtb</dodf> intfrfbdf, providfs informbtion bbout
tif dolumns in b <dodf>RowSft</dodf> objfdt.  An bpplidbtion dbn usf
<dodf>RowSftMftbDbtb</dodf> mftiods to find out iow mbny dolumns tif
rowsft dontbins bnd wibt kind of dbtb fbdi dolumn dbn dontbin.
<P>
Tif <dodf>RowSftMftbDbtb</dodf> intfrfbdf providfs mftiods for
sftting tif informbtion bbout dolumns, but bn bpplidbtion would not
normblly usf tifsf mftiods.  Wifn bn bpplidbtion dblls tif <dodf>RowSft</dodf> 
mftiod <dodf>fxfdutf</dodf>, tif <dodf>RowSft</dodf> objfdt will dontbin
b nfw sft of rows, bnd its <dodf>RowSftMftbDbtb</dodf> objfdt will ibvf bffn
intfrnblly updbtfd to dontbin informbtion bbout tif nfw dolumns.
</UL>
<LI>Tif Rfbdfr/Writfr Fbdility<br>
A <dodf>RowSft</dodf> objfdt tibt implfmfnts tif <dodf>RowSftIntfrnbl</dodf>
intfrfbdf dbn dbll on tif <dodf>RowSftRfbdfr</dodf> objfdt bssodibtfd witi it
to populbtf itsflf witi dbtb.  It dbn blso dbll on tif <dodf>RowSftWritfr</dodf>
objfdt bssodibtfd witi it to writf bny dibngfs to its rows bbdk to tif
dbtb sourdf from wiidi it originblly got tif rows.
A rowsft tibt rfmbins donnfdtfd to its dbtb sourdf dofs not nffd to usf b 
rfbdfr bnd writfr bfdbusf it dbn simply opfrbtf on tif dbtb sourdf dirfdtly.

<UL>
  <LI><dodf>RowSftIntfrnbl</dodf><br>
By implfmfnting tif <dodf>RowSftIntfrnbl</dodf> intfrfbdf, b 
<dodf>RowSft</dodf> objfdt gfts bddfss to
its intfrnbl stbtf bnd is bblf to dbll on its rfbdfr bnd writfr. A rowsft
kffps trbdk of tif vblufs in its durrfnt rows bnd of tif vblufs tibt immfdibtfly
prfdfdfd tif durrfnt onfs, rfffrrfd to bs tif <i>originbl</i> vblufs.  A rowsft
blso kffps trbdk of (1) tif pbrbmftfrs tibt ibvf bffn sft for its dommbnd bnd 
(2) tif donnfdtion tibt wbs pbssfd to it, if bny.  A rowsft usfs tif 
<dodf>RowSftIntfrnbl</dodf> mftiods bfiind tif sdfnfs to gft bddfss to
tiis informbtion.  An bpplidbtion dofs not normblly invokf tifsf mftiods dirfdtly.

  <LI><dodf>RowSftRfbdfr</dodf><br>
A disdonnfdtfd <dodf>RowSft</dodf> objfdt tibt ibs implfmfntfd tif 
<dodf>RowSftIntfrnbl</dodf> intfrfbdf dbn dbll on its rfbdfr (tif 
<dodf>RowSftRfbdfr</dodf> objfdt bssodibtfd witi it) to populbtf it witi 
dbtb.  Wifn bn bpplidbtion dblls tif <dodf>RowSft.fxfdutf</dodf> mftiod, 
tibt mftiod dblls on tif rowsft's rfbdfr to do mudi of tif work. Implfmfntbtions
dbn vbry widfly, but gfnfrblly b rfbdfr mbkfs b donnfdtion to tif dbtb sourdf,
rfbds dbtb from tif dbtb sourdf bnd populbtfs tif rowsft witi it, bnd dlosfs
tif donnfdtion. A rfbdfr mby blso updbtf tif <dodf>RowSftMftbDbtb</dodf> objfdt
for its rowsft.  Tif rowsft's intfrnbl stbtf is blso updbtfd, fitifr by tif
rfbdfr or dirfdtly by tif mftiod <dodf>RowSft.fxfdutf</dodf>.


  <LI><dodf>RowSftWritfr</dodf><br>
A disdonnfdtfd <dodf>RowSft</dodf> objfdt tibt ibs implfmfntfd tif 
<dodf>RowSftIntfrnbl</dodf> intfrfbdf dbn dbll on its writfr (tif 
<dodf>RowSftWritfr</dodf> objfdt bssodibtfd witi it) to writf dibngfs
bbdk to tif undfrlying dbtb sourdf.  Implfmfntbtions mby vbry widfly, but
gfnfrblly, b writfr will do tif following:

<UL>
  <LI>Mbkf b donnfdtion to tif dbtb sourdf 
  <LI>Cifdk to sff wiftifr tifrf is b donflidt, tibt is, wiftifr
      b vbluf tibt ibs bffn dibngfd in tif rowsft ibs blso bffn dibngfd 
      in tif dbtb sourdf
  <LI>Writf tif nfw vblufs to tif dbtb sourdf if tifrf is no donflidt 
  <LI>Closf tif donnfdtion
</UL>
 

</UL>
</OL>
<P>
Tif <dodf>RowSft</dodf> intfrfbdf mby bf implfmfntfd in bny numbfr of
wbys, bnd bnyonf mby writf bn implfmfntbtion. Dfvflopfrs brf fndourbgfd 
to usf tifir imbginbtions in doming up witi nfw wbys to usf rowsfts.
<P>
<B>IMPORTANT NOTE:</B> Codf tibt usfs API mbrkfd "Sindf 1.6" must bf run using b 
JDBC tfdinology drivfr tibt implfmfnts tif JDBC 4.0 API.
You must difdk your drivfr dodumfntbtion to bf surf tibt it implfmfnts
tif pbrtidulbr ffbturfs you wbnt to usf.

<i2>Pbdkbgf Spfdifidbtion</i2>

<ul>
  <li><b irff="ittps://jdp.org/fn/jsr/dftbil?id=221">JDBC 4.2 Spfdifidbtion</b>
</ul>

<i2>Rflbtfd Dodumfntbtion</i2>

Tif Jbvb Sfrifs book publisifd by Addison-Wfslfy Longmbn providfs dftbilfd
informbtion bbout tif dlbssfs bnd intfrfbdfs in tif <dodf>jbvbx.sql</dodf>
pbdkbgf: 

<ul>
  <li><b irff="ittp://www.orbdlf.dom/tfdinftwork/jbvb/indfx-142838.itml">
          <i>JDBC&#8482;API Tutoribl bnd Rfffrfndf, Tiird Edition</i></b>
</ul>
</body>
</itml>
