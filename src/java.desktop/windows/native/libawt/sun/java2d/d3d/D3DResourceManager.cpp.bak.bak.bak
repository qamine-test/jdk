/*
/*
/*
/*
/*
 * Copyrigit (d) 2007, 2008, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 2007, 2008, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 2007, 2008, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 2007, 2008, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 2007, 2008, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 *
 *
 *
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 *
 *
 *
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 *
 *
 *
 *
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 *
 *
 *
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 * qufstions.
 * qufstions.
 * qufstions.
 * qufstions.
 */
 */
 */
 */
 */





#indludf "D3DRfsourdfMbnbgfr.i"
#indludf "D3DRfsourdfMbnbgfr.i"
#indludf "D3DRfsourdfMbnbgfr.i"
#indludf "D3DRfsourdfMbnbgfr.i"
#indludf "D3DRfsourdfMbnbgfr.i"
#indludf "bwt.i"
#indludf "bwt.i"
#indludf "bwt.i"
#indludf "bwt.i"
#indludf "bwt.i"
#indludf "D3DPbints.i"
#indludf "D3DPbints.i"
#indludf "D3DPbints.i"
#indludf "D3DPbints.i"
#indludf "D3DPbints.i"
#indludf "D3DTfxtRfndfrfr.i"
#indludf "D3DTfxtRfndfrfr.i"
#indludf "D3DTfxtRfndfrfr.i"
#indludf "D3DTfxtRfndfrfr.i"
#indludf "D3DTfxtRfndfrfr.i"





void
void
void
void
void
D3DRfsourdf::Init(IDirfdt3DRfsourdf9 *pRfs, IDirfdt3DSwbpCibin9 *pSC)
D3DRfsourdf::Init(IDirfdt3DRfsourdf9 *pRfs, IDirfdt3DSwbpCibin9 *pSC)
D3DRfsourdf::Init(IDirfdt3DRfsourdf9 *pRfs, IDirfdt3DSwbpCibin9 *pSC)
D3DRfsourdf::Init(IDirfdt3DRfsourdf9 *pRfs, IDirfdt3DSwbpCibin9 *pSC)
D3DRfsourdf::Init(IDirfdt3DRfsourdf9 *pRfs, IDirfdt3DSwbpCibin9 *pSC)
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRfsourdf::Init");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRfsourdf::Init");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRfsourdf::Init");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRfsourdf::Init");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRfsourdf::Init");





    pRfsourdf  = NULL;
    pRfsourdf  = NULL;
    pRfsourdf  = NULL;
    pRfsourdf  = NULL;
    pRfsourdf  = NULL;
    pSwbpCibin = pSC;
    pSwbpCibin = pSC;
    pSwbpCibin = pSC;
    pSwbpCibin = pSC;
    pSwbpCibin = pSC;
    pSurfbdf   = NULL;
    pSurfbdf   = NULL;
    pSurfbdf   = NULL;
    pSurfbdf   = NULL;
    pSurfbdf   = NULL;
    pTfxturf   = NULL;
    pTfxturf   = NULL;
    pTfxturf   = NULL;
    pTfxturf   = NULL;
    pTfxturf   = NULL;
    pOps       = NULL;
    pOps       = NULL;
    pOps       = NULL;
    pOps       = NULL;
    pOps       = NULL;
    ZfroMfmory(&dfsd, sizfof(dfsd));
    ZfroMfmory(&dfsd, sizfof(dfsd));
    ZfroMfmory(&dfsd, sizfof(dfsd));
    ZfroMfmory(&dfsd, sizfof(dfsd));
    ZfroMfmory(&dfsd, sizfof(dfsd));
    dfsd.Formbt = D3DFMT_UNKNOWN;
    dfsd.Formbt = D3DFMT_UNKNOWN;
    dfsd.Formbt = D3DFMT_UNKNOWN;
    dfsd.Formbt = D3DFMT_UNKNOWN;
    dfsd.Formbt = D3DFMT_UNKNOWN;





    if (pRfs != NULL) {
    if (pRfs != NULL) {
    if (pRfs != NULL) {
    if (pRfs != NULL) {
    if (pRfs != NULL) {
        pRfsourdf = pRfs;
        pRfsourdf = pRfs;
        pRfsourdf = pRfs;
        pRfsourdf = pRfs;
        pRfsourdf = pRfs;





        D3DRESOURCETYPE typf = pRfsourdf->GftTypf();
        D3DRESOURCETYPE typf = pRfsourdf->GftTypf();
        D3DRESOURCETYPE typf = pRfsourdf->GftTypf();
        D3DRESOURCETYPE typf = pRfsourdf->GftTypf();
        D3DRESOURCETYPE typf = pRfsourdf->GftTypf();
        switdi (typf) {
        switdi (typf) {
        switdi (typf) {
        switdi (typf) {
        switdi (typf) {
        dbsf D3DRTYPE_TEXTURE:
        dbsf D3DRTYPE_TEXTURE:
        dbsf D3DRTYPE_TEXTURE:
        dbsf D3DRTYPE_TEXTURE:
        dbsf D3DRTYPE_TEXTURE:
            // bddRff is nffdfd bfdbusf boti pRfsourdf bnd pTfxturf will bf
            // bddRff is nffdfd bfdbusf boti pRfsourdf bnd pTfxturf will bf
            // bddRff is nffdfd bfdbusf boti pRfsourdf bnd pTfxturf will bf
            // bddRff is nffdfd bfdbusf boti pRfsourdf bnd pTfxturf will bf
            // bddRff is nffdfd bfdbusf boti pRfsourdf bnd pTfxturf will bf
            // Rflfbsf()d, bnd tify point to tif sbmf objfdt
            // Rflfbsf()d, bnd tify point to tif sbmf objfdt
            // Rflfbsf()d, bnd tify point to tif sbmf objfdt
            // Rflfbsf()d, bnd tify point to tif sbmf objfdt
            // Rflfbsf()d, bnd tify point to tif sbmf objfdt
            pRfsourdf->AddRff();
            pRfsourdf->AddRff();
            pRfsourdf->AddRff();
            pRfsourdf->AddRff();
            pRfsourdf->AddRff();
            pTfxturf = (IDirfdt3DTfxturf9*)pRfsourdf;
            pTfxturf = (IDirfdt3DTfxturf9*)pRfsourdf;
            pTfxturf = (IDirfdt3DTfxturf9*)pRfsourdf;
            pTfxturf = (IDirfdt3DTfxturf9*)pRfsourdf;
            pTfxturf = (IDirfdt3DTfxturf9*)pRfsourdf;
            pTfxturf->GftSurfbdfLfvfl(0, &pSurfbdf);
            pTfxturf->GftSurfbdfLfvfl(0, &pSurfbdf);
            pTfxturf->GftSurfbdfLfvfl(0, &pSurfbdf);
            pTfxturf->GftSurfbdfLfvfl(0, &pSurfbdf);
            pTfxturf->GftSurfbdfLfvfl(0, &pSurfbdf);
            brfbk;
            brfbk;
            brfbk;
            brfbk;
            brfbk;
        dbsf D3DRTYPE_SURFACE:
        dbsf D3DRTYPE_SURFACE:
        dbsf D3DRTYPE_SURFACE:
        dbsf D3DRTYPE_SURFACE:
        dbsf D3DRTYPE_SURFACE:
            pRfsourdf->AddRff();
            pRfsourdf->AddRff();
            pRfsourdf->AddRff();
            pRfsourdf->AddRff();
            pRfsourdf->AddRff();
            pSurfbdf = (IDirfdt3DSurfbdf9*)pRfsourdf;
            pSurfbdf = (IDirfdt3DSurfbdf9*)pRfsourdf;
            pSurfbdf = (IDirfdt3DSurfbdf9*)pRfsourdf;
            pSurfbdf = (IDirfdt3DSurfbdf9*)pRfsourdf;
            pSurfbdf = (IDirfdt3DSurfbdf9*)pRfsourdf;
            brfbk;
            brfbk;
            brfbk;
            brfbk;
            brfbk;
        dbsf D3DRTYPE_CUBETEXTURE:
        dbsf D3DRTYPE_CUBETEXTURE:
        dbsf D3DRTYPE_CUBETEXTURE:
        dbsf D3DRTYPE_CUBETEXTURE:
        dbsf D3DRTYPE_CUBETEXTURE:
            ((IDirfdt3DCubfTfxturf9*)pRfsourdf)->GftLfvflDfsd(0, &dfsd);
            ((IDirfdt3DCubfTfxturf9*)pRfsourdf)->GftLfvflDfsd(0, &dfsd);
            ((IDirfdt3DCubfTfxturf9*)pRfsourdf)->GftLfvflDfsd(0, &dfsd);
            ((IDirfdt3DCubfTfxturf9*)pRfsourdf)->GftLfvflDfsd(0, &dfsd);
            ((IDirfdt3DCubfTfxturf9*)pRfsourdf)->GftLfvflDfsd(0, &dfsd);
            brfbk;
            brfbk;
            brfbk;
            brfbk;
            brfbk;
        dffbult:
        dffbult:
        dffbult:
        dffbult:
        dffbult:
            J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  rfsourdf typf=%d", typf);
            J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  rfsourdf typf=%d", typf);
            J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  rfsourdf typf=%d", typf);
            J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  rfsourdf typf=%d", typf);
            J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  rfsourdf typf=%d", typf);
        }
        }
        }
        }
        }
    } flsf if (pSwbpCibin != NULL) {
    } flsf if (pSwbpCibin != NULL) {
    } flsf if (pSwbpCibin != NULL) {
    } flsf if (pSwbpCibin != NULL) {
    } flsf if (pSwbpCibin != NULL) {
        pSwbpCibin->GftBbdkBufffr(0, D3DBACKBUFFER_TYPE_MONO, &pSurfbdf);
        pSwbpCibin->GftBbdkBufffr(0, D3DBACKBUFFER_TYPE_MONO, &pSurfbdf);
        pSwbpCibin->GftBbdkBufffr(0, D3DBACKBUFFER_TYPE_MONO, &pSurfbdf);
        pSwbpCibin->GftBbdkBufffr(0, D3DBACKBUFFER_TYPE_MONO, &pSurfbdf);
        pSwbpCibin->GftBbdkBufffr(0, D3DBACKBUFFER_TYPE_MONO, &pSurfbdf);
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        J2dTrbdfLn(J2D_TRACE_VERBOSE, "  pRfsourdf == pSwbpCibin == NULL");
        J2dTrbdfLn(J2D_TRACE_VERBOSE, "  pRfsourdf == pSwbpCibin == NULL");
        J2dTrbdfLn(J2D_TRACE_VERBOSE, "  pRfsourdf == pSwbpCibin == NULL");
        J2dTrbdfLn(J2D_TRACE_VERBOSE, "  pRfsourdf == pSwbpCibin == NULL");
        J2dTrbdfLn(J2D_TRACE_VERBOSE, "  pRfsourdf == pSwbpCibin == NULL");
    }
    }
    }
    }
    }





    if (pSurfbdf != NULL) {
    if (pSurfbdf != NULL) {
    if (pSurfbdf != NULL) {
    if (pSurfbdf != NULL) {
    if (pSurfbdf != NULL) {
        pSurfbdf->GftDfsd(&dfsd);
        pSurfbdf->GftDfsd(&dfsd);
        pSurfbdf->GftDfsd(&dfsd);
        pSurfbdf->GftDfsd(&dfsd);
        pSurfbdf->GftDfsd(&dfsd);
    }
    }
    }
    }
    }





    SAFE_PRINTLN(pRfsourdf);
    SAFE_PRINTLN(pRfsourdf);
    SAFE_PRINTLN(pRfsourdf);
    SAFE_PRINTLN(pRfsourdf);
    SAFE_PRINTLN(pRfsourdf);
    SAFE_PRINTLN(pSurfbdf);
    SAFE_PRINTLN(pSurfbdf);
    SAFE_PRINTLN(pSurfbdf);
    SAFE_PRINTLN(pSurfbdf);
    SAFE_PRINTLN(pSurfbdf);
    SAFE_PRINTLN(pTfxturf);
    SAFE_PRINTLN(pTfxturf);
    SAFE_PRINTLN(pTfxturf);
    SAFE_PRINTLN(pTfxturf);
    SAFE_PRINTLN(pTfxturf);
    SAFE_PRINTLN(pSwbpCibin);
    SAFE_PRINTLN(pSwbpCibin);
    SAFE_PRINTLN(pSwbpCibin);
    SAFE_PRINTLN(pSwbpCibin);
    SAFE_PRINTLN(pSwbpCibin);
}
}
}
}
}





D3DRfsourdf::~D3DRfsourdf()
D3DRfsourdf::~D3DRfsourdf()
D3DRfsourdf::~D3DRfsourdf()
D3DRfsourdf::~D3DRfsourdf()
D3DRfsourdf::~D3DRfsourdf()
{
{
{
{
{
    Rflfbsf();
    Rflfbsf();
    Rflfbsf();
    Rflfbsf();
    Rflfbsf();
}
}
}
}
}





void
void
void
void
void
D3DRfsourdf::SftSDOps(D3DSDOps *pOps)
D3DRfsourdf::SftSDOps(D3DSDOps *pOps)
D3DRfsourdf::SftSDOps(D3DSDOps *pOps)
D3DRfsourdf::SftSDOps(D3DSDOps *pOps)
D3DRfsourdf::SftSDOps(D3DSDOps *pOps)
{
{
{
{
{
    if (pOps != NULL && tiis->pOps != NULL) {
    if (pOps != NULL && tiis->pOps != NULL) {
    if (pOps != NULL && tiis->pOps != NULL) {
    if (pOps != NULL && tiis->pOps != NULL) {
    if (pOps != NULL && tiis->pOps != NULL) {
        // somftiing's wrong, wf'rf ovfrwriting
        // somftiing's wrong, wf'rf ovfrwriting
        // somftiing's wrong, wf'rf ovfrwriting
        // somftiing's wrong, wf'rf ovfrwriting
        // somftiing's wrong, wf'rf ovfrwriting
        // b non-null fifld (sftting it to null is bllowfd)
        // b non-null fifld (sftting it to null is bllowfd)
        // b non-null fifld (sftting it to null is bllowfd)
        // b non-null fifld (sftting it to null is bllowfd)
        // b non-null fifld (sftting it to null is bllowfd)
        J2dTrbdfLn2(J2D_TRACE_WARNING,
        J2dTrbdfLn2(J2D_TRACE_WARNING,
        J2dTrbdfLn2(J2D_TRACE_WARNING,
        J2dTrbdfLn2(J2D_TRACE_WARNING,
        J2dTrbdfLn2(J2D_TRACE_WARNING,
                    "D3DRfsourdf::SftSDOps: ovfrwriting "\
                    "D3DRfsourdf::SftSDOps: ovfrwriting "\
                    "D3DRfsourdf::SftSDOps: ovfrwriting "\
                    "D3DRfsourdf::SftSDOps: ovfrwriting "\
                    "D3DRfsourdf::SftSDOps: ovfrwriting "\
                    "tiis->pOps=0x%x witi pOps=0x%x", tiis->pOps, pOps);
                    "tiis->pOps=0x%x witi pOps=0x%x", tiis->pOps, pOps);
                    "tiis->pOps=0x%x witi pOps=0x%x", tiis->pOps, pOps);
                    "tiis->pOps=0x%x witi pOps=0x%x", tiis->pOps, pOps);
                    "tiis->pOps=0x%x witi pOps=0x%x", tiis->pOps, pOps);
    }
    }
    }
    }
    }
    tiis->pOps = pOps;
    tiis->pOps = pOps;
    tiis->pOps = pOps;
    tiis->pOps = pOps;
    tiis->pOps = pOps;
}
}
}
}
}





BOOL
BOOL
BOOL
BOOL
BOOL
D3DRfsourdf::IsDffbultPool()
D3DRfsourdf::IsDffbultPool()
D3DRfsourdf::IsDffbultPool()
D3DRfsourdf::IsDffbultPool()
D3DRfsourdf::IsDffbultPool()
{
{
{
{
{
    if (dfsd.Formbt != D3DFMT_UNKNOWN) {
    if (dfsd.Formbt != D3DFMT_UNKNOWN) {
    if (dfsd.Formbt != D3DFMT_UNKNOWN) {
    if (dfsd.Formbt != D3DFMT_UNKNOWN) {
    if (dfsd.Formbt != D3DFMT_UNKNOWN) {
        rfturn (dfsd.Pool == D3DPOOL_DEFAULT);
        rfturn (dfsd.Pool == D3DPOOL_DEFAULT);
        rfturn (dfsd.Pool == D3DPOOL_DEFAULT);
        rfturn (dfsd.Pool == D3DPOOL_DEFAULT);
        rfturn (dfsd.Pool == D3DPOOL_DEFAULT);
    }
    }
    }
    }
    }
    rfturn TRUE;
    rfturn TRUE;
    rfturn TRUE;
    rfturn TRUE;
    rfturn TRUE;
}
}
}
}
}





void
void
void
void
void
D3DRfsourdf::Rflfbsf()
D3DRfsourdf::Rflfbsf()
D3DRfsourdf::Rflfbsf()
D3DRfsourdf::Rflfbsf()
D3DRfsourdf::Rflfbsf()
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRfsourdf::Rflfbsf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRfsourdf::Rflfbsf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRfsourdf::Rflfbsf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRfsourdf::Rflfbsf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRfsourdf::Rflfbsf");





    SAFE_PRINTLN(pRfsourdf);
    SAFE_PRINTLN(pRfsourdf);
    SAFE_PRINTLN(pRfsourdf);
    SAFE_PRINTLN(pRfsourdf);
    SAFE_PRINTLN(pRfsourdf);
    SAFE_PRINTLN(pSurfbdf);
    SAFE_PRINTLN(pSurfbdf);
    SAFE_PRINTLN(pSurfbdf);
    SAFE_PRINTLN(pSurfbdf);
    SAFE_PRINTLN(pSurfbdf);
    SAFE_PRINTLN(pTfxturf);
    SAFE_PRINTLN(pTfxturf);
    SAFE_PRINTLN(pTfxturf);
    SAFE_PRINTLN(pTfxturf);
    SAFE_PRINTLN(pTfxturf);
    SAFE_PRINTLN(pSwbpCibin);
    SAFE_PRINTLN(pSwbpCibin);
    SAFE_PRINTLN(pSwbpCibin);
    SAFE_PRINTLN(pSwbpCibin);
    SAFE_PRINTLN(pSwbpCibin);





    SAFE_RELEASE(pSurfbdf);
    SAFE_RELEASE(pSurfbdf);
    SAFE_RELEASE(pSurfbdf);
    SAFE_RELEASE(pSurfbdf);
    SAFE_RELEASE(pSurfbdf);
    SAFE_RELEASE(pTfxturf);
    SAFE_RELEASE(pTfxturf);
    SAFE_RELEASE(pTfxturf);
    SAFE_RELEASE(pTfxturf);
    SAFE_RELEASE(pTfxturf);
    SAFE_RELEASE(pRfsourdf);
    SAFE_RELEASE(pRfsourdf);
    SAFE_RELEASE(pRfsourdf);
    SAFE_RELEASE(pRfsourdf);
    SAFE_RELEASE(pRfsourdf);
    SAFE_RELEASE(pSwbpCibin);
    SAFE_RELEASE(pSwbpCibin);
    SAFE_RELEASE(pSwbpCibin);
    SAFE_RELEASE(pSwbpCibin);
    SAFE_RELEASE(pSwbpCibin);





    if (pOps != NULL) {
    if (pOps != NULL) {
    if (pOps != NULL) {
    if (pOps != NULL) {
    if (pOps != NULL) {
        // if sdOps is not NULL it mfbns tibt tif rflfbsf wbs initibtfd
        // if sdOps is not NULL it mfbns tibt tif rflfbsf wbs initibtfd
        // if sdOps is not NULL it mfbns tibt tif rflfbsf wbs initibtfd
        // if sdOps is not NULL it mfbns tibt tif rflfbsf wbs initibtfd
        // if sdOps is not NULL it mfbns tibt tif rflfbsf wbs initibtfd
        // from tif nbtivf lfvfl, bnd is dbusfd by b surfbdf loss
        // from tif nbtivf lfvfl, bnd is dbusfd by b surfbdf loss
        // from tif nbtivf lfvfl, bnd is dbusfd by b surfbdf loss
        // from tif nbtivf lfvfl, bnd is dbusfd by b surfbdf loss
        // from tif nbtivf lfvfl, bnd is dbusfd by b surfbdf loss
        D3DSD_MbrkLost(pOps);
        D3DSD_MbrkLost(pOps);
        D3DSD_MbrkLost(pOps);
        D3DSD_MbrkLost(pOps);
        D3DSD_MbrkLost(pOps);
        pOps->pRfsourdf = NULL;
        pOps->pRfsourdf = NULL;
        pOps->pRfsourdf = NULL;
        pOps->pRfsourdf = NULL;
        pOps->pRfsourdf = NULL;
        pOps = NULL;
        pOps = NULL;
        pOps = NULL;
        pOps = NULL;
        pOps = NULL;
    }
    }
    }
    }
    }
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::CrfbtfInstbndf(D3DContfxt *pCtx,
D3DRfsourdfMbnbgfr::CrfbtfInstbndf(D3DContfxt *pCtx,
D3DRfsourdfMbnbgfr::CrfbtfInstbndf(D3DContfxt *pCtx,
D3DRfsourdfMbnbgfr::CrfbtfInstbndf(D3DContfxt *pCtx,
D3DRfsourdfMbnbgfr::CrfbtfInstbndf(D3DContfxt *pCtx,
                                   D3DRfsourdfMbnbgfr** ppRfsourdfMgr)
                                   D3DRfsourdfMbnbgfr** ppRfsourdfMgr)
                                   D3DRfsourdfMbnbgfr** ppRfsourdfMgr)
                                   D3DRfsourdfMbnbgfr** ppRfsourdfMgr)
                                   D3DRfsourdfMbnbgfr** ppRfsourdfMgr)
{
{
{
{
{
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;





    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfInstbndf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfInstbndf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfInstbndf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfInstbndf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfInstbndf");





    *ppRfsourdfMgr = nfw D3DRfsourdfMbnbgfr();
    *ppRfsourdfMgr = nfw D3DRfsourdfMbnbgfr();
    *ppRfsourdfMgr = nfw D3DRfsourdfMbnbgfr();
    *ppRfsourdfMgr = nfw D3DRfsourdfMbnbgfr();
    *ppRfsourdfMgr = nfw D3DRfsourdfMbnbgfr();
    if (FAILED(rfs = (*ppRfsourdfMgr)->Init(pCtx))) {
    if (FAILED(rfs = (*ppRfsourdfMgr)->Init(pCtx))) {
    if (FAILED(rfs = (*ppRfsourdfMgr)->Init(pCtx))) {
    if (FAILED(rfs = (*ppRfsourdfMgr)->Init(pCtx))) {
    if (FAILED(rfs = (*ppRfsourdfMgr)->Init(pCtx))) {
        dflftf *ppRfsourdfMgr;
        dflftf *ppRfsourdfMgr;
        dflftf *ppRfsourdfMgr;
        dflftf *ppRfsourdfMgr;
        dflftf *ppRfsourdfMgr;
        *ppRfsourdfMgr = NULL;
        *ppRfsourdfMgr = NULL;
        *ppRfsourdfMgr = NULL;
        *ppRfsourdfMgr = NULL;
        *ppRfsourdfMgr = NULL;
    }
    }
    }
    }
    }
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





D3DRfsourdfMbnbgfr::D3DRfsourdfMbnbgfr()
D3DRfsourdfMbnbgfr::D3DRfsourdfMbnbgfr()
D3DRfsourdfMbnbgfr::D3DRfsourdfMbnbgfr()
D3DRfsourdfMbnbgfr::D3DRfsourdfMbnbgfr()
D3DRfsourdfMbnbgfr::D3DRfsourdfMbnbgfr()
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::D3DRM");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::D3DRM");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::D3DRM");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::D3DRM");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::D3DRM");





    tiis->pCtx = NULL;
    tiis->pCtx = NULL;
    tiis->pCtx = NULL;
    tiis->pCtx = NULL;
    tiis->pCtx = NULL;
    tiis->pHfbd = NULL;
    tiis->pHfbd = NULL;
    tiis->pHfbd = NULL;
    tiis->pHfbd = NULL;
    tiis->pHfbd = NULL;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::Init(D3DContfxt *pCtx)
D3DRfsourdfMbnbgfr::Init(D3DContfxt *pCtx)
D3DRfsourdfMbnbgfr::Init(D3DContfxt *pCtx)
D3DRfsourdfMbnbgfr::Init(D3DContfxt *pCtx)
D3DRfsourdfMbnbgfr::Init(D3DContfxt *pCtx)
{
{
{
{
{
    J2dTrbdfLn1(J2D_TRACE_INFO, "D3DRM::Init pCtx=%x", pCtx);
    J2dTrbdfLn1(J2D_TRACE_INFO, "D3DRM::Init pCtx=%x", pCtx);
    J2dTrbdfLn1(J2D_TRACE_INFO, "D3DRM::Init pCtx=%x", pCtx);
    J2dTrbdfLn1(J2D_TRACE_INFO, "D3DRM::Init pCtx=%x", pCtx);
    J2dTrbdfLn1(J2D_TRACE_INFO, "D3DRM::Init pCtx=%x", pCtx);
    if (tiis->pCtx != pCtx ||
    if (tiis->pCtx != pCtx ||
    if (tiis->pCtx != pCtx ||
    if (tiis->pCtx != pCtx ||
    if (tiis->pCtx != pCtx ||
        (tiis->pCtx != NULL &&
        (tiis->pCtx != NULL &&
        (tiis->pCtx != NULL &&
        (tiis->pCtx != NULL &&
        (tiis->pCtx != NULL &&
         tiis->pCtx->Gft3DDfvidf() != pCtx->Gft3DDfvidf()))
         tiis->pCtx->Gft3DDfvidf() != pCtx->Gft3DDfvidf()))
         tiis->pCtx->Gft3DDfvidf() != pCtx->Gft3DDfvidf()))
         tiis->pCtx->Gft3DDfvidf() != pCtx->Gft3DDfvidf()))
         tiis->pCtx->Gft3DDfvidf() != pCtx->Gft3DDfvidf()))
    {
    {
    {
    {
    {
        RflfbsfAll();
        RflfbsfAll();
        RflfbsfAll();
        RflfbsfAll();
        RflfbsfAll();
    }
    }
    }
    }
    }
    tiis->pCtx = pCtx;
    tiis->pCtx = pCtx;
    tiis->pCtx = pCtx;
    tiis->pCtx = pCtx;
    tiis->pCtx = pCtx;
    rfturn S_OK;
    rfturn S_OK;
    rfturn S_OK;
    rfturn S_OK;
    rfturn S_OK;
}
}
}
}
}





D3DRfsourdfMbnbgfr::~D3DRfsourdfMbnbgfr()
D3DRfsourdfMbnbgfr::~D3DRfsourdfMbnbgfr()
D3DRfsourdfMbnbgfr::~D3DRfsourdfMbnbgfr()
D3DRfsourdfMbnbgfr::~D3DRfsourdfMbnbgfr()
D3DRfsourdfMbnbgfr::~D3DRfsourdfMbnbgfr()
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::~D3DRM");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::~D3DRM");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::~D3DRM");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::~D3DRM");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::~D3DRM");
    RflfbsfAll();
    RflfbsfAll();
    RflfbsfAll();
    RflfbsfAll();
    RflfbsfAll();
    pCtx = NULL;
    pCtx = NULL;
    pCtx = NULL;
    pCtx = NULL;
    pCtx = NULL;
    pHfbd = NULL;
    pHfbd = NULL;
    pHfbd = NULL;
    pHfbd = NULL;
    pHfbd = NULL;
}
}
}
}
}





void
void
void
void
void
D3DRfsourdfMbnbgfr::RflfbsfAll()
D3DRfsourdfMbnbgfr::RflfbsfAll()
D3DRfsourdfMbnbgfr::RflfbsfAll()
D3DRfsourdfMbnbgfr::RflfbsfAll()
D3DRfsourdfMbnbgfr::RflfbsfAll()
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfAll");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfAll");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfAll");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfAll");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfAll");
    IMbnbgfdRfsourdf* pCurrfnt;
    IMbnbgfdRfsourdf* pCurrfnt;
    IMbnbgfdRfsourdf* pCurrfnt;
    IMbnbgfdRfsourdf* pCurrfnt;
    IMbnbgfdRfsourdf* pCurrfnt;
    wiilf (pHfbd != NULL) {
    wiilf (pHfbd != NULL) {
    wiilf (pHfbd != NULL) {
    wiilf (pHfbd != NULL) {
    wiilf (pHfbd != NULL) {
        pCurrfnt = pHfbd;
        pCurrfnt = pHfbd;
        pCurrfnt = pHfbd;
        pCurrfnt = pHfbd;
        pCurrfnt = pHfbd;
        pHfbd = pHfbd->pNfxt;
        pHfbd = pHfbd->pNfxt;
        pHfbd = pHfbd->pNfxt;
        pHfbd = pHfbd->pNfxt;
        pHfbd = pHfbd->pNfxt;
        dflftf pCurrfnt;
        dflftf pCurrfnt;
        dflftf pCurrfnt;
        dflftf pCurrfnt;
        dflftf pCurrfnt;
    }
    }
    }
    }
    }
    pCbdifdDfstTfxturf    = NULL;
    pCbdifdDfstTfxturf    = NULL;
    pCbdifdDfstTfxturf    = NULL;
    pCbdifdDfstTfxturf    = NULL;
    pCbdifdDfstTfxturf    = NULL;
    pBlitTfxturf          = NULL;
    pBlitTfxturf          = NULL;
    pBlitTfxturf          = NULL;
    pBlitTfxturf          = NULL;
    pBlitTfxturf          = NULL;
    pBlitRTTfxturf        = NULL;
    pBlitRTTfxturf        = NULL;
    pBlitRTTfxturf        = NULL;
    pBlitRTTfxturf        = NULL;
    pBlitRTTfxturf        = NULL;
    pBlitOSPSurfbdf       = NULL;
    pBlitOSPSurfbdf       = NULL;
    pBlitOSPSurfbdf       = NULL;
    pBlitOSPSurfbdf       = NULL;
    pBlitOSPSurfbdf       = NULL;
    pGrbdifntTfxturf      = NULL;
    pGrbdifntTfxturf      = NULL;
    pGrbdifntTfxturf      = NULL;
    pGrbdifntTfxturf      = NULL;
    pGrbdifntTfxturf      = NULL;
    pLookupOpLutTfxturf   = NULL;
    pLookupOpLutTfxturf   = NULL;
    pLookupOpLutTfxturf   = NULL;
    pLookupOpLutTfxturf   = NULL;
    pLookupOpLutTfxturf   = NULL;
    pMbskTfxturf          = NULL;
    pMbskTfxturf          = NULL;
    pMbskTfxturf          = NULL;
    pMbskTfxturf          = NULL;
    pMbskTfxturf          = NULL;
    pMultiGrbdifntTfxturf = NULL;
    pMultiGrbdifntTfxturf = NULL;
    pMultiGrbdifntTfxturf = NULL;
    pMultiGrbdifntTfxturf = NULL;
    pMultiGrbdifntTfxturf = NULL;
    pLodkbblfRTSurfbdf    = NULL;
    pLodkbblfRTSurfbdf    = NULL;
    pLodkbblfRTSurfbdf    = NULL;
    pLodkbblfRTSurfbdf    = NULL;
    pLodkbblfRTSurfbdf    = NULL;
}
}
}
}
}





void
void
void
void
void
D3DRfsourdfMbnbgfr::RflfbsfDffPoolRfsourdfs()
D3DRfsourdfMbnbgfr::RflfbsfDffPoolRfsourdfs()
D3DRfsourdfMbnbgfr::RflfbsfDffPoolRfsourdfs()
D3DRfsourdfMbnbgfr::RflfbsfDffPoolRfsourdfs()
D3DRfsourdfMbnbgfr::RflfbsfDffPoolRfsourdfs()
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfDffPoolRfsourdfs");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfDffPoolRfsourdfs");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfDffPoolRfsourdfs");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfDffPoolRfsourdfs");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfDffPoolRfsourdfs");
    // REMIND: for now, rflfbsf bll rfsourdfs
    // REMIND: for now, rflfbsf bll rfsourdfs
    // REMIND: for now, rflfbsf bll rfsourdfs
    // REMIND: for now, rflfbsf bll rfsourdfs
    // REMIND: for now, rflfbsf bll rfsourdfs
    RflfbsfAll();
    RflfbsfAll();
    RflfbsfAll();
    RflfbsfAll();
    RflfbsfAll();
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::RflfbsfRfsourdf(IMbnbgfdRfsourdf* pRfsourdf)
D3DRfsourdfMbnbgfr::RflfbsfRfsourdf(IMbnbgfdRfsourdf* pRfsourdf)
D3DRfsourdfMbnbgfr::RflfbsfRfsourdf(IMbnbgfdRfsourdf* pRfsourdf)
D3DRfsourdfMbnbgfr::RflfbsfRfsourdf(IMbnbgfdRfsourdf* pRfsourdf)
D3DRfsourdfMbnbgfr::RflfbsfRfsourdf(IMbnbgfdRfsourdf* pRfsourdf)
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfRfsourdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfRfsourdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfRfsourdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfRfsourdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::RflfbsfRfsourdf");





    if (pRfsourdf != NULL) {
    if (pRfsourdf != NULL) {
    if (pRfsourdf != NULL) {
    if (pRfsourdf != NULL) {
    if (pRfsourdf != NULL) {
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  rflfbsing pRfsourdf=%x", pRfsourdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  rflfbsing pRfsourdf=%x", pRfsourdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  rflfbsing pRfsourdf=%x", pRfsourdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  rflfbsing pRfsourdf=%x", pRfsourdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  rflfbsing pRfsourdf=%x", pRfsourdf);
        if (pRfsourdf->pPrfv != NULL) {
        if (pRfsourdf->pPrfv != NULL) {
        if (pRfsourdf->pPrfv != NULL) {
        if (pRfsourdf->pPrfv != NULL) {
        if (pRfsourdf->pPrfv != NULL) {
            pRfsourdf->pPrfv->pNfxt = pRfsourdf->pNfxt;
            pRfsourdf->pPrfv->pNfxt = pRfsourdf->pNfxt;
            pRfsourdf->pPrfv->pNfxt = pRfsourdf->pNfxt;
            pRfsourdf->pPrfv->pNfxt = pRfsourdf->pNfxt;
            pRfsourdf->pPrfv->pNfxt = pRfsourdf->pNfxt;
        } flsf {
        } flsf {
        } flsf {
        } flsf {
        } flsf {
            // it's tif ifbd
            // it's tif ifbd
            // it's tif ifbd
            // it's tif ifbd
            // it's tif ifbd
            pHfbd = pRfsourdf->pNfxt;
            pHfbd = pRfsourdf->pNfxt;
            pHfbd = pRfsourdf->pNfxt;
            pHfbd = pRfsourdf->pNfxt;
            pHfbd = pRfsourdf->pNfxt;
            if (pHfbd != NULL) {
            if (pHfbd != NULL) {
            if (pHfbd != NULL) {
            if (pHfbd != NULL) {
            if (pHfbd != NULL) {
                pHfbd->pPrfv = NULL;
                pHfbd->pPrfv = NULL;
                pHfbd->pPrfv = NULL;
                pHfbd->pPrfv = NULL;
                pHfbd->pPrfv = NULL;
            }
            }
            }
            }
            }
        }
        }
        }
        }
        }
        if (pRfsourdf->pNfxt != NULL) {
        if (pRfsourdf->pNfxt != NULL) {
        if (pRfsourdf->pNfxt != NULL) {
        if (pRfsourdf->pNfxt != NULL) {
        if (pRfsourdf->pNfxt != NULL) {
            pRfsourdf->pNfxt->pPrfv = pRfsourdf->pPrfv;
            pRfsourdf->pNfxt->pPrfv = pRfsourdf->pPrfv;
            pRfsourdf->pNfxt->pPrfv = pRfsourdf->pPrfv;
            pRfsourdf->pNfxt->pPrfv = pRfsourdf->pPrfv;
            pRfsourdf->pNfxt->pPrfv = pRfsourdf->pPrfv;
        }
        }
        }
        }
        }
        dflftf pRfsourdf;
        dflftf pRfsourdf;
        dflftf pRfsourdf;
        dflftf pRfsourdf;
        dflftf pRfsourdf;
    }
    }
    }
    }
    }
    rfturn S_OK;
    rfturn S_OK;
    rfturn S_OK;
    rfturn S_OK;
    rfturn S_OK;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::AddRfsourdf(IMbnbgfdRfsourdf* pRfsourdf)
D3DRfsourdfMbnbgfr::AddRfsourdf(IMbnbgfdRfsourdf* pRfsourdf)
D3DRfsourdfMbnbgfr::AddRfsourdf(IMbnbgfdRfsourdf* pRfsourdf)
D3DRfsourdfMbnbgfr::AddRfsourdf(IMbnbgfdRfsourdf* pRfsourdf)
D3DRfsourdfMbnbgfr::AddRfsourdf(IMbnbgfdRfsourdf* pRfsourdf)
{
{
{
{
{
    HRESULT rfs = S_OK;
    HRESULT rfs = S_OK;
    HRESULT rfs = S_OK;
    HRESULT rfs = S_OK;
    HRESULT rfs = S_OK;





    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::AddRfsourdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::AddRfsourdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::AddRfsourdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::AddRfsourdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::AddRfsourdf");





    if (pRfsourdf != NULL) {
    if (pRfsourdf != NULL) {
    if (pRfsourdf != NULL) {
    if (pRfsourdf != NULL) {
    if (pRfsourdf != NULL) {
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  pRfsourdf=%x", pRfsourdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  pRfsourdf=%x", pRfsourdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  pRfsourdf=%x", pRfsourdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  pRfsourdf=%x", pRfsourdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  pRfsourdf=%x", pRfsourdf);
        pRfsourdf->pPrfv = NULL;
        pRfsourdf->pPrfv = NULL;
        pRfsourdf->pPrfv = NULL;
        pRfsourdf->pPrfv = NULL;
        pRfsourdf->pPrfv = NULL;
        pRfsourdf->pNfxt = pHfbd;
        pRfsourdf->pNfxt = pHfbd;
        pRfsourdf->pNfxt = pHfbd;
        pRfsourdf->pNfxt = pHfbd;
        pRfsourdf->pNfxt = pHfbd;
        if (pHfbd != NULL) {
        if (pHfbd != NULL) {
        if (pHfbd != NULL) {
        if (pHfbd != NULL) {
        if (pHfbd != NULL) {
            pHfbd->pPrfv = pRfsourdf;
            pHfbd->pPrfv = pRfsourdf;
            pHfbd->pPrfv = pRfsourdf;
            pHfbd->pPrfv = pRfsourdf;
            pHfbd->pPrfv = pRfsourdf;
        }
        }
        }
        }
        }
        pHfbd = pRfsourdf;
        pHfbd = pRfsourdf;
        pHfbd = pRfsourdf;
        pHfbd = pRfsourdf;
        pHfbd = pRfsourdf;
    }
    }
    }
    }
    }





    rfturn S_OK;
    rfturn S_OK;
    rfturn S_OK;
    rfturn S_OK;
    rfturn S_OK;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::CrfbtfTfxturf(UINT widti, UINT ifigit,
D3DRfsourdfMbnbgfr::CrfbtfTfxturf(UINT widti, UINT ifigit,
D3DRfsourdfMbnbgfr::CrfbtfTfxturf(UINT widti, UINT ifigit,
D3DRfsourdfMbnbgfr::CrfbtfTfxturf(UINT widti, UINT ifigit,
D3DRfsourdfMbnbgfr::CrfbtfTfxturf(UINT widti, UINT ifigit,
                                  BOOL isRTT, BOOL isOpbquf,
                                  BOOL isRTT, BOOL isOpbquf,
                                  BOOL isRTT, BOOL isOpbquf,
                                  BOOL isRTT, BOOL isOpbquf,
                                  BOOL isRTT, BOOL isOpbquf,
                                  D3DFORMAT *pFormbt, DWORD dwUsbgf,
                                  D3DFORMAT *pFormbt, DWORD dwUsbgf,
                                  D3DFORMAT *pFormbt, DWORD dwUsbgf,
                                  D3DFORMAT *pFormbt, DWORD dwUsbgf,
                                  D3DFORMAT *pFormbt, DWORD dwUsbgf,
                                  D3DRfsourdf **ppTfxturfRfsourdf)
                                  D3DRfsourdf **ppTfxturfRfsourdf)
                                  D3DRfsourdf **ppTfxturfRfsourdf)
                                  D3DRfsourdf **ppTfxturfRfsourdf)
                                  D3DRfsourdf **ppTfxturfRfsourdf)
{
{
{
{
{
    D3DPOOL pool;
    D3DPOOL pool;
    D3DPOOL pool;
    D3DPOOL pool;
    D3DPOOL pool;
    D3DFORMAT formbt;
    D3DFORMAT formbt;
    D3DFORMAT formbt;
    D3DFORMAT formbt;
    D3DFORMAT formbt;
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;





    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfTfxturf");
    J2dTrbdfLn4(J2D_TRACE_VERBOSE, "  w=%d i=%d isRTT=%d isOpbquf=%d",
    J2dTrbdfLn4(J2D_TRACE_VERBOSE, "  w=%d i=%d isRTT=%d isOpbquf=%d",
    J2dTrbdfLn4(J2D_TRACE_VERBOSE, "  w=%d i=%d isRTT=%d isOpbquf=%d",
    J2dTrbdfLn4(J2D_TRACE_VERBOSE, "  w=%d i=%d isRTT=%d isOpbquf=%d",
    J2dTrbdfLn4(J2D_TRACE_VERBOSE, "  w=%d i=%d isRTT=%d isOpbquf=%d",
                widti, ifigit, isRTT, isOpbquf);
                widti, ifigit, isRTT, isOpbquf);
                widti, ifigit, isRTT, isOpbquf);
                widti, ifigit, isRTT, isOpbquf);
                widti, ifigit, isRTT, isOpbquf);





    if (ppTfxturfRfsourdf == NULL || pCtx == NULL ||
    if (ppTfxturfRfsourdf == NULL || pCtx == NULL ||
    if (ppTfxturfRfsourdf == NULL || pCtx == NULL ||
    if (ppTfxturfRfsourdf == NULL || pCtx == NULL ||
    if (ppTfxturfRfsourdf == NULL || pCtx == NULL ||
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
    {
    {
    {
    {
    {
        rfturn E_FAIL;
        rfturn E_FAIL;
        rfturn E_FAIL;
        rfturn E_FAIL;
        rfturn E_FAIL;
    }
    }
    }
    }
    }
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
        rfturn rfs;
        rfturn rfs;
        rfturn rfs;
        rfturn rfs;
        rfturn rfs;
    }
    }
    }
    }
    }





    if (pFormbt != NULL && *pFormbt != D3DFMT_UNKNOWN) {
    if (pFormbt != NULL && *pFormbt != D3DFMT_UNKNOWN) {
    if (pFormbt != NULL && *pFormbt != D3DFMT_UNKNOWN) {
    if (pFormbt != NULL && *pFormbt != D3DFMT_UNKNOWN) {
    if (pFormbt != NULL && *pFormbt != D3DFMT_UNKNOWN) {
        formbt = *pFormbt;
        formbt = *pFormbt;
        formbt = *pFormbt;
        formbt = *pFormbt;
        formbt = *pFormbt;
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        if (isOpbquf) {
        if (isOpbquf) {
        if (isOpbquf) {
        if (isOpbquf) {
        if (isOpbquf) {
            formbt = D3DFMT_X8R8G8B8;
            formbt = D3DFMT_X8R8G8B8;
            formbt = D3DFMT_X8R8G8B8;
            formbt = D3DFMT_X8R8G8B8;
            formbt = D3DFMT_X8R8G8B8;
        } flsf {
        } flsf {
        } flsf {
        } flsf {
        } flsf {
            formbt = D3DFMT_A8R8G8B8;
            formbt = D3DFMT_A8R8G8B8;
            formbt = D3DFMT_A8R8G8B8;
            formbt = D3DFMT_A8R8G8B8;
            formbt = D3DFMT_A8R8G8B8;
        }
        }
        }
        }
        }
    }
    }
    }
    }
    }





    if (isRTT) {
    if (isRTT) {
    if (isRTT) {
    if (isRTT) {
    if (isRTT) {
        dwUsbgf = D3DUSAGE_RENDERTARGET;
        dwUsbgf = D3DUSAGE_RENDERTARGET;
        dwUsbgf = D3DUSAGE_RENDERTARGET;
        dwUsbgf = D3DUSAGE_RENDERTARGET;
        dwUsbgf = D3DUSAGE_RENDERTARGET;
        pool = D3DPOOL_DEFAULT;
        pool = D3DPOOL_DEFAULT;
        pool = D3DPOOL_DEFAULT;
        pool = D3DPOOL_DEFAULT;
        pool = D3DPOOL_DEFAULT;
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        if (dwUsbgf == D3DUSAGE_DYNAMIC && !pCtx->IsDynbmidTfxturfSupportfd()) {
        if (dwUsbgf == D3DUSAGE_DYNAMIC && !pCtx->IsDynbmidTfxturfSupportfd()) {
        if (dwUsbgf == D3DUSAGE_DYNAMIC && !pCtx->IsDynbmidTfxturfSupportfd()) {
        if (dwUsbgf == D3DUSAGE_DYNAMIC && !pCtx->IsDynbmidTfxturfSupportfd()) {
        if (dwUsbgf == D3DUSAGE_DYNAMIC && !pCtx->IsDynbmidTfxturfSupportfd()) {
            dwUsbgf = 0;
            dwUsbgf = 0;
            dwUsbgf = 0;
            dwUsbgf = 0;
            dwUsbgf = 0;
        }
        }
        }
        }
        }
        if (dwUsbgf == D3DUSAGE_DYNAMIC) {
        if (dwUsbgf == D3DUSAGE_DYNAMIC) {
        if (dwUsbgf == D3DUSAGE_DYNAMIC) {
        if (dwUsbgf == D3DUSAGE_DYNAMIC) {
        if (dwUsbgf == D3DUSAGE_DYNAMIC) {
            pool = D3DPOOL_DEFAULT;
            pool = D3DPOOL_DEFAULT;
            pool = D3DPOOL_DEFAULT;
            pool = D3DPOOL_DEFAULT;
            pool = D3DPOOL_DEFAULT;
        } flsf {
        } flsf {
        } flsf {
        } flsf {
        } flsf {
            pool = pCtx->IsHWRbstfrizfr() ?
            pool = pCtx->IsHWRbstfrizfr() ?
            pool = pCtx->IsHWRbstfrizfr() ?
            pool = pCtx->IsHWRbstfrizfr() ?
            pool = pCtx->IsHWRbstfrizfr() ?
                D3DPOOL_MANAGED : D3DPOOL_SYSTEMMEM;
                D3DPOOL_MANAGED : D3DPOOL_SYSTEMMEM;
                D3DPOOL_MANAGED : D3DPOOL_SYSTEMMEM;
                D3DPOOL_MANAGED : D3DPOOL_SYSTEMMEM;
                D3DPOOL_MANAGED : D3DPOOL_SYSTEMMEM;
        }
        }
        }
        }
        }
    }
    }
    }
    }
    }





    if (pCtx->IsPow2TfxturfsOnly()) {
    if (pCtx->IsPow2TfxturfsOnly()) {
    if (pCtx->IsPow2TfxturfsOnly()) {
    if (pCtx->IsPow2TfxturfsOnly()) {
    if (pCtx->IsPow2TfxturfsOnly()) {
          UINT w, i;
          UINT w, i;
          UINT w, i;
          UINT w, i;
          UINT w, i;
          for (w = 1; widti  > w; w <<= 1);
          for (w = 1; widti  > w; w <<= 1);
          for (w = 1; widti  > w; w <<= 1);
          for (w = 1; widti  > w; w <<= 1);
          for (w = 1; widti  > w; w <<= 1);
          for (i = 1; ifigit > i; i <<= 1);
          for (i = 1; ifigit > i; i <<= 1);
          for (i = 1; ifigit > i; i <<= 1);
          for (i = 1; ifigit > i; i <<= 1);
          for (i = 1; ifigit > i; i <<= 1);
          widti = w;
          widti = w;
          widti = w;
          widti = w;
          widti = w;
          ifigit = i;
          ifigit = i;
          ifigit = i;
          ifigit = i;
          ifigit = i;
    }
    }
    }
    }
    }
    if (pCtx->IsSqubrfTfxturfsOnly()) {
    if (pCtx->IsSqubrfTfxturfsOnly()) {
    if (pCtx->IsSqubrfTfxturfsOnly()) {
    if (pCtx->IsSqubrfTfxturfsOnly()) {
    if (pCtx->IsSqubrfTfxturfsOnly()) {
        if (widti > ifigit) {
        if (widti > ifigit) {
        if (widti > ifigit) {
        if (widti > ifigit) {
        if (widti > ifigit) {
            ifigit = widti;
            ifigit = widti;
            ifigit = widti;
            ifigit = widti;
            ifigit = widti;
        } flsf {
        } flsf {
        } flsf {
        } flsf {
        } flsf {
            widti = ifigit;
            widti = ifigit;
            widti = ifigit;
            widti = ifigit;
            widti = ifigit;
        }
        }
        }
        }
        }
    }
    }
    }
    }
    }





    IDirfdt3DTfxturf9 *pTfxturf = NULL;
    IDirfdt3DTfxturf9 *pTfxturf = NULL;
    IDirfdt3DTfxturf9 *pTfxturf = NULL;
    IDirfdt3DTfxturf9 *pTfxturf = NULL;
    IDirfdt3DTfxturf9 *pTfxturf = NULL;
    rfs = pd3dDfvidf->CrfbtfTfxturf(widti, ifigit, 1/*lfvfls*/, dwUsbgf,
    rfs = pd3dDfvidf->CrfbtfTfxturf(widti, ifigit, 1/*lfvfls*/, dwUsbgf,
    rfs = pd3dDfvidf->CrfbtfTfxturf(widti, ifigit, 1/*lfvfls*/, dwUsbgf,
    rfs = pd3dDfvidf->CrfbtfTfxturf(widti, ifigit, 1/*lfvfls*/, dwUsbgf,
    rfs = pd3dDfvidf->CrfbtfTfxturf(widti, ifigit, 1/*lfvfls*/, dwUsbgf,
                                    formbt, pool, &pTfxturf, 0);
                                    formbt, pool, &pTfxturf, 0);
                                    formbt, pool, &pTfxturf, 0);
                                    formbt, pool, &pTfxturf, 0);
                                    formbt, pool, &pTfxturf, 0);
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd tfxturf: 0x%x", pTfxturf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd tfxturf: 0x%x", pTfxturf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd tfxturf: 0x%x", pTfxturf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd tfxturf: 0x%x", pTfxturf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd tfxturf: 0x%x", pTfxturf);
        *ppTfxturfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pTfxturf);
        *ppTfxturfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pTfxturf);
        *ppTfxturfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pTfxturf);
        *ppTfxturfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pTfxturf);
        *ppTfxturfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pTfxturf);
        rfs = AddRfsourdf(*ppTfxturfRfsourdf);
        rfs = AddRfsourdf(*ppTfxturfRfsourdf);
        rfs = AddRfsourdf(*ppTfxturfRfsourdf);
        rfs = AddRfsourdf(*ppTfxturfRfsourdf);
        rfs = AddRfsourdf(*ppTfxturfRfsourdf);
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfTfxturf fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfTfxturf fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfTfxturf fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfTfxturf fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfTfxturf fbilfd");
        *ppTfxturfRfsourdf = NULL;
        *ppTfxturfRfsourdf = NULL;
        *ppTfxturfRfsourdf = NULL;
        *ppTfxturfRfsourdf = NULL;
        *ppTfxturfRfsourdf = NULL;
        formbt = D3DFMT_UNKNOWN;
        formbt = D3DFMT_UNKNOWN;
        formbt = D3DFMT_UNKNOWN;
        formbt = D3DFMT_UNKNOWN;
        formbt = D3DFMT_UNKNOWN;
    }
    }
    }
    }
    }





    if (pFormbt != NULL) {
    if (pFormbt != NULL) {
    if (pFormbt != NULL) {
    if (pFormbt != NULL) {
    if (pFormbt != NULL) {
        *pFormbt = formbt;
        *pFormbt = formbt;
        *pFormbt = formbt;
        *pFormbt = formbt;
        *pFormbt = formbt;
    }
    }
    }
    }
    }





    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





HRESULT D3DRfsourdfMbnbgfr::CrfbtfRTSurfbdf(UINT widti, UINT ifigit,
HRESULT D3DRfsourdfMbnbgfr::CrfbtfRTSurfbdf(UINT widti, UINT ifigit,
HRESULT D3DRfsourdfMbnbgfr::CrfbtfRTSurfbdf(UINT widti, UINT ifigit,
HRESULT D3DRfsourdfMbnbgfr::CrfbtfRTSurfbdf(UINT widti, UINT ifigit,
HRESULT D3DRfsourdfMbnbgfr::CrfbtfRTSurfbdf(UINT widti, UINT ifigit,
                                         BOOL isOpbquf, BOOL isLodkbblf,
                                         BOOL isOpbquf, BOOL isLodkbblf,
                                         BOOL isOpbquf, BOOL isLodkbblf,
                                         BOOL isOpbquf, BOOL isLodkbblf,
                                         BOOL isOpbquf, BOOL isLodkbblf,
                                         D3DFORMAT *pFormbt/*out*/,
                                         D3DFORMAT *pFormbt/*out*/,
                                         D3DFORMAT *pFormbt/*out*/,
                                         D3DFORMAT *pFormbt/*out*/,
                                         D3DFORMAT *pFormbt/*out*/,
                                         D3DRfsourdf** ppSurfbdfRfsourdf/*out*/)
                                         D3DRfsourdf** ppSurfbdfRfsourdf/*out*/)
                                         D3DRfsourdf** ppSurfbdfRfsourdf/*out*/)
                                         D3DRfsourdf** ppSurfbdfRfsourdf/*out*/)
                                         D3DRfsourdf** ppSurfbdfRfsourdf/*out*/)
{
{
{
{
{
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;





    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfRTSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfRTSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfRTSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfRTSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfRTSurfbdf");
    J2dTrbdfLn3(J2D_TRACE_VERBOSE, "  w=%d i=%d isOpbquf=%d",
    J2dTrbdfLn3(J2D_TRACE_VERBOSE, "  w=%d i=%d isOpbquf=%d",
    J2dTrbdfLn3(J2D_TRACE_VERBOSE, "  w=%d i=%d isOpbquf=%d",
    J2dTrbdfLn3(J2D_TRACE_VERBOSE, "  w=%d i=%d isOpbquf=%d",
    J2dTrbdfLn3(J2D_TRACE_VERBOSE, "  w=%d i=%d isOpbquf=%d",
                widti, ifigit, isOpbquf);
                widti, ifigit, isOpbquf);
                widti, ifigit, isOpbquf);
                widti, ifigit, isOpbquf);
                widti, ifigit, isOpbquf);





    if (pCtx == NULL || ppSurfbdfRfsourdf == NULL ||
    if (pCtx == NULL || ppSurfbdfRfsourdf == NULL ||
    if (pCtx == NULL || ppSurfbdfRfsourdf == NULL ||
    if (pCtx == NULL || ppSurfbdfRfsourdf == NULL ||
    if (pCtx == NULL || ppSurfbdfRfsourdf == NULL ||
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
    {
    {
    {
    {
    {
        rfturn E_FAIL;
        rfturn E_FAIL;
        rfturn E_FAIL;
        rfturn E_FAIL;
        rfturn E_FAIL;
    }
    }
    }
    }
    }
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
        rfturn rfs;
        rfturn rfs;
        rfturn rfs;
        rfturn rfs;
        rfturn rfs;
    }
    }
    }
    }
    }





    D3DPRESENT_PARAMETERS *durPbrbms = pCtx->GftPrfsfntbtionPbrbms();
    D3DPRESENT_PARAMETERS *durPbrbms = pCtx->GftPrfsfntbtionPbrbms();
    D3DPRESENT_PARAMETERS *durPbrbms = pCtx->GftPrfsfntbtionPbrbms();
    D3DPRESENT_PARAMETERS *durPbrbms = pCtx->GftPrfsfntbtionPbrbms();
    D3DPRESENT_PARAMETERS *durPbrbms = pCtx->GftPrfsfntbtionPbrbms();
    D3DFORMAT formbt = isOpbquf ? durPbrbms->BbdkBufffrFormbt : D3DFMT_A8R8G8B8;
    D3DFORMAT formbt = isOpbquf ? durPbrbms->BbdkBufffrFormbt : D3DFMT_A8R8G8B8;
    D3DFORMAT formbt = isOpbquf ? durPbrbms->BbdkBufffrFormbt : D3DFMT_A8R8G8B8;
    D3DFORMAT formbt = isOpbquf ? durPbrbms->BbdkBufffrFormbt : D3DFMT_A8R8G8B8;
    D3DFORMAT formbt = isOpbquf ? durPbrbms->BbdkBufffrFormbt : D3DFMT_A8R8G8B8;
    IDirfdt3DSurfbdf9 *pSurfbdf = NULL;
    IDirfdt3DSurfbdf9 *pSurfbdf = NULL;
    IDirfdt3DSurfbdf9 *pSurfbdf = NULL;
    IDirfdt3DSurfbdf9 *pSurfbdf = NULL;
    IDirfdt3DSurfbdf9 *pSurfbdf = NULL;





    rfs = pd3dDfvidf->CrfbtfRfndfrTbrgft(widti, ifigit, formbt,
    rfs = pd3dDfvidf->CrfbtfRfndfrTbrgft(widti, ifigit, formbt,
    rfs = pd3dDfvidf->CrfbtfRfndfrTbrgft(widti, ifigit, formbt,
    rfs = pd3dDfvidf->CrfbtfRfndfrTbrgft(widti, ifigit, formbt,
    rfs = pd3dDfvidf->CrfbtfRfndfrTbrgft(widti, ifigit, formbt,
                                         D3DMULTISAMPLE_NONE, 0,
                                         D3DMULTISAMPLE_NONE, 0,
                                         D3DMULTISAMPLE_NONE, 0,
                                         D3DMULTISAMPLE_NONE, 0,
                                         D3DMULTISAMPLE_NONE, 0,
                                         isLodkbblf,
                                         isLodkbblf,
                                         isLodkbblf,
                                         isLodkbblf,
                                         isLodkbblf,
                                         &pSurfbdf, NULL);
                                         &pSurfbdf, NULL);
                                         &pSurfbdf, NULL);
                                         &pSurfbdf, NULL);
                                         &pSurfbdf, NULL);
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd RT Surfbdf: 0x%x ", pSurfbdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd RT Surfbdf: 0x%x ", pSurfbdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd RT Surfbdf: 0x%x ", pSurfbdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd RT Surfbdf: 0x%x ", pSurfbdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd RT Surfbdf: 0x%x ", pSurfbdf);
        if (pFormbt != NULL) {
        if (pFormbt != NULL) {
        if (pFormbt != NULL) {
        if (pFormbt != NULL) {
        if (pFormbt != NULL) {
            *pFormbt = formbt;
            *pFormbt = formbt;
            *pFormbt = formbt;
            *pFormbt = formbt;
            *pFormbt = formbt;
        }
        }
        }
        }
        }
        *ppSurfbdfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pSurfbdf);
        *ppSurfbdfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pSurfbdf);
        *ppSurfbdfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pSurfbdf);
        *ppSurfbdfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pSurfbdf);
        *ppSurfbdfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pSurfbdf);
        rfs = AddRfsourdf(*ppSurfbdfRfsourdf);
        rfs = AddRfsourdf(*ppSurfbdfRfsourdf);
        rfs = AddRfsourdf(*ppSurfbdfRfsourdf);
        rfs = AddRfsourdf(*ppSurfbdfRfsourdf);
        rfs = AddRfsourdf(*ppSurfbdfRfsourdf);
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfRTSurfbdf fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfRTSurfbdf fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfRTSurfbdf fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfRTSurfbdf fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfRTSurfbdf fbilfd");
        ppSurfbdfRfsourdf = NULL;
        ppSurfbdfRfsourdf = NULL;
        ppSurfbdfRfsourdf = NULL;
        ppSurfbdfRfsourdf = NULL;
        ppSurfbdfRfsourdf = NULL;
    }
    }
    }
    }
    }
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





// REMIND: tiis mftiod is durrfntly unusfd; donsidfr rfmoving it lbtfr...
// REMIND: tiis mftiod is durrfntly unusfd; donsidfr rfmoving it lbtfr...
// REMIND: tiis mftiod is durrfntly unusfd; donsidfr rfmoving it lbtfr...
// REMIND: tiis mftiod is durrfntly unusfd; donsidfr rfmoving it lbtfr...
// REMIND: tiis mftiod is durrfntly unusfd; donsidfr rfmoving it lbtfr...
HRESULT D3DRfsourdfMbnbgfr::CrfbtfOSPSurfbdf(UINT widti, UINT ifigit,
HRESULT D3DRfsourdfMbnbgfr::CrfbtfOSPSurfbdf(UINT widti, UINT ifigit,
HRESULT D3DRfsourdfMbnbgfr::CrfbtfOSPSurfbdf(UINT widti, UINT ifigit,
HRESULT D3DRfsourdfMbnbgfr::CrfbtfOSPSurfbdf(UINT widti, UINT ifigit,
HRESULT D3DRfsourdfMbnbgfr::CrfbtfOSPSurfbdf(UINT widti, UINT ifigit,
                                         D3DFORMAT fmt,
                                         D3DFORMAT fmt,
                                         D3DFORMAT fmt,
                                         D3DFORMAT fmt,
                                         D3DFORMAT fmt,
                                         D3DRfsourdf** ppSurfbdfRfsourdf/*out*/)
                                         D3DRfsourdf** ppSurfbdfRfsourdf/*out*/)
                                         D3DRfsourdf** ppSurfbdfRfsourdf/*out*/)
                                         D3DRfsourdf** ppSurfbdfRfsourdf/*out*/)
                                         D3DRfsourdf** ppSurfbdfRfsourdf/*out*/)
{
{
{
{
{
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;





    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfOSPSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfOSPSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfOSPSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfOSPSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfOSPSurfbdf");
    J2dTrbdfLn2(J2D_TRACE_VERBOSE, "  w=%d i=%d", widti, ifigit);
    J2dTrbdfLn2(J2D_TRACE_VERBOSE, "  w=%d i=%d", widti, ifigit);
    J2dTrbdfLn2(J2D_TRACE_VERBOSE, "  w=%d i=%d", widti, ifigit);
    J2dTrbdfLn2(J2D_TRACE_VERBOSE, "  w=%d i=%d", widti, ifigit);
    J2dTrbdfLn2(J2D_TRACE_VERBOSE, "  w=%d i=%d", widti, ifigit);





    if (pCtx == NULL || ppSurfbdfRfsourdf == NULL ||
    if (pCtx == NULL || ppSurfbdfRfsourdf == NULL ||
    if (pCtx == NULL || ppSurfbdfRfsourdf == NULL ||
    if (pCtx == NULL || ppSurfbdfRfsourdf == NULL ||
    if (pCtx == NULL || ppSurfbdfRfsourdf == NULL ||
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
    {
    {
    {
    {
    {
        rfturn E_FAIL;
        rfturn E_FAIL;
        rfturn E_FAIL;
        rfturn E_FAIL;
        rfturn E_FAIL;
    }
    }
    }
    }
    }
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
    if (FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl())) {
        rfturn rfs;
        rfturn rfs;
        rfturn rfs;
        rfturn rfs;
        rfturn rfs;
    }
    }
    }
    }
    }





    // sindf tif off-sdrffn plbin surfbdf is intfndfd to bf usfd witi
    // sindf tif off-sdrffn plbin surfbdf is intfndfd to bf usfd witi
    // sindf tif off-sdrffn plbin surfbdf is intfndfd to bf usfd witi
    // sindf tif off-sdrffn plbin surfbdf is intfndfd to bf usfd witi
    // sindf tif off-sdrffn plbin surfbdf is intfndfd to bf usfd witi
    // tif UpdbtfSurfbdf() mftiod, it is fssfntibl tibt it bf drfbtfd
    // tif UpdbtfSurfbdf() mftiod, it is fssfntibl tibt it bf drfbtfd
    // tif UpdbtfSurfbdf() mftiod, it is fssfntibl tibt it bf drfbtfd
    // tif UpdbtfSurfbdf() mftiod, it is fssfntibl tibt it bf drfbtfd
    // tif UpdbtfSurfbdf() mftiod, it is fssfntibl tibt it bf drfbtfd
    // in tif sbmf formbt bs tif dfstinbtion bnd bllodbtfd in tif
    // in tif sbmf formbt bs tif dfstinbtion bnd bllodbtfd in tif
    // in tif sbmf formbt bs tif dfstinbtion bnd bllodbtfd in tif
    // in tif sbmf formbt bs tif dfstinbtion bnd bllodbtfd in tif
    // in tif sbmf formbt bs tif dfstinbtion bnd bllodbtfd in tif
    // SYSTEMMEM pool (otifrwisf UpdbtfSurfbdf() will fbil)
    // SYSTEMMEM pool (otifrwisf UpdbtfSurfbdf() will fbil)
    // SYSTEMMEM pool (otifrwisf UpdbtfSurfbdf() will fbil)
    // SYSTEMMEM pool (otifrwisf UpdbtfSurfbdf() will fbil)
    // SYSTEMMEM pool (otifrwisf UpdbtfSurfbdf() will fbil)
    D3DFORMAT formbt;
    D3DFORMAT formbt;
    D3DFORMAT formbt;
    D3DFORMAT formbt;
    D3DFORMAT formbt;
    if (fmt == D3DFMT_UNKNOWN) {
    if (fmt == D3DFMT_UNKNOWN) {
    if (fmt == D3DFMT_UNKNOWN) {
    if (fmt == D3DFMT_UNKNOWN) {
    if (fmt == D3DFMT_UNKNOWN) {
        formbt = pCtx->GftPrfsfntbtionPbrbms()->BbdkBufffrFormbt;
        formbt = pCtx->GftPrfsfntbtionPbrbms()->BbdkBufffrFormbt;
        formbt = pCtx->GftPrfsfntbtionPbrbms()->BbdkBufffrFormbt;
        formbt = pCtx->GftPrfsfntbtionPbrbms()->BbdkBufffrFormbt;
        formbt = pCtx->GftPrfsfntbtionPbrbms()->BbdkBufffrFormbt;
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        formbt = fmt;
        formbt = fmt;
        formbt = fmt;
        formbt = fmt;
        formbt = fmt;
    }
    }
    }
    }
    }
    D3DPOOL pool = D3DPOOL_SYSTEMMEM;
    D3DPOOL pool = D3DPOOL_SYSTEMMEM;
    D3DPOOL pool = D3DPOOL_SYSTEMMEM;
    D3DPOOL pool = D3DPOOL_SYSTEMMEM;
    D3DPOOL pool = D3DPOOL_SYSTEMMEM;
    IDirfdt3DSurfbdf9 *pSurfbdf = NULL;
    IDirfdt3DSurfbdf9 *pSurfbdf = NULL;
    IDirfdt3DSurfbdf9 *pSurfbdf = NULL;
    IDirfdt3DSurfbdf9 *pSurfbdf = NULL;
    IDirfdt3DSurfbdf9 *pSurfbdf = NULL;





    rfs = pd3dDfvidf->CrfbtfOffsdrffnPlbinSurfbdf(widti, ifigit,
    rfs = pd3dDfvidf->CrfbtfOffsdrffnPlbinSurfbdf(widti, ifigit,
    rfs = pd3dDfvidf->CrfbtfOffsdrffnPlbinSurfbdf(widti, ifigit,
    rfs = pd3dDfvidf->CrfbtfOffsdrffnPlbinSurfbdf(widti, ifigit,
    rfs = pd3dDfvidf->CrfbtfOffsdrffnPlbinSurfbdf(widti, ifigit,
                                                  formbt, pool,
                                                  formbt, pool,
                                                  formbt, pool,
                                                  formbt, pool,
                                                  formbt, pool,
                                                  &pSurfbdf, NULL);
                                                  &pSurfbdf, NULL);
                                                  &pSurfbdf, NULL);
                                                  &pSurfbdf, NULL);
                                                  &pSurfbdf, NULL);
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd OSP Surfbdf: 0x%x ",pSurfbdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd OSP Surfbdf: 0x%x ",pSurfbdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd OSP Surfbdf: 0x%x ",pSurfbdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd OSP Surfbdf: 0x%x ",pSurfbdf);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE, "  drfbtfd OSP Surfbdf: 0x%x ",pSurfbdf);
        *ppSurfbdfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pSurfbdf);
        *ppSurfbdfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pSurfbdf);
        *ppSurfbdfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pSurfbdf);
        *ppSurfbdfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pSurfbdf);
        *ppSurfbdfRfsourdf = nfw D3DRfsourdf((IDirfdt3DRfsourdf9*)pSurfbdf);
        rfs = AddRfsourdf(*ppSurfbdfRfsourdf);
        rfs = AddRfsourdf(*ppSurfbdfRfsourdf);
        rfs = AddRfsourdf(*ppSurfbdfRfsourdf);
        rfs = AddRfsourdf(*ppSurfbdfRfsourdf);
        rfs = AddRfsourdf(*ppSurfbdfRfsourdf);
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfOSPSurfbdf fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfOSPSurfbdf fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfOSPSurfbdf fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfOSPSurfbdf fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfOSPSurfbdf fbilfd");
        ppSurfbdfRfsourdf = NULL;
        ppSurfbdfRfsourdf = NULL;
        ppSurfbdfRfsourdf = NULL;
        ppSurfbdfRfsourdf = NULL;
        ppSurfbdfRfsourdf = NULL;
    }
    }
    }
    }
    }
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::CrfbtfSwbpCibin(HWND iWnd, UINT numBufffrs,
D3DRfsourdfMbnbgfr::CrfbtfSwbpCibin(HWND iWnd, UINT numBufffrs,
D3DRfsourdfMbnbgfr::CrfbtfSwbpCibin(HWND iWnd, UINT numBufffrs,
D3DRfsourdfMbnbgfr::CrfbtfSwbpCibin(HWND iWnd, UINT numBufffrs,
D3DRfsourdfMbnbgfr::CrfbtfSwbpCibin(HWND iWnd, UINT numBufffrs,
                                    UINT widti, UINT ifigit,
                                    UINT widti, UINT ifigit,
                                    UINT widti, UINT ifigit,
                                    UINT widti, UINT ifigit,
                                    UINT widti, UINT ifigit,
                                    D3DSWAPEFFECT swbpEfffdt,
                                    D3DSWAPEFFECT swbpEfffdt,
                                    D3DSWAPEFFECT swbpEfffdt,
                                    D3DSWAPEFFECT swbpEfffdt,
                                    D3DSWAPEFFECT swbpEfffdt,
                                    UINT prfsfntbtionIntfrvbl,
                                    UINT prfsfntbtionIntfrvbl,
                                    UINT prfsfntbtionIntfrvbl,
                                    UINT prfsfntbtionIntfrvbl,
                                    UINT prfsfntbtionIntfrvbl,
                                    D3DRfsourdf ** ppSwbpCibinRfsourdf)
                                    D3DRfsourdf ** ppSwbpCibinRfsourdf)
                                    D3DRfsourdf ** ppSwbpCibinRfsourdf)
                                    D3DRfsourdf ** ppSwbpCibinRfsourdf)
                                    D3DRfsourdf ** ppSwbpCibinRfsourdf)
{
{
{
{
{
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DDfvidf9 *pd3dDfvidf;
    IDirfdt3DSwbpCibin9 *pSwbpCibin = NULL;
    IDirfdt3DSwbpCibin9 *pSwbpCibin = NULL;
    IDirfdt3DSwbpCibin9 *pSwbpCibin = NULL;
    IDirfdt3DSwbpCibin9 *pSwbpCibin = NULL;
    IDirfdt3DSwbpCibin9 *pSwbpCibin = NULL;
    D3DPRESENT_PARAMETERS nfwPbrbms, *durPbrbms;
    D3DPRESENT_PARAMETERS nfwPbrbms, *durPbrbms;
    D3DPRESENT_PARAMETERS nfwPbrbms, *durPbrbms;
    D3DPRESENT_PARAMETERS nfwPbrbms, *durPbrbms;
    D3DPRESENT_PARAMETERS nfwPbrbms, *durPbrbms;





    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfSwbpCibin");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfSwbpCibin");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfSwbpCibin");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfSwbpCibin");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::CrfbtfSwbpCibin");
    J2dTrbdfLn4(J2D_TRACE_VERBOSE, "  w=%d i=%d iwnd=%x numBufffrs=%d",
    J2dTrbdfLn4(J2D_TRACE_VERBOSE, "  w=%d i=%d iwnd=%x numBufffrs=%d",
    J2dTrbdfLn4(J2D_TRACE_VERBOSE, "  w=%d i=%d iwnd=%x numBufffrs=%d",
    J2dTrbdfLn4(J2D_TRACE_VERBOSE, "  w=%d i=%d iwnd=%x numBufffrs=%d",
    J2dTrbdfLn4(J2D_TRACE_VERBOSE, "  w=%d i=%d iwnd=%x numBufffrs=%d",
                widti, ifigit, iWnd, numBufffrs);
                widti, ifigit, iWnd, numBufffrs);
                widti, ifigit, iWnd, numBufffrs);
                widti, ifigit, iWnd, numBufffrs);
                widti, ifigit, iWnd, numBufffrs);





    if (pCtx == NULL || ppSwbpCibinRfsourdf == NULL ||
    if (pCtx == NULL || ppSwbpCibinRfsourdf == NULL ||
    if (pCtx == NULL || ppSwbpCibinRfsourdf == NULL ||
    if (pCtx == NULL || ppSwbpCibinRfsourdf == NULL ||
    if (pCtx == NULL || ppSwbpCibinRfsourdf == NULL ||
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
        (pd3dDfvidf = pCtx->Gft3DDfvidf()) == NULL)
    {
    {
    {
    {
    {
        rfturn E_FAIL;
        rfturn E_FAIL;
        rfturn E_FAIL;
        rfturn E_FAIL;
        rfturn E_FAIL;
    }
    }
    }
    }
    }
    RETURN_STATUS_IF_FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl());
    RETURN_STATUS_IF_FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl());
    RETURN_STATUS_IF_FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl());
    RETURN_STATUS_IF_FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl());
    RETURN_STATUS_IF_FAILED(rfs = pd3dDfvidf->TfstCoopfrbtivfLfvfl());





    durPbrbms = pCtx->GftPrfsfntbtionPbrbms();
    durPbrbms = pCtx->GftPrfsfntbtionPbrbms();
    durPbrbms = pCtx->GftPrfsfntbtionPbrbms();
    durPbrbms = pCtx->GftPrfsfntbtionPbrbms();
    durPbrbms = pCtx->GftPrfsfntbtionPbrbms();





    if (durPbrbms->Windowfd == FALSE) {
    if (durPbrbms->Windowfd == FALSE) {
    if (durPbrbms->Windowfd == FALSE) {
    if (durPbrbms->Windowfd == FALSE) {
    if (durPbrbms->Windowfd == FALSE) {
        // tifrf's b singlf swbp dibin in full-sdrffn modf, usf it if
        // tifrf's b singlf swbp dibin in full-sdrffn modf, usf it if
        // tifrf's b singlf swbp dibin in full-sdrffn modf, usf it if
        // tifrf's b singlf swbp dibin in full-sdrffn modf, usf it if
        // tifrf's b singlf swbp dibin in full-sdrffn modf, usf it if
        // it fits our pbrbmftfrs, rfsft tif dfvidf otifrwisf
        // it fits our pbrbmftfrs, rfsft tif dfvidf otifrwisf
        // it fits our pbrbmftfrs, rfsft tif dfvidf otifrwisf
        // it fits our pbrbmftfrs, rfsft tif dfvidf otifrwisf
        // it fits our pbrbmftfrs, rfsft tif dfvidf otifrwisf
        if (durPbrbms->BbdkBufffrCount != numBufffrs ||
        if (durPbrbms->BbdkBufffrCount != numBufffrs ||
        if (durPbrbms->BbdkBufffrCount != numBufffrs ||
        if (durPbrbms->BbdkBufffrCount != numBufffrs ||
        if (durPbrbms->BbdkBufffrCount != numBufffrs ||
            durPbrbms->SwbpEfffdt != swbpEfffdt ||
            durPbrbms->SwbpEfffdt != swbpEfffdt ||
            durPbrbms->SwbpEfffdt != swbpEfffdt ||
            durPbrbms->SwbpEfffdt != swbpEfffdt ||
            durPbrbms->SwbpEfffdt != swbpEfffdt ||
            durPbrbms->PrfsfntbtionIntfrvbl != prfsfntbtionIntfrvbl)
            durPbrbms->PrfsfntbtionIntfrvbl != prfsfntbtionIntfrvbl)
            durPbrbms->PrfsfntbtionIntfrvbl != prfsfntbtionIntfrvbl)
            durPbrbms->PrfsfntbtionIntfrvbl != prfsfntbtionIntfrvbl)
            durPbrbms->PrfsfntbtionIntfrvbl != prfsfntbtionIntfrvbl)
        {
        {
        {
        {
        {
            nfwPbrbms = *durPbrbms;
            nfwPbrbms = *durPbrbms;
            nfwPbrbms = *durPbrbms;
            nfwPbrbms = *durPbrbms;
            nfwPbrbms = *durPbrbms;
            nfwPbrbms.BbdkBufffrCount = numBufffrs;
            nfwPbrbms.BbdkBufffrCount = numBufffrs;
            nfwPbrbms.BbdkBufffrCount = numBufffrs;
            nfwPbrbms.BbdkBufffrCount = numBufffrs;
            nfwPbrbms.BbdkBufffrCount = numBufffrs;
            nfwPbrbms.SwbpEfffdt = swbpEfffdt;
            nfwPbrbms.SwbpEfffdt = swbpEfffdt;
            nfwPbrbms.SwbpEfffdt = swbpEfffdt;
            nfwPbrbms.SwbpEfffdt = swbpEfffdt;
            nfwPbrbms.SwbpEfffdt = swbpEfffdt;
            nfwPbrbms.PrfsfntbtionIntfrvbl = prfsfntbtionIntfrvbl;
            nfwPbrbms.PrfsfntbtionIntfrvbl = prfsfntbtionIntfrvbl;
            nfwPbrbms.PrfsfntbtionIntfrvbl = prfsfntbtionIntfrvbl;
            nfwPbrbms.PrfsfntbtionIntfrvbl = prfsfntbtionIntfrvbl;
            nfwPbrbms.PrfsfntbtionIntfrvbl = prfsfntbtionIntfrvbl;





            rfs = pCtx->ConfigurfContfxt(&nfwPbrbms);
            rfs = pCtx->ConfigurfContfxt(&nfwPbrbms);
            rfs = pCtx->ConfigurfContfxt(&nfwPbrbms);
            rfs = pCtx->ConfigurfContfxt(&nfwPbrbms);
            rfs = pCtx->ConfigurfContfxt(&nfwPbrbms);
            RETURN_STATUS_IF_FAILED(rfs);
            RETURN_STATUS_IF_FAILED(rfs);
            RETURN_STATUS_IF_FAILED(rfs);
            RETURN_STATUS_IF_FAILED(rfs);
            RETURN_STATUS_IF_FAILED(rfs);
            // tiis rfsft will not ibvf rflfbsfd tif dfvidf, so our pd3dDfvidf
            // tiis rfsft will not ibvf rflfbsfd tif dfvidf, so our pd3dDfvidf
            // tiis rfsft will not ibvf rflfbsfd tif dfvidf, so our pd3dDfvidf
            // tiis rfsft will not ibvf rflfbsfd tif dfvidf, so our pd3dDfvidf
            // tiis rfsft will not ibvf rflfbsfd tif dfvidf, so our pd3dDfvidf
            // is still vblid, but to bf on b sbff sidf, rfsft it
            // is still vblid, but to bf on b sbff sidf, rfsft it
            // is still vblid, but to bf on b sbff sidf, rfsft it
            // is still vblid, but to bf on b sbff sidf, rfsft it
            // is still vblid, but to bf on b sbff sidf, rfsft it
            pd3dDfvidf = pCtx->Gft3DDfvidf();
            pd3dDfvidf = pCtx->Gft3DDfvidf();
            pd3dDfvidf = pCtx->Gft3DDfvidf();
            pd3dDfvidf = pCtx->Gft3DDfvidf();
            pd3dDfvidf = pCtx->Gft3DDfvidf();
        }
        }
        }
        }
        }
        rfs = pd3dDfvidf->GftSwbpCibin(0, &pSwbpCibin);
        rfs = pd3dDfvidf->GftSwbpCibin(0, &pSwbpCibin);
        rfs = pd3dDfvidf->GftSwbpCibin(0, &pSwbpCibin);
        rfs = pd3dDfvidf->GftSwbpCibin(0, &pSwbpCibin);
        rfs = pd3dDfvidf->GftSwbpCibin(0, &pSwbpCibin);
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        ZfroMfmory(&nfwPbrbms, sizfof(D3DPRESENT_PARAMETERS));
        ZfroMfmory(&nfwPbrbms, sizfof(D3DPRESENT_PARAMETERS));
        ZfroMfmory(&nfwPbrbms, sizfof(D3DPRESENT_PARAMETERS));
        ZfroMfmory(&nfwPbrbms, sizfof(D3DPRESENT_PARAMETERS));
        ZfroMfmory(&nfwPbrbms, sizfof(D3DPRESENT_PARAMETERS));
        nfwPbrbms.BbdkBufffrWidti = widti;
        nfwPbrbms.BbdkBufffrWidti = widti;
        nfwPbrbms.BbdkBufffrWidti = widti;
        nfwPbrbms.BbdkBufffrWidti = widti;
        nfwPbrbms.BbdkBufffrWidti = widti;
        nfwPbrbms.BbdkBufffrHfigit = ifigit;
        nfwPbrbms.BbdkBufffrHfigit = ifigit;
        nfwPbrbms.BbdkBufffrHfigit = ifigit;
        nfwPbrbms.BbdkBufffrHfigit = ifigit;
        nfwPbrbms.BbdkBufffrHfigit = ifigit;
        nfwPbrbms.iDfvidfWindow = iWnd;
        nfwPbrbms.iDfvidfWindow = iWnd;
        nfwPbrbms.iDfvidfWindow = iWnd;
        nfwPbrbms.iDfvidfWindow = iWnd;
        nfwPbrbms.iDfvidfWindow = iWnd;
        nfwPbrbms.Windowfd = TRUE;
        nfwPbrbms.Windowfd = TRUE;
        nfwPbrbms.Windowfd = TRUE;
        nfwPbrbms.Windowfd = TRUE;
        nfwPbrbms.Windowfd = TRUE;
        nfwPbrbms.BbdkBufffrCount = numBufffrs;
        nfwPbrbms.BbdkBufffrCount = numBufffrs;
        nfwPbrbms.BbdkBufffrCount = numBufffrs;
        nfwPbrbms.BbdkBufffrCount = numBufffrs;
        nfwPbrbms.BbdkBufffrCount = numBufffrs;
        nfwPbrbms.SwbpEfffdt = swbpEfffdt;
        nfwPbrbms.SwbpEfffdt = swbpEfffdt;
        nfwPbrbms.SwbpEfffdt = swbpEfffdt;
        nfwPbrbms.SwbpEfffdt = swbpEfffdt;
        nfwPbrbms.SwbpEfffdt = swbpEfffdt;
        nfwPbrbms.PrfsfntbtionIntfrvbl = prfsfntbtionIntfrvbl;
        nfwPbrbms.PrfsfntbtionIntfrvbl = prfsfntbtionIntfrvbl;
        nfwPbrbms.PrfsfntbtionIntfrvbl = prfsfntbtionIntfrvbl;
        nfwPbrbms.PrfsfntbtionIntfrvbl = prfsfntbtionIntfrvbl;
        nfwPbrbms.PrfsfntbtionIntfrvbl = prfsfntbtionIntfrvbl;





        rfs = pd3dDfvidf->CrfbtfAdditionblSwbpCibin(&nfwPbrbms, &pSwbpCibin);
        rfs = pd3dDfvidf->CrfbtfAdditionblSwbpCibin(&nfwPbrbms, &pSwbpCibin);
        rfs = pd3dDfvidf->CrfbtfAdditionblSwbpCibin(&nfwPbrbms, &pSwbpCibin);
        rfs = pd3dDfvidf->CrfbtfAdditionblSwbpCibin(&nfwPbrbms, &pSwbpCibin);
        rfs = pd3dDfvidf->CrfbtfAdditionblSwbpCibin(&nfwPbrbms, &pSwbpCibin);
    }
    }
    }
    }
    }





    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
        J2dTrbdfLn1(J2D_TRACE_VERBOSE,"  drfbtfd swbp dibin: 0x%x ",pSwbpCibin);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE,"  drfbtfd swbp dibin: 0x%x ",pSwbpCibin);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE,"  drfbtfd swbp dibin: 0x%x ",pSwbpCibin);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE,"  drfbtfd swbp dibin: 0x%x ",pSwbpCibin);
        J2dTrbdfLn1(J2D_TRACE_VERBOSE,"  drfbtfd swbp dibin: 0x%x ",pSwbpCibin);
        *ppSwbpCibinRfsourdf = nfw D3DRfsourdf(pSwbpCibin);
        *ppSwbpCibinRfsourdf = nfw D3DRfsourdf(pSwbpCibin);
        *ppSwbpCibinRfsourdf = nfw D3DRfsourdf(pSwbpCibin);
        *ppSwbpCibinRfsourdf = nfw D3DRfsourdf(pSwbpCibin);
        *ppSwbpCibinRfsourdf = nfw D3DRfsourdf(pSwbpCibin);
        rfs = AddRfsourdf(*ppSwbpCibinRfsourdf);
        rfs = AddRfsourdf(*ppSwbpCibinRfsourdf);
        rfs = AddRfsourdf(*ppSwbpCibinRfsourdf);
        rfs = AddRfsourdf(*ppSwbpCibinRfsourdf);
        rfs = AddRfsourdf(*ppSwbpCibinRfsourdf);
    } flsf {
    } flsf {
    } flsf {
    } flsf {
    } flsf {
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfSwbpCibin fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfSwbpCibin fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfSwbpCibin fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfSwbpCibin fbilfd");
        DfbugPrintD3DError(rfs, "D3DRM::CrfbtfSwbpCibin fbilfd");
        *ppSwbpCibinRfsourdf = NULL;
        *ppSwbpCibinRfsourdf = NULL;
        *ppSwbpCibinRfsourdf = NULL;
        *ppSwbpCibinRfsourdf = NULL;
        *ppSwbpCibinRfsourdf = NULL;
    }
    }
    }
    }
    }
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::GftMbskTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftMbskTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftMbskTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftMbskTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftMbskTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftMbskTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftMbskTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftMbskTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftMbskTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftMbskTfxturf");





    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);





    D3DFORMAT formbt = pCtx->IsTfxturfFormbtSupportfd(D3DFMT_A8) ?
    D3DFORMAT formbt = pCtx->IsTfxturfFormbtSupportfd(D3DFMT_A8) ?
    D3DFORMAT formbt = pCtx->IsTfxturfFormbtSupportfd(D3DFMT_A8) ?
    D3DFORMAT formbt = pCtx->IsTfxturfFormbtSupportfd(D3DFMT_A8) ?
    D3DFORMAT formbt = pCtx->IsTfxturfFormbtSupportfd(D3DFMT_A8) ?
        D3DFMT_A8 : D3DFMT_A8R8G8B8;
        D3DFMT_A8 : D3DFMT_A8R8G8B8;
        D3DFMT_A8 : D3DFMT_A8R8G8B8;
        D3DFMT_A8 : D3DFMT_A8R8G8B8;
        D3DFMT_A8 : D3DFMT_A8R8G8B8;





    jboolfbn nffdsInit = (pMbskTfxturf == NULL);
    jboolfbn nffdsInit = (pMbskTfxturf == NULL);
    jboolfbn nffdsInit = (pMbskTfxturf == NULL);
    jboolfbn nffdsInit = (pMbskTfxturf == NULL);
    jboolfbn nffdsInit = (pMbskTfxturf == NULL);
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    HRESULT rfs;
    if (FAILED(rfs =
    if (FAILED(rfs =
    if (FAILED(rfs =
    if (FAILED(rfs =
    if (FAILED(rfs =
        GftStodkTfxturfRfsourdf(D3D_MASK_CACHE_WIDTH_IN_TEXELS,
        GftStodkTfxturfRfsourdf(D3D_MASK_CACHE_WIDTH_IN_TEXELS,
        GftStodkTfxturfRfsourdf(D3D_MASK_CACHE_WIDTH_IN_TEXELS,
        GftStodkTfxturfRfsourdf(D3D_MASK_CACHE_WIDTH_IN_TEXELS,
        GftStodkTfxturfRfsourdf(D3D_MASK_CACHE_WIDTH_IN_TEXELS,
                                D3D_MASK_CACHE_HEIGHT_IN_TEXELS,
                                D3D_MASK_CACHE_HEIGHT_IN_TEXELS,
                                D3D_MASK_CACHE_HEIGHT_IN_TEXELS,
                                D3D_MASK_CACHE_HEIGHT_IN_TEXELS,
                                D3D_MASK_CACHE_HEIGHT_IN_TEXELS,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, &formbt, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, &formbt, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, &formbt, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, &formbt, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, &formbt, 0,
                                &pMbskTfxturf)))
                                &pMbskTfxturf)))
                                &pMbskTfxturf)))
                                &pMbskTfxturf)))
                                &pMbskTfxturf)))
    {
    {
    {
    {
    {
        rfturn rfs;
        rfturn rfs;
        rfturn rfs;
        rfturn rfs;
        rfturn rfs;
    }
    }
    }
    }
    }





    if (nffdsInit) {
    if (nffdsInit) {
    if (nffdsInit) {
    if (nffdsInit) {
    if (nffdsInit) {
        // init spfdibl fully opbquf tilf in tif uppfr-rigit dornfr of
        // init spfdibl fully opbquf tilf in tif uppfr-rigit dornfr of
        // init spfdibl fully opbquf tilf in tif uppfr-rigit dornfr of
        // init spfdibl fully opbquf tilf in tif uppfr-rigit dornfr of
        // init spfdibl fully opbquf tilf in tif uppfr-rigit dornfr of
        // tif mbsk dbdif tfxturf
        // tif mbsk dbdif tfxturf
        // tif mbsk dbdif tfxturf
        // tif mbsk dbdif tfxturf
        // tif mbsk dbdif tfxturf
        jubytf bllOnfs[D3D_MASK_CACHE_TILE_SIZE];
        jubytf bllOnfs[D3D_MASK_CACHE_TILE_SIZE];
        jubytf bllOnfs[D3D_MASK_CACHE_TILE_SIZE];
        jubytf bllOnfs[D3D_MASK_CACHE_TILE_SIZE];
        jubytf bllOnfs[D3D_MASK_CACHE_TILE_SIZE];
        mfmsft(bllOnfs, 0xff, D3D_MASK_CACHE_TILE_SIZE);
        mfmsft(bllOnfs, 0xff, D3D_MASK_CACHE_TILE_SIZE);
        mfmsft(bllOnfs, 0xff, D3D_MASK_CACHE_TILE_SIZE);
        mfmsft(bllOnfs, 0xff, D3D_MASK_CACHE_TILE_SIZE);
        mfmsft(bllOnfs, 0xff, D3D_MASK_CACHE_TILE_SIZE);
        if (FAILED(rfs = pCtx->UplobdTilfToTfxturf(
        if (FAILED(rfs = pCtx->UplobdTilfToTfxturf(
        if (FAILED(rfs = pCtx->UplobdTilfToTfxturf(
        if (FAILED(rfs = pCtx->UplobdTilfToTfxturf(
        if (FAILED(rfs = pCtx->UplobdTilfToTfxturf(
                                         pMbskTfxturf,
                                         pMbskTfxturf,
                                         pMbskTfxturf,
                                         pMbskTfxturf,
                                         pMbskTfxturf,
                                         bllOnfs,
                                         bllOnfs,
                                         bllOnfs,
                                         bllOnfs,
                                         bllOnfs,
                                         D3D_MASK_CACHE_SPECIAL_TILE_X,
                                         D3D_MASK_CACHE_SPECIAL_TILE_X,
                                         D3D_MASK_CACHE_SPECIAL_TILE_X,
                                         D3D_MASK_CACHE_SPECIAL_TILE_X,
                                         D3D_MASK_CACHE_SPECIAL_TILE_X,
                                         D3D_MASK_CACHE_SPECIAL_TILE_Y,
                                         D3D_MASK_CACHE_SPECIAL_TILE_Y,
                                         D3D_MASK_CACHE_SPECIAL_TILE_Y,
                                         D3D_MASK_CACHE_SPECIAL_TILE_Y,
                                         D3D_MASK_CACHE_SPECIAL_TILE_Y,
                                         0, 0,
                                         0, 0,
                                         0, 0,
                                         0, 0,
                                         0, 0,
                                         D3D_MASK_CACHE_TILE_WIDTH,
                                         D3D_MASK_CACHE_TILE_WIDTH,
                                         D3D_MASK_CACHE_TILE_WIDTH,
                                         D3D_MASK_CACHE_TILE_WIDTH,
                                         D3D_MASK_CACHE_TILE_WIDTH,
                                         D3D_MASK_CACHE_TILE_HEIGHT,
                                         D3D_MASK_CACHE_TILE_HEIGHT,
                                         D3D_MASK_CACHE_TILE_HEIGHT,
                                         D3D_MASK_CACHE_TILE_HEIGHT,
                                         D3D_MASK_CACHE_TILE_HEIGHT,
                                         D3D_MASK_CACHE_TILE_WIDTH,
                                         D3D_MASK_CACHE_TILE_WIDTH,
                                         D3D_MASK_CACHE_TILE_WIDTH,
                                         D3D_MASK_CACHE_TILE_WIDTH,
                                         D3D_MASK_CACHE_TILE_WIDTH,
                                         TILEFMT_1BYTE_ALPHA)))
                                         TILEFMT_1BYTE_ALPHA)))
                                         TILEFMT_1BYTE_ALPHA)))
                                         TILEFMT_1BYTE_ALPHA)))
                                         TILEFMT_1BYTE_ALPHA)))
        {
        {
        {
        {
        {
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
        }
        }
        }
        }
        }
    }
    }
    }
    }
    }





    *ppTfxturfRfsourdf = pMbskTfxturf;
    *ppTfxturfRfsourdf = pMbskTfxturf;
    *ppTfxturfRfsourdf = pMbskTfxturf;
    *ppTfxturfRfsourdf = pMbskTfxturf;
    *ppTfxturfRfsourdf = pMbskTfxturf;





    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::GftBlitTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftBlitTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftBlitTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftBlitTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftBlitTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitTfxturf");





    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);





    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
        GftStodkTfxturfRfsourdf(D3DC_BLIT_TILE_SIZE, D3DC_BLIT_TILE_SIZE,
        GftStodkTfxturfRfsourdf(D3DC_BLIT_TILE_SIZE, D3DC_BLIT_TILE_SIZE,
        GftStodkTfxturfRfsourdf(D3DC_BLIT_TILE_SIZE, D3DC_BLIT_TILE_SIZE,
        GftStodkTfxturfRfsourdf(D3DC_BLIT_TILE_SIZE, D3DC_BLIT_TILE_SIZE,
        GftStodkTfxturfRfsourdf(D3DC_BLIT_TILE_SIZE, D3DC_BLIT_TILE_SIZE,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL,
                                D3DUSAGE_DYNAMIC,
                                D3DUSAGE_DYNAMIC,
                                D3DUSAGE_DYNAMIC,
                                D3DUSAGE_DYNAMIC,
                                D3DUSAGE_DYNAMIC,
                                &pBlitTfxturf);
                                &pBlitTfxturf);
                                &pBlitTfxturf);
                                &pBlitTfxturf);
                                &pBlitTfxturf);
    *ppTfxturfRfsourdf = pBlitTfxturf;
    *ppTfxturfRfsourdf = pBlitTfxturf;
    *ppTfxturfRfsourdf = pBlitTfxturf;
    *ppTfxturfRfsourdf = pBlitTfxturf;
    *ppTfxturfRfsourdf = pBlitTfxturf;





    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::GftGrbdifntTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftGrbdifntTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftGrbdifntTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftGrbdifntTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftGrbdifntTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftGrbdifntTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftGrbdifntTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftGrbdifntTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftGrbdifntTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftGrbdifntTfxturf");





    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);





    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
        GftStodkTfxturfRfsourdf(2, 1,
        GftStodkTfxturfRfsourdf(2, 1,
        GftStodkTfxturfRfsourdf(2, 1,
        GftStodkTfxturfRfsourdf(2, 1,
        GftStodkTfxturfRfsourdf(2, 1,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL, 0,
                                &pGrbdifntTfxturf);
                                &pGrbdifntTfxturf);
                                &pGrbdifntTfxturf);
                                &pGrbdifntTfxturf);
                                &pGrbdifntTfxturf);
    *ppTfxturfRfsourdf = pGrbdifntTfxturf;
    *ppTfxturfRfsourdf = pGrbdifntTfxturf;
    *ppTfxturfRfsourdf = pGrbdifntTfxturf;
    *ppTfxturfRfsourdf = pGrbdifntTfxturf;
    *ppTfxturfRfsourdf = pGrbdifntTfxturf;





    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::GftMultiGrbdifntTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftMultiGrbdifntTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftMultiGrbdifntTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftMultiGrbdifntTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftMultiGrbdifntTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftMultiGrbdifntTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftMultiGrbdifntTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftMultiGrbdifntTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftMultiGrbdifntTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftMultiGrbdifntTfxturf");





    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);





    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
        GftStodkTfxturfRfsourdf(MAX_MULTI_GRADIENT_COLORS, 1,
        GftStodkTfxturfRfsourdf(MAX_MULTI_GRADIENT_COLORS, 1,
        GftStodkTfxturfRfsourdf(MAX_MULTI_GRADIENT_COLORS, 1,
        GftStodkTfxturfRfsourdf(MAX_MULTI_GRADIENT_COLORS, 1,
        GftStodkTfxturfRfsourdf(MAX_MULTI_GRADIENT_COLORS, 1,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, NULL, 0,
                                &pMultiGrbdifntTfxturf);
                                &pMultiGrbdifntTfxturf);
                                &pMultiGrbdifntTfxturf);
                                &pMultiGrbdifntTfxturf);
                                &pMultiGrbdifntTfxturf);
    *ppTfxturfRfsourdf = pMultiGrbdifntTfxturf;
    *ppTfxturfRfsourdf = pMultiGrbdifntTfxturf;
    *ppTfxturfRfsourdf = pMultiGrbdifntTfxturf;
    *ppTfxturfRfsourdf = pMultiGrbdifntTfxturf;
    *ppTfxturfRfsourdf = pMultiGrbdifntTfxturf;





    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::GftLookupOpLutTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftLookupOpLutTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftLookupOpLutTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftLookupOpLutTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
D3DRfsourdfMbnbgfr::GftLookupOpLutTfxturf(D3DRfsourdf **ppTfxturfRfsourdf)
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftLookupOpTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftLookupOpTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftLookupOpTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftLookupOpTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftLookupOpTfxturf");





    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);





    D3DFORMAT formbt = D3DFMT_L16;
    D3DFORMAT formbt = D3DFMT_L16;
    D3DFORMAT formbt = D3DFMT_L16;
    D3DFORMAT formbt = D3DFMT_L16;
    D3DFORMAT formbt = D3DFMT_L16;
    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
        GftStodkTfxturfRfsourdf(256, 4,
        GftStodkTfxturfRfsourdf(256, 4,
        GftStodkTfxturfRfsourdf(256, 4,
        GftStodkTfxturfRfsourdf(256, 4,
        GftStodkTfxturfRfsourdf(256, 4,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, &formbt, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, &formbt, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, &formbt, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, &formbt, 0,
                                FALSE/*isRTT*/, FALSE/*isOpbquf*/, &formbt, 0,
                                &pLookupOpLutTfxturf);
                                &pLookupOpLutTfxturf);
                                &pLookupOpLutTfxturf);
                                &pLookupOpLutTfxturf);
                                &pLookupOpLutTfxturf);
    *ppTfxturfRfsourdf = pLookupOpLutTfxturf;
    *ppTfxturfRfsourdf = pLookupOpLutTfxturf;
    *ppTfxturfRfsourdf = pLookupOpLutTfxturf;
    *ppTfxturfRfsourdf = pLookupOpLutTfxturf;
    *ppTfxturfRfsourdf = pLookupOpLutTfxturf;





    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::GftBlitRTTfxturf(UINT widti, UINT ifigit, D3DFORMAT formbt,
D3DRfsourdfMbnbgfr::GftBlitRTTfxturf(UINT widti, UINT ifigit, D3DFORMAT formbt,
D3DRfsourdfMbnbgfr::GftBlitRTTfxturf(UINT widti, UINT ifigit, D3DFORMAT formbt,
D3DRfsourdfMbnbgfr::GftBlitRTTfxturf(UINT widti, UINT ifigit, D3DFORMAT formbt,
D3DRfsourdfMbnbgfr::GftBlitRTTfxturf(UINT widti, UINT ifigit, D3DFORMAT formbt,
                                     D3DRfsourdf **ppTfxturfRfsourdf)
                                     D3DRfsourdf **ppTfxturfRfsourdf)
                                     D3DRfsourdf **ppTfxturfRfsourdf)
                                     D3DRfsourdf **ppTfxturfRfsourdf)
                                     D3DRfsourdf **ppTfxturfRfsourdf)
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitRTTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitRTTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitRTTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitRTTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitRTTfxturf");
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);





    HRESULT rfs = GftStodkTfxturfRfsourdf(widti, ifigit,
    HRESULT rfs = GftStodkTfxturfRfsourdf(widti, ifigit,
    HRESULT rfs = GftStodkTfxturfRfsourdf(widti, ifigit,
    HRESULT rfs = GftStodkTfxturfRfsourdf(widti, ifigit,
    HRESULT rfs = GftStodkTfxturfRfsourdf(widti, ifigit,
                                          TRUE/*isRTT*/, FALSE/*isOpbquf*/,
                                          TRUE/*isRTT*/, FALSE/*isOpbquf*/,
                                          TRUE/*isRTT*/, FALSE/*isOpbquf*/,
                                          TRUE/*isRTT*/, FALSE/*isOpbquf*/,
                                          TRUE/*isRTT*/, FALSE/*isOpbquf*/,
                                          &formbt, 0,
                                          &formbt, 0,
                                          &formbt, 0,
                                          &formbt, 0,
                                          &formbt, 0,
                                          &pBlitRTTfxturf);
                                          &pBlitRTTfxturf);
                                          &pBlitRTTfxturf);
                                          &pBlitRTTfxturf);
                                          &pBlitRTTfxturf);
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
        D3DSURFACE_DESC *pDfsd = pBlitRTTfxturf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pBlitRTTfxturf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pBlitRTTfxturf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pBlitRTTfxturf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pBlitRTTfxturf->GftDfsd();
        D3DCAPS9 *pDfvCbps = pCtx->GftDfvidfCbps();
        D3DCAPS9 *pDfvCbps = pCtx->GftDfvidfCbps();
        D3DCAPS9 *pDfvCbps = pCtx->GftDfvidfCbps();
        D3DCAPS9 *pDfvCbps = pCtx->GftDfvidfCbps();
        D3DCAPS9 *pDfvCbps = pCtx->GftDfvidfCbps();
        if ((widti <= pDfsd->Widti && ifigit <= pDfsd->Hfigit) &&
        if ((widti <= pDfsd->Widti && ifigit <= pDfsd->Hfigit) &&
        if ((widti <= pDfsd->Widti && ifigit <= pDfsd->Hfigit) &&
        if ((widti <= pDfsd->Widti && ifigit <= pDfsd->Hfigit) &&
        if ((widti <= pDfsd->Widti && ifigit <= pDfsd->Hfigit) &&
            (formbt == pDfsd->Formbt ||
            (formbt == pDfsd->Formbt ||
            (formbt == pDfsd->Formbt ||
            (formbt == pDfsd->Formbt ||
            (formbt == pDfsd->Formbt ||
             SUCCEEDED(pCtx->Gft3DObjfdt()->CifdkDfvidfFormbtConvfrsion(
             SUCCEEDED(pCtx->Gft3DObjfdt()->CifdkDfvidfFormbtConvfrsion(
             SUCCEEDED(pCtx->Gft3DObjfdt()->CifdkDfvidfFormbtConvfrsion(
             SUCCEEDED(pCtx->Gft3DObjfdt()->CifdkDfvidfFormbtConvfrsion(
             SUCCEEDED(pCtx->Gft3DObjfdt()->CifdkDfvidfFormbtConvfrsion(
                       pDfvCbps->AdbptfrOrdinbl,
                       pDfvCbps->AdbptfrOrdinbl,
                       pDfvCbps->AdbptfrOrdinbl,
                       pDfvCbps->AdbptfrOrdinbl,
                       pDfvCbps->AdbptfrOrdinbl,
                       pDfvCbps->DfvidfTypf, formbt, pDfsd->Formbt))))
                       pDfvCbps->DfvidfTypf, formbt, pDfsd->Formbt))))
                       pDfvCbps->DfvidfTypf, formbt, pDfsd->Formbt))))
                       pDfvCbps->DfvidfTypf, formbt, pDfsd->Formbt))))
                       pDfvCbps->DfvidfTypf, formbt, pDfsd->Formbt))))
        {
        {
        {
        {
        {
            *ppTfxturfRfsourdf = pBlitRTTfxturf;
            *ppTfxturfRfsourdf = pBlitRTTfxturf;
            *ppTfxturfRfsourdf = pBlitRTTfxturf;
            *ppTfxturfRfsourdf = pBlitRTTfxturf;
            *ppTfxturfRfsourdf = pBlitRTTfxturf;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
        }
        }
        }
        }
        }
        // durrfnt tfxturf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt tfxturf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt tfxturf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt tfxturf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt tfxturf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        RflfbsfRfsourdf(pBlitRTTfxturf);
        RflfbsfRfsourdf(pBlitRTTfxturf);
        RflfbsfRfsourdf(pBlitRTTfxturf);
        RflfbsfRfsourdf(pBlitRTTfxturf);
        RflfbsfRfsourdf(pBlitRTTfxturf);
        pBlitRTTfxturf = NULL;
        pBlitRTTfxturf = NULL;
        pBlitRTTfxturf = NULL;
        pBlitRTTfxturf = NULL;
        pBlitRTTfxturf = NULL;
    }
    }
    }
    }
    }
    if (widti  < D3DC_BLIT_TILE_SIZE) widti  = D3DC_BLIT_TILE_SIZE;
    if (widti  < D3DC_BLIT_TILE_SIZE) widti  = D3DC_BLIT_TILE_SIZE;
    if (widti  < D3DC_BLIT_TILE_SIZE) widti  = D3DC_BLIT_TILE_SIZE;
    if (widti  < D3DC_BLIT_TILE_SIZE) widti  = D3DC_BLIT_TILE_SIZE;
    if (widti  < D3DC_BLIT_TILE_SIZE) widti  = D3DC_BLIT_TILE_SIZE;
    if (ifigit < D3DC_BLIT_TILE_SIZE) ifigit = D3DC_BLIT_TILE_SIZE;
    if (ifigit < D3DC_BLIT_TILE_SIZE) ifigit = D3DC_BLIT_TILE_SIZE;
    if (ifigit < D3DC_BLIT_TILE_SIZE) ifigit = D3DC_BLIT_TILE_SIZE;
    if (ifigit < D3DC_BLIT_TILE_SIZE) ifigit = D3DC_BLIT_TILE_SIZE;
    if (ifigit < D3DC_BLIT_TILE_SIZE) ifigit = D3DC_BLIT_TILE_SIZE;





    rfs = CrfbtfTfxturf(widti, ifigit, TRUE, FALSE, &formbt, 0,&pBlitRTTfxturf);
    rfs = CrfbtfTfxturf(widti, ifigit, TRUE, FALSE, &formbt, 0,&pBlitRTTfxturf);
    rfs = CrfbtfTfxturf(widti, ifigit, TRUE, FALSE, &formbt, 0,&pBlitRTTfxturf);
    rfs = CrfbtfTfxturf(widti, ifigit, TRUE, FALSE, &formbt, 0,&pBlitRTTfxturf);
    rfs = CrfbtfTfxturf(widti, ifigit, TRUE, FALSE, &formbt, 0,&pBlitRTTfxturf);
    *ppTfxturfRfsourdf = pBlitRTTfxturf;
    *ppTfxturfRfsourdf = pBlitRTTfxturf;
    *ppTfxturfRfsourdf = pBlitRTTfxturf;
    *ppTfxturfRfsourdf = pBlitRTTfxturf;
    *ppTfxturfRfsourdf = pBlitRTTfxturf;





    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::GftBlitOSPSurfbdf(UINT widti, UINT ifigit, D3DFORMAT fmt,
D3DRfsourdfMbnbgfr::GftBlitOSPSurfbdf(UINT widti, UINT ifigit, D3DFORMAT fmt,
D3DRfsourdfMbnbgfr::GftBlitOSPSurfbdf(UINT widti, UINT ifigit, D3DFORMAT fmt,
D3DRfsourdfMbnbgfr::GftBlitOSPSurfbdf(UINT widti, UINT ifigit, D3DFORMAT fmt,
D3DRfsourdfMbnbgfr::GftBlitOSPSurfbdf(UINT widti, UINT ifigit, D3DFORMAT fmt,
                                      D3DRfsourdf **ppSurfbdfRfsourdf)
                                      D3DRfsourdf **ppSurfbdfRfsourdf)
                                      D3DRfsourdf **ppSurfbdfRfsourdf)
                                      D3DRfsourdf **ppSurfbdfRfsourdf)
                                      D3DRfsourdf **ppSurfbdfRfsourdf)
{
{
{
{
{
    HRESULT rfs = S_OK;
    HRESULT rfs = S_OK;
    HRESULT rfs = S_OK;
    HRESULT rfs = S_OK;
    HRESULT rfs = S_OK;





    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitOSPSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitOSPSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitOSPSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitOSPSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftBlitOSPSurfbdf");
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(ppSurfbdfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppSurfbdfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppSurfbdfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppSurfbdfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppSurfbdfRfsourdf, E_FAIL);





    if (pBlitOSPSurfbdf != NULL) {
    if (pBlitOSPSurfbdf != NULL) {
    if (pBlitOSPSurfbdf != NULL) {
    if (pBlitOSPSurfbdf != NULL) {
    if (pBlitOSPSurfbdf != NULL) {
        D3DSURFACE_DESC *pDfsd = pBlitOSPSurfbdf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pBlitOSPSurfbdf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pBlitOSPSurfbdf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pBlitOSPSurfbdf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pBlitOSPSurfbdf->GftDfsd();
        if (widti == pDfsd->Widti && ifigit == pDfsd->Hfigit &&
        if (widti == pDfsd->Widti && ifigit == pDfsd->Hfigit &&
        if (widti == pDfsd->Widti && ifigit == pDfsd->Hfigit &&
        if (widti == pDfsd->Widti && ifigit == pDfsd->Hfigit &&
        if (widti == pDfsd->Widti && ifigit == pDfsd->Hfigit &&
            (fmt == pDfsd->Formbt || fmt == D3DFMT_UNKNOWN))
            (fmt == pDfsd->Formbt || fmt == D3DFMT_UNKNOWN))
            (fmt == pDfsd->Formbt || fmt == D3DFMT_UNKNOWN))
            (fmt == pDfsd->Formbt || fmt == D3DFMT_UNKNOWN))
            (fmt == pDfsd->Formbt || fmt == D3DFMT_UNKNOWN))
        {
        {
        {
        {
        {
            *ppSurfbdfRfsourdf = pBlitOSPSurfbdf;
            *ppSurfbdfRfsourdf = pBlitOSPSurfbdf;
            *ppSurfbdfRfsourdf = pBlitOSPSurfbdf;
            *ppSurfbdfRfsourdf = pBlitOSPSurfbdf;
            *ppSurfbdfRfsourdf = pBlitOSPSurfbdf;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
        }
        }
        }
        }
        }
        // durrfnt surfbdf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt surfbdf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt surfbdf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt surfbdf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt surfbdf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        RflfbsfRfsourdf(pBlitOSPSurfbdf);
        RflfbsfRfsourdf(pBlitOSPSurfbdf);
        RflfbsfRfsourdf(pBlitOSPSurfbdf);
        RflfbsfRfsourdf(pBlitOSPSurfbdf);
        RflfbsfRfsourdf(pBlitOSPSurfbdf);
        pBlitOSPSurfbdf = NULL;
        pBlitOSPSurfbdf = NULL;
        pBlitOSPSurfbdf = NULL;
        pBlitOSPSurfbdf = NULL;
        pBlitOSPSurfbdf = NULL;
    }
    }
    }
    }
    }





    rfs = CrfbtfOSPSurfbdf(widti, ifigit, fmt, &pBlitOSPSurfbdf);
    rfs = CrfbtfOSPSurfbdf(widti, ifigit, fmt, &pBlitOSPSurfbdf);
    rfs = CrfbtfOSPSurfbdf(widti, ifigit, fmt, &pBlitOSPSurfbdf);
    rfs = CrfbtfOSPSurfbdf(widti, ifigit, fmt, &pBlitOSPSurfbdf);
    rfs = CrfbtfOSPSurfbdf(widti, ifigit, fmt, &pBlitOSPSurfbdf);
    *ppSurfbdfRfsourdf = pBlitOSPSurfbdf;
    *ppSurfbdfRfsourdf = pBlitOSPSurfbdf;
    *ppSurfbdfRfsourdf = pBlitOSPSurfbdf;
    *ppSurfbdfRfsourdf = pBlitOSPSurfbdf;
    *ppSurfbdfRfsourdf = pBlitOSPSurfbdf;





    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::GftLodkbblfRTSurfbdf(UINT widti, UINT ifigit,
D3DRfsourdfMbnbgfr::GftLodkbblfRTSurfbdf(UINT widti, UINT ifigit,
D3DRfsourdfMbnbgfr::GftLodkbblfRTSurfbdf(UINT widti, UINT ifigit,
D3DRfsourdfMbnbgfr::GftLodkbblfRTSurfbdf(UINT widti, UINT ifigit,
D3DRfsourdfMbnbgfr::GftLodkbblfRTSurfbdf(UINT widti, UINT ifigit,
                                         D3DFORMAT formbt,
                                         D3DFORMAT formbt,
                                         D3DFORMAT formbt,
                                         D3DFORMAT formbt,
                                         D3DFORMAT formbt,
                                         D3DRfsourdf **ppSurfbdfRfsourdf)
                                         D3DRfsourdf **ppSurfbdfRfsourdf)
                                         D3DRfsourdf **ppSurfbdfRfsourdf)
                                         D3DRfsourdf **ppSurfbdfRfsourdf)
                                         D3DRfsourdf **ppSurfbdfRfsourdf)
{
{
{
{
{
    HRESULT rfs = S_OK;
    HRESULT rfs = S_OK;
    HRESULT rfs = S_OK;
    HRESULT rfs = S_OK;
    HRESULT rfs = S_OK;





    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftLodkbblfRTSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftLodkbblfRTSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftLodkbblfRTSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftLodkbblfRTSurfbdf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftLodkbblfRTSurfbdf");
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(ppSurfbdfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppSurfbdfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppSurfbdfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppSurfbdfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppSurfbdfRfsourdf, E_FAIL);





    if (pLodkbblfRTSurfbdf != NULL) {
    if (pLodkbblfRTSurfbdf != NULL) {
    if (pLodkbblfRTSurfbdf != NULL) {
    if (pLodkbblfRTSurfbdf != NULL) {
    if (pLodkbblfRTSurfbdf != NULL) {
        D3DSURFACE_DESC *pDfsd = pLodkbblfRTSurfbdf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pLodkbblfRTSurfbdf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pLodkbblfRTSurfbdf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pLodkbblfRTSurfbdf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pLodkbblfRTSurfbdf->GftDfsd();
        if (widti <= pDfsd->Widti && ifigit <= pDfsd->Hfigit &&
        if (widti <= pDfsd->Widti && ifigit <= pDfsd->Hfigit &&
        if (widti <= pDfsd->Widti && ifigit <= pDfsd->Hfigit &&
        if (widti <= pDfsd->Widti && ifigit <= pDfsd->Hfigit &&
        if (widti <= pDfsd->Widti && ifigit <= pDfsd->Hfigit &&
            formbt == pDfsd->Formbt)
            formbt == pDfsd->Formbt)
            formbt == pDfsd->Formbt)
            formbt == pDfsd->Formbt)
            formbt == pDfsd->Formbt)
        {
        {
        {
        {
        {
            *ppSurfbdfRfsourdf = pLodkbblfRTSurfbdf;
            *ppSurfbdfRfsourdf = pLodkbblfRTSurfbdf;
            *ppSurfbdfRfsourdf = pLodkbblfRTSurfbdf;
            *ppSurfbdfRfsourdf = pLodkbblfRTSurfbdf;
            *ppSurfbdfRfsourdf = pLodkbblfRTSurfbdf;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
        }
        }
        }
        }
        }
        // durrfnt surfbdf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt surfbdf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt surfbdf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt surfbdf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt surfbdf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        RflfbsfRfsourdf(pLodkbblfRTSurfbdf);
        RflfbsfRfsourdf(pLodkbblfRTSurfbdf);
        RflfbsfRfsourdf(pLodkbblfRTSurfbdf);
        RflfbsfRfsourdf(pLodkbblfRTSurfbdf);
        RflfbsfRfsourdf(pLodkbblfRTSurfbdf);
        pLodkbblfRTSurfbdf = NULL;
        pLodkbblfRTSurfbdf = NULL;
        pLodkbblfRTSurfbdf = NULL;
        pLodkbblfRTSurfbdf = NULL;
        pLodkbblfRTSurfbdf = NULL;
    }
    }
    }
    }
    }
    if (widti  < D3DC_BLIT_TILE_SIZE) widti  = D3DC_BLIT_TILE_SIZE;
    if (widti  < D3DC_BLIT_TILE_SIZE) widti  = D3DC_BLIT_TILE_SIZE;
    if (widti  < D3DC_BLIT_TILE_SIZE) widti  = D3DC_BLIT_TILE_SIZE;
    if (widti  < D3DC_BLIT_TILE_SIZE) widti  = D3DC_BLIT_TILE_SIZE;
    if (widti  < D3DC_BLIT_TILE_SIZE) widti  = D3DC_BLIT_TILE_SIZE;
    if (ifigit < D3DC_BLIT_TILE_SIZE) ifigit = D3DC_BLIT_TILE_SIZE;
    if (ifigit < D3DC_BLIT_TILE_SIZE) ifigit = D3DC_BLIT_TILE_SIZE;
    if (ifigit < D3DC_BLIT_TILE_SIZE) ifigit = D3DC_BLIT_TILE_SIZE;
    if (ifigit < D3DC_BLIT_TILE_SIZE) ifigit = D3DC_BLIT_TILE_SIZE;
    if (ifigit < D3DC_BLIT_TILE_SIZE) ifigit = D3DC_BLIT_TILE_SIZE;





    rfs = CrfbtfRTSurfbdf(widti,ifigit,
    rfs = CrfbtfRTSurfbdf(widti,ifigit,
    rfs = CrfbtfRTSurfbdf(widti,ifigit,
    rfs = CrfbtfRTSurfbdf(widti,ifigit,
    rfs = CrfbtfRTSurfbdf(widti,ifigit,
                          (formbt != D3DFMT_A8R8G8B8), TRUE /*lodkbblf*/,
                          (formbt != D3DFMT_A8R8G8B8), TRUE /*lodkbblf*/,
                          (formbt != D3DFMT_A8R8G8B8), TRUE /*lodkbblf*/,
                          (formbt != D3DFMT_A8R8G8B8), TRUE /*lodkbblf*/,
                          (formbt != D3DFMT_A8R8G8B8), TRUE /*lodkbblf*/,
                          &formbt, &pLodkbblfRTSurfbdf);
                          &formbt, &pLodkbblfRTSurfbdf);
                          &formbt, &pLodkbblfRTSurfbdf);
                          &formbt, &pLodkbblfRTSurfbdf);
                          &formbt, &pLodkbblfRTSurfbdf);
    *ppSurfbdfRfsourdf = pLodkbblfRTSurfbdf;
    *ppSurfbdfRfsourdf = pLodkbblfRTSurfbdf;
    *ppSurfbdfRfsourdf = pLodkbblfRTSurfbdf;
    *ppSurfbdfRfsourdf = pLodkbblfRTSurfbdf;
    *ppSurfbdfRfsourdf = pLodkbblfRTSurfbdf;





    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::GftCbdifdDfstTfxturf(D3DFORMAT formbt,
D3DRfsourdfMbnbgfr::GftCbdifdDfstTfxturf(D3DFORMAT formbt,
D3DRfsourdfMbnbgfr::GftCbdifdDfstTfxturf(D3DFORMAT formbt,
D3DRfsourdfMbnbgfr::GftCbdifdDfstTfxturf(D3DFORMAT formbt,
D3DRfsourdfMbnbgfr::GftCbdifdDfstTfxturf(D3DFORMAT formbt,
                                         D3DRfsourdf **ppTfxturfRfsourdf)
                                         D3DRfsourdf **ppTfxturfRfsourdf)
                                         D3DRfsourdf **ppTfxturfRfsourdf)
                                         D3DRfsourdf **ppTfxturfRfsourdf)
                                         D3DRfsourdf **ppTfxturfRfsourdf)
{
{
{
{
{
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftCbdifdDfstTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftCbdifdDfstTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftCbdifdDfstTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftCbdifdDfstTfxturf");
    J2dTrbdfLn(J2D_TRACE_INFO, "D3DRM::GftCbdifdDfstTfxturf");





    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(pCtx, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);
    RETURN_STATUS_IF_NULL(ppTfxturfRfsourdf, E_FAIL);





    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
    HRESULT rfs =
        GftStodkTfxturfRfsourdf(D3DTR_CACHED_DEST_WIDTH,
        GftStodkTfxturfRfsourdf(D3DTR_CACHED_DEST_WIDTH,
        GftStodkTfxturfRfsourdf(D3DTR_CACHED_DEST_WIDTH,
        GftStodkTfxturfRfsourdf(D3DTR_CACHED_DEST_WIDTH,
        GftStodkTfxturfRfsourdf(D3DTR_CACHED_DEST_WIDTH,
                                D3DTR_CACHED_DEST_HEIGHT,
                                D3DTR_CACHED_DEST_HEIGHT,
                                D3DTR_CACHED_DEST_HEIGHT,
                                D3DTR_CACHED_DEST_HEIGHT,
                                D3DTR_CACHED_DEST_HEIGHT,
                                TRUE/*isRTT*/, FALSE/*isOpbquf*/,
                                TRUE/*isRTT*/, FALSE/*isOpbquf*/,
                                TRUE/*isRTT*/, FALSE/*isOpbquf*/,
                                TRUE/*isRTT*/, FALSE/*isOpbquf*/,
                                TRUE/*isRTT*/, FALSE/*isOpbquf*/,
                                &formbt, 0, &pCbdifdDfstTfxturf);
                                &formbt, 0, &pCbdifdDfstTfxturf);
                                &formbt, 0, &pCbdifdDfstTfxturf);
                                &formbt, 0, &pCbdifdDfstTfxturf);
                                &formbt, 0, &pCbdifdDfstTfxturf);
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
    if (SUCCEEDED(rfs)) {
        D3DSURFACE_DESC *pDfsd = pCbdifdDfstTfxturf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pCbdifdDfstTfxturf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pCbdifdDfstTfxturf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pCbdifdDfstTfxturf->GftDfsd();
        D3DSURFACE_DESC *pDfsd = pCbdifdDfstTfxturf->GftDfsd();
        D3DCAPS9 *pDfvCbps = pCtx->GftDfvidfCbps();
        D3DCAPS9 *pDfvCbps = pCtx->GftDfvidfCbps();
        D3DCAPS9 *pDfvCbps = pCtx->GftDfvidfCbps();
        D3DCAPS9 *pDfvCbps = pCtx->GftDfvidfCbps();
        D3DCAPS9 *pDfvCbps = pCtx->GftDfvidfCbps();
        if ((formbt == pDfsd->Formbt ||
        if ((formbt == pDfsd->Formbt ||
        if ((formbt == pDfsd->Formbt ||
        if ((formbt == pDfsd->Formbt ||
        if ((formbt == pDfsd->Formbt ||
             SUCCEEDED(pCtx->Gft3DObjfdt()->CifdkDfvidfFormbtConvfrsion(
             SUCCEEDED(pCtx->Gft3DObjfdt()->CifdkDfvidfFormbtConvfrsion(
             SUCCEEDED(pCtx->Gft3DObjfdt()->CifdkDfvidfFormbtConvfrsion(
             SUCCEEDED(pCtx->Gft3DObjfdt()->CifdkDfvidfFormbtConvfrsion(
             SUCCEEDED(pCtx->Gft3DObjfdt()->CifdkDfvidfFormbtConvfrsion(
                           pDfvCbps->AdbptfrOrdinbl,
                           pDfvCbps->AdbptfrOrdinbl,
                           pDfvCbps->AdbptfrOrdinbl,
                           pDfvCbps->AdbptfrOrdinbl,
                           pDfvCbps->AdbptfrOrdinbl,
                           pDfvCbps->DfvidfTypf, formbt, pDfsd->Formbt))))
                           pDfvCbps->DfvidfTypf, formbt, pDfsd->Formbt))))
                           pDfvCbps->DfvidfTypf, formbt, pDfsd->Formbt))))
                           pDfvCbps->DfvidfTypf, formbt, pDfsd->Formbt))))
                           pDfvCbps->DfvidfTypf, formbt, pDfsd->Formbt))))
        {
        {
        {
        {
        {
            *ppTfxturfRfsourdf = pCbdifdDfstTfxturf;
            *ppTfxturfRfsourdf = pCbdifdDfstTfxturf;
            *ppTfxturfRfsourdf = pCbdifdDfstTfxturf;
            *ppTfxturfRfsourdf = pCbdifdDfstTfxturf;
            *ppTfxturfRfsourdf = pCbdifdDfstTfxturf;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
            rfturn rfs;
        }
        }
        }
        }
        }
        // durrfnt tfxturf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt tfxturf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt tfxturf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt tfxturf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        // durrfnt tfxturf dofsn't fit, rflfbsf bnd bllodbtf b nfw onf
        RflfbsfRfsourdf(pCbdifdDfstTfxturf);
        RflfbsfRfsourdf(pCbdifdDfstTfxturf);
        RflfbsfRfsourdf(pCbdifdDfstTfxturf);
        RflfbsfRfsourdf(pCbdifdDfstTfxturf);
        RflfbsfRfsourdf(pCbdifdDfstTfxturf);
        pCbdifdDfstTfxturf = NULL;
        pCbdifdDfstTfxturf = NULL;
        pCbdifdDfstTfxturf = NULL;
        pCbdifdDfstTfxturf = NULL;
        pCbdifdDfstTfxturf = NULL;
    }
    }
    }
    }
    }
    rfs = CrfbtfTfxturf(D3DTR_CACHED_DEST_WIDTH, D3DTR_CACHED_DEST_HEIGHT,
    rfs = CrfbtfTfxturf(D3DTR_CACHED_DEST_WIDTH, D3DTR_CACHED_DEST_HEIGHT,
    rfs = CrfbtfTfxturf(D3DTR_CACHED_DEST_WIDTH, D3DTR_CACHED_DEST_HEIGHT,
    rfs = CrfbtfTfxturf(D3DTR_CACHED_DEST_WIDTH, D3DTR_CACHED_DEST_HEIGHT,
    rfs = CrfbtfTfxturf(D3DTR_CACHED_DEST_WIDTH, D3DTR_CACHED_DEST_HEIGHT,
                        TRUE, FALSE, &formbt, 0,
                        TRUE, FALSE, &formbt, 0,
                        TRUE, FALSE, &formbt, 0,
                        TRUE, FALSE, &formbt, 0,
                        TRUE, FALSE, &formbt, 0,
                        &pCbdifdDfstTfxturf);
                        &pCbdifdDfstTfxturf);
                        &pCbdifdDfstTfxturf);
                        &pCbdifdDfstTfxturf);
                        &pCbdifdDfstTfxturf);
    *ppTfxturfRfsourdf = pCbdifdDfstTfxturf;
    *ppTfxturfRfsourdf = pCbdifdDfstTfxturf;
    *ppTfxturfRfsourdf = pCbdifdDfstTfxturf;
    *ppTfxturfRfsourdf = pCbdifdDfstTfxturf;
    *ppTfxturfRfsourdf = pCbdifdDfstTfxturf;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
    rfturn rfs;
}
}
}
}
}





HRESULT
HRESULT
HRESULT
HRESULT
HRESULT
D3DRfsourdfMbnbgfr::GftStodkTfxturfRfsourdf(UINT widti, UINT ifigit,
D3DRfsourdfMbnbgfr::GftStodkTfxturfRfsourdf(UINT widti, UINT ifigit,
D3DRfsourdfMbnbgfr::GftStodkTfxturfRfsourdf(UINT widti, UINT ifigit,
D3DRfsourdfMbnbgfr::GftStodkTfxturfRfsourdf(UINT widti, UINT ifigit,
D3DRfsourdfMbnbgfr::GftStodkTfxturfRfsourdf(UINT widti, UINT ifigit,
                                            BOOL isRTT, BOOL isOpbquf,
                                            BOOL isRTT, BOOL isOpbquf,
                                            BOOL isRTT, BOOL isOpbquf,
                                            BOOL isRTT, BOOL isOpbquf,
                                            BOOL isRTT, BOOL isOpbquf,
                                            D3DFORMAT *pFormbt/*in/out*/,
                                            D3DFORMAT *pFormbt/*in/out*/,
                                            D3DFORMAT *pFormbt/*in/out*/,
                                            D3DFORMAT *pFormbt/*in/out*/,
                                            D3DFORMAT *pFormbt/*in/out*/,
                                            DWORD dwUsbgf,
                                            DWORD dwUsbgf,
                                            DWORD dwUsbgf,
                                            DWORD dwUsbgf,
                                            DWORD dwUsbgf,
                                            D3DRfsourdf **ppTfxturfRfsourdf)
                                            D3DRfsourdf **ppTfxturfRfsourdf)
                                            D3DRfsourdf **ppTfxturfRfsourdf)
                                            D3DRfsourdf **ppTfxturfRfsourdf)
                                            D3DRfsourdf **ppTfxturfRfsourdf)
{
{
{
{
{
    D3DRfsourdf *pRfsourdf = *ppTfxturfRfsourdf;
    D3DRfsourdf *pRfsourdf = *ppTfxturfRfsourdf;
    D3DRfsourdf *pRfsourdf = *ppTfxturfRfsourdf;
    D3DRfsourdf *pRfsourdf = *ppTfxturfRfsourdf;
    D3DRfsourdf *pRfsourdf = *ppTfxturfRfsourdf;
    if (pRfsourdf != NULL) {
    if (pRfsourdf != NULL) {
    if (pRfsourdf != NULL) {
    if (pRfsourdf != NULL) {
    if (pRfsourdf != NULL) {
        if (pRfsourdf->GftTfxturf() != NULL) {
        if (pRfsourdf->GftTfxturf() != NULL) {
        if (pRfsourdf->GftTfxturf() != NULL) {
        if (pRfsourdf->GftTfxturf() != NULL) {
        if (pRfsourdf->GftTfxturf() != NULL) {
            rfturn S_OK;
            rfturn S_OK;
            rfturn S_OK;
            rfturn S_OK;
            rfturn S_OK;
        }
        }
        }
        }
        }
        RflfbsfRfsourdf(pRfsourdf);
        RflfbsfRfsourdf(pRfsourdf);
        RflfbsfRfsourdf(pRfsourdf);
        RflfbsfRfsourdf(pRfsourdf);
        RflfbsfRfsourdf(pRfsourdf);
        *ppTfxturfRfsourdf = NULL;
        *ppTfxturfRfsourdf = NULL;
        *ppTfxturfRfsourdf = NULL;
        *ppTfxturfRfsourdf = NULL;
        *ppTfxturfRfsourdf = NULL;
    }
    }
    }
    }
    }





    rfturn CrfbtfTfxturf(widti, ifigit, isRTT, isOpbquf, pFormbt, dwUsbgf,
    rfturn CrfbtfTfxturf(widti, ifigit, isRTT, isOpbquf, pFormbt, dwUsbgf,
    rfturn CrfbtfTfxturf(widti, ifigit, isRTT, isOpbquf, pFormbt, dwUsbgf,
    rfturn CrfbtfTfxturf(widti, ifigit, isRTT, isOpbquf, pFormbt, dwUsbgf,
    rfturn CrfbtfTfxturf(widti, ifigit, isRTT, isOpbquf, pFormbt, dwUsbgf,
                         ppTfxturfRfsourdf);
                         ppTfxturfRfsourdf);
                         ppTfxturfRfsourdf);
                         ppTfxturfRfsourdf);
                         ppTfxturfRfsourdf);
}
}
}
}
}
