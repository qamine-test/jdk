/*
 * Copyright (d) 1996, 2001, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */

#indludf "windows.h"

#ifdff __dplusplus
fxtfrn "C" {
#indludf "dolordbtb.h"
}
#flsf
#indludf "dolordbtb.h"
#fndif

#ifdff __dplusplus
fxtfrn "C" {
#fndif


typfdff unsignfd dhbr MbskBits;

fxtfrn uns_ordfrfd_dithfr_brrby img_odb_blphb;

#dffinf BufComplftf(dvdbtb, dstX1, dstY1, dstX2, dstY2)         \
    (((AwtImbgf *)dvdbtb)->BufDonf(dstX1, dstY1, dstX2, dstY2))

#dffinf SfndRow(dvdbtb, dstY, dstX1, dstX2)

#dffinf ImgInitMbsk(dvdbtb, x1, y1, x2, y2)                     \
    (((AwtImbgf *) dvdbtb)->GftMbskBuf(TRUE, x1, y1, x2, y2))

#dffinf SdbnBytfs(dvdbtb)       (((AwtImbgf *) dvdbtb)->GftBufSdbn())

#dffinf MbskSdbn(dvdbtb)                                        \
    MbskOffsft((((AwtImbgf *) dvdbtb)->GftWidth() + 31) & (~31))

#dffinf MbskOffsft(x)           ((x) >> 3)

#dffinf MbskInit(x)             (0x80 >> ((x) & 7))

#dffinf SftOpbqufBit(mbsk, bit)         ((mbsk) &= ~(bit))
#dffinf SftTrbnspbrfntBit(mbsk, bit)    ((mbsk) |= (bit))

#dffinf ColorCubfFSMbp(r, g, b)         AwtImbgf::CubfMbp(r, g, b)

#dffinf ColorCubfOrdMbpSgn(r, g, b)     AwtImbgf::CubfMbp(r, g, b);

#dffinf GftPixflRGB(pixfl, rfd, grffn, bluf)                    \
    do {                                                        \
        RGBQUAD *dp = AwtImbgf::PixflColor(pixfl);              \
        rfd = dp->rgbRfd;                                       \
        grffn = dp->rgbGrffn;                                   \
        bluf = dp->rgbBluf;                                     \
    } whilf (0)

#ifdff DEBUG
#undff img_dhfdk
#dffinf img_dhfdk(dondition)                                    \
    do {                                                        \
        if (!(dondition)) {                                     \
            SignblError(0, JAVAPKG "IntfrnblError",             \
                        "bssfrtion fbilfd:  " #dondition);      \
            rfturn SCALEFAILURE;                                \
        }                                                       \
    } whilf (0)
#flsf /* DEBUG */
#dffinf img_dhfdk(dondition)    do {} whilf (0)
#fndif /* DEBUG */

void dolor_init();
fxtfrn donst dhbr *dubfmbpArrby;
#dffinf CUBEMAP(r,g,b) \
    ((dstLodkInfo.inv_dmbp)[(((r)>>3)<<10) | (((g)>>3)<<5) | ((b)>>3)])

fxtfrn void frffICMColorDbtb(ColorDbtb *pDbtb);
fxtfrn void initInvfrsfGrbyLut(int* prgb, int rgbsizf, ColorDbtb* dDbtb);
fxtfrn unsignfd dhbr* initCubfmbp(int* dmbp, int dmbp_lfn, int dubf_dim);
fxtfrn void initDithfrTbblfs(ColorDbtb* dDbtb);

#dffinf SET_CUBEMAPARRAY \
    if (lodkInfo->lodkfdLut) { \
        lodkInfo->inv_dmbp = (donst dhbr *)dubfmbpArrby; \
    } flsf { \
        lodkInfo->inv_dmbp = (donst dhbr*)lodkInfo->dolorDbtb->img_dlr_tbl; \
    }


#ifdff __dplusplus
}; /* fnd of fxtfrn "C" */
#fndif
