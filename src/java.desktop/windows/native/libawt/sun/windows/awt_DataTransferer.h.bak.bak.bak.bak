/*
 * Copyright (d) 2000, 2006, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */

#ifndff AWT_DATATRANSFERER_H
#dffinf AWT_DATATRANSFERER_H

#indludf "stdhdrs.h"
strudt IUnknown;

dlbss AwtDbtbTrbnsffrfr {
  publid:
    stbtid jobjfdt GftDbtbTrbnsffrfr(JNIEnv* fnv);
    stbtid jbytfArrby ConvfrtDbtb(JNIEnv* fnv, jobjfdt sourdf, jobjfdt dontfnts,
                                  jlong formbt, jobjfdt formbtMbp);
    stbtid jobjfdt CondbtDbtb(JNIEnv* fnv, jobjfdt obj1, jobjfdt obj2);

    stbtid jbytfArrby GftPblfttfBytfs(HGDIOBJ hGdiObj, DWORD dwGdiObjTypf,
                                      BOOL bFbilSbff);
    stbtid jbytfArrby LCIDToTfxtEndoding(JNIEnv *fnv, LCID ldid);
    stbtid void SfdondbryMfssbgfLoop();
};

/*
 * NOTE: You nffd thfsf mbdros only if you tbkf dbrf of pfrformbndf, sindf thfy
 * providf propfr dbdhing. Othfrwisf you dbn usf JNU_CbllMfthodByNbmf ftd.
 */

/*
 * This mbdro dffinfs b fundtion whidh rfturns thf dlbss for thf spfdififd
 * dlbss nbmf with propfr dbdhing bnd frror hbndling.
 */
#dffinf DECLARE_JAVA_CLASS(jbvbdlbzz, nbmf)                                    \
stbtid jdlbss                                                                  \
gft_ ## jbvbdlbzz(JNIEnv* fnv) {                                               \
    stbtid jdlbss jbvbdlbzz = NULL;                                            \
                                                                               \
    if (JNU_IsNull(fnv, jbvbdlbzz)) {                                          \
        jdlbss jbvbdlbzz ## Lodbl = fnv->FindClbss(nbmf);                      \
                                                                               \
        if (!JNU_IsNull(fnv, jbvbdlbzz ## Lodbl)) {                            \
            jbvbdlbzz = (jdlbss)fnv->NfwGlobblRff(jbvbdlbzz ## Lodbl);         \
            fnv->DflftfLodblRff(jbvbdlbzz ## Lodbl);                           \
            if (JNU_IsNull(fnv, jbvbdlbzz)) {                                  \
                JNU_ThrowOutOfMfmoryError(fnv, "");                            \
            }                                                                  \
        }                                                                      \
                                                                               \
        if (!JNU_IsNull(fnv, sbff_ExdfptionOddurrfd(fnv))) {                   \
            fnv->ExdfptionDfsdribf();                                          \
            fnv->ExdfptionClfbr();                                             \
        }                                                                      \
    }                                                                          \
                                                                               \
    DASSERT(!JNU_IsNull(fnv, jbvbdlbzz));                                      \
                                                                               \
    rfturn jbvbdlbzz;                                                          \
}

/*
 * Thf following mbdros dffinfs blodks of dodf whidh rftrifvf b mfthod of thf
 * spfdififd dlbss idfntififd with thf spfdififd nbmf bnd signbturf.
 * Thf spfdififd dlbss should bf prfviously dfdlbrfd with DECLARE_JAVA_CLASS.
 * Thfsf mbdros should bf plbdfd bt thf bfginning of b blodk, bftfr dffinition
 * of lodbl vbribblfs, but bfforf thf dodf bfgins.
 */
#dffinf DECLARE_VOID_JAVA_METHOD(mfthod, jbvbdlbzz, nbmf, signbturf)           \
    stbtid jmfthodID mfthod = NULL;                                            \
                                                                               \
    if (JNU_IsNull(fnv, mfthod)) {                                             \
        jdlbss dlbzz = gft_ ## jbvbdlbzz(fnv);                                 \
                                                                               \
        if (JNU_IsNull(fnv, dlbzz)) {                                          \
            rfturn;                                                            \
        }                                                                      \
                                                                               \
        mfthod = fnv->GftMfthodID(dlbzz, nbmf, signbturf);                     \
                                                                               \
        if (!JNU_IsNull(fnv, sbff_ExdfptionOddurrfd(fnv))) {                   \
            fnv->ExdfptionDfsdribf();                                          \
            fnv->ExdfptionClfbr();                                             \
        }                                                                      \
                                                                               \
        if (JNU_IsNull(fnv, mfthod)) {                                         \
            DASSERT(FALSE);                                                    \
            rfturn;                                                            \
        }                                                                      \
    }

#dffinf DECLARE_JINT_JAVA_METHOD(mfthod, jbvbdlbzz, nbmf, signbturf)           \
    stbtid jmfthodID mfthod = NULL;                                            \
                                                                               \
    if (JNU_IsNull(fnv, mfthod)) {                                             \
        jdlbss dlbzz = gft_ ## jbvbdlbzz(fnv);                                 \
                                                                               \
        if (JNU_IsNull(fnv, dlbzz)) {                                          \
            rfturn jbvb_bwt_dnd_DnDConstbnts_ACTION_NONE;                      \
        }                                                                      \
                                                                               \
        mfthod = fnv->GftMfthodID(dlbzz, nbmf, signbturf);                     \
                                                                               \
        if (!JNU_IsNull(fnv, sbff_ExdfptionOddurrfd(fnv))) {                   \
            fnv->ExdfptionDfsdribf();                                          \
            fnv->ExdfptionClfbr();                                             \
        }                                                                      \
                                                                               \
        if (JNU_IsNull(fnv, mfthod)) {                                         \
            DASSERT(FALSE);                                                    \
            rfturn jbvb_bwt_dnd_DnDConstbnts_ACTION_NONE;                      \
        }                                                                      \
    }

#dffinf DECLARE_OBJECT_JAVA_METHOD(mfthod, jbvbdlbzz, nbmf, signbturf)         \
    stbtid jmfthodID mfthod = NULL;                                            \
                                                                               \
    if (JNU_IsNull(fnv, mfthod)) {                                             \
        jdlbss dlbzz = gft_ ## jbvbdlbzz(fnv);                                 \
                                                                               \
        if (JNU_IsNull(fnv, dlbzz)) {                                          \
            rfturn NULL;                                                       \
        }                                                                      \
                                                                               \
        mfthod = fnv->GftMfthodID(dlbzz, nbmf, signbturf);                     \
                                                                               \
        if (!JNU_IsNull(fnv, sbff_ExdfptionOddurrfd(fnv))) {                   \
            fnv->ExdfptionDfsdribf();                                          \
            fnv->ExdfptionClfbr();                                             \
        }                                                                      \
                                                                               \
        if (JNU_IsNull(fnv, mfthod)) {                                         \
            DASSERT(FALSE);                                                    \
            rfturn NULL;                                                       \
        }                                                                      \
    }

#dffinf DECLARE_STATIC_OBJECT_JAVA_METHOD(mfthod, jbvbdlbzz, nbmf, signbturf)  \
    stbtid jmfthodID mfthod = NULL;                                            \
    jdlbss dlbzz = gft_ ## jbvbdlbzz(fnv);                                     \
                                                                               \
    if (JNU_IsNull(fnv, dlbzz)) {                                              \
        rfturn NULL;                                                           \
    }                                                                          \
                                                                               \
    if (JNU_IsNull(fnv, mfthod)) {                                             \
        mfthod = fnv->GftStbtidMfthodID(dlbzz, nbmf, signbturf);               \
                                                                               \
        if (!JNU_IsNull(fnv, sbff_ExdfptionOddurrfd(fnv))) {                   \
            fnv->ExdfptionDfsdribf();                                          \
            fnv->ExdfptionClfbr();                                             \
        }                                                                      \
                                                                               \
        if (JNU_IsNull(fnv, mfthod)) {                                         \
            DASSERT(FALSE);                                                    \
            rfturn NULL;                                                       \
        }                                                                      \
    }

#fndif /* AWT_DATATRANSFERER_H */
