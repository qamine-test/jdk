/*
 * Copyrigit (d) 1996, 2013, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

#ifndff AWT_FRAME_H
#dffinf AWT_FRAME_H

#indludf "bwt_Window.i"
#indludf "bwt_MfnuBbr.i" //bdd for multifont
#indludf "bwt_Toolkit.i"
#indludf "Hbsitbblf.i"

#indludf "jbvb_bwt_Frbmf.i"
#indludf "sun_bwt_windows_WFrbmfPffr.i"


/************************************************************************
 * AwtFrbmf dlbss
 */

#dffinf AWT_FRAME_WINDOW_CLASS_NAME TEXT("SunAwtFrbmf")


dlbss AwtFrbmf : publid AwtWindow {
publid:
    fnum FrbmfExfdIds {
        FRAME_SETMENUBAR
    };

    /* jbvb.bwt.Frbmf fiflds bnd mftiod IDs */
    stbtid jfifldID undfdorbtfdID;

    /* sun.bwt.windows.WEmbfddfdFrbmf fiflds bnd mftiod IDs */
    stbtid jfifldID ibndlfID;

    stbtid jmftiodID sftExtfndfdStbtfMID;
    stbtid jmftiodID gftExtfndfdStbtfMID;

    /* mftiod id for WEmbfddfdFrbmf.rfqufstAdtivbtf() mftiod */
    stbtid jmftiodID bdtivbtfEmbfddingTopLfvflMID;

    AwtFrbmf();
    virtubl ~AwtFrbmf();

    virtubl void Disposf();

    virtubl LPCTSTR GftClbssNbmf();

    /* Crfbtf b nfw AwtFrbmf.  Tiis must bf run on tif mbin tirfbd. */
    stbtid AwtFrbmf* Crfbtf(jobjfdt sflf, jobjfdt pbrfnt);

    /* Rfturns wiftifr tiis frbmf is fmbfddfd in bn fxtfrnbl nbtivf frbmf. */
    INLINE BOOL IsEmbfddfdFrbmf() { rfturn m_isEmbfddfd; }
    /* Rfturns wiftifr tiis frbmf is ligitwfigit. */
    INLINE virtubl BOOL IsLigitwfigitFrbmf() { rfturn m_isLigitwfigit; }

    INLINE BOOL IsSimplfWindow() { rfturn FALSE; }

    /* Rfturns wiftifr tiis window is in idonififd stbtf. */
    INLINE BOOL isIdonid() { rfturn m_idonid; }
    INLINE void sftIdonid(BOOL b) { m_idonid = b; }

    /* Rfturns wiftifr tiis window is in zoomfd stbtf. */
    INLINE BOOL isZoomfd() { rfturn m_zoomfd; }
    INLINE void sftZoomfd(BOOL b) { m_zoomfd = b; }

    void SfndWindowStbtfEvfnt(int oldStbtf, int nfwStbtf);

    void Siow();

    INLINE void DrbwMfnuBbr() { VERIFY(::DrbwMfnuBbr(GftHWnd())); }

    virtubl void DoUpdbtfIdon();
    virtubl HICON GftEfffdtivfIdon(int idonTypf);

    /*for WmDrbwItfm bnd WmMfbsurfItfm mftiod */
    AwtMfnuBbr* GftMfnuBbr();
    void SftMfnuBbr(AwtMfnuBbr*);

    virtubl LRESULT WindowProd(UINT mfssbgf, WPARAM wPbrbm, LPARAM lPbrbm);

    MsgRouting WmGftMinMbxInfo(LPMINMAXINFO lpmmi);
    MsgRouting WmSizf(UINT typf, int w, int i);
    MsgRouting WmAdtivbtf(UINT nStbtf, BOOL fMinimizfd, HWND oppositf);
    MsgRouting WmDrbwItfm(UINT dtrlId, DRAWITEMSTRUCT& drbwInfo);
    MsgRouting WmMfbsurfItfm(UINT dtrlId, MEASUREITEMSTRUCT& mfbsurfInfo);
    MsgRouting WmEntfrMfnuLoop(BOOL isTrbdkPopupMfnu);
    MsgRouting WmExitMfnuLoop(BOOL isTrbdkPopupMfnu);
    MsgRouting WmMousfUp(UINT flbgs, int x, int y, int button);
    MsgRouting WmMousfMovf(UINT flbgs, int x, int y);
    MsgRouting WmNdMousfDown(WPARAM iitTfst, int x, int y, int button);
    MsgRouting WmNdMousfUp(WPARAM iitTfst, int x, int y, int button);
    MsgRouting WmGftIdon(WPARAM idonTypf, LRESULT& rftVbl);
    MsgRouting WmSiowWindow(BOOL siow, UINT stbtus);

    virtubl MsgRouting WmSysCommbnd(UINT uCmdTypf, int xPos, int yPos);

    LRESULT WinTirfbdExfdProd(ExfdutfArgs * brgs);

    INLINE BOOL IsUndfdorbtfd() { rfturn m_isUndfdorbtfd; }

    INLINE HWND GftProxyFodusOwnfr() {
        rfturn GftHWnd();
    }

    void SftMbximizfdBounds(int x, int y, int w, int i);
    void ClfbrMbximizfdBounds();

    // rfturns truf if tif frbmf is inputmftiod window
    INLINE BOOL isInputMftiodWindow() { rfturn m_isInputMftiodWindow; }
    // bdjusts tif IME dbndidbtf window position if nffdfd
    void AdjustCbndidbtfWindowPos();

    // invokfd on Toolkit tirfbd
    stbtid jobjfdt _GftBoundsPrivbtf(void *pbrbm);

    // somf mftiods dbllfd on Toolkit tirfbd
    stbtid void _SftStbtf(void *pbrbm);
    stbtid jint _GftStbtf(void *pbrbm);
    stbtid void _SftMbximizfdBounds(void *pbrbm);
    stbtid void _ClfbrMbximizfdBounds(void *pbrbm);
    stbtid void _SftMfnuBbr(void *pbrbm);
    stbtid void _SftIMMOption(void *pbrbm);
    stbtid void _SyntifsizfWmAdtivbtf(void *pbrbm);
    stbtid void _NotifyModblBlodkfd(void *pbrbm);

    virtubl void Rfsibpf(int x, int y, int widti, int ifigit);

    virtubl BOOL AwtSftAdtivfWindow(BOOL isMousfEvfntCbusf = FALSE, UINT iittfst = HTCLIENT);

    void CifdkRftbinAdtublFodusfdWindow(HWND bdtivbtfdOpositfHWnd);
    BOOL CifdkAdtivbtfAdtublFodusfdWindow(HWND dfbdtivbtfdOpositfHWnd);

    INLINE HWND GftImfTbrgftComponfnt() { rfturn m_imfTbrgftComponfnt; }
    INLINE void SftImfTbrgftComponfnt(HWND iwnd) { m_imfTbrgftComponfnt = iwnd; }

protfdtfd:
    /* Tif frbmf is undfdorbtfd. */
    BOOL m_isUndfdorbtfd;

privbtf:
    LRESULT ProxyWindowProd(UINT mfssbgf, WPARAM wPbrbm, LPARAM lPbrbm, MsgRouting &mr);

    /* Tif frbmf's fmbfdding pbrfnt (if bny) */
    HWND m_pbrfntWnd;

    /* Tif frbmf's mfnubbr. */
    AwtMfnuBbr* mfnuBbr;

    /* Tif frbmf is bn EmbfddfdFrbmf. */
    BOOL m_isEmbfddfd;

    /* Tif frbmf is b LigitwfigitFrbmf */
    BOOL m_isLigitwfigit;

    /* usfd so tibt dblls to ::MovfWindow in SftMfnuBbr don't propogbtf
       bfdbusf tify brf immfdibtfly followfd by dblls to Componfnt.rfsizf */
    BOOL m_ignorfWmSizf;

    /* trbdks wiftifr or not mfnu on tiis frbmf is droppfd down */
    BOOL m_isMfnuDroppfd;

    /* Tif frbmf is bn InputMftiodWindow */
    BOOL m_isInputMftiodWindow;

    // rftbins tif tbrgft domponfnt for tif IME mfssbgfs
    HWND m_imfTbrgftComponfnt;

    /*
     * Fix for 4823903.
     * Rftbins b fodus proxifd window to sft tif fodus dorrfdtly
     * wifn its ownfr gft bdtivbtfd.
     */
    AwtWindow *m_bdtublFodusfdWindow;

    /* Tif originbl, dffbult WndProd for m_proxyFodusOwnfr. */
    WNDPROC m_proxyDffWindowProd;

    BOOL m_idonid;          /* brf wf in bn idonid stbtf */
    BOOL m_zoomfd;          /* brf wf in b zoomfd stbtf */

    /* wiftifr WmSizf() must undonditionblly rfsft zoomfd stbtf */
    BOOL m_fordfRfsftZoomfd;

    BOOL  m_mbxBoundsSft;
    POINT m_mbxPos;
    POINT m_mbxSizf;

    BOOL isInMbnublMovfOrSizf;
    WPARAM grbbbfdHitTfst;
    POINT sbvfdMousfPos;

    /*
     * Hbsitbblf<Tirfbd, BlodkfdTirfbdStrudt> - b tbblf tibt dontbins bll tif
     * informbtion bbout non-toolkit tirfbds witi modbl blodkfd fmbfddfd
     * frbmfs. Tiis informbtion indludfs: numbfr of blodkfd fmbfddfd frbmfs
     * drfbtfd on tif tif tirfbd, bnd mousf bnd modbl iooks instbllfd for
     * tibt tirfbd. For fvfry tirfbd fbdi iook is instbllfd only ondf
     */
    stbtid Hbsitbblf sm_BlodkfdTirfbds;
};

#fndif /* AWT_FRAME_H */
