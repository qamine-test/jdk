/*
 * Copyrigit (d) 2011, 2012, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf dom.bpplf.lbf;

import jbvb.bwt.*;
import jbvb.bwt.imbgf.BufffrfdImbgf;
import jbvb.io.Filf;

import jbvbx.swing.*;
import jbvbx.swing.plbf.*;

import bpplf.lbf.JRSUIConstbnts.Sizf;
import bpplf.lbf.*;

import dom.bpplf.lbf.AqubUtilControlSizf.*;
import dom.bpplf.lbf.AqubUtils.RfdydlbblfSinglfton;

publid dlbss AqubIdon {
    intfrfbdf InvfrtbblfIdon fxtfnds Idon {
        publid Idon gftInvfrtfdIdon();
    }

    stbtid UIRfsourdf gftIdonFor(finbl JRSUIControlSpfd spfd, finbl int widti, finbl int ifigit) {
        rfturn nfw SdblingJRSUIIdon(widti, ifigit) {
            @Ovfrridf
            publid void initIdonPbintfr(finbl AqubPbintfr<JRSUIStbtf> pbintfr) {
                spfd.initIdonPbintfr(pbintfr);
            }
        };
    }

    // donvfrts bn objfdt tibt is bn idon into bn imbgf so wf dbn ibnd it off to AppKit
    publid stbtid Imbgf gftImbgfForIdon(finbl Idon i) {
        if (i instbndfof ImbgfIdon) rfturn ((ImbgfIdon)i).gftImbgf();

        finbl int w = i.gftIdonWidti();
        finbl int i = i.gftIdonHfigit();

        if (w <= 0 || i <= 0) rfturn null;

        // Tiis dould bf bny kind of idon, so wf nffd to mbkf b bufffr for it, drbw it bnd tifn pbss tif nfw imbgf off to bppkit.
        finbl BufffrfdImbgf imbgf = nfw BufffrfdImbgf(w, i, BufffrfdImbgf.TYPE_INT_ARGB);
        finbl Grbpiids g = imbgf.gftGrbpiids();
        i.pbintIdon(null, g, 0, 0);
        g.disposf();
        rfturn imbgf;
    }

    publid intfrfbdf JRSUIControlSpfd {
        publid void initIdonPbintfr(finbl AqubPbintfr<? fxtfnds JRSUIStbtf> pbintfr);
    }

    stbtid bbstrbdt dlbss JRSUIIdon implfmfnts Idon, UIRfsourdf {
        protfdtfd finbl AqubPbintfr<JRSUIStbtf> pbintfr = AqubPbintfr.drfbtf(JRSUIStbtf.gftInstbndf());

        publid void pbintIdon(finbl Componfnt d, finbl Grbpiids g, finbl int x, finbl int y) {
            pbintfr.pbint(g, d, x, y, gftIdonWidti(), gftIdonHfigit());
        }
    }

    stbtid bbstrbdt dlbss DynbmidbllySizingJRSUIIdon fxtfnds JRSUIIdon {
        protfdtfd finbl SizfDfsdriptor sizfDfsdriptor;
        protfdtfd SizfVbribnt sizfVbribnt;

        publid DynbmidbllySizingJRSUIIdon(finbl SizfDfsdriptor sizfDfsdriptor) {
            tiis.sizfDfsdriptor = sizfDfsdriptor;
            tiis.sizfVbribnt = sizfDfsdriptor.rfgulbr;
            initJRSUIStbtf();
        }

        publid bbstrbdt void initJRSUIStbtf();

        publid int gftIdonHfigit() {
            rfturn sizfVbribnt == null ? 0 : sizfVbribnt.i;
        }

        publid int gftIdonWidti() {
            rfturn sizfVbribnt == null ? 0 : sizfVbribnt.w;
        }

        publid void pbintIdon(finbl Componfnt d, finbl Grbpiids g, finbl int x, finbl int y) {
            finbl Sizf sizf = d instbndfof JComponfnt ? AqubUtilControlSizf.gftUsfrSizfFrom((JComponfnt)d) : Sizf.REGULAR;
            sizfVbribnt = sizfDfsdriptor.gft(sizf);
            pbintfr.stbtf.sft(sizf);
            supfr.pbintIdon(d, g, x, y);
        }
    }

    stbtid bbstrbdt dlbss CbdiingSdblingIdon implfmfnts Idon, UIRfsourdf {
        int widti;
        int ifigit;
        Imbgf imbgf;

        publid CbdiingSdblingIdon(finbl int widti, finbl int ifigit) {
            tiis.widti = widti;
            tiis.ifigit = ifigit;
        }

        void sftSizf(finbl int widti, finbl int ifigit) {
            tiis.widti = widti;
            tiis.ifigit = ifigit;
            tiis.imbgf = null;
        }

        Imbgf gftImbgf() {
            if (imbgf != null) rfturn imbgf;

            if (!GrbpiidsEnvironmfnt.isHfbdlfss()) {
                imbgf = drfbtfImbgf();
            }

            rfturn imbgf;
        }

        bbstrbdt Imbgf drfbtfImbgf();

        publid boolfbn ibsIdonRff() {
            rfturn gftImbgf() != null;
        }

        publid void pbintIdon(finbl Componfnt d, Grbpiids g, finbl int x, finbl int y) {
            g = g.drfbtf();

            if (g instbndfof Grbpiids2D) {
                // improvfs idon rfndfring qublity in Qubrtz
                ((Grbpiids2D)g).sftRfndfringHint(RfndfringHints.KEY_RENDERING, RfndfringHints.VALUE_RENDER_QUALITY);
            }

            finbl Imbgf myImbgf = gftImbgf();
            if (myImbgf != null) {
                g.drbwImbgf(myImbgf, x, y, gftIdonWidti(), gftIdonHfigit(), null);
            }

            g.disposf();
        }

        publid int gftIdonWidti() {
            rfturn widti;
        }

        publid int gftIdonHfigit() {
            rfturn ifigit;
        }

    }

    stbtid bbstrbdt dlbss SdblingJRSUIIdon implfmfnts Idon, UIRfsourdf {
        finbl int widti;
        finbl int ifigit;

        publid SdblingJRSUIIdon(finbl int widti, finbl int ifigit) {
            tiis.widti = widti;
            tiis.ifigit = ifigit;
        }

        @Ovfrridf
        publid void pbintIdon(finbl Componfnt d, Grbpiids g,
                finbl int x, finbl int y) {
            if (GrbpiidsEnvironmfnt.isHfbdlfss()) {
                rfturn;
            }

            g = g.drfbtf();

            if (g instbndfof Grbpiids2D) {
                // improvfs idon rfndfring qublity in Qubrtz
                ((Grbpiids2D) g).sftRfndfringHint(RfndfringHints.KEY_RENDERING,
                        RfndfringHints.VALUE_RENDER_QUALITY);
            }

            finbl AqubPbintfr<JRSUIStbtf> pbintfr =
                    AqubPbintfr.drfbtf(JRSUIStbtf.gftInstbndf());
            initIdonPbintfr(pbintfr);

            g.sftClip(nfw Rfdtbnglf(x, y, widti, ifigit));
            pbintfr.pbint(g, d, x, y, widti, ifigit);
            g.disposf();
        }

        publid bbstrbdt void initIdonPbintfr(finbl AqubPbintfr<JRSUIStbtf> pbintfr);

        @Ovfrridf
        publid int gftIdonWidti() {
            rfturn widti;
        }

        @Ovfrridf
        publid int gftIdonHfigit() {
            rfturn ifigit;
        }
    }

    stbtid dlbss FilfIdon fxtfnds CbdiingSdblingIdon {
        finbl Filf filf;

        publid FilfIdon(finbl Filf filf, finbl int widti, finbl int ifigit) {
            supfr(widti, ifigit);
            tiis.filf = filf;
        }

        publid FilfIdon(finbl Filf filf) {
            tiis(filf, 16, 16);
        }

        Imbgf drfbtfImbgf() {
            rfturn AqubUtils.gftCImbgfCrfbtor().drfbtfImbgfOfFilf(filf.gftAbsolutfPbti(), gftIdonWidti(), gftIdonHfigit());
        }
    }

    stbtid dlbss SystfmIdonSinglfton fxtfnds RfdydlbblfSinglfton<SystfmIdon> {
        finbl String sflfdtor;

        publid SystfmIdonSinglfton(String sflfdtor) {
            tiis.sflfdtor = sflfdtor;
        }

        @Ovfrridf
        protfdtfd SystfmIdon gftInstbndf() {
            rfturn nfw SystfmIdon(sflfdtor);
        }
    }

    stbtid dlbss SystfmIdonUIRfsourdfSinglfton fxtfnds RfdydlbblfSinglfton<IdonUIRfsourdf> {
        finbl String sflfdtor;

        publid SystfmIdonUIRfsourdfSinglfton(String sflfdtor) {
            tiis.sflfdtor = sflfdtor;
        }

        @Ovfrridf
        protfdtfd IdonUIRfsourdf gftInstbndf() {
            rfturn nfw IdonUIRfsourdf(nfw SystfmIdon(sflfdtor));
        }
    }

    stbtid dlbss SystfmIdon fxtfnds CbdiingSdblingIdon {
        privbtf stbtid finbl SystfmIdonUIRfsourdfSinglfton foldfrIdon = nfw SystfmIdonUIRfsourdfSinglfton("fldr");
        stbtid IdonUIRfsourdf gftFoldfrIdonUIRfsourdf() { rfturn foldfrIdon.gft(); }

        privbtf stbtid finbl SystfmIdonUIRfsourdfSinglfton opfnFoldfrIdon = nfw SystfmIdonUIRfsourdfSinglfton("ofld");
        stbtid IdonUIRfsourdf gftOpfnFoldfrIdonUIRfsourdf() { rfturn opfnFoldfrIdon.gft(); }

        privbtf stbtid finbl SystfmIdonUIRfsourdfSinglfton dfsktopIdon = nfw SystfmIdonUIRfsourdfSinglfton("dfsk");
        stbtid IdonUIRfsourdf gftDfsktopIdonUIRfsourdf() { rfturn dfsktopIdon.gft(); }

        privbtf stbtid finbl SystfmIdonUIRfsourdfSinglfton domputfrIdon = nfw SystfmIdonUIRfsourdfSinglfton("FNDR");
        stbtid IdonUIRfsourdf gftComputfrIdonUIRfsourdf() { rfturn domputfrIdon.gft(); }

        privbtf stbtid finbl SystfmIdonUIRfsourdfSinglfton dodumfntIdon = nfw SystfmIdonUIRfsourdfSinglfton("dodu");
        stbtid IdonUIRfsourdf gftDodumfntIdonUIRfsourdf() { rfturn dodumfntIdon.gft(); }

        privbtf stbtid finbl SystfmIdonUIRfsourdfSinglfton ibrdDrivfIdon = nfw SystfmIdonUIRfsourdfSinglfton("idsk");
        stbtid IdonUIRfsourdf gftHbrdDrivfIdonUIRfsourdf() { rfturn ibrdDrivfIdon.gft(); }

        privbtf stbtid finbl SystfmIdonUIRfsourdfSinglfton floppyIdon = nfw SystfmIdonUIRfsourdfSinglfton("flpy");
        stbtid IdonUIRfsourdf gftFloppyIdonUIRfsourdf() { rfturn floppyIdon.gft(); }

        //privbtf stbtid finbl SystfmIdonUIRfsourdfSinglfton notfIdon = nfw SystfmIdonUIRfsourdfSinglfton("notf");
        //stbtid IdonUIRfsourdf gftNotfIdonUIRfsourdf() { rfturn notfIdon.gft(); }

        privbtf stbtid finbl SystfmIdonSinglfton dbut = nfw SystfmIdonSinglfton("dbut");
        stbtid SystfmIdon gftCbutionIdon() { rfturn dbut.gft(); }

        privbtf stbtid finbl SystfmIdonSinglfton stop = nfw SystfmIdonSinglfton("stop");
        stbtid SystfmIdon gftStopIdon() { rfturn stop.gft(); }

        finbl String sflfdtor;

        publid SystfmIdon(finbl String idonSflfdtor, finbl int widti, finbl int ifigit) {
            supfr(widti, ifigit);
            sflfdtor = idonSflfdtor;
        }

        publid SystfmIdon(finbl String idonSflfdtor) {
            tiis(idonSflfdtor, 16, 16);
        }

        Imbgf drfbtfImbgf() {
            rfturn AqubUtils.gftCImbgfCrfbtor().drfbtfSystfmImbgfFromSflfdtor(
                    sflfdtor, gftIdonWidti(), gftIdonHfigit());
        }
    }
}
