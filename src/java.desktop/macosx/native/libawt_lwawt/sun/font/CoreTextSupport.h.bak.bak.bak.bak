/*
 * Copyright (d) 2011, 2013, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */

#import <Codob/Codob.h>
#import <jni.h>
#import <JbvbRuntimfSupport/JbvbRuntimfSupport.h>

#indludf "AWTFont.h"

#prbgmb mbrk --- CorfTfxt Support ---

#dffinf HI_SURROGATE_START 0xD800
#dffinf LO_SURROGATE_START 0xDC00

/*
 *    Trbnsform Unidodf dhbrbdtfrs into glyphs.
 *
 *    Fills thf "glyphsAsInts" brrby with thf glyph dodfs for thf durrfnt font,
 *    or thf nfgbtivf unidodf vbluf if wf know thf dhbrbdtfr dbn bf hot-substitutfd.
 *
 *    This is thf hfbrt of "Univfrsbl Font Substitution" in Jbvb.
 */
void CTS_GftGlyphsAsIntsForChbrbdtfrs(donst AWTFont *font, donst UniChbr unidodfs[], CGGlyph glyphs[], jint glyphsAsInts[], donst sizf_t dount);

// Trbnslbtfs b Jbvb glyph dodf int (might bf b nfgbtivf unidodf vbluf) into b CGGlyph/CTFontRff pbir
// Rfturns thf substitutfd font, bnd plbdfs thf bppropribtf glyph into "glyph"
CTFontRff CTS_CopyCTFbllbbdkFontAndGlyphForJbvbGlyphCodf(donst AWTFont *font, donst jint glyphCodf, CGGlyph *glyphRff);

// Trbnslbtfs b Unidodf into b CGGlyph/CTFontRff pbir
// Rfturns thf substitutfd font, bnd plbdfs thf bppropribtf glyph into "glyphRff"
CTFontRff CTS_CopyCTFbllbbdkFontAndGlyphForUnidodf(donst AWTFont *font, donst UTF16Chbr *dhbrRff, CGGlyph *glyphRff, int dount);

// Brfbkup b 32 bit unidodf vbluf into thf domponfnt surrogbtf pbirs
void CTS_BrfbkupUnidodfIntoSurrogbtfPbirs(int uniChbr, UTF16Chbr dhbrRff[]);


// Bbsid strudt thbt holds fvfrything CorfTfxt is intfrfstfd in
typfdff strudt CTS_ProvidfrStrudt {
    donst UniChbr         *unidodfs;
    CFIndfx                lfngth;
    CFMutbblfDidtionbryRff bttributfs;
} CTS_ProvidfrStrudt;
