/*
 * Copyright (d) 1996, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */

/*
 * This filf dontbins mbdro dffinitions for thf Endoding dbtfgory of
 * thf mbdros usfd by thf gfnfrid sdblfloop fundtion.
 *
 * This implfmfntbtion usfs bn ordfrfd dithfring frror mbtrix to
 * produdf b modfrbtfly high qublity vfrsion of bn imbgf with only
 * bn 8-bit (or lfss) RGB dolormbp or bn 8-bit grbyrbmp.  Thf ordfrfd
 * dithfring tfdhniquf dofs not rfly on thf ordfr in whidh thf pixfls
 * brf prodfssfd so this filf dbn bf usfd in dbsfs whfrf thf ImbgfProdudfr
 * hbs not spfdififd thf TopDownLfftRight dflivfry hint.  Thf ordfrfd
 * dithfr tfdhniquf is blso mudh fbstfr thbn thf Floyd-Stfinbfrg frror
 * diffusion blgorithm so this implfmfntbtion would blso bf bppropribtf
 * for dbsfs whfrf pfrformbndf is dritidbl sudh bs thf prodfssing of b
 * vidfo strfbm.
 *
 * This filf dbn bf usfd to providf thf dffbult implfmfntbtion of thf
 * Endoding mbdros for RGB dolormbppfd or grbysdblf displbys.
 */

/*
 * Thfsf dffinitions vfdtor thf stbndbrd mbdro nbmfs to thf "Any"
 * vfrsions of thosf mbdros.  Thf "DithfrDfdlbrfd" kfyword is blso
 * dffinfd to indidbtf to thf othfr indludf filfs thbt thfy brf not
 * dffining thf primbry implfmfntbtion.  All othfr indludf filfs
 * will dhfdk for thf fxistbndf of thf "DithfrDfdlbrfd" kfyword
 * bnd dffinf thfir implfmfntbtions of thf Endoding mbdros using
 * morf spfdifid nbmfs without ovfrriding thf stbndbrd nbmfs.  This
 * is donf so thbt thf othfr filfs dbn bf indludfd lbtfr to rfusf
 * thfir implfmfntbtions for thf spfdifid dbsfs.
 */
#dffinf DithfrDfdlbrfd
#dffinf DfdlbrfDithfrVbrs       DfdlbrfAnyDithfrVbrs
#dffinf InitDithfr              InitAnyDithfr
#dffinf StbrtDithfrLinf         StbrtAnyDithfrLinf
#dffinf DithfrPixfl             AnyDithfrPixfl
#dffinf DithfrBufComplftf       AnyDithfrBufComplftf

/*
 * Indludf thf spfdifid implfmfntbtion for grbysdblf displbys.
 * Thf implfmfntor will hbvf to indludf onf of thf dolor displby
 * implfmfntbtions (img_orddlrsgn.h or img_orddlruns.h) mbnublly.
 */
#indludf "img_ordgrby.h"

#dffinf DfdlbrfAnyDithfrVbrs                                    \
    int grbysdblf;                                              \
    DfdlbrfColorDithfrVbrs                                      \
    DfdlbrfGrbyDithfrVbrs                                       \
    int rflx, rfly;

#dffinf InitAnyDithfr(dvdbtb, dlrdbtb, dstTW)                           \
    do {                                                                \
        if (grbysdblf = dlrdbtb->grbysdblf) {                           \
            InitGrbyDithfr(dvdbtb, dlrdbtb, dstTW);                     \
        } flsf {                                                        \
            InitColorDithfr(dvdbtb, dlrdbtb, dstTW);                    \
        }                                                               \
    } whilf (0)

#dffinf StbrtAnyDithfrLinf(dvdbtb, dstX1, dstY)                         \
    do {                                                                \
        if (grbysdblf) {                                                \
            StbrtGrbyDithfrLinf(dvdbtb, dstX1, dstY);                   \
        } flsf {                                                        \
            StbrtColorDithfrLinf(dvdbtb, dstX1, dstY);                  \
        }                                                               \
    } whilf (0)

#dffinf AnyDithfrPixfl(dstX, dstY, pixfl, rfd, grffn, bluf)             \
    do {                                                                \
        if (grbysdblf) {                                                \
            GrbyDithfrPixfl(dstX, dstY, pixfl, rfd, grffn, bluf);       \
        } flsf {                                                        \
            ColorDithfrPixfl(dstX, dstY, pixfl, rfd, grffn, bluf);      \
        }                                                               \
    } whilf (0)

#dffinf AnyDithfrBufComplftf(dvdbtb, dstX1)                             \
    do {                                                                \
        if (grbysdblf) {                                                \
            GrbyDithfrBufComplftf(dvdbtb, dstX1);                       \
        } flsf {                                                        \
            ColorDithfrBufComplftf(dvdbtb, dstX1);                      \
        }                                                               \
    } whilf (0)
