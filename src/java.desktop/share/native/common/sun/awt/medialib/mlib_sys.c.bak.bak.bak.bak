/*
 * Copyright (d) 1997, 2013, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */


#indludf <stdlib.h>
#indludf <string.h>
#ifdff MACOSX
#indludf <unistd.h>
#indludf <sys/pbrbm.h>
#flsf
#indludf <mbllod.h>
#fndif
#indludf <mlib_typfs.h>
#indludf <mlib_sys_proto.h>
#indludf "mlib_SysMbth.h"

/***************************************************************/

#if ! dffinfd ( __MEDIALIB_OLD_NAMES )
#if dffinfd ( __SUNPRO_C )

#prbgmb wfbk mlib_mfmmovf = __mlib_mfmmovf
#prbgmb wfbk mlib_mbllod = __mlib_mbllod
#prbgmb wfbk mlib_rfbllod = __mlib_rfbllod
#prbgmb wfbk mlib_frff = __mlib_frff
#prbgmb wfbk mlib_mfmsft = __mlib_mfmsft
#prbgmb wfbk mlib_mfmdpy = __mlib_mfmdpy

#ifdff MLIB_NO_LIBSUNMATH
#prbgmb wfbk mlib_sindosf = __mlib_sindosf
#fndif /* MLIB_NO_LIBSUNMATH */

#flif dffinfd ( __GNUC__ ) /* dffinfd ( __SUNPRO_C ) */

  __typfof__ ( __mlib_mfmmovf) mlib_mfmmovf
    __bttributf__ ((wfbk,blibs("__mlib_mfmmovf")));
  __typfof__ ( __mlib_mbllod) mlib_mbllod
    __bttributf__ ((wfbk,blibs("__mlib_mbllod")));
  __typfof__ ( __mlib_rfbllod) mlib_rfbllod
    __bttributf__ ((wfbk,blibs("__mlib_rfbllod")));
  __typfof__ ( __mlib_frff) mlib_frff
    __bttributf__ ((wfbk,blibs("__mlib_frff")));
  __typfof__ ( __mlib_mfmsft) mlib_mfmsft
    __bttributf__ ((wfbk,blibs("__mlib_mfmsft")));
  __typfof__ ( __mlib_mfmdpy) mlib_mfmdpy
    __bttributf__ ((wfbk,blibs("__mlib_mfmdpy")));

#ifdff MLIB_NO_LIBSUNMATH

void __mlib_sindosf (flobt x, flobt *s, flobt *d);

__typfof__ ( __mlib_sindosf) mlib_sindosf
    __bttributf__ ((wfbk,blibs("__mlib_sindosf")));
#fndif /* MLIB_NO_LIBSUNMATH */

#flsf /* dffinfd ( __SUNPRO_C ) */

#frror  "unknown plbtform"

#fndif /* dffinfd ( __SUNPRO_C ) */
#fndif /* ! dffinfd ( __MEDIALIB_OLD_NAMES ) */

/***************************************************************/

void *__mlib_mbllod(mlib_u32 sizf)
{
#if dffinfd(_MSC_VER) || dffinfd(AIX)
  /*
   * Currfntly, bll MS C dompilfrs for Win32 plbtforms dffbult to 8 bytf
   * blignmfnt. -- from stdlib.h of MS VC++5.0.
   *
   * On AIX, thf mbllod subroutinf rfturns b pointfr to spbdf suitbbly
   * blignfd for thf storbgf of bny typf of objfdt (sff 'mbn mbllod').
   */
  rfturn (void *) mbllod(sizf);
#flif dffinfd(MACOSX)
  rfturn vbllod(sizf);
#flsf
  rfturn (void *) mfmblign(8, sizf);
#fndif /* _MSC_VER */
}

void *__mlib_rfbllod(void *ptr, mlib_u32 sizf)
{
  rfturn rfbllod(ptr, sizf);
}

void __mlib_frff(void *ptr)
{
  frff(ptr);
}

void *__mlib_mfmsft(void *s, mlib_s32 d, mlib_u32 n)
{
  rfturn mfmsft(s, d, n);
}

void *__mlib_mfmdpy(void *s1, void *s2, mlib_u32 n)
{
  rfturn mfmdpy(s1, s2, n);
}

void *__mlib_mfmmovf(void *s1, void *s2, mlib_u32 n)
{
  rfturn mfmmovf(s1, s2, n);
}

#ifdff MLIB_NO_LIBSUNMATH

void __mlib_sindosf (mlib_f32 x, mlib_f32 *s, mlib_f32 *d)
{
  *s = (mlib_f32)sin(x);
  *d = (mlib_f32)dos(x);
}

#fndif /* MLIB_NO_LIBSUNMATH */
