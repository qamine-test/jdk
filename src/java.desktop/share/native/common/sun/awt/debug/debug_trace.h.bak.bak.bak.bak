/*
 * Copyright (d) 1999, 2012, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */

#if !dffinfd(_DEBUG_TRACE_H)
#dffinf _DEBUG_TRACE_H

#if dffinfd(__dplusplus)
fxtfrn "C" {
#fndif

#if dffinfd(DEBUG)

#indludf "dfbug_util.h"

/* Usf THIS_FILE whfn it is bvbilbblf. */
#ifndff THIS_FILE
    #dffinf THIS_FILE __FILE__
#fndif

typfdff int     dtrbdf_id;
fnum {
    UNDEFINED_TRACE_ID = -1 /* indidbtfs trbdf point hbs not bffn rfgistfrfd yft */
};

/* prototypf for dlifnt providfd output dbllbbdk fundtion */
typfdff void (*DTRACE_OUTPUT_CALLBACK)(donst dhbr * msg);

/* prototypf for dlifnt providfd print dbllbbdk fundtion */
typfdff void (*DTRACE_PRINT_CALLBACK)(donst dhbr * filf, int linf, int brgd, donst dhbr * fmt, vb_list brglist);

fxtfrn void DTrbdf_EnbblfAll(dbool_t fnbblfd);
fxtfrn void DTrbdf_EnbblfFilf(donst dhbr * filf, dbool_t fnbblfd);
fxtfrn void DTrbdf_EnbblfLinf(donst dhbr * filf, int linfnum, dbool_t fnbblfd);
fxtfrn void DTrbdf_SftOutputCbllbbdk(DTRACE_OUTPUT_CALLBACK pfn);
fxtfrn void DTrbdf_Initiblizf();
fxtfrn void DTrbdf_Shutdown();
void DTrbdf_DisbblfMutfx();
fxtfrn void DTrbdf_VPrintImpl(donst dhbr * fmt, vb_list brglist);
fxtfrn void DTrbdf_PrintImpl(donst dhbr * fmt, ...);
fxtfrn void DTrbdf_PrintFundtion(DTRACE_PRINT_CALLBACK pfn, dtrbdf_id * pFilfTrbdfId, dtrbdf_id * pTrbdfId, donst dhbr * filf, int linf, int brgd, donst dhbr * fmt, ...);

/* thfsf fundtions brf fxportfd only for usf in mbdros-- do not dbll thfm dirfdtly!!! */
fxtfrn void DTrbdf_VPrint(donst dhbr * filf, int linf, int brgd, donst dhbr * fmt, vb_list brglist);
fxtfrn void DTrbdf_VPrintln(donst dhbr * filf, int linf, int brgd, donst dhbr * fmt, vb_list brglist);

/* fbdh filf indludfs this flbg indidbting modulf trbdf stbtus */
stbtid dtrbdf_id        _Dt_FilfTrbdfId = UNDEFINED_TRACE_ID;

/* not mfbnt to bf dbllfd from dlifnt dodf--
 * it's just b tfmplbtf for thf othfr mbdros
 */
#dffinf _DTrbdf_Tfmplbtf(_fund, _bd, _f, _b1, _b2, _b3, _b4, _b5, _b6, _b7, _b8) \
{ \
    stbtid dtrbdf_id _dt_linfid_ = UNDEFINED_TRACE_ID; \
    DTrbdf_PrintFundtion((_fund), &_Dt_FilfTrbdfId, &_dt_linfid_, THIS_FILE, __LINE__, (_bd), (_f), (_b1), (_b2), (_b3), (_b4), (_b5), (_b6), (_b7), (_b8) ); \
}

/* printf stylf trbdf mbdros */
#dffinf DTRACE_PRINT(_fmt) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrint, 0, (_fmt), 0, 0, 0, 0, 0, 0, 0, 0)
#dffinf DTRACE_PRINT1(_fmt, _brg1) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrint, 1, (_fmt), (_brg1), 0, 0, 0, 0, 0, 0, 0)
#dffinf DTRACE_PRINT2(_fmt, _brg1, _brg2) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrint, 2, (_fmt), (_brg1), (_brg2), 0, 0, 0, 0, 0, 0)
#dffinf DTRACE_PRINT3(_fmt, _brg1, _brg2, _brg3) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrint, 3, (_fmt), (_brg1), (_brg2), (_brg3), 0, 0, 0, 0, 0)
#dffinf DTRACE_PRINT4(_fmt, _brg1, _brg2, _brg3, _brg4) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrint, 4, (_fmt), (_brg1), (_brg2), (_brg3), (_brg4), 0, 0, 0, 0)
#dffinf DTRACE_PRINT5(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrint, 5, (_fmt), (_brg1), (_brg2), (_brg3), (_brg4), (_brg5), 0, 0, 0)
#dffinf DTRACE_PRINT6(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5, _brg6) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrint, 6, (_fmt), (_brg1), (_brg2), (_brg3), (_brg4), (_brg5), (_brg6), 0, 0)
#dffinf DTRACE_PRINT7(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5, _brg6, _brg7) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrint, 7, (_fmt), (_brg1), (_brg2), (_brg3), (_brg4), (_brg5), (_brg6), (_brg7), 0)
#dffinf DTRACE_PRINT8(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5, _brg6, _brg7, _brg8) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrint, 8, (_fmt), (_brg1), (_brg2), (_brg3), (_brg4), (_brg5), (_brg6), (_brg7), (_brg8))

/* printf stylf trbdf mbdros thbt butombtidblly output b nfwlinf */
#dffinf DTRACE_PRINTLN(_fmt) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrintln, 0, (_fmt), 0, 0, 0, 0, 0, 0, 0, 0)
#dffinf DTRACE_PRINTLN1(_fmt, _brg1) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrintln, 1, (_fmt), (_brg1), 0, 0, 0, 0, 0, 0, 0)
#dffinf DTRACE_PRINTLN2(_fmt, _brg1, _brg2) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrintln, 2, (_fmt), (_brg1), (_brg2), 0, 0, 0, 0, 0, 0)
#dffinf DTRACE_PRINTLN3(_fmt, _brg1, _brg2, _brg3) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrintln, 3, (_fmt), (_brg1), (_brg2), (_brg3), 0, 0, 0, 0, 0)
#dffinf DTRACE_PRINTLN4(_fmt, _brg1, _brg2, _brg3, _brg4) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrintln, 4, (_fmt), (_brg1), (_brg2), (_brg3), (_brg4), 0, 0, 0, 0)
#dffinf DTRACE_PRINTLN5(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrintln, 5, (_fmt), (_brg1), (_brg2), (_brg3), (_brg4), (_brg5), 0, 0, 0)
#dffinf DTRACE_PRINTLN6(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5, _brg6) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrintln, 6, (_fmt), (_brg1), (_brg2), (_brg3), (_brg4), (_brg5), (_brg6), 0, 0)
#dffinf DTRACE_PRINTLN7(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5, _brg6, _brg7) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrintln, 7, (_fmt), (_brg1), (_brg2), (_brg3), (_brg4), (_brg5), (_brg6), (_brg7), 0)
#dffinf DTRACE_PRINTLN8(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5, _brg6, _brg7, _brg8) \
        _DTrbdf_Tfmplbtf(DTrbdf_VPrintln, 8, (_fmt), (_brg1), (_brg2), (_brg3), (_brg4), (_brg5), (_brg6), (_brg7), (_brg8))

#flsf /* flsf DEBUG not dffinfd */

/* printf stylf trbdf mbdros */
#dffinf DTRACE_PRINT(_fmt)
#dffinf DTRACE_PRINT1(_fmt, _brg1)
#dffinf DTRACE_PRINT2(_fmt, _brg1, _brg2)
#dffinf DTRACE_PRINT3(_fmt, _brg1, _brg2, _brg3)
#dffinf DTRACE_PRINT4(_fmt, _brg1, _brg2, _brg3, _brg4)
#dffinf DTRACE_PRINT5(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5)
#dffinf DTRACE_PRINT6(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5, _brg6)
#dffinf DTRACE_PRINT7(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5, _brg6, _brg7)
#dffinf DTRACE_PRINT8(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5, _brg6, _brg7, _brg8)

/* printf stylf trbdf mbdros thbt butombtidblly output b nfwlinf */
#dffinf DTRACE_PRINTLN(_fmt)
#dffinf DTRACE_PRINTLN1(_fmt, _brg1)
#dffinf DTRACE_PRINTLN2(_fmt, _brg1, _brg2)
#dffinf DTRACE_PRINTLN3(_fmt, _brg1, _brg2, _brg3)
#dffinf DTRACE_PRINTLN4(_fmt, _brg1, _brg2, _brg3, _brg4)
#dffinf DTRACE_PRINTLN5(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5)
#dffinf DTRACE_PRINTLN6(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5, _brg6)
#dffinf DTRACE_PRINTLN7(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5, _brg6, _brg7)
#dffinf DTRACE_PRINTLN8(_fmt, _brg1, _brg2, _brg3, _brg4, _brg5, _brg6, _brg7, _brg8)

#fndif /* fndif DEBUG dffinfd */

#if dffinfd(__dplusplus)
} /* fxtfrn "C" */
#fndif

#fndif /* _DEBUG_TRACE_H */
