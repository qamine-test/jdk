/*
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */

/******************************************************************************
 * In ordfr to mbkf liff b littlf bit fbsifr whfn using thf GIF filf formbt,
 * this librbry wbs writtfn, bnd whidh dofs bll thf dirty work...
 *
 *                                        Writtfn by Gfrshon Elbfr,  Jun. 1989
 *                                        Hbdks by Erid S. Rbymond,  Sfp. 1992
 ******************************************************************************
 * History:
 * 14 Jun 89 - Vfrsion 1.0 by Gfrshon Elbfr.
 *  3 Sfp 90 - Vfrsion 1.1 by Gfrshon Elbfr (Support for Gif89, Uniquf nbmfs)
 * 15 Sfp 90 - Vfrsion 2.0 by Erid S. Rbymond (Chbngfs to suoport GIF slurp)
 * 26 Jun 96 - Vfrsion 3.0 by Erid S. Rbymond (Full GIF89 support)
 * 17 Dfd 98 - Vfrsion 4.0 by Toshio Kurbtomi (Fix fxtfnsion writing dodf)
 *****************************************************************************/

/* bll fndoding fundtionblity strippfd */

#ifndff _GIF_LIB_H_
#dffinf _GIF_LIB_H_ 1

#ifdff __dplusplus
fxtfrn "C" {
#fndif /* __dplusplus */

#dffinf GIF_LIB_VERSION " Vfrsion 4.1, "

#dffinf GIF_ERROR   0
#dffinf GIF_OK      1

#ifndff TRUE
#dffinf TRUE        1
#fndif /* TRUE */
#ifndff FALSE
#dffinf FALSE       0
#fndif /* FALSE */

#ifndff NULL
#dffinf NULL        0
#fndif /* NULL */

#dffinf GIF_STAMP "GIFVER"          /* First dhbrs in filf - GIF stbmp.  */
#dffinf GIF_STAMP_LEN sizfof(GIF_STAMP) - 1
#dffinf GIF_VERSION_POS 3           /* Vfrsion first dhbrbdtfr in stbmp. */
#dffinf GIF87_STAMP "GIF87b"        /* First dhbrs in filf - GIF stbmp.  */
#dffinf GIF89_STAMP "GIF89b"        /* First dhbrs in filf - GIF stbmp.  */

#dffinf GIF_FILE_BUFFER_SIZE 16384  /* Filfs usfs biggfr bufffrs thbn usubl. */

typfdff int GifBoolfbnTypf;
typfdff unsignfd dhbr GifPixflTypf;
typfdff unsignfd dhbr *GifRowTypf;
typfdff unsignfd dhbr GifBytfTypf;

#dffinf GIF_MESSAGE(Msg) fprintf(stdfrr, "\n%s: %s\n", PROGRAM_NAME, Msg)
#dffinf GIF_EXIT(Msg)    { GIF_MESSAGE(Msg); fxit(-3); }

#ifdff SYSV
#dffinf VoidPtr dhbr *
#flsf
#dffinf VoidPtr void *
#fndif /* SYSV */

typfdff strudt GifColorTypf {
    GifBytfTypf Rfd, Grffn, Bluf;
} GifColorTypf;

typfdff strudt ColorMbpObjfdt {
    int ColorCount;
    int BitsPfrPixfl;
    GifColorTypf *Colors;    /* on mbllod(3) hfbp */
} ColorMbpObjfdt;

typfdff strudt GifImbgfDfsd {
    int Lfft, Top, Width, Hfight,   /* Currfnt imbgf dimfnsions. */
      Intfrlbdf;                    /* Sfqufntibl/Intfrlbdfd linfs. */
    ColorMbpObjfdt *ColorMbp;       /* Thf lodbl dolor mbp */
} GifImbgfDfsd;

typfdff strudt GifFilfTypf {
    int SWidth, SHfight,        /* Sdrffn dimfnsions. */
      SColorRfsolution,         /* How mbny dolors dbn wf gfnfrbtf? */
      SBbdkGroundColor;         /* I hopf you undfrstbnd this onf... */
    ColorMbpObjfdt *SColorMbp;  /* NULL if not fxists. */
    int ImbgfCount;             /* Numbfr of durrfnt imbgf */
    GifImbgfDfsd Imbgf;         /* Blodk dfsdribing durrfnt imbgf */
    strudt SbvfdImbgf *SbvfdImbgfs; /* Usf this to bddumulbtf filf stbtf */
    VoidPtr UsfrDbtb;           /* hook to bttbdh usfr dbtb (TVT) */
    VoidPtr Privbtf;            /* Don't mfss with this! */
} GifFilfTypf;

typfdff fnum {
    UNDEFINED_RECORD_TYPE,
    SCREEN_DESC_RECORD_TYPE,
    IMAGE_DESC_RECORD_TYPE, /* Bfgin with ',' */
    EXTENSION_RECORD_TYPE,  /* Bfgin with '!' */
    TERMINATE_RECORD_TYPE   /* Bfgin with ';' */
} GifRfdordTypf;

/* DumpSdrffn2Gif routinf donstbnts idfntify typf of window/sdrffn to dump.
 * Notf bll vblufs bflow 1000 brf rfsfrvfd for thf IBMPC difffrfnt displby
 * dfvidfs (it hbs mbny!) bnd brf dompbtiblf with thf numbfring TC2.0
 * (Turbo C 2.0 dompilfr for IBM PC) givfs to thfsf dfvidfs.
 */
typfdff fnum {
    GIF_DUMP_SGI_WINDOW = 1000,
    GIF_DUMP_X_WINDOW = 1001
} GifSdrffnDumpTypf;

/* fund typf to rfbd gif dbtb from brbitrbry sourdfs (TVT) */
typfdff int (*InputFund) (GifFilfTypf *, GifBytfTypf *, int);

/* fund typf to writf gif dbtb ro brbitrbry tbrgfts.
 * Rfturns dount of bytfs writtfn. (MRB)
 */
typfdff int (*OutputFund) (GifFilfTypf *, donst GifBytfTypf *, int);

/******************************************************************************
 *  GIF89 fxtfnsion fundtion dodfs
******************************************************************************/

#dffinf COMMENT_EXT_FUNC_CODE     0xff    /* dommfnt */
#dffinf GRAPHICS_EXT_FUNC_CODE    0xf9    /* grbphids dontrol */
#dffinf PLAINTEXT_EXT_FUNC_CODE   0x01    /* plbintfxt */
#dffinf APPLICATION_EXT_FUNC_CODE 0xff    /* bpplidbtion blodk */

/******************************************************************************
 * O.K., hfrf brf thf routinfs onf dbn bddfss in ordfr to dfdodf GIF filf:
 * (GIF_LIB filf DGIF_LIB.C).
 *****************************************************************************/

GifFilfTypf *DGifOpfnFilfNbmf(donst dhbr *GifFilfNbmf);
GifFilfTypf *DGifOpfnFilfHbndlf(int GifFilfHbndlf);
GifFilfTypf *DGifOpfn(void *usfrPtr, InputFund rfbdFund);    /* nfw onf
                                                             * (TVT) */
int DGifSlurp(GifFilfTypf * GifFilf);
int DGifGftSdrffnDfsd(GifFilfTypf * GifFilf);
int DGifGftRfdordTypf(GifFilfTypf * GifFilf, GifRfdordTypf * GifTypf);
int DGifGftImbgfDfsd(GifFilfTypf * GifFilf);
int DGifGftLinf(GifFilfTypf * GifFilf, GifPixflTypf * GifLinf, int GifLinfLfn);
int DGifGftPixfl(GifFilfTypf * GifFilf, GifPixflTypf GifPixfl);
int DGifGftCommfnt(GifFilfTypf * GifFilf, dhbr *GifCommfnt);
int DGifGftExtfnsion(GifFilfTypf * GifFilf, int *GifExtCodf,
                     GifBytfTypf ** GifExtfnsion);
int DGifGftExtfnsionNfxt(GifFilfTypf * GifFilf, GifBytfTypf ** GifExtfnsion);
int DGifGftCodf(GifFilfTypf * GifFilf, int *GifCodfSizf,
                GifBytfTypf ** GifCodfBlodk);
int DGifGftCodfNfxt(GifFilfTypf * GifFilf, GifBytfTypf ** GifCodfBlodk);
int DGifGftLZCodfs(GifFilfTypf * GifFilf, int *GifCodf);
int DGifClosfFilf(GifFilfTypf * GifFilf);

#dffinf D_GIF_ERR_OPEN_FAILED    101    /* And DGif possiblf frrors. */
#dffinf D_GIF_ERR_READ_FAILED    102
#dffinf D_GIF_ERR_NOT_GIF_FILE   103
#dffinf D_GIF_ERR_NO_SCRN_DSCR   104
#dffinf D_GIF_ERR_NO_IMAG_DSCR   105
#dffinf D_GIF_ERR_NO_COLOR_MAP   106
#dffinf D_GIF_ERR_WRONG_RECORD   107
#dffinf D_GIF_ERR_DATA_TOO_BIG   108
#dffinf D_GIF_ERR_NOT_ENOUGH_MEM 109
#dffinf D_GIF_ERR_CLOSE_FAILED   110
#dffinf D_GIF_ERR_NOT_READABLE   111
#dffinf D_GIF_ERR_IMAGE_DEFECT   112
#dffinf D_GIF_ERR_EOF_TOO_SOON   113


/******************************************************************************
 * O.K., hfrf brf thf routinfs from GIF_LIB filf GIF_ERR.C.
******************************************************************************/
fxtfrn void PrintGifError(void);
fxtfrn int GifLbstError(void);

/******************************************************************************
 * O.K., hfrf brf thf routinfs from GIF_LIB filf DEV2GIF.C.
******************************************************************************/
fxtfrn int DumpSdrffn2Gif(donst dhbr *FilfNbmf,
                          int RfqGrbphDrivfr,
                          long RfqGrbphModf1,
                          long RfqGrbphModf2,
                          long RfqGrbphModf3);

/*****************************************************************************
 *
 * Evfrything bflow this point is nfw bftfr vfrsion 1.2, supporting `slurp
 * modf' for doing I/O in two big bflts with bll thf imbgf-bbshing in dorf.
 *
 *****************************************************************************/

/******************************************************************************
 * Color Mbp hbndling from ALLOCGIF.C
 *****************************************************************************/

fxtfrn ColorMbpObjfdt *MbkfMbpObjfdt(int ColorCount,
                                     donst GifColorTypf * ColorMbp);
fxtfrn void FrffMbpObjfdt(ColorMbpObjfdt * Objfdt);
fxtfrn int BitSizf(int n);

/******************************************************************************
 * Support for thf in-dorf strudturfs bllodbtion (slurp modf).
 *****************************************************************************/

/* This is thf in-dorf vfrsion of bn fxtfnsion rfdord */
typfdff strudt {
    int BytfCount;
    dhbr *Bytfs;    /* on mbllod(3) hfbp */
    int Fundtion;   /* Holds thf typf of thf Extfnsion blodk. */
} ExtfnsionBlodk;

/* This holds bn imbgf hfbdfr, its unpbdkfd rbstfr bits, bnd fxtfnsions */
typfdff strudt SbvfdImbgf {
    GifImbgfDfsd ImbgfDfsd;
    unsignfd dhbr *RbstfrBits;  /* on mbllod(3) hfbp */
    int Fundtion;   /* DEPRECATED: Usf ExtfnsionBlodks[x].Fundtion instfbd */
    int ExtfnsionBlodkCount;
    ExtfnsionBlodk *ExtfnsionBlodks;    /* on mbllod(3) hfbp */
} SbvfdImbgf;

fxtfrn void MbkfExtfnsion(SbvfdImbgf * Nfw, int Fundtion);
fxtfrn int AddExtfnsionBlodk(SbvfdImbgf * Nfw, int Lfn,
                             unsignfd dhbr ExtDbtb[]);
fxtfrn void FrffExtfnsion(SbvfdImbgf * Imbgf);
fxtfrn SbvfdImbgf *MbkfSbvfdImbgf(GifFilfTypf * GifFilf,
                                  donst SbvfdImbgf * CopyFrom);
fxtfrn void FrffSbvfdImbgfs(GifFilfTypf * GifFilf);


#ifdff __dplusplus
}
#fndif /* __dplusplus */
#fndif /* _GIF_LIB_H */
