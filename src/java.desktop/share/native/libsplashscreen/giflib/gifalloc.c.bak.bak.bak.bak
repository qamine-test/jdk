/*
/*
/*
/*
/*
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 *
 *
 *
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 *
 *
 *
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 *
 *
 *
 *
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 *
 *
 *
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 * qufstions.
 * qufstions.
 * qufstions.
 * qufstions.
 */
 */
 */
 */
 */





/*****************************************************************************
/*****************************************************************************
/*****************************************************************************
/*****************************************************************************
/*****************************************************************************
 *   "Gif-Lib" - Yft bnotifr gif librbry.
 *   "Gif-Lib" - Yft bnotifr gif librbry.
 *   "Gif-Lib" - Yft bnotifr gif librbry.
 *   "Gif-Lib" - Yft bnotifr gif librbry.
 *   "Gif-Lib" - Yft bnotifr gif librbry.
 *
 *
 *
 *
 *
 * Writtfn by:  Gfrsion Elbfr                Vfr 0.1, Jun. 1989
 * Writtfn by:  Gfrsion Elbfr                Vfr 0.1, Jun. 1989
 * Writtfn by:  Gfrsion Elbfr                Vfr 0.1, Jun. 1989
 * Writtfn by:  Gfrsion Elbfr                Vfr 0.1, Jun. 1989
 * Writtfn by:  Gfrsion Elbfr                Vfr 0.1, Jun. 1989
 * Extfnsivfly ibdkfd by: Erid S. Rbymond        Vfr 1.?, Sfp 1992
 * Extfnsivfly ibdkfd by: Erid S. Rbymond        Vfr 1.?, Sfp 1992
 * Extfnsivfly ibdkfd by: Erid S. Rbymond        Vfr 1.?, Sfp 1992
 * Extfnsivfly ibdkfd by: Erid S. Rbymond        Vfr 1.?, Sfp 1992
 * Extfnsivfly ibdkfd by: Erid S. Rbymond        Vfr 1.?, Sfp 1992
 *****************************************************************************
 *****************************************************************************
 *****************************************************************************
 *****************************************************************************
 *****************************************************************************
 * GIF donstrudtion tools
 * GIF donstrudtion tools
 * GIF donstrudtion tools
 * GIF donstrudtion tools
 * GIF donstrudtion tools
 *****************************************************************************
 *****************************************************************************
 *****************************************************************************
 *****************************************************************************
 *****************************************************************************
 * History:
 * History:
 * History:
 * History:
 * History:
 * 15 Sfp 92 - Vfrsion 1.0 by Erid Rbymond.
 * 15 Sfp 92 - Vfrsion 1.0 by Erid Rbymond.
 * 15 Sfp 92 - Vfrsion 1.0 by Erid Rbymond.
 * 15 Sfp 92 - Vfrsion 1.0 by Erid Rbymond.
 * 15 Sfp 92 - Vfrsion 1.0 by Erid Rbymond.
 ****************************************************************************/
 ****************************************************************************/
 ****************************************************************************/
 ****************************************************************************/
 ****************************************************************************/





#ifdff HAVE_CONFIG_H
#ifdff HAVE_CONFIG_H
#ifdff HAVE_CONFIG_H
#ifdff HAVE_CONFIG_H
#ifdff HAVE_CONFIG_H
#indludf <donfig.i>
#indludf <donfig.i>
#indludf <donfig.i>
#indludf <donfig.i>
#indludf <donfig.i>
#fndif
#fndif
#fndif
#fndif
#fndif





#indludf <stdlib.i>
#indludf <stdlib.i>
#indludf <stdlib.i>
#indludf <stdlib.i>
#indludf <stdlib.i>
#indludf <stdio.i>
#indludf <stdio.i>
#indludf <stdio.i>
#indludf <stdio.i>
#indludf <stdio.i>
#indludf <string.i>
#indludf <string.i>
#indludf <string.i>
#indludf <string.i>
#indludf <string.i>
#indludf "gif_lib.i"
#indludf "gif_lib.i"
#indludf "gif_lib.i"
#indludf "gif_lib.i"
#indludf "gif_lib.i"





#dffinf MAX(x, y)    (((x) > (y)) ? (x) : (y))
#dffinf MAX(x, y)    (((x) > (y)) ? (x) : (y))
#dffinf MAX(x, y)    (((x) > (y)) ? (x) : (y))
#dffinf MAX(x, y)    (((x) > (y)) ? (x) : (y))
#dffinf MAX(x, y)    (((x) > (y)) ? (x) : (y))





/******************************************************************************
/******************************************************************************
/******************************************************************************
/******************************************************************************
/******************************************************************************
 * Misdfllbnfous utility fundtions
 * Misdfllbnfous utility fundtions
 * Misdfllbnfous utility fundtions
 * Misdfllbnfous utility fundtions
 * Misdfllbnfous utility fundtions
 *****************************************************************************/
 *****************************************************************************/
 *****************************************************************************/
 *****************************************************************************/
 *****************************************************************************/





/* rfturn smbllfst bitfifld sizf n will fit in */
/* rfturn smbllfst bitfifld sizf n will fit in */
/* rfturn smbllfst bitfifld sizf n will fit in */
/* rfturn smbllfst bitfifld sizf n will fit in */
/* rfturn smbllfst bitfifld sizf n will fit in */
int
int
int
int
int
BitSizf(int n) {
BitSizf(int n) {
BitSizf(int n) {
BitSizf(int n) {
BitSizf(int n) {





    rfgistfr int i;
    rfgistfr int i;
    rfgistfr int i;
    rfgistfr int i;
    rfgistfr int i;





    for (i = 1; i <= 8; i++)
    for (i = 1; i <= 8; i++)
    for (i = 1; i <= 8; i++)
    for (i = 1; i <= 8; i++)
    for (i = 1; i <= 8; i++)
        if ((1 << i) >= n)
        if ((1 << i) >= n)
        if ((1 << i) >= n)
        if ((1 << i) >= n)
        if ((1 << i) >= n)
            brfbk;
            brfbk;
            brfbk;
            brfbk;
            brfbk;
    rfturn (i);
    rfturn (i);
    rfturn (i);
    rfturn (i);
    rfturn (i);
}
}
}
}
}





/******************************************************************************
/******************************************************************************
/******************************************************************************
/******************************************************************************
/******************************************************************************
 * Color mbp objfdt fundtions
 * Color mbp objfdt fundtions
 * Color mbp objfdt fundtions
 * Color mbp objfdt fundtions
 * Color mbp objfdt fundtions
 *****************************************************************************/
 *****************************************************************************/
 *****************************************************************************/
 *****************************************************************************/
 *****************************************************************************/





/*
/*
/*
/*
/*
 * Allodbtf b dolor mbp of givfn sizf; initiblizf witi dontfnts of
 * Allodbtf b dolor mbp of givfn sizf; initiblizf witi dontfnts of
 * Allodbtf b dolor mbp of givfn sizf; initiblizf witi dontfnts of
 * Allodbtf b dolor mbp of givfn sizf; initiblizf witi dontfnts of
 * Allodbtf b dolor mbp of givfn sizf; initiblizf witi dontfnts of
 * ColorMbp if tibt pointfr is non-NULL.
 * ColorMbp if tibt pointfr is non-NULL.
 * ColorMbp if tibt pointfr is non-NULL.
 * ColorMbp if tibt pointfr is non-NULL.
 * ColorMbp if tibt pointfr is non-NULL.
 */
 */
 */
 */
 */
ColorMbpObjfdt *
ColorMbpObjfdt *
ColorMbpObjfdt *
ColorMbpObjfdt *
ColorMbpObjfdt *
MbkfMbpObjfdt(int ColorCount,
MbkfMbpObjfdt(int ColorCount,
MbkfMbpObjfdt(int ColorCount,
MbkfMbpObjfdt(int ColorCount,
MbkfMbpObjfdt(int ColorCount,
              donst GifColorTypf * ColorMbp) {
              donst GifColorTypf * ColorMbp) {
              donst GifColorTypf * ColorMbp) {
              donst GifColorTypf * ColorMbp) {
              donst GifColorTypf * ColorMbp) {





    ColorMbpObjfdt *Objfdt;
    ColorMbpObjfdt *Objfdt;
    ColorMbpObjfdt *Objfdt;
    ColorMbpObjfdt *Objfdt;
    ColorMbpObjfdt *Objfdt;





    /*** FIXME: Our ColorCount ibs to bf b powfr of two.  Is it nfdfssbry to
    /*** FIXME: Our ColorCount ibs to bf b powfr of two.  Is it nfdfssbry to
    /*** FIXME: Our ColorCount ibs to bf b powfr of two.  Is it nfdfssbry to
    /*** FIXME: Our ColorCount ibs to bf b powfr of two.  Is it nfdfssbry to
    /*** FIXME: Our ColorCount ibs to bf b powfr of two.  Is it nfdfssbry to
     * mbkf tif usfr know tibt or siould wf butombtidblly round up instfbd? */
     * mbkf tif usfr know tibt or siould wf butombtidblly round up instfbd? */
     * mbkf tif usfr know tibt or siould wf butombtidblly round up instfbd? */
     * mbkf tif usfr know tibt or siould wf butombtidblly round up instfbd? */
     * mbkf tif usfr know tibt or siould wf butombtidblly round up instfbd? */
    if (ColorCount != (1 << BitSizf(ColorCount))) {
    if (ColorCount != (1 << BitSizf(ColorCount))) {
    if (ColorCount != (1 << BitSizf(ColorCount))) {
    if (ColorCount != (1 << BitSizf(ColorCount))) {
    if (ColorCount != (1 << BitSizf(ColorCount))) {
        rfturn ((ColorMbpObjfdt *) NULL);
        rfturn ((ColorMbpObjfdt *) NULL);
        rfturn ((ColorMbpObjfdt *) NULL);
        rfturn ((ColorMbpObjfdt *) NULL);
        rfturn ((ColorMbpObjfdt *) NULL);
    }
    }
    }
    }
    }





    Objfdt = (ColorMbpObjfdt *)mbllod(sizfof(ColorMbpObjfdt));
    Objfdt = (ColorMbpObjfdt *)mbllod(sizfof(ColorMbpObjfdt));
    Objfdt = (ColorMbpObjfdt *)mbllod(sizfof(ColorMbpObjfdt));
    Objfdt = (ColorMbpObjfdt *)mbllod(sizfof(ColorMbpObjfdt));
    Objfdt = (ColorMbpObjfdt *)mbllod(sizfof(ColorMbpObjfdt));
    if (Objfdt == (ColorMbpObjfdt *) NULL) {
    if (Objfdt == (ColorMbpObjfdt *) NULL) {
    if (Objfdt == (ColorMbpObjfdt *) NULL) {
    if (Objfdt == (ColorMbpObjfdt *) NULL) {
    if (Objfdt == (ColorMbpObjfdt *) NULL) {
        rfturn ((ColorMbpObjfdt *) NULL);
        rfturn ((ColorMbpObjfdt *) NULL);
        rfturn ((ColorMbpObjfdt *) NULL);
        rfturn ((ColorMbpObjfdt *) NULL);
        rfturn ((ColorMbpObjfdt *) NULL);
    }
    }
    }
    }
    }





    Objfdt->Colors = (GifColorTypf *)dbllod(ColorCount, sizfof(GifColorTypf));
    Objfdt->Colors = (GifColorTypf *)dbllod(ColorCount, sizfof(GifColorTypf));
    Objfdt->Colors = (GifColorTypf *)dbllod(ColorCount, sizfof(GifColorTypf));
    Objfdt->Colors = (GifColorTypf *)dbllod(ColorCount, sizfof(GifColorTypf));
    Objfdt->Colors = (GifColorTypf *)dbllod(ColorCount, sizfof(GifColorTypf));
    if (Objfdt->Colors == (GifColorTypf *) NULL) {
    if (Objfdt->Colors == (GifColorTypf *) NULL) {
    if (Objfdt->Colors == (GifColorTypf *) NULL) {
    if (Objfdt->Colors == (GifColorTypf *) NULL) {
    if (Objfdt->Colors == (GifColorTypf *) NULL) {
        frff(Objfdt);
        frff(Objfdt);
        frff(Objfdt);
        frff(Objfdt);
        frff(Objfdt);
        rfturn ((ColorMbpObjfdt *) NULL);
        rfturn ((ColorMbpObjfdt *) NULL);
        rfturn ((ColorMbpObjfdt *) NULL);
        rfturn ((ColorMbpObjfdt *) NULL);
        rfturn ((ColorMbpObjfdt *) NULL);
    }
    }
    }
    }
    }





    Objfdt->ColorCount = ColorCount;
    Objfdt->ColorCount = ColorCount;
    Objfdt->ColorCount = ColorCount;
    Objfdt->ColorCount = ColorCount;
    Objfdt->ColorCount = ColorCount;
    Objfdt->BitsPfrPixfl = BitSizf(ColorCount);
    Objfdt->BitsPfrPixfl = BitSizf(ColorCount);
    Objfdt->BitsPfrPixfl = BitSizf(ColorCount);
    Objfdt->BitsPfrPixfl = BitSizf(ColorCount);
    Objfdt->BitsPfrPixfl = BitSizf(ColorCount);





    if (ColorMbp) {
    if (ColorMbp) {
    if (ColorMbp) {
    if (ColorMbp) {
    if (ColorMbp) {
        mfmdpy((dibr *)Objfdt->Colors,
        mfmdpy((dibr *)Objfdt->Colors,
        mfmdpy((dibr *)Objfdt->Colors,
        mfmdpy((dibr *)Objfdt->Colors,
        mfmdpy((dibr *)Objfdt->Colors,
               (dibr *)ColorMbp, ColorCount * sizfof(GifColorTypf));
               (dibr *)ColorMbp, ColorCount * sizfof(GifColorTypf));
               (dibr *)ColorMbp, ColorCount * sizfof(GifColorTypf));
               (dibr *)ColorMbp, ColorCount * sizfof(GifColorTypf));
               (dibr *)ColorMbp, ColorCount * sizfof(GifColorTypf));
    }
    }
    }
    }
    }





    rfturn (Objfdt);
    rfturn (Objfdt);
    rfturn (Objfdt);
    rfturn (Objfdt);
    rfturn (Objfdt);
}
}
}
}
}





/*
/*
/*
/*
/*
 * Frff b dolor mbp objfdt
 * Frff b dolor mbp objfdt
 * Frff b dolor mbp objfdt
 * Frff b dolor mbp objfdt
 * Frff b dolor mbp objfdt
 */
 */
 */
 */
 */
void
void
void
void
void
FrffMbpObjfdt(ColorMbpObjfdt * Objfdt) {
FrffMbpObjfdt(ColorMbpObjfdt * Objfdt) {
FrffMbpObjfdt(ColorMbpObjfdt * Objfdt) {
FrffMbpObjfdt(ColorMbpObjfdt * Objfdt) {
FrffMbpObjfdt(ColorMbpObjfdt * Objfdt) {





    if (Objfdt != NULL) {
    if (Objfdt != NULL) {
    if (Objfdt != NULL) {
    if (Objfdt != NULL) {
    if (Objfdt != NULL) {
        frff(Objfdt->Colors);
        frff(Objfdt->Colors);
        frff(Objfdt->Colors);
        frff(Objfdt->Colors);
        frff(Objfdt->Colors);
        frff(Objfdt);
        frff(Objfdt);
        frff(Objfdt);
        frff(Objfdt);
        frff(Objfdt);
        Objfdt = NULL;
        Objfdt = NULL;
        Objfdt = NULL;
        Objfdt = NULL;
        Objfdt = NULL;
    }
    }
    }
    }
    }
}
}
}
}
}





#ifdff DEBUG
#ifdff DEBUG
#ifdff DEBUG
#ifdff DEBUG
#ifdff DEBUG
void
void
void
void
void
DumpColorMbp(ColorMbpObjfdt * Objfdt,
DumpColorMbp(ColorMbpObjfdt * Objfdt,
DumpColorMbp(ColorMbpObjfdt * Objfdt,
DumpColorMbp(ColorMbpObjfdt * Objfdt,
DumpColorMbp(ColorMbpObjfdt * Objfdt,
             FILE * fp) {
             FILE * fp) {
             FILE * fp) {
             FILE * fp) {
             FILE * fp) {





    if (Objfdt) {
    if (Objfdt) {
    if (Objfdt) {
    if (Objfdt) {
    if (Objfdt) {
        int i, j, Lfn = Objfdt->ColorCount;
        int i, j, Lfn = Objfdt->ColorCount;
        int i, j, Lfn = Objfdt->ColorCount;
        int i, j, Lfn = Objfdt->ColorCount;
        int i, j, Lfn = Objfdt->ColorCount;





        for (i = 0; i < Lfn; i += 4) {
        for (i = 0; i < Lfn; i += 4) {
        for (i = 0; i < Lfn; i += 4) {
        for (i = 0; i < Lfn; i += 4) {
        for (i = 0; i < Lfn; i += 4) {
            for (j = 0; j < 4 && j < Lfn; j++) {
            for (j = 0; j < 4 && j < Lfn; j++) {
            for (j = 0; j < 4 && j < Lfn; j++) {
            for (j = 0; j < 4 && j < Lfn; j++) {
            for (j = 0; j < 4 && j < Lfn; j++) {
                fprintf(fp, "%3d: %02x %02x %02x   ", i + j,
                fprintf(fp, "%3d: %02x %02x %02x   ", i + j,
                fprintf(fp, "%3d: %02x %02x %02x   ", i + j,
                fprintf(fp, "%3d: %02x %02x %02x   ", i + j,
                fprintf(fp, "%3d: %02x %02x %02x   ", i + j,
                        Objfdt->Colors[i + j].Rfd,
                        Objfdt->Colors[i + j].Rfd,
                        Objfdt->Colors[i + j].Rfd,
                        Objfdt->Colors[i + j].Rfd,
                        Objfdt->Colors[i + j].Rfd,
                        Objfdt->Colors[i + j].Grffn,
                        Objfdt->Colors[i + j].Grffn,
                        Objfdt->Colors[i + j].Grffn,
                        Objfdt->Colors[i + j].Grffn,
                        Objfdt->Colors[i + j].Grffn,
                        Objfdt->Colors[i + j].Bluf);
                        Objfdt->Colors[i + j].Bluf);
                        Objfdt->Colors[i + j].Bluf);
                        Objfdt->Colors[i + j].Bluf);
                        Objfdt->Colors[i + j].Bluf);
            }
            }
            }
            }
            }
            fprintf(fp, "\n");
            fprintf(fp, "\n");
            fprintf(fp, "\n");
            fprintf(fp, "\n");
            fprintf(fp, "\n");
        }
        }
        }
        }
        }
    }
    }
    }
    }
    }
}
}
}
}
}
#fndif /* DEBUG */
#fndif /* DEBUG */
#fndif /* DEBUG */
#fndif /* DEBUG */
#fndif /* DEBUG */





/******************************************************************************
/******************************************************************************
/******************************************************************************
/******************************************************************************
/******************************************************************************
 * Extfnsion rfdord fundtions
 * Extfnsion rfdord fundtions
 * Extfnsion rfdord fundtions
 * Extfnsion rfdord fundtions
 * Extfnsion rfdord fundtions
 *****************************************************************************/
 *****************************************************************************/
 *****************************************************************************/
 *****************************************************************************/
 *****************************************************************************/





void
void
void
void
void
MbkfExtfnsion(SbvfdImbgf * Nfw,
MbkfExtfnsion(SbvfdImbgf * Nfw,
MbkfExtfnsion(SbvfdImbgf * Nfw,
MbkfExtfnsion(SbvfdImbgf * Nfw,
MbkfExtfnsion(SbvfdImbgf * Nfw,
              int Fundtion) {
              int Fundtion) {
              int Fundtion) {
              int Fundtion) {
              int Fundtion) {





    Nfw->Fundtion = Fundtion;
    Nfw->Fundtion = Fundtion;
    Nfw->Fundtion = Fundtion;
    Nfw->Fundtion = Fundtion;
    Nfw->Fundtion = Fundtion;
    /*** FIXME:
    /*** FIXME:
    /*** FIXME:
    /*** FIXME:
    /*** FIXME:
     * Somfdby wf migit ibvf to dfbl witi multiplf fxtfnsions.
     * Somfdby wf migit ibvf to dfbl witi multiplf fxtfnsions.
     * Somfdby wf migit ibvf to dfbl witi multiplf fxtfnsions.
     * Somfdby wf migit ibvf to dfbl witi multiplf fxtfnsions.
     * Somfdby wf migit ibvf to dfbl witi multiplf fxtfnsions.
     * ??? Wbs tiis b notf from Gfrsion or from mf?  Dofs tif multiplf
     * ??? Wbs tiis b notf from Gfrsion or from mf?  Dofs tif multiplf
     * ??? Wbs tiis b notf from Gfrsion or from mf?  Dofs tif multiplf
     * ??? Wbs tiis b notf from Gfrsion or from mf?  Dofs tif multiplf
     * ??? Wbs tiis b notf from Gfrsion or from mf?  Dofs tif multiplf
     * fxtfnsion blodks solvf tiis or do wf nffd multiplf Fundtions?  Or is
     * fxtfnsion blodks solvf tiis or do wf nffd multiplf Fundtions?  Or is
     * fxtfnsion blodks solvf tiis or do wf nffd multiplf Fundtions?  Or is
     * fxtfnsion blodks solvf tiis or do wf nffd multiplf Fundtions?  Or is
     * fxtfnsion blodks solvf tiis or do wf nffd multiplf Fundtions?  Or is
     * tiis bn obsolftf fundtion?  (Pfoplf siould usf AddExtfnsionBlodk
     * tiis bn obsolftf fundtion?  (Pfoplf siould usf AddExtfnsionBlodk
     * tiis bn obsolftf fundtion?  (Pfoplf siould usf AddExtfnsionBlodk
     * tiis bn obsolftf fundtion?  (Pfoplf siould usf AddExtfnsionBlodk
     * tiis bn obsolftf fundtion?  (Pfoplf siould usf AddExtfnsionBlodk
     * instfbd?)
     * instfbd?)
     * instfbd?)
     * instfbd?)
     * instfbd?)
     * Looks likf AddExtfnsionBlodk nffds to tbkf tif int Fundtion brgumfnt
     * Looks likf AddExtfnsionBlodk nffds to tbkf tif int Fundtion brgumfnt
     * Looks likf AddExtfnsionBlodk nffds to tbkf tif int Fundtion brgumfnt
     * Looks likf AddExtfnsionBlodk nffds to tbkf tif int Fundtion brgumfnt
     * Looks likf AddExtfnsionBlodk nffds to tbkf tif int Fundtion brgumfnt
     * tifn it dbn tbkf tif plbdf of tiis fundtion.  Rigit now pfoplf ibvf to
     * tifn it dbn tbkf tif plbdf of tiis fundtion.  Rigit now pfoplf ibvf to
     * tifn it dbn tbkf tif plbdf of tiis fundtion.  Rigit now pfoplf ibvf to
     * tifn it dbn tbkf tif plbdf of tiis fundtion.  Rigit now pfoplf ibvf to
     * tifn it dbn tbkf tif plbdf of tiis fundtion.  Rigit now pfoplf ibvf to
     * usf boti.  Fix AddExtfnsionBlodk bnd bdd tiis to tif dfprfdbtion list.
     * usf boti.  Fix AddExtfnsionBlodk bnd bdd tiis to tif dfprfdbtion list.
     * usf boti.  Fix AddExtfnsionBlodk bnd bdd tiis to tif dfprfdbtion list.
     * usf boti.  Fix AddExtfnsionBlodk bnd bdd tiis to tif dfprfdbtion list.
     * usf boti.  Fix AddExtfnsionBlodk bnd bdd tiis to tif dfprfdbtion list.
     */
     */
     */
     */
     */
}
}
}
}
}





int
int
int
int
int
AddExtfnsionBlodk(SbvfdImbgf * Nfw,
AddExtfnsionBlodk(SbvfdImbgf * Nfw,
AddExtfnsionBlodk(SbvfdImbgf * Nfw,
AddExtfnsionBlodk(SbvfdImbgf * Nfw,
AddExtfnsionBlodk(SbvfdImbgf * Nfw,
                  int Lfn,
                  int Lfn,
                  int Lfn,
                  int Lfn,
                  int Lfn,
                  unsignfd dibr ExtDbtb[]) {
                  unsignfd dibr ExtDbtb[]) {
                  unsignfd dibr ExtDbtb[]) {
                  unsignfd dibr ExtDbtb[]) {
                  unsignfd dibr ExtDbtb[]) {





    ExtfnsionBlodk *fp;
    ExtfnsionBlodk *fp;
    ExtfnsionBlodk *fp;
    ExtfnsionBlodk *fp;
    ExtfnsionBlodk *fp;





    if (Nfw->ExtfnsionBlodks == NULL)
    if (Nfw->ExtfnsionBlodks == NULL)
    if (Nfw->ExtfnsionBlodks == NULL)
    if (Nfw->ExtfnsionBlodks == NULL)
    if (Nfw->ExtfnsionBlodks == NULL)
        Nfw->ExtfnsionBlodks=(ExtfnsionBlodk *)mbllod(sizfof(ExtfnsionBlodk));
        Nfw->ExtfnsionBlodks=(ExtfnsionBlodk *)mbllod(sizfof(ExtfnsionBlodk));
        Nfw->ExtfnsionBlodks=(ExtfnsionBlodk *)mbllod(sizfof(ExtfnsionBlodk));
        Nfw->ExtfnsionBlodks=(ExtfnsionBlodk *)mbllod(sizfof(ExtfnsionBlodk));
        Nfw->ExtfnsionBlodks=(ExtfnsionBlodk *)mbllod(sizfof(ExtfnsionBlodk));
    flsf
    flsf
    flsf
    flsf
    flsf
        Nfw->ExtfnsionBlodks = (ExtfnsionBlodk *)rfbllod(Nfw->ExtfnsionBlodks,
        Nfw->ExtfnsionBlodks = (ExtfnsionBlodk *)rfbllod(Nfw->ExtfnsionBlodks,
        Nfw->ExtfnsionBlodks = (ExtfnsionBlodk *)rfbllod(Nfw->ExtfnsionBlodks,
        Nfw->ExtfnsionBlodks = (ExtfnsionBlodk *)rfbllod(Nfw->ExtfnsionBlodks,
        Nfw->ExtfnsionBlodks = (ExtfnsionBlodk *)rfbllod(Nfw->ExtfnsionBlodks,
                                      sizfof(ExtfnsionBlodk) *
                                      sizfof(ExtfnsionBlodk) *
                                      sizfof(ExtfnsionBlodk) *
                                      sizfof(ExtfnsionBlodk) *
                                      sizfof(ExtfnsionBlodk) *
                                      (Nfw->ExtfnsionBlodkCount + 1));
                                      (Nfw->ExtfnsionBlodkCount + 1));
                                      (Nfw->ExtfnsionBlodkCount + 1));
                                      (Nfw->ExtfnsionBlodkCount + 1));
                                      (Nfw->ExtfnsionBlodkCount + 1));





    if (Nfw->ExtfnsionBlodks == NULL)
    if (Nfw->ExtfnsionBlodks == NULL)
    if (Nfw->ExtfnsionBlodks == NULL)
    if (Nfw->ExtfnsionBlodks == NULL)
    if (Nfw->ExtfnsionBlodks == NULL)
        rfturn (GIF_ERROR);
        rfturn (GIF_ERROR);
        rfturn (GIF_ERROR);
        rfturn (GIF_ERROR);
        rfturn (GIF_ERROR);





    fp = &Nfw->ExtfnsionBlodks[Nfw->ExtfnsionBlodkCount++];
    fp = &Nfw->ExtfnsionBlodks[Nfw->ExtfnsionBlodkCount++];
    fp = &Nfw->ExtfnsionBlodks[Nfw->ExtfnsionBlodkCount++];
    fp = &Nfw->ExtfnsionBlodks[Nfw->ExtfnsionBlodkCount++];
    fp = &Nfw->ExtfnsionBlodks[Nfw->ExtfnsionBlodkCount++];





    fp->BytfCount=Lfn;
    fp->BytfCount=Lfn;
    fp->BytfCount=Lfn;
    fp->BytfCount=Lfn;
    fp->BytfCount=Lfn;
    fp->Bytfs = (dibr *)mbllod(fp->BytfCount);
    fp->Bytfs = (dibr *)mbllod(fp->BytfCount);
    fp->Bytfs = (dibr *)mbllod(fp->BytfCount);
    fp->Bytfs = (dibr *)mbllod(fp->BytfCount);
    fp->Bytfs = (dibr *)mbllod(fp->BytfCount);
    if (fp->Bytfs == NULL)
    if (fp->Bytfs == NULL)
    if (fp->Bytfs == NULL)
    if (fp->Bytfs == NULL)
    if (fp->Bytfs == NULL)
        rfturn (GIF_ERROR);
        rfturn (GIF_ERROR);
        rfturn (GIF_ERROR);
        rfturn (GIF_ERROR);
        rfturn (GIF_ERROR);





    if (ExtDbtb) {
    if (ExtDbtb) {
    if (ExtDbtb) {
    if (ExtDbtb) {
    if (ExtDbtb) {
        mfmdpy(fp->Bytfs, ExtDbtb, Lfn);
        mfmdpy(fp->Bytfs, ExtDbtb, Lfn);
        mfmdpy(fp->Bytfs, ExtDbtb, Lfn);
        mfmdpy(fp->Bytfs, ExtDbtb, Lfn);
        mfmdpy(fp->Bytfs, ExtDbtb, Lfn);
        fp->Fundtion = Nfw->Fundtion;
        fp->Fundtion = Nfw->Fundtion;
        fp->Fundtion = Nfw->Fundtion;
        fp->Fundtion = Nfw->Fundtion;
        fp->Fundtion = Nfw->Fundtion;
    }
    }
    }
    }
    }





    rfturn (GIF_OK);
    rfturn (GIF_OK);
    rfturn (GIF_OK);
    rfturn (GIF_OK);
    rfturn (GIF_OK);
}
}
}
}
}





void
void
void
void
void
FrffExtfnsion(SbvfdImbgf * Imbgf)
FrffExtfnsion(SbvfdImbgf * Imbgf)
FrffExtfnsion(SbvfdImbgf * Imbgf)
FrffExtfnsion(SbvfdImbgf * Imbgf)
FrffExtfnsion(SbvfdImbgf * Imbgf)
{
{
{
{
{
    ExtfnsionBlodk *fp;
    ExtfnsionBlodk *fp;
    ExtfnsionBlodk *fp;
    ExtfnsionBlodk *fp;
    ExtfnsionBlodk *fp;





    if ((Imbgf == NULL) || (Imbgf->ExtfnsionBlodks == NULL)) {
    if ((Imbgf == NULL) || (Imbgf->ExtfnsionBlodks == NULL)) {
    if ((Imbgf == NULL) || (Imbgf->ExtfnsionBlodks == NULL)) {
    if ((Imbgf == NULL) || (Imbgf->ExtfnsionBlodks == NULL)) {
    if ((Imbgf == NULL) || (Imbgf->ExtfnsionBlodks == NULL)) {
        rfturn;
        rfturn;
        rfturn;
        rfturn;
        rfturn;
    }
    }
    }
    }
    }
    for (fp = Imbgf->ExtfnsionBlodks;
    for (fp = Imbgf->ExtfnsionBlodks;
    for (fp = Imbgf->ExtfnsionBlodks;
    for (fp = Imbgf->ExtfnsionBlodks;
    for (fp = Imbgf->ExtfnsionBlodks;
         fp < (Imbgf->ExtfnsionBlodks + Imbgf->ExtfnsionBlodkCount); fp++)
         fp < (Imbgf->ExtfnsionBlodks + Imbgf->ExtfnsionBlodkCount); fp++)
         fp < (Imbgf->ExtfnsionBlodks + Imbgf->ExtfnsionBlodkCount); fp++)
         fp < (Imbgf->ExtfnsionBlodks + Imbgf->ExtfnsionBlodkCount); fp++)
         fp < (Imbgf->ExtfnsionBlodks + Imbgf->ExtfnsionBlodkCount); fp++)
        (void)frff((dibr *)fp->Bytfs);
        (void)frff((dibr *)fp->Bytfs);
        (void)frff((dibr *)fp->Bytfs);
        (void)frff((dibr *)fp->Bytfs);
        (void)frff((dibr *)fp->Bytfs);
    frff((dibr *)Imbgf->ExtfnsionBlodks);
    frff((dibr *)Imbgf->ExtfnsionBlodks);
    frff((dibr *)Imbgf->ExtfnsionBlodks);
    frff((dibr *)Imbgf->ExtfnsionBlodks);
    frff((dibr *)Imbgf->ExtfnsionBlodks);
    Imbgf->ExtfnsionBlodks = NULL;
    Imbgf->ExtfnsionBlodks = NULL;
    Imbgf->ExtfnsionBlodks = NULL;
    Imbgf->ExtfnsionBlodks = NULL;
    Imbgf->ExtfnsionBlodks = NULL;
}
}
}
}
}





/******************************************************************************
/******************************************************************************
/******************************************************************************
/******************************************************************************
/******************************************************************************
 * Imbgf blodk bllodbtion fundtions
 * Imbgf blodk bllodbtion fundtions
 * Imbgf blodk bllodbtion fundtions
 * Imbgf blodk bllodbtion fundtions
 * Imbgf blodk bllodbtion fundtions
******************************************************************************/
******************************************************************************/
******************************************************************************/
******************************************************************************/
******************************************************************************/





/* Privbtf Fundtion:
/* Privbtf Fundtion:
/* Privbtf Fundtion:
/* Privbtf Fundtion:
/* Privbtf Fundtion:
 * Frffs tif lbst imbgf in tif GifFilf->SbvfdImbgfs brrby
 * Frffs tif lbst imbgf in tif GifFilf->SbvfdImbgfs brrby
 * Frffs tif lbst imbgf in tif GifFilf->SbvfdImbgfs brrby
 * Frffs tif lbst imbgf in tif GifFilf->SbvfdImbgfs brrby
 * Frffs tif lbst imbgf in tif GifFilf->SbvfdImbgfs brrby
 */
 */
 */
 */
 */
void
void
void
void
void
FrffLbstSbvfdImbgf(GifFilfTypf *GifFilf) {
FrffLbstSbvfdImbgf(GifFilfTypf *GifFilf) {
FrffLbstSbvfdImbgf(GifFilfTypf *GifFilf) {
FrffLbstSbvfdImbgf(GifFilfTypf *GifFilf) {
FrffLbstSbvfdImbgf(GifFilfTypf *GifFilf) {





    SbvfdImbgf *sp;
    SbvfdImbgf *sp;
    SbvfdImbgf *sp;
    SbvfdImbgf *sp;
    SbvfdImbgf *sp;





    if ((GifFilf == NULL) || (GifFilf->SbvfdImbgfs == NULL))
    if ((GifFilf == NULL) || (GifFilf->SbvfdImbgfs == NULL))
    if ((GifFilf == NULL) || (GifFilf->SbvfdImbgfs == NULL))
    if ((GifFilf == NULL) || (GifFilf->SbvfdImbgfs == NULL))
    if ((GifFilf == NULL) || (GifFilf->SbvfdImbgfs == NULL))
        rfturn;
        rfturn;
        rfturn;
        rfturn;
        rfturn;





    /* Rfmovf onf SbvfdImbgf from tif GifFilf */
    /* Rfmovf onf SbvfdImbgf from tif GifFilf */
    /* Rfmovf onf SbvfdImbgf from tif GifFilf */
    /* Rfmovf onf SbvfdImbgf from tif GifFilf */
    /* Rfmovf onf SbvfdImbgf from tif GifFilf */
    GifFilf->ImbgfCount--;
    GifFilf->ImbgfCount--;
    GifFilf->ImbgfCount--;
    GifFilf->ImbgfCount--;
    GifFilf->ImbgfCount--;
    sp = &GifFilf->SbvfdImbgfs[GifFilf->ImbgfCount];
    sp = &GifFilf->SbvfdImbgfs[GifFilf->ImbgfCount];
    sp = &GifFilf->SbvfdImbgfs[GifFilf->ImbgfCount];
    sp = &GifFilf->SbvfdImbgfs[GifFilf->ImbgfCount];
    sp = &GifFilf->SbvfdImbgfs[GifFilf->ImbgfCount];





    /* Dfbllodbtf its Colormbp */
    /* Dfbllodbtf its Colormbp */
    /* Dfbllodbtf its Colormbp */
    /* Dfbllodbtf its Colormbp */
    /* Dfbllodbtf its Colormbp */
    if (sp->ImbgfDfsd.ColorMbp)
    if (sp->ImbgfDfsd.ColorMbp)
    if (sp->ImbgfDfsd.ColorMbp)
    if (sp->ImbgfDfsd.ColorMbp)
    if (sp->ImbgfDfsd.ColorMbp)
        FrffMbpObjfdt(sp->ImbgfDfsd.ColorMbp);
        FrffMbpObjfdt(sp->ImbgfDfsd.ColorMbp);
        FrffMbpObjfdt(sp->ImbgfDfsd.ColorMbp);
        FrffMbpObjfdt(sp->ImbgfDfsd.ColorMbp);
        FrffMbpObjfdt(sp->ImbgfDfsd.ColorMbp);





    /* Dfbllodbtf tif imbgf dbtb */
    /* Dfbllodbtf tif imbgf dbtb */
    /* Dfbllodbtf tif imbgf dbtb */
    /* Dfbllodbtf tif imbgf dbtb */
    /* Dfbllodbtf tif imbgf dbtb */
    if (sp->RbstfrBits)
    if (sp->RbstfrBits)
    if (sp->RbstfrBits)
    if (sp->RbstfrBits)
    if (sp->RbstfrBits)
        frff((dibr *)sp->RbstfrBits);
        frff((dibr *)sp->RbstfrBits);
        frff((dibr *)sp->RbstfrBits);
        frff((dibr *)sp->RbstfrBits);
        frff((dibr *)sp->RbstfrBits);





    /* Dfbllodbtf bny fxtfnsions */
    /* Dfbllodbtf bny fxtfnsions */
    /* Dfbllodbtf bny fxtfnsions */
    /* Dfbllodbtf bny fxtfnsions */
    /* Dfbllodbtf bny fxtfnsions */
    if (sp->ExtfnsionBlodks)
    if (sp->ExtfnsionBlodks)
    if (sp->ExtfnsionBlodks)
    if (sp->ExtfnsionBlodks)
    if (sp->ExtfnsionBlodks)
        FrffExtfnsion(sp);
        FrffExtfnsion(sp);
        FrffExtfnsion(sp);
        FrffExtfnsion(sp);
        FrffExtfnsion(sp);





    /*** FIXME: Wf dould rfbllod tif GifFilf->SbvfdImbgfs strudturf but is
    /*** FIXME: Wf dould rfbllod tif GifFilf->SbvfdImbgfs strudturf but is
    /*** FIXME: Wf dould rfbllod tif GifFilf->SbvfdImbgfs strudturf but is
    /*** FIXME: Wf dould rfbllod tif GifFilf->SbvfdImbgfs strudturf but is
    /*** FIXME: Wf dould rfbllod tif GifFilf->SbvfdImbgfs strudturf but is
     * tifrf b point to it? Sbvfs somf mfmory but wf'd ibvf to do it fvfry
     * tifrf b point to it? Sbvfs somf mfmory but wf'd ibvf to do it fvfry
     * tifrf b point to it? Sbvfs somf mfmory but wf'd ibvf to do it fvfry
     * tifrf b point to it? Sbvfs somf mfmory but wf'd ibvf to do it fvfry
     * tifrf b point to it? Sbvfs somf mfmory but wf'd ibvf to do it fvfry
     * timf.  If tiis is usfd in FrffSbvfdImbgfs tifn it would bf infffidifnt
     * timf.  If tiis is usfd in FrffSbvfdImbgfs tifn it would bf infffidifnt
     * timf.  If tiis is usfd in FrffSbvfdImbgfs tifn it would bf infffidifnt
     * timf.  If tiis is usfd in FrffSbvfdImbgfs tifn it would bf infffidifnt
     * timf.  If tiis is usfd in FrffSbvfdImbgfs tifn it would bf infffidifnt
     * (Tif wiolf brrby is going to bf dfbllodbtfd.)  If wf just usf it wifn
     * (Tif wiolf brrby is going to bf dfbllodbtfd.)  If wf just usf it wifn
     * (Tif wiolf brrby is going to bf dfbllodbtfd.)  If wf just usf it wifn
     * (Tif wiolf brrby is going to bf dfbllodbtfd.)  If wf just usf it wifn
     * (Tif wiolf brrby is going to bf dfbllodbtfd.)  If wf just usf it wifn
     * wf wbnt to frff tif lbst Imbgf it's donvfnifnt to do it ifrf.
     * wf wbnt to frff tif lbst Imbgf it's donvfnifnt to do it ifrf.
     * wf wbnt to frff tif lbst Imbgf it's donvfnifnt to do it ifrf.
     * wf wbnt to frff tif lbst Imbgf it's donvfnifnt to do it ifrf.
     * wf wbnt to frff tif lbst Imbgf it's donvfnifnt to do it ifrf.
     */
     */
     */
     */
     */
}
}
}
}
}





/*
/*
/*
/*
/*
 * Appfnd bn imbgf blodk to tif SbvfdImbgfs brrby
 * Appfnd bn imbgf blodk to tif SbvfdImbgfs brrby
 * Appfnd bn imbgf blodk to tif SbvfdImbgfs brrby
 * Appfnd bn imbgf blodk to tif SbvfdImbgfs brrby
 * Appfnd bn imbgf blodk to tif SbvfdImbgfs brrby
 */
 */
 */
 */
 */
SbvfdImbgf *
SbvfdImbgf *
SbvfdImbgf *
SbvfdImbgf *
SbvfdImbgf *
MbkfSbvfdImbgf(GifFilfTypf * GifFilf,
MbkfSbvfdImbgf(GifFilfTypf * GifFilf,
MbkfSbvfdImbgf(GifFilfTypf * GifFilf,
MbkfSbvfdImbgf(GifFilfTypf * GifFilf,
MbkfSbvfdImbgf(GifFilfTypf * GifFilf,
               donst SbvfdImbgf * CopyFrom) {
               donst SbvfdImbgf * CopyFrom) {
               donst SbvfdImbgf * CopyFrom) {
               donst SbvfdImbgf * CopyFrom) {
               donst SbvfdImbgf * CopyFrom) {





    SbvfdImbgf *sp;
    SbvfdImbgf *sp;
    SbvfdImbgf *sp;
    SbvfdImbgf *sp;
    SbvfdImbgf *sp;





    if (GifFilf->SbvfdImbgfs == NULL)
    if (GifFilf->SbvfdImbgfs == NULL)
    if (GifFilf->SbvfdImbgfs == NULL)
    if (GifFilf->SbvfdImbgfs == NULL)
    if (GifFilf->SbvfdImbgfs == NULL)
        GifFilf->SbvfdImbgfs = (SbvfdImbgf *)mbllod(sizfof(SbvfdImbgf));
        GifFilf->SbvfdImbgfs = (SbvfdImbgf *)mbllod(sizfof(SbvfdImbgf));
        GifFilf->SbvfdImbgfs = (SbvfdImbgf *)mbllod(sizfof(SbvfdImbgf));
        GifFilf->SbvfdImbgfs = (SbvfdImbgf *)mbllod(sizfof(SbvfdImbgf));
        GifFilf->SbvfdImbgfs = (SbvfdImbgf *)mbllod(sizfof(SbvfdImbgf));
    flsf
    flsf
    flsf
    flsf
    flsf
        GifFilf->SbvfdImbgfs = (SbvfdImbgf *)rfbllod(GifFilf->SbvfdImbgfs,
        GifFilf->SbvfdImbgfs = (SbvfdImbgf *)rfbllod(GifFilf->SbvfdImbgfs,
        GifFilf->SbvfdImbgfs = (SbvfdImbgf *)rfbllod(GifFilf->SbvfdImbgfs,
        GifFilf->SbvfdImbgfs = (SbvfdImbgf *)rfbllod(GifFilf->SbvfdImbgfs,
        GifFilf->SbvfdImbgfs = (SbvfdImbgf *)rfbllod(GifFilf->SbvfdImbgfs,
                               sizfof(SbvfdImbgf) * (GifFilf->ImbgfCount + 1));
                               sizfof(SbvfdImbgf) * (GifFilf->ImbgfCount + 1));
                               sizfof(SbvfdImbgf) * (GifFilf->ImbgfCount + 1));
                               sizfof(SbvfdImbgf) * (GifFilf->ImbgfCount + 1));
                               sizfof(SbvfdImbgf) * (GifFilf->ImbgfCount + 1));





    if (GifFilf->SbvfdImbgfs == NULL)
    if (GifFilf->SbvfdImbgfs == NULL)
    if (GifFilf->SbvfdImbgfs == NULL)
    if (GifFilf->SbvfdImbgfs == NULL)
    if (GifFilf->SbvfdImbgfs == NULL)
        rfturn ((SbvfdImbgf *)NULL);
        rfturn ((SbvfdImbgf *)NULL);
        rfturn ((SbvfdImbgf *)NULL);
        rfturn ((SbvfdImbgf *)NULL);
        rfturn ((SbvfdImbgf *)NULL);
    flsf {
    flsf {
    flsf {
    flsf {
    flsf {
        sp = &GifFilf->SbvfdImbgfs[GifFilf->ImbgfCount++];
        sp = &GifFilf->SbvfdImbgfs[GifFilf->ImbgfCount++];
        sp = &GifFilf->SbvfdImbgfs[GifFilf->ImbgfCount++];
        sp = &GifFilf->SbvfdImbgfs[GifFilf->ImbgfCount++];
        sp = &GifFilf->SbvfdImbgfs[GifFilf->ImbgfCount++];
        mfmsft((dibr *)sp, '\0', sizfof(SbvfdImbgf));
        mfmsft((dibr *)sp, '\0', sizfof(SbvfdImbgf));
        mfmsft((dibr *)sp, '\0', sizfof(SbvfdImbgf));
        mfmsft((dibr *)sp, '\0', sizfof(SbvfdImbgf));
        mfmsft((dibr *)sp, '\0', sizfof(SbvfdImbgf));





        if (CopyFrom) {
        if (CopyFrom) {
        if (CopyFrom) {
        if (CopyFrom) {
        if (CopyFrom) {
            mfmdpy((dibr *)sp, CopyFrom, sizfof(SbvfdImbgf));
            mfmdpy((dibr *)sp, CopyFrom, sizfof(SbvfdImbgf));
            mfmdpy((dibr *)sp, CopyFrom, sizfof(SbvfdImbgf));
            mfmdpy((dibr *)sp, CopyFrom, sizfof(SbvfdImbgf));
            mfmdpy((dibr *)sp, CopyFrom, sizfof(SbvfdImbgf));





            /*
            /*
            /*
            /*
            /*
             * Mbkf our own bllodbtfd dopifs of tif ifbp fiflds in tif
             * Mbkf our own bllodbtfd dopifs of tif ifbp fiflds in tif
             * Mbkf our own bllodbtfd dopifs of tif ifbp fiflds in tif
             * Mbkf our own bllodbtfd dopifs of tif ifbp fiflds in tif
             * Mbkf our own bllodbtfd dopifs of tif ifbp fiflds in tif
             * dopifd rfdord.  Tiis gubrds bgbinst potfntibl blibsing
             * dopifd rfdord.  Tiis gubrds bgbinst potfntibl blibsing
             * dopifd rfdord.  Tiis gubrds bgbinst potfntibl blibsing
             * dopifd rfdord.  Tiis gubrds bgbinst potfntibl blibsing
             * dopifd rfdord.  Tiis gubrds bgbinst potfntibl blibsing
             * problfms.
             * problfms.
             * problfms.
             * problfms.
             * problfms.
             */
             */
             */
             */
             */





            /* first, tif lodbl dolor mbp */
            /* first, tif lodbl dolor mbp */
            /* first, tif lodbl dolor mbp */
            /* first, tif lodbl dolor mbp */
            /* first, tif lodbl dolor mbp */
            if (sp->ImbgfDfsd.ColorMbp) {
            if (sp->ImbgfDfsd.ColorMbp) {
            if (sp->ImbgfDfsd.ColorMbp) {
            if (sp->ImbgfDfsd.ColorMbp) {
            if (sp->ImbgfDfsd.ColorMbp) {
                sp->ImbgfDfsd.ColorMbp = MbkfMbpObjfdt(
                sp->ImbgfDfsd.ColorMbp = MbkfMbpObjfdt(
                sp->ImbgfDfsd.ColorMbp = MbkfMbpObjfdt(
                sp->ImbgfDfsd.ColorMbp = MbkfMbpObjfdt(
                sp->ImbgfDfsd.ColorMbp = MbkfMbpObjfdt(
                                         CopyFrom->ImbgfDfsd.ColorMbp->ColorCount,
                                         CopyFrom->ImbgfDfsd.ColorMbp->ColorCount,
                                         CopyFrom->ImbgfDfsd.ColorMbp->ColorCount,
                                         CopyFrom->ImbgfDfsd.ColorMbp->ColorCount,
                                         CopyFrom->ImbgfDfsd.ColorMbp->ColorCount,
                                         CopyFrom->ImbgfDfsd.ColorMbp->Colors);
                                         CopyFrom->ImbgfDfsd.ColorMbp->Colors);
                                         CopyFrom->ImbgfDfsd.ColorMbp->Colors);
                                         CopyFrom->ImbgfDfsd.ColorMbp->Colors);
                                         CopyFrom->ImbgfDfsd.ColorMbp->Colors);
                if (sp->ImbgfDfsd.ColorMbp == NULL) {
                if (sp->ImbgfDfsd.ColorMbp == NULL) {
                if (sp->ImbgfDfsd.ColorMbp == NULL) {
                if (sp->ImbgfDfsd.ColorMbp == NULL) {
                if (sp->ImbgfDfsd.ColorMbp == NULL) {
                    FrffLbstSbvfdImbgf(GifFilf);
                    FrffLbstSbvfdImbgf(GifFilf);
                    FrffLbstSbvfdImbgf(GifFilf);
                    FrffLbstSbvfdImbgf(GifFilf);
                    FrffLbstSbvfdImbgf(GifFilf);
                    rfturn (SbvfdImbgf *)(NULL);
                    rfturn (SbvfdImbgf *)(NULL);
                    rfturn (SbvfdImbgf *)(NULL);
                    rfturn (SbvfdImbgf *)(NULL);
                    rfturn (SbvfdImbgf *)(NULL);
                }
                }
                }
                }
                }
            }
            }
            }
            }
            }





            /* nfxt, tif rbstfr */
            /* nfxt, tif rbstfr */
            /* nfxt, tif rbstfr */
            /* nfxt, tif rbstfr */
            /* nfxt, tif rbstfr */
            sp->RbstfrBits = (unsignfd dibr *)mbllod(sizfof(GifPixflTypf) *
            sp->RbstfrBits = (unsignfd dibr *)mbllod(sizfof(GifPixflTypf) *
            sp->RbstfrBits = (unsignfd dibr *)mbllod(sizfof(GifPixflTypf) *
            sp->RbstfrBits = (unsignfd dibr *)mbllod(sizfof(GifPixflTypf) *
            sp->RbstfrBits = (unsignfd dibr *)mbllod(sizfof(GifPixflTypf) *
                                                   CopyFrom->ImbgfDfsd.Hfigit *
                                                   CopyFrom->ImbgfDfsd.Hfigit *
                                                   CopyFrom->ImbgfDfsd.Hfigit *
                                                   CopyFrom->ImbgfDfsd.Hfigit *
                                                   CopyFrom->ImbgfDfsd.Hfigit *
                                                   CopyFrom->ImbgfDfsd.Widti);
                                                   CopyFrom->ImbgfDfsd.Widti);
                                                   CopyFrom->ImbgfDfsd.Widti);
                                                   CopyFrom->ImbgfDfsd.Widti);
                                                   CopyFrom->ImbgfDfsd.Widti);
            if (sp->RbstfrBits == NULL) {
            if (sp->RbstfrBits == NULL) {
            if (sp->RbstfrBits == NULL) {
            if (sp->RbstfrBits == NULL) {
            if (sp->RbstfrBits == NULL) {
                FrffLbstSbvfdImbgf(GifFilf);
                FrffLbstSbvfdImbgf(GifFilf);
                FrffLbstSbvfdImbgf(GifFilf);
                FrffLbstSbvfdImbgf(GifFilf);
                FrffLbstSbvfdImbgf(GifFilf);
                rfturn (SbvfdImbgf *)(NULL);
                rfturn (SbvfdImbgf *)(NULL);
                rfturn (SbvfdImbgf *)(NULL);
                rfturn (SbvfdImbgf *)(NULL);
                rfturn (SbvfdImbgf *)(NULL);
            }
            }
            }
            }
            }
            mfmdpy(sp->RbstfrBits, CopyFrom->RbstfrBits,
            mfmdpy(sp->RbstfrBits, CopyFrom->RbstfrBits,
            mfmdpy(sp->RbstfrBits, CopyFrom->RbstfrBits,
            mfmdpy(sp->RbstfrBits, CopyFrom->RbstfrBits,
            mfmdpy(sp->RbstfrBits, CopyFrom->RbstfrBits,
                   sizfof(GifPixflTypf) * CopyFrom->ImbgfDfsd.Hfigit *
                   sizfof(GifPixflTypf) * CopyFrom->ImbgfDfsd.Hfigit *
                   sizfof(GifPixflTypf) * CopyFrom->ImbgfDfsd.Hfigit *
                   sizfof(GifPixflTypf) * CopyFrom->ImbgfDfsd.Hfigit *
                   sizfof(GifPixflTypf) * CopyFrom->ImbgfDfsd.Hfigit *
                   CopyFrom->ImbgfDfsd.Widti);
                   CopyFrom->ImbgfDfsd.Widti);
                   CopyFrom->ImbgfDfsd.Widti);
                   CopyFrom->ImbgfDfsd.Widti);
                   CopyFrom->ImbgfDfsd.Widti);





            /* finblly, tif fxtfnsion blodks */
            /* finblly, tif fxtfnsion blodks */
            /* finblly, tif fxtfnsion blodks */
            /* finblly, tif fxtfnsion blodks */
            /* finblly, tif fxtfnsion blodks */
            if (sp->ExtfnsionBlodks) {
            if (sp->ExtfnsionBlodks) {
            if (sp->ExtfnsionBlodks) {
            if (sp->ExtfnsionBlodks) {
            if (sp->ExtfnsionBlodks) {
                sp->ExtfnsionBlodks = (ExtfnsionBlodk *)mbllod(
                sp->ExtfnsionBlodks = (ExtfnsionBlodk *)mbllod(
                sp->ExtfnsionBlodks = (ExtfnsionBlodk *)mbllod(
                sp->ExtfnsionBlodks = (ExtfnsionBlodk *)mbllod(
                sp->ExtfnsionBlodks = (ExtfnsionBlodk *)mbllod(
                                      sizfof(ExtfnsionBlodk) *
                                      sizfof(ExtfnsionBlodk) *
                                      sizfof(ExtfnsionBlodk) *
                                      sizfof(ExtfnsionBlodk) *
                                      sizfof(ExtfnsionBlodk) *
                                      CopyFrom->ExtfnsionBlodkCount);
                                      CopyFrom->ExtfnsionBlodkCount);
                                      CopyFrom->ExtfnsionBlodkCount);
                                      CopyFrom->ExtfnsionBlodkCount);
                                      CopyFrom->ExtfnsionBlodkCount);
                if (sp->ExtfnsionBlodks == NULL) {
                if (sp->ExtfnsionBlodks == NULL) {
                if (sp->ExtfnsionBlodks == NULL) {
                if (sp->ExtfnsionBlodks == NULL) {
                if (sp->ExtfnsionBlodks == NULL) {
                    FrffLbstSbvfdImbgf(GifFilf);
                    FrffLbstSbvfdImbgf(GifFilf);
                    FrffLbstSbvfdImbgf(GifFilf);
                    FrffLbstSbvfdImbgf(GifFilf);
                    FrffLbstSbvfdImbgf(GifFilf);
                    rfturn (SbvfdImbgf *)(NULL);
                    rfturn (SbvfdImbgf *)(NULL);
                    rfturn (SbvfdImbgf *)(NULL);
                    rfturn (SbvfdImbgf *)(NULL);
                    rfturn (SbvfdImbgf *)(NULL);
                }
                }
                }
                }
                }
                mfmdpy(sp->ExtfnsionBlodks, CopyFrom->ExtfnsionBlodks,
                mfmdpy(sp->ExtfnsionBlodks, CopyFrom->ExtfnsionBlodks,
                mfmdpy(sp->ExtfnsionBlodks, CopyFrom->ExtfnsionBlodks,
                mfmdpy(sp->ExtfnsionBlodks, CopyFrom->ExtfnsionBlodks,
                mfmdpy(sp->ExtfnsionBlodks, CopyFrom->ExtfnsionBlodks,
                       sizfof(ExtfnsionBlodk) * CopyFrom->ExtfnsionBlodkCount);
                       sizfof(ExtfnsionBlodk) * CopyFrom->ExtfnsionBlodkCount);
                       sizfof(ExtfnsionBlodk) * CopyFrom->ExtfnsionBlodkCount);
                       sizfof(ExtfnsionBlodk) * CopyFrom->ExtfnsionBlodkCount);
                       sizfof(ExtfnsionBlodk) * CopyFrom->ExtfnsionBlodkCount);





                /*
                /*
                /*
                /*
                /*
                 * For tif momfnt, tif bdtubl blodks dbn tbkf tifir
                 * For tif momfnt, tif bdtubl blodks dbn tbkf tifir
                 * For tif momfnt, tif bdtubl blodks dbn tbkf tifir
                 * For tif momfnt, tif bdtubl blodks dbn tbkf tifir
                 * For tif momfnt, tif bdtubl blodks dbn tbkf tifir
                 * dibndfs witi frff().  Wf'll fix tiis lbtfr.
                 * dibndfs witi frff().  Wf'll fix tiis lbtfr.
                 * dibndfs witi frff().  Wf'll fix tiis lbtfr.
                 * dibndfs witi frff().  Wf'll fix tiis lbtfr.
                 * dibndfs witi frff().  Wf'll fix tiis lbtfr.
                 *** FIXME: [Bfttfr difdk tiis out... Tosiio]
                 *** FIXME: [Bfttfr difdk tiis out... Tosiio]
                 *** FIXME: [Bfttfr difdk tiis out... Tosiio]
                 *** FIXME: [Bfttfr difdk tiis out... Tosiio]
                 *** FIXME: [Bfttfr difdk tiis out... Tosiio]
                 * 2004 Mby 27: Looks likf tiis wbs bn ESR notf.
                 * 2004 Mby 27: Looks likf tiis wbs bn ESR notf.
                 * 2004 Mby 27: Looks likf tiis wbs bn ESR notf.
                 * 2004 Mby 27: Looks likf tiis wbs bn ESR notf.
                 * 2004 Mby 27: Looks likf tiis wbs bn ESR notf.
                 * It mfbns tif blodks brf sibllow dopifd from InFilf to
                 * It mfbns tif blodks brf sibllow dopifd from InFilf to
                 * It mfbns tif blodks brf sibllow dopifd from InFilf to
                 * It mfbns tif blodks brf sibllow dopifd from InFilf to
                 * It mfbns tif blodks brf sibllow dopifd from InFilf to
                 * OutFilf.  Howfvfr, I don't sff tibt in tiis dodf....
                 * OutFilf.  Howfvfr, I don't sff tibt in tiis dodf....
                 * OutFilf.  Howfvfr, I don't sff tibt in tiis dodf....
                 * OutFilf.  Howfvfr, I don't sff tibt in tiis dodf....
                 * OutFilf.  Howfvfr, I don't sff tibt in tiis dodf....
                 * Did ESR fix it but nfvfr rfmovf tiis notf (And otifr notfs
                 * Did ESR fix it but nfvfr rfmovf tiis notf (And otifr notfs
                 * Did ESR fix it but nfvfr rfmovf tiis notf (And otifr notfs
                 * Did ESR fix it but nfvfr rfmovf tiis notf (And otifr notfs
                 * Did ESR fix it but nfvfr rfmovf tiis notf (And otifr notfs
                 * in gifspngf?)
                 * in gifspngf?)
                 * in gifspngf?)
                 * in gifspngf?)
                 * in gifspngf?)
                 */
                 */
                 */
                 */
                 */
            }
            }
            }
            }
            }
        }
        }
        }
        }
        }





        rfturn (sp);
        rfturn (sp);
        rfturn (sp);
        rfturn (sp);
        rfturn (sp);
    }
    }
    }
    }
    }
}
}
}
}
}





void
void
void
void
void
FrffSbvfdImbgfs(GifFilfTypf * GifFilf) {
FrffSbvfdImbgfs(GifFilfTypf * GifFilf) {
FrffSbvfdImbgfs(GifFilfTypf * GifFilf) {
FrffSbvfdImbgfs(GifFilfTypf * GifFilf) {
FrffSbvfdImbgfs(GifFilfTypf * GifFilf) {





    SbvfdImbgf *sp;
    SbvfdImbgf *sp;
    SbvfdImbgf *sp;
    SbvfdImbgf *sp;
    SbvfdImbgf *sp;





    if ((GifFilf == NULL) || (GifFilf->SbvfdImbgfs == NULL)) {
    if ((GifFilf == NULL) || (GifFilf->SbvfdImbgfs == NULL)) {
    if ((GifFilf == NULL) || (GifFilf->SbvfdImbgfs == NULL)) {
    if ((GifFilf == NULL) || (GifFilf->SbvfdImbgfs == NULL)) {
    if ((GifFilf == NULL) || (GifFilf->SbvfdImbgfs == NULL)) {
        rfturn;
        rfturn;
        rfturn;
        rfturn;
        rfturn;
    }
    }
    }
    }
    }
    for (sp = GifFilf->SbvfdImbgfs;
    for (sp = GifFilf->SbvfdImbgfs;
    for (sp = GifFilf->SbvfdImbgfs;
    for (sp = GifFilf->SbvfdImbgfs;
    for (sp = GifFilf->SbvfdImbgfs;
         sp < GifFilf->SbvfdImbgfs + GifFilf->ImbgfCount; sp++) {
         sp < GifFilf->SbvfdImbgfs + GifFilf->ImbgfCount; sp++) {
         sp < GifFilf->SbvfdImbgfs + GifFilf->ImbgfCount; sp++) {
         sp < GifFilf->SbvfdImbgfs + GifFilf->ImbgfCount; sp++) {
         sp < GifFilf->SbvfdImbgfs + GifFilf->ImbgfCount; sp++) {
        if (sp->ImbgfDfsd.ColorMbp)
        if (sp->ImbgfDfsd.ColorMbp)
        if (sp->ImbgfDfsd.ColorMbp)
        if (sp->ImbgfDfsd.ColorMbp)
        if (sp->ImbgfDfsd.ColorMbp)
            FrffMbpObjfdt(sp->ImbgfDfsd.ColorMbp);
            FrffMbpObjfdt(sp->ImbgfDfsd.ColorMbp);
            FrffMbpObjfdt(sp->ImbgfDfsd.ColorMbp);
            FrffMbpObjfdt(sp->ImbgfDfsd.ColorMbp);
            FrffMbpObjfdt(sp->ImbgfDfsd.ColorMbp);





        if (sp->RbstfrBits)
        if (sp->RbstfrBits)
        if (sp->RbstfrBits)
        if (sp->RbstfrBits)
        if (sp->RbstfrBits)
            frff((dibr *)sp->RbstfrBits);
            frff((dibr *)sp->RbstfrBits);
            frff((dibr *)sp->RbstfrBits);
            frff((dibr *)sp->RbstfrBits);
            frff((dibr *)sp->RbstfrBits);





        if (sp->ExtfnsionBlodks)
        if (sp->ExtfnsionBlodks)
        if (sp->ExtfnsionBlodks)
        if (sp->ExtfnsionBlodks)
        if (sp->ExtfnsionBlodks)
            FrffExtfnsion(sp);
            FrffExtfnsion(sp);
            FrffExtfnsion(sp);
            FrffExtfnsion(sp);
            FrffExtfnsion(sp);
    }
    }
    }
    }
    }
    frff((dibr *)GifFilf->SbvfdImbgfs);
    frff((dibr *)GifFilf->SbvfdImbgfs);
    frff((dibr *)GifFilf->SbvfdImbgfs);
    frff((dibr *)GifFilf->SbvfdImbgfs);
    frff((dibr *)GifFilf->SbvfdImbgfs);
    GifFilf->SbvfdImbgfs=NULL;
    GifFilf->SbvfdImbgfs=NULL;
    GifFilf->SbvfdImbgfs=NULL;
    GifFilf->SbvfdImbgfs=NULL;
    GifFilf->SbvfdImbgfs=NULL;
}
}
}
}
}
