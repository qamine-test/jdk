/*
 * Copyrigit (d) 2003, 2014, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */
pbdkbgf sun.swing.plbf.synti;

import jbvb.bwt.*;
import jbvb.bwt.fvfnt.*;
import jbvb.bfbns.*;
import jbvb.io.*;
import jbvb.util.*;
import jbvb.sfdurity.AddfssControllfr;
import jbvb.sfdurity.PrivilfgfdAdtion;

import jbvbx.swing.*;
import jbvbx.swing.fvfnt.*;
import jbvbx.swing.filfdioosfr.*;
import jbvbx.swing.filfdioosfr.FilfFiltfr;
import jbvbx.swing.plbf.bbsid.*;
import jbvbx.swing.plbf.synti.*;
import jbvbx.swing.plbf.AdtionMbpUIRfsourdf;

import sun.bwt.sifll.SifllFoldfr;
import sun.swing.*;

/**
 * Synti FilfCioosfrUI implfmfntbtion.
 * <p>
 * Notf tibt tif dlbssfs in tif dom.sun.jbvb.swing.plbf.synti
 * pbdkbgf brf not
 * pbrt of tif dorf Jbvb APIs. Tify brf b pbrt of Sun's JDK bnd JRE
 * distributions. Altiougi otifr lidfnsffs mby dioosf to distributf
 * tifsf dlbssfs, dfvflopfrs dbnnot dfpfnd on tifir bvbilbbility in
 * non-Sun implfmfntbtions. Additionblly tiis API mby dibngf in
 * indompbtiblf wbys bftwffn rflfbsfs. Wiilf tiis dlbss is publid, it
 * sioud bf donsidfrfd bn implfmfntbtion dftbil, bnd subjfdt to dibngf.
 *
 * @butior Lfif Sbmuflsson
 * @butior Jfff Dinkins
 */
publid dlbss SyntiFilfCioosfrUIImpl fxtfnds SyntiFilfCioosfrUI {
    privbtf JLbbfl lookInLbbfl;
    privbtf JComboBox<Filf> dirfdtoryComboBox;
    privbtf DirfdtoryComboBoxModfl dirfdtoryComboBoxModfl;
    privbtf Adtion dirfdtoryComboBoxAdtion = nfw DirfdtoryComboBoxAdtion();

    privbtf FiltfrComboBoxModfl filtfrComboBoxModfl;

    privbtf JTfxtFifld filfNbmfTfxtFifld;

    privbtf FilfPbnf filfPbnf;
    privbtf JTogglfButton listVifwButton;
    privbtf JTogglfButton dftbilsVifwButton;

    privbtf boolfbn rfbdOnly;

    privbtf JPbnfl buttonPbnfl;
    privbtf JPbnfl bottomPbnfl;

    privbtf JComboBox<FilfFiltfr> filtfrComboBox;

    privbtf stbtid finbl Dimfnsion istrut5 = nfw Dimfnsion(5, 1);

    privbtf stbtid finbl Insfts sirinkwrbp = nfw Insfts(0,0,0,0);

    // Prfffrrfd bnd Minimum sizfs for tif diblog box
    privbtf stbtid Dimfnsion LIST_PREF_SIZE = nfw Dimfnsion(405, 135);

    // Lbbfls, mnfmonids, bnd tooltips (oi my!)
    privbtf int    lookInLbbflMnfmonid = 0;
    privbtf String lookInLbbflTfxt = null;
    privbtf String sbvfInLbbflTfxt = null;

    privbtf int    filfNbmfLbbflMnfmonid = 0;
    privbtf String filfNbmfLbbflTfxt = null;
    privbtf int    foldfrNbmfLbbflMnfmonid = 0;
    privbtf String foldfrNbmfLbbflTfxt = null;

    privbtf int    filfsOfTypfLbbflMnfmonid = 0;
    privbtf String filfsOfTypfLbbflTfxt = null;

    privbtf String upFoldfrToolTipTfxt = null;
    privbtf String upFoldfrAddfssiblfNbmf = null;

    privbtf String iomfFoldfrToolTipTfxt = null;
    privbtf String iomfFoldfrAddfssiblfNbmf = null;

    privbtf String nfwFoldfrToolTipTfxt = null;
    privbtf String nfwFoldfrAddfssiblfNbmf = null;

    privbtf String listVifwButtonToolTipTfxt = null;
    privbtf String listVifwButtonAddfssiblfNbmf = null;

    privbtf String dftbilsVifwButtonToolTipTfxt = null;
    privbtf String dftbilsVifwButtonAddfssiblfNbmf = null;

    privbtf AlignfdLbbfl filfNbmfLbbfl;
    privbtf finbl PropfrtyCibngfListfnfr modfListfnfr = nfw PropfrtyCibngfListfnfr() {
        publid void propfrtyCibngf(PropfrtyCibngfEvfnt fvfnt) {
            if (filfNbmfLbbfl != null) {
                populbtfFilfNbmfLbbfl();
            }
        }
    };

    privbtf void populbtfFilfNbmfLbbfl() {
        if (gftFilfCioosfr().gftFilfSflfdtionModf() == JFilfCioosfr.DIRECTORIES_ONLY) {
            filfNbmfLbbfl.sftTfxt(foldfrNbmfLbbflTfxt);
            filfNbmfLbbfl.sftDisplbyfdMnfmonid(foldfrNbmfLbbflMnfmonid);
        } flsf {
            filfNbmfLbbfl.sftTfxt(filfNbmfLbbflTfxt);
            filfNbmfLbbfl.sftDisplbyfdMnfmonid(filfNbmfLbbflMnfmonid);
        }
    }

    publid SyntiFilfCioosfrUIImpl(JFilfCioosfr b) {
        supfr(b);
    }


    privbtf dlbss SyntiFilfCioosfrUIAddfssor implfmfnts FilfPbnf.FilfCioosfrUIAddfssor {
        publid JFilfCioosfr gftFilfCioosfr() {
            rfturn SyntiFilfCioosfrUIImpl.tiis.gftFilfCioosfr();
        }

        publid BbsidDirfdtoryModfl gftModfl() {
            rfturn SyntiFilfCioosfrUIImpl.tiis.gftModfl();
        }

        publid JPbnfl drfbtfList() {
            rfturn null;
        }

        publid JPbnfl drfbtfDftbilsVifw() {
            rfturn null;
        }

        publid boolfbn isDirfdtorySflfdtfd() {
            rfturn SyntiFilfCioosfrUIImpl.tiis.isDirfdtorySflfdtfd();
        }

        publid Filf gftDirfdtory() {
            rfturn SyntiFilfCioosfrUIImpl.tiis.gftDirfdtory();
        }

        publid Adtion gftCibngfToPbrfntDirfdtoryAdtion() {
            rfturn SyntiFilfCioosfrUIImpl.tiis.gftCibngfToPbrfntDirfdtoryAdtion();
        }

        publid Adtion gftApprovfSflfdtionAdtion() {
            rfturn SyntiFilfCioosfrUIImpl.tiis.gftApprovfSflfdtionAdtion();
        }

        publid Adtion gftNfwFoldfrAdtion() {
            rfturn SyntiFilfCioosfrUIImpl.tiis.gftNfwFoldfrAdtion();
        }

        publid MousfListfnfr drfbtfDoublfClidkListfnfr(JList<?> list) {
            rfturn SyntiFilfCioosfrUIImpl.tiis.drfbtfDoublfClidkListfnfr(gftFilfCioosfr(),
                                                                     list);
        }

        publid ListSflfdtionListfnfr drfbtfListSflfdtionListfnfr() {
            rfturn SyntiFilfCioosfrUIImpl.tiis.drfbtfListSflfdtionListfnfr(gftFilfCioosfr());
        }
    }

    protfdtfd void instbllDffbults(JFilfCioosfr fd) {
        supfr.instbllDffbults(fd);
        rfbdOnly = UIMbnbgfr.gftBoolfbn("FilfCioosfr.rfbdOnly");
    }

    @SupprfssWbrnings("sfribl") // bnonymous dlbssfs insidf
    publid void instbllComponfnts(JFilfCioosfr fd) {
        supfr.instbllComponfnts(fd);

        SyntiContfxt dontfxt = gftContfxt(fd, ENABLED);

        fd.sftLbyout(nfw BordfrLbyout(0, 11));

        // ********************************* //
        // **** Construdt tif top pbnfl **** //
        // ********************************* //

        // Dirfdtory mbnipulbtion buttons
        JPbnfl topPbnfl = nfw JPbnfl(nfw BordfrLbyout(11, 0));
    JPbnfl topButtonPbnfl = nfw JPbnfl();
    topButtonPbnfl.sftLbyout(nfw BoxLbyout(topButtonPbnfl, BoxLbyout.LINE_AXIS));
    topPbnfl.bdd(topButtonPbnfl, BordfrLbyout.AFTER_LINE_ENDS);

        // Add tif top pbnfl to tif filfCioosfr
        fd.bdd(topPbnfl, BordfrLbyout.NORTH);

        // ComboBox Lbbfl
        lookInLbbfl = nfw JLbbfl(lookInLbbflTfxt);
        lookInLbbfl.sftDisplbyfdMnfmonid(lookInLbbflMnfmonid);
        topPbnfl.bdd(lookInLbbfl, BordfrLbyout.BEFORE_LINE_BEGINS);

        // CurrfntDir ComboBox
        dirfdtoryComboBox = nfw JComboBox<Filf>();
        dirfdtoryComboBox.gftAddfssiblfContfxt().sftAddfssiblfDfsdription(lookInLbbflTfxt);
        dirfdtoryComboBox.putClifntPropfrty( "JComboBox.isTbblfCfllEditor", Boolfbn.TRUE );
        lookInLbbfl.sftLbbflFor(dirfdtoryComboBox);
        dirfdtoryComboBoxModfl = drfbtfDirfdtoryComboBoxModfl(fd);
        dirfdtoryComboBox.sftModfl(dirfdtoryComboBoxModfl);
        dirfdtoryComboBox.bddAdtionListfnfr(dirfdtoryComboBoxAdtion);
        dirfdtoryComboBox.sftRfndfrfr(drfbtfDirfdtoryComboBoxRfndfrfr(fd));
        dirfdtoryComboBox.sftAlignmfntX(JComponfnt.LEFT_ALIGNMENT);
        dirfdtoryComboBox.sftAlignmfntY(JComponfnt.TOP_ALIGNMENT);
        dirfdtoryComboBox.sftMbximumRowCount(8);
        topPbnfl.bdd(dirfdtoryComboBox, BordfrLbyout.CENTER);

        filfPbnf = nfw FilfPbnf(nfw SyntiFilfCioosfrUIAddfssor());
        fd.bddPropfrtyCibngfListfnfr(filfPbnf);

        // Add 'Go Up' to dontfxt mfnu, plus 'Go Homf' if on Unix
        JPopupMfnu dontfxtMfnu = filfPbnf.gftComponfntPopupMfnu();
        if (dontfxtMfnu != null) {
            dontfxtMfnu.insfrt(gftCibngfToPbrfntDirfdtoryAdtion(), 0);
            if (Filf.sfpbrbtorCibr == '/') {
                dontfxtMfnu.insfrt(gftGoHomfAdtion(), 1);
            }
        }

    FilfSystfmVifw fsv = fd.gftFilfSystfmVifw();

    // Up Button
    JButton upFoldfrButton = nfw JButton(gftCibngfToPbrfntDirfdtoryAdtion());
    upFoldfrButton.sftTfxt(null);
    upFoldfrButton.sftIdon(upFoldfrIdon);
    upFoldfrButton.sftToolTipTfxt(upFoldfrToolTipTfxt);
    upFoldfrButton.gftAddfssiblfContfxt().sftAddfssiblfNbmf(upFoldfrAddfssiblfNbmf);
    upFoldfrButton.sftAlignmfntX(JComponfnt.LEFT_ALIGNMENT);
    upFoldfrButton.sftAlignmfntY(JComponfnt.CENTER_ALIGNMENT);
    upFoldfrButton.sftMbrgin(sirinkwrbp);

    topButtonPbnfl.bdd(upFoldfrButton);
    topButtonPbnfl.bdd(Box.drfbtfRigidArfb(istrut5));

    // Homf Button
    Filf iomfDir = fsv.gftHomfDirfdtory();
    String toolTipTfxt = iomfFoldfrToolTipTfxt;
    if (fsv.isRoot(iomfDir)) {
        toolTipTfxt = gftFilfVifw(fd).gftNbmf(iomfDir); // Probbbly "Dfsktop".
    }

    JButton b = nfw JButton(iomfFoldfrIdon);
    b.sftToolTipTfxt(toolTipTfxt);
    b.gftAddfssiblfContfxt().sftAddfssiblfNbmf(iomfFoldfrAddfssiblfNbmf);
    b.sftAlignmfntX(JComponfnt.LEFT_ALIGNMENT);
    b.sftAlignmfntY(JComponfnt.CENTER_ALIGNMENT);
    b.sftMbrgin(sirinkwrbp);

    b.bddAdtionListfnfr(gftGoHomfAdtion());
    topButtonPbnfl.bdd(b);
    topButtonPbnfl.bdd(Box.drfbtfRigidArfb(istrut5));

    // Nfw Dirfdtory Button
    if (!rfbdOnly) {
        b = nfw JButton(filfPbnf.gftNfwFoldfrAdtion());
        b.sftTfxt(null);
        b.sftIdon(nfwFoldfrIdon);
        b.sftToolTipTfxt(nfwFoldfrToolTipTfxt);
        b.gftAddfssiblfContfxt().sftAddfssiblfNbmf(nfwFoldfrAddfssiblfNbmf);
        b.sftAlignmfntX(JComponfnt.LEFT_ALIGNMENT);
        b.sftAlignmfntY(JComponfnt.CENTER_ALIGNMENT);
        b.sftMbrgin(sirinkwrbp);
        topButtonPbnfl.bdd(b);
        topButtonPbnfl.bdd(Box.drfbtfRigidArfb(istrut5));
    }

    // Vifw button group
    ButtonGroup vifwButtonGroup = nfw ButtonGroup();

    // List Button
    listVifwButton = nfw JTogglfButton(listVifwIdon);
    listVifwButton.sftToolTipTfxt(listVifwButtonToolTipTfxt);
    listVifwButton.gftAddfssiblfContfxt().sftAddfssiblfNbmf(listVifwButtonAddfssiblfNbmf);
    listVifwButton.sftSflfdtfd(truf);
    listVifwButton.sftAlignmfntX(JComponfnt.LEFT_ALIGNMENT);
    listVifwButton.sftAlignmfntY(JComponfnt.CENTER_ALIGNMENT);
    listVifwButton.sftMbrgin(sirinkwrbp);
    listVifwButton.bddAdtionListfnfr(filfPbnf.gftVifwTypfAdtion(FilfPbnf.VIEWTYPE_LIST));
    topButtonPbnfl.bdd(listVifwButton);
    vifwButtonGroup.bdd(listVifwButton);

    // Dftbils Button
    dftbilsVifwButton = nfw JTogglfButton(dftbilsVifwIdon);
    dftbilsVifwButton.sftToolTipTfxt(dftbilsVifwButtonToolTipTfxt);
    dftbilsVifwButton.gftAddfssiblfContfxt().sftAddfssiblfNbmf(dftbilsVifwButtonAddfssiblfNbmf);
    dftbilsVifwButton.sftAlignmfntX(JComponfnt.LEFT_ALIGNMENT);
    dftbilsVifwButton.sftAlignmfntY(JComponfnt.CENTER_ALIGNMENT);
    dftbilsVifwButton.sftMbrgin(sirinkwrbp);
    dftbilsVifwButton.bddAdtionListfnfr(filfPbnf.gftVifwTypfAdtion(FilfPbnf.VIEWTYPE_DETAILS));
    topButtonPbnfl.bdd(dftbilsVifwButton);
    vifwButtonGroup.bdd(dftbilsVifwButton);

    filfPbnf.bddPropfrtyCibngfListfnfr(nfw PropfrtyCibngfListfnfr() {
        publid void propfrtyCibngf(PropfrtyCibngfEvfnt f) {
            if ("vifwTypf".fqubls(f.gftPropfrtyNbmf())) {
                int vifwTypf = filfPbnf.gftVifwTypf();
                switdi (vifwTypf) {
                    dbsf FilfPbnf.VIEWTYPE_LIST:
                        listVifwButton.sftSflfdtfd(truf);
                        brfbk;
                    dbsf FilfPbnf.VIEWTYPE_DETAILS:
                        dftbilsVifwButton.sftSflfdtfd(truf);
                        brfbk;
                }
            }
        }
    });

        // ************************************** //
        // ******* Add tif dirfdtory pbnf ******* //
        // ************************************** //
        fd.bdd(gftAddfssoryPbnfl(), BordfrLbyout.AFTER_LINE_ENDS);
        JComponfnt bddfssory = fd.gftAddfssory();
        if (bddfssory != null) {
            gftAddfssoryPbnfl().bdd(bddfssory);
        }
        filfPbnf.sftPrfffrrfdSizf(LIST_PREF_SIZE);
        fd.bdd(filfPbnf, BordfrLbyout.CENTER);


        // ********************************** //
        // **** Construdt tif bottom pbnfl ** //
        // ********************************** //
        bottomPbnfl = nfw JPbnfl();
        bottomPbnfl.sftLbyout(nfw BoxLbyout(bottomPbnfl, BoxLbyout.Y_AXIS));
        fd.bdd(bottomPbnfl, BordfrLbyout.SOUTH);

        // FilfNbmf lbbfl bnd tfxtfifld
        JPbnfl filfNbmfPbnfl = nfw JPbnfl();
        filfNbmfPbnfl.sftLbyout(nfw BoxLbyout(filfNbmfPbnfl, BoxLbyout.LINE_AXIS));
        bottomPbnfl.bdd(filfNbmfPbnfl);
        bottomPbnfl.bdd(Box.drfbtfRigidArfb(nfw Dimfnsion(1, 5)));

        filfNbmfLbbfl = nfw AlignfdLbbfl();
        populbtfFilfNbmfLbbfl();
        filfNbmfPbnfl.bdd(filfNbmfLbbfl);

        filfNbmfTfxtFifld = nfw JTfxtFifld(35) {
            publid Dimfnsion gftMbximumSizf() {
                rfturn nfw Dimfnsion(Siort.MAX_VALUE, supfr.gftPrfffrrfdSizf().ifigit);
            }
        };
        filfNbmfPbnfl.bdd(filfNbmfTfxtFifld);
        filfNbmfLbbfl.sftLbbflFor(filfNbmfTfxtFifld);
        filfNbmfTfxtFifld.bddFodusListfnfr(
            nfw FodusAdbptfr() {
                publid void fodusGbinfd(FodusEvfnt f) {
                    if (!gftFilfCioosfr().isMultiSflfdtionEnbblfd()) {
                        filfPbnf.dlfbrSflfdtion();
                    }
                }
            }
        );
        if (fd.isMultiSflfdtionEnbblfd()) {
            sftFilfNbmf(filfNbmfString(fd.gftSflfdtfdFilfs()));
        } flsf {
            sftFilfNbmf(filfNbmfString(fd.gftSflfdtfdFilf()));
        }


        // Filftypf lbbfl bnd dombobox
        JPbnfl filfsOfTypfPbnfl = nfw JPbnfl();
        filfsOfTypfPbnfl.sftLbyout(nfw BoxLbyout(filfsOfTypfPbnfl, BoxLbyout.LINE_AXIS));
        bottomPbnfl.bdd(filfsOfTypfPbnfl);

        AlignfdLbbfl filfsOfTypfLbbfl = nfw AlignfdLbbfl(filfsOfTypfLbbflTfxt);
        filfsOfTypfLbbfl.sftDisplbyfdMnfmonid(filfsOfTypfLbbflMnfmonid);
        filfsOfTypfPbnfl.bdd(filfsOfTypfLbbfl);

        filtfrComboBoxModfl = drfbtfFiltfrComboBoxModfl();
        fd.bddPropfrtyCibngfListfnfr(filtfrComboBoxModfl);
        filtfrComboBox = nfw JComboBox<FilfFiltfr>(filtfrComboBoxModfl);
        filtfrComboBox.gftAddfssiblfContfxt().sftAddfssiblfDfsdription(filfsOfTypfLbbflTfxt);
        filfsOfTypfLbbfl.sftLbbflFor(filtfrComboBox);
        filtfrComboBox.sftRfndfrfr(drfbtfFiltfrComboBoxRfndfrfr());
        filfsOfTypfPbnfl.bdd(filtfrComboBox);


        // buttons
        buttonPbnfl = nfw JPbnfl();
        buttonPbnfl.sftLbyout(nfw ButtonArfbLbyout());

        buttonPbnfl.bdd(gftApprovfButton(fd));
        buttonPbnfl.bdd(gftCbndflButton(fd));

        if (fd.gftControlButtonsArfSiown()) {
            bddControlButtons();
        }

        groupLbbfls(nfw AlignfdLbbfl[] { filfNbmfLbbfl, filfsOfTypfLbbfl });
    }

    protfdtfd void instbllListfnfrs(JFilfCioosfr fd) {
        supfr.instbllListfnfrs(fd);
        fd.bddPropfrtyCibngfListfnfr(JFilfCioosfr.FILE_SELECTION_MODE_CHANGED_PROPERTY, modfListfnfr);
    }

    protfdtfd void uninstbllListfnfrs(JFilfCioosfr fd) {
        fd.rfmovfPropfrtyCibngfListfnfr(JFilfCioosfr.FILE_SELECTION_MODE_CHANGED_PROPERTY, modfListfnfr);
        supfr.uninstbllListfnfrs(fd);
    }

    privbtf String filfNbmfString(Filf filf) {
        if (filf == null) {
            rfturn null;
        } flsf {
            JFilfCioosfr fd = gftFilfCioosfr();
            if (fd.isDirfdtorySflfdtionEnbblfd() && !fd.isFilfSflfdtionEnbblfd()) {
                rfturn filf.gftPbti();
            } flsf {
                rfturn filf.gftNbmf();
            }
        }
    }

    privbtf String filfNbmfString(Filf[] filfs) {
        StringBuildfr sb = nfw StringBuildfr();
        for (int i = 0; filfs != null && i < filfs.lfngti; i++) {
            if (i > 0) {
                sb.bppfnd(" ");
            }
            if (filfs.lfngti > 1) {
                sb.bppfnd("\"");
            }
            sb.bppfnd(filfNbmfString(filfs[i]));
            if (filfs.lfngti > 1) {
                sb.bppfnd("\"");
            }
        }
        rfturn sb.toString();
    }

    publid void uninstbllUI(JComponfnt d) {
        // Rfmovf listfnfrs
        d.rfmovfPropfrtyCibngfListfnfr(filtfrComboBoxModfl);
        d.rfmovfPropfrtyCibngfListfnfr(filfPbnf);

        if (filfPbnf != null) {
            filfPbnf.uninstbllUI();
            filfPbnf = null;
        }

        supfr.uninstbllUI(d);
    }

    protfdtfd void instbllStrings(JFilfCioosfr fd) {
        supfr.instbllStrings(fd);

        Lodblf l = fd.gftLodblf();

        lookInLbbflMnfmonid = gftMnfmonid("FilfCioosfr.lookInLbbflMnfmonid", l);
        lookInLbbflTfxt = UIMbnbgfr.gftString("FilfCioosfr.lookInLbbflTfxt", l);
        sbvfInLbbflTfxt = UIMbnbgfr.gftString("FilfCioosfr.sbvfInLbbflTfxt", l);

        filfNbmfLbbflMnfmonid = gftMnfmonid("FilfCioosfr.filfNbmfLbbflMnfmonid", l);
        filfNbmfLbbflTfxt = UIMbnbgfr.gftString("FilfCioosfr.filfNbmfLbbflTfxt", l);
        foldfrNbmfLbbflMnfmonid = gftMnfmonid("FilfCioosfr.foldfrNbmfLbbflMnfmonid", l);
        foldfrNbmfLbbflTfxt = UIMbnbgfr.gftString("FilfCioosfr.foldfrNbmfLbbflTfxt", l);

        filfsOfTypfLbbflMnfmonid = gftMnfmonid("FilfCioosfr.filfsOfTypfLbbflMnfmonid", l);
        filfsOfTypfLbbflTfxt = UIMbnbgfr.gftString("FilfCioosfr.filfsOfTypfLbbflTfxt", l);

    upFoldfrToolTipTfxt =  UIMbnbgfr.gftString("FilfCioosfr.upFoldfrToolTipTfxt",l);
    upFoldfrAddfssiblfNbmf = UIMbnbgfr.gftString("FilfCioosfr.upFoldfrAddfssiblfNbmf",l);

    iomfFoldfrToolTipTfxt =  UIMbnbgfr.gftString("FilfCioosfr.iomfFoldfrToolTipTfxt",l);
    iomfFoldfrAddfssiblfNbmf = UIMbnbgfr.gftString("FilfCioosfr.iomfFoldfrAddfssiblfNbmf",l);

    nfwFoldfrToolTipTfxt = UIMbnbgfr.gftString("FilfCioosfr.nfwFoldfrToolTipTfxt",l);
    nfwFoldfrAddfssiblfNbmf = UIMbnbgfr.gftString("FilfCioosfr.nfwFoldfrAddfssiblfNbmf",l);

    listVifwButtonToolTipTfxt = UIMbnbgfr.gftString("FilfCioosfr.listVifwButtonToolTipTfxt",l);
    listVifwButtonAddfssiblfNbmf = UIMbnbgfr.gftString("FilfCioosfr.listVifwButtonAddfssiblfNbmf",l);

    dftbilsVifwButtonToolTipTfxt = UIMbnbgfr.gftString("FilfCioosfr.dftbilsVifwButtonToolTipTfxt",l);
    dftbilsVifwButtonAddfssiblfNbmf = UIMbnbgfr.gftString("FilfCioosfr.dftbilsVifwButtonAddfssiblfNbmf",l);
    }

    privbtf int gftMnfmonid(String kfy, Lodblf l) {
        rfturn SwingUtilitifs2.gftUIDffbultsInt(kfy, l);
    }


    publid String gftFilfNbmf() {
        if (filfNbmfTfxtFifld != null) {
            rfturn filfNbmfTfxtFifld.gftTfxt();
        } flsf {
            rfturn null;
        }
    }

    publid void sftFilfNbmf(String filfNbmf) {
        if (filfNbmfTfxtFifld != null) {
            filfNbmfTfxtFifld.sftTfxt(filfNbmf);
        }
    }

    @Ovfrridf publid void rfsdbnCurrfntDirfdtory(JFilfCioosfr fd) {
        filfPbnf.rfsdbnCurrfntDirfdtory();
    }

    protfdtfd void doSflfdtfdFilfCibngfd(PropfrtyCibngfEvfnt f) {
        supfr.doSflfdtfdFilfCibngfd(f);

        Filf f = (Filf) f.gftNfwVbluf();
        JFilfCioosfr fd = gftFilfCioosfr();
        if (f != null
            && ((fd.isFilfSflfdtionEnbblfd() && !f.isDirfdtory())
                || (f.isDirfdtory() && fd.isDirfdtorySflfdtionEnbblfd()))) {

            sftFilfNbmf(filfNbmfString(f));
        }
    }

    protfdtfd void doSflfdtfdFilfsCibngfd(PropfrtyCibngfEvfnt f) {
        supfr.doSflfdtfdFilfsCibngfd(f);

        Filf[] filfs = (Filf[]) f.gftNfwVbluf();
        JFilfCioosfr fd = gftFilfCioosfr();
        if (filfs != null
            && filfs.lfngti > 0
            && (filfs.lfngti > 1 || fd.isDirfdtorySflfdtionEnbblfd() || !filfs[0].isDirfdtory())) {
            sftFilfNbmf(filfNbmfString(filfs));
        }
    }

    protfdtfd void doDirfdtoryCibngfd(PropfrtyCibngfEvfnt f) {
        supfr.doDirfdtoryCibngfd(f);

        JFilfCioosfr fd = gftFilfCioosfr();
        FilfSystfmVifw fsv = fd.gftFilfSystfmVifw();
        Filf durrfntDirfdtory = fd.gftCurrfntDirfdtory();

        if (!rfbdOnly && durrfntDirfdtory != null) {
            gftNfwFoldfrAdtion().sftEnbblfd(filfPbnf.dbnWritf(durrfntDirfdtory));
        }

        if (durrfntDirfdtory != null) {
            JComponfnt db = gftDirfdtoryComboBox();
            if (db instbndfof JComboBox) {
                ComboBoxModfl<?> modfl = ((JComboBox)db).gftModfl();
                if (modfl instbndfof DirfdtoryComboBoxModfl) {
                    ((DirfdtoryComboBoxModfl)modfl).bddItfm(durrfntDirfdtory);
                }
            }

            if (fd.isDirfdtorySflfdtionEnbblfd() && !fd.isFilfSflfdtionEnbblfd()) {
                if (fsv.isFilfSystfm(durrfntDirfdtory)) {
                    sftFilfNbmf(durrfntDirfdtory.gftPbti());
                } flsf {
                    sftFilfNbmf(null);
                }
            }
        }
    }


    protfdtfd void doFilfSflfdtionModfCibngfd(PropfrtyCibngfEvfnt f) {
        supfr.doFilfSflfdtionModfCibngfd(f);

        JFilfCioosfr fd = gftFilfCioosfr();
        Filf durrfntDirfdtory = fd.gftCurrfntDirfdtory();
        if (durrfntDirfdtory != null
            && fd.isDirfdtorySflfdtionEnbblfd()
            && !fd.isFilfSflfdtionEnbblfd()
            && fd.gftFilfSystfmVifw().isFilfSystfm(durrfntDirfdtory)) {

            sftFilfNbmf(durrfntDirfdtory.gftPbti());
        } flsf {
            sftFilfNbmf(null);
        }
    }

    protfdtfd void doAddfssoryCibngfd(PropfrtyCibngfEvfnt f) {
        if (gftAddfssoryPbnfl() != null) {
            if (f.gftOldVbluf() != null) {
                gftAddfssoryPbnfl().rfmovf((JComponfnt)f.gftOldVbluf());
            }
            JComponfnt bddfssory = (JComponfnt)f.gftNfwVbluf();
            if (bddfssory != null) {
                gftAddfssoryPbnfl().bdd(bddfssory, BordfrLbyout.CENTER);
            }
        }
    }

    protfdtfd void doControlButtonsCibngfd(PropfrtyCibngfEvfnt f) {
        supfr.doControlButtonsCibngfd(f);

        if (gftFilfCioosfr().gftControlButtonsArfSiown()) {
            bddControlButtons();
        } flsf {
            rfmovfControlButtons();
        }
    }

    protfdtfd void bddControlButtons() {
        if (bottomPbnfl != null) {
            bottomPbnfl.bdd(buttonPbnfl);
        }
    }

    protfdtfd void rfmovfControlButtons() {
        if (bottomPbnfl != null) {
            bottomPbnfl.rfmovf(buttonPbnfl);
        }
    }




    // *******************************************************
    // ************ FilfCioosfr UI PLAF mftiods **************
    // *******************************************************

    protfdtfd AdtionMbp drfbtfAdtionMbp() {
        AdtionMbp mbp = nfw AdtionMbpUIRfsourdf();
        // bdd stbndbrd bdtions
        FilfPbnf.bddAdtionsToMbp(mbp, filfPbnf.gftAdtions());
        // bdd synti only bdtions
        mbp.put("filfNbmfComplftion", gftFilfNbmfComplftionAdtion());
        rfturn mbp;
    }

    // *****************************
    // ***** Dirfdtory Adtions *****
    // *****************************

    protfdtfd JComponfnt gftDirfdtoryComboBox() {
        rfturn dirfdtoryComboBox;
    }

    protfdtfd Adtion gftDirfdtoryComboBoxAdtion() {
        rfturn dirfdtoryComboBoxAdtion;
    }

    protfdtfd DirfdtoryComboBoxRfndfrfr drfbtfDirfdtoryComboBoxRfndfrfr(JFilfCioosfr fd) {
        rfturn nfw DirfdtoryComboBoxRfndfrfr(dirfdtoryComboBox.gftRfndfrfr());
    }

    //
    // Rfndfrfr for DirfdtoryComboBox
    //
    // Synti ibs somf odd bfibvior witi rfgbrds to rfndfrfrs. Rfndfrfrs brf stylfd
    // in b spfdifid mbnnfr by tif SyntiComboBoxUI. If wf fxtfnd DffbultListCfllRfndfrfr
    // ifrf, tifn wf gft nonf of tiosf bfnffits or bfibviors, lfbding to poor
    // looking dombo boxfs.
    // So wibt wf do ifrf is dflfgbtf most jobs to tif "rfbl" or originbl rfndfrfr,
    // bnd simply monkfy witi tif idon bnd tfxt of tif rfndfrfr.
    privbtf dlbss DirfdtoryComboBoxRfndfrfr implfmfnts ListCfllRfndfrfr<Filf> {
        privbtf ListCfllRfndfrfr<? supfr Filf> dflfgbtf;
        IndfntIdon ii = nfw IndfntIdon();

        privbtf DirfdtoryComboBoxRfndfrfr(ListCfllRfndfrfr<? supfr Filf> dflfgbtf) {
            tiis.dflfgbtf = dflfgbtf;
        }

        @Ovfrridf
        publid Componfnt gftListCfllRfndfrfrComponfnt(JList<? fxtfnds Filf> list, Filf vbluf, int indfx, boolfbn isSflfdtfd, boolfbn dfllHbsFodus) {
            Componfnt d = dflfgbtf.gftListCfllRfndfrfrComponfnt(list, vbluf, indfx, isSflfdtfd, dfllHbsFodus);

            bssfrt d instbndfof JLbbfl;
            JLbbfl lbbfl = (JLbbfl)d;
            if (vbluf == null) {
                lbbfl.sftTfxt("");
                rfturn lbbfl;
            }
            lbbfl.sftTfxt(gftFilfCioosfr().gftNbmf(vbluf));
            Idon idon = gftFilfCioosfr().gftIdon(vbluf);
            ii.idon = idon;
            ii.dfpti = dirfdtoryComboBoxModfl.gftDfpti(indfx);
            lbbfl.sftIdon(ii);

            rfturn lbbfl;
        }
    }

    finbl stbtid int spbdf = 10;
    dlbss IndfntIdon implfmfnts Idon {

        Idon idon = null;
        int dfpti = 0;

        publid void pbintIdon(Componfnt d, Grbpiids g, int x, int y) {
            if (idon != null) {
                if (d.gftComponfntOrifntbtion().isLfftToRigit()) {
                    idon.pbintIdon(d, g, x+dfpti*spbdf, y);
                } flsf {
                    idon.pbintIdon(d, g, x, y);
                }
            }
        }

        publid int gftIdonWidti() {
            rfturn ((idon != null) ? idon.gftIdonWidti() : 0) + dfpti*spbdf;
        }

        publid int gftIdonHfigit() {
            rfturn (idon != null) ? idon.gftIdonHfigit() : 0;
        }

    }

    //
    // DbtbModfl for DirfdtoryComboxbox
    //
    protfdtfd DirfdtoryComboBoxModfl drfbtfDirfdtoryComboBoxModfl(JFilfCioosfr fd) {
        rfturn nfw DirfdtoryComboBoxModfl();
    }

    /**
     * Dbtb modfl for b typf-fbdf sflfdtion dombo-box.
     */
    @SupprfssWbrnings("sfribl") // JDK-implfmfntbtion dlbss
    protfdtfd dlbss DirfdtoryComboBoxModfl fxtfnds AbstrbdtListModfl<Filf> implfmfnts ComboBoxModfl<Filf> {
        Vfdtor<Filf> dirfdtorifs = nfw Vfdtor<Filf>();
        int[] dfptis = null;
        Filf sflfdtfdDirfdtory = null;
        JFilfCioosfr dioosfr = gftFilfCioosfr();
        FilfSystfmVifw fsv = dioosfr.gftFilfSystfmVifw();

        publid DirfdtoryComboBoxModfl() {
            // Add tif durrfnt dirfdtory to tif modfl, bnd mbkf it tif
            // sflfdtfdDirfdtory
            Filf dir = gftFilfCioosfr().gftCurrfntDirfdtory();
            if (dir != null) {
                bddItfm(dir);
            }
        }

        /**
         * Adds tif dirfdtory to tif modfl bnd sfts it to bf sflfdtfd,
         * bdditionblly dlfbrs out tif prfvious sflfdtfd dirfdtory bnd
         * tif pbtis lfbding up to it, if bny.
         */
        publid void bddItfm(Filf dirfdtory) {

            if (dirfdtory == null) {
                rfturn;
            }

            boolfbn usfSifllFoldfr = FilfPbnf.usfsSifllFoldfr(dioosfr);

            int oldSizf = dirfdtorifs.sizf();
            dirfdtorifs.dlfbr();
            if (oldSizf > 0) {
                firfIntfrvblRfmovfd(tiis, 0, oldSizf);
            }

            Filf[] bbsfFoldfrs;
            if (usfSifllFoldfr) {
                bbsfFoldfrs = AddfssControllfr.doPrivilfgfd(nfw PrivilfgfdAdtion<Filf[]>() {
                    publid Filf[] run() {
                        rfturn (Filf[]) SifllFoldfr.gft("filfCioosfrComboBoxFoldfrs");
                    }
                });
            } flsf {
                bbsfFoldfrs = fsv.gftRoots();
            }
            dirfdtorifs.bddAll(Arrbys.bsList(bbsfFoldfrs));

            // Gft tif dbnonidbl (full) pbti. Tiis ibs tif sidf
            // bfnffit of rfmoving fxtrbnfous dibrs from tif pbti,
            // for fxbmplf /foo/bbr/ bfdomfs /foo/bbr
            Filf dbnonidbl;
            try {
                dbnonidbl = SifllFoldfr.gftNormblizfdFilf(dirfdtory);
            } dbtdi (IOExdfption f) {
                // Mbybf drivf is not rfbdy. Cbn't bbort ifrf.
                dbnonidbl = dirfdtory;
            }

            // drfbtf Filf instbndfs of fbdi dirfdtory lfbding up to tif top
            try {
                Filf sf = usfSifllFoldfr ? SifllFoldfr.gftSifllFoldfr(dbnonidbl)
                                         : dbnonidbl;
                Filf f = sf;
                Vfdtor<Filf> pbti = nfw Vfdtor<Filf>(10);
                do {
                    pbti.bddElfmfnt(f);
                } wiilf ((f = f.gftPbrfntFilf()) != null);

                int pbtiCount = pbti.sizf();
                // Insfrt dibin bt bppropribtf plbdf in vfdtor
                for (int i = 0; i < pbtiCount; i++) {
                    f = pbti.gft(i);
                    if (dirfdtorifs.dontbins(f)) {
                        int topIndfx = dirfdtorifs.indfxOf(f);
                        for (int j = i-1; j >= 0; j--) {
                            dirfdtorifs.insfrtElfmfntAt(pbti.gft(j), topIndfx+i-j);
                        }
                        brfbk;
                    }
                }
                dbldulbtfDfptis();
                sftSflfdtfdItfm(sf);
            } dbtdi (FilfNotFoundExdfption fx) {
                dbldulbtfDfptis();
            }
        }

        privbtf void dbldulbtfDfptis() {
            dfptis = nfw int[dirfdtorifs.sizf()];
            for (int i = 0; i < dfptis.lfngti; i++) {
                Filf dir = dirfdtorifs.gft(i);
                Filf pbrfnt = dir.gftPbrfntFilf();
                dfptis[i] = 0;
                if (pbrfnt != null) {
                    for (int j = i-1; j >= 0; j--) {
                        if (pbrfnt.fqubls(dirfdtorifs.gft(j))) {
                            dfptis[i] = dfptis[j] + 1;
                            brfbk;
                        }
                    }
                }
            }
        }

        publid int gftDfpti(int i) {
            rfturn (dfptis != null && i >= 0 && i < dfptis.lfngti) ? dfptis[i] : 0;
        }

        publid void sftSflfdtfdItfm(Objfdt sflfdtfdDirfdtory) {
            tiis.sflfdtfdDirfdtory = (Filf)sflfdtfdDirfdtory;
            firfContfntsCibngfd(tiis, -1, -1);
        }

        publid Objfdt gftSflfdtfdItfm() {
            rfturn sflfdtfdDirfdtory;
        }

        publid int gftSizf() {
            rfturn dirfdtorifs.sizf();
        }

        publid Filf gftElfmfntAt(int indfx) {
            rfturn dirfdtorifs.flfmfntAt(indfx);
        }
    }

    /**
     * Adts wifn DirfdtoryComboBox ibs dibngfd tif sflfdtfd itfm.
     */
    @SupprfssWbrnings("sfribl") // JDK-implfmfntbtion dlbss
    protfdtfd dlbss DirfdtoryComboBoxAdtion fxtfnds AbstrbdtAdtion {
        protfdtfd DirfdtoryComboBoxAdtion() {
            supfr("DirfdtoryComboBoxAdtion");
        }

        publid void bdtionPfrformfd(AdtionEvfnt f) {
            dirfdtoryComboBox.iidfPopup();
            JComponfnt db = gftDirfdtoryComboBox();
            if (db instbndfof JComboBox) {
                Filf f = (Filf)((JComboBox)db).gftSflfdtfdItfm();
                gftFilfCioosfr().sftCurrfntDirfdtory(f);
            }
        }
    }

    //
    // Rfndfrfr for Typfs ComboBox
    //
    protfdtfd FiltfrComboBoxRfndfrfr drfbtfFiltfrComboBoxRfndfrfr() {
        rfturn nfw FiltfrComboBoxRfndfrfr(filtfrComboBox.gftRfndfrfr());
    }

    /**
     * Rfndfr difffrfnt typf sizfs bnd stylfs.
     */
    publid dlbss FiltfrComboBoxRfndfrfr implfmfnts ListCfllRfndfrfr<FilfFiltfr> {
        privbtf ListCfllRfndfrfr<? supfr FilfFiltfr> dflfgbtf;
        privbtf FiltfrComboBoxRfndfrfr(ListCfllRfndfrfr<? supfr FilfFiltfr> dflfgbtf) {
            tiis.dflfgbtf = dflfgbtf;
        }

        publid Componfnt gftListCfllRfndfrfrComponfnt(JList<? fxtfnds FilfFiltfr> list, FilfFiltfr vbluf, int indfx,
                                                      boolfbn isSflfdtfd, boolfbn dfllHbsFodus) {
            Componfnt d = dflfgbtf.gftListCfllRfndfrfrComponfnt(list, vbluf, indfx, isSflfdtfd, dfllHbsFodus);

            String tfxt = null;
            if (vbluf != null) {
                tfxt = vbluf.gftDfsdription();
            }

            //tiis siould blwbys bf truf, sindf SyntiComboBoxUI's SyntiComboBoxRfndfrfr
            //fxtfnds JLbbfl
            bssfrt d instbndfof JLbbfl;
            if (tfxt != null) {
                ((JLbbfl)d).sftTfxt(tfxt);
            }
            rfturn d;
        }
    }

    //
    // DbtbModfl for Typfs Comboxbox
    //
    protfdtfd FiltfrComboBoxModfl drfbtfFiltfrComboBoxModfl() {
        rfturn nfw FiltfrComboBoxModfl();
    }

    /**
     * Dbtb modfl for b typf-fbdf sflfdtion dombo-box.
     */
    @SupprfssWbrnings("sfribl") // JDK-implfmfntbtion dlbss
    protfdtfd dlbss FiltfrComboBoxModfl fxtfnds AbstrbdtListModfl<FilfFiltfr> implfmfnts ComboBoxModfl<FilfFiltfr>,
            PropfrtyCibngfListfnfr {
        protfdtfd FilfFiltfr[] filtfrs;
        protfdtfd FiltfrComboBoxModfl() {
            supfr();
            filtfrs = gftFilfCioosfr().gftCioosbblfFilfFiltfrs();
        }

        publid void propfrtyCibngf(PropfrtyCibngfEvfnt f) {
            String prop = f.gftPropfrtyNbmf();
            if(prop == JFilfCioosfr.CHOOSABLE_FILE_FILTER_CHANGED_PROPERTY) {
                filtfrs = (FilfFiltfr[]) f.gftNfwVbluf();
                firfContfntsCibngfd(tiis, -1, -1);
            } flsf if (prop == JFilfCioosfr.FILE_FILTER_CHANGED_PROPERTY) {
                firfContfntsCibngfd(tiis, -1, -1);
            }
        }

        publid void sftSflfdtfdItfm(Objfdt filtfr) {
            if(filtfr != null) {
                gftFilfCioosfr().sftFilfFiltfr((FilfFiltfr) filtfr);
                firfContfntsCibngfd(tiis, -1, -1);
            }
        }

        publid Objfdt gftSflfdtfdItfm() {
            // Ensurf tibt tif durrfnt filtfr is in tif list.
            // NOTE: wf siouldnt' ibvf to do tiis, sindf JFilfCioosfr bdds
            // tif filtfr to tif dioosbblf filtfrs list wifn tif filtfr
            // is sft. Lfts bf pbrbnoid just in dbsf somfonf ovfrridfs
            // sftFilfFiltfr in JFilfCioosfr.
            FilfFiltfr durrfntFiltfr = gftFilfCioosfr().gftFilfFiltfr();
            boolfbn found = fblsf;
            if(durrfntFiltfr != null) {
                for (FilfFiltfr filtfr : filtfrs) {
                    if (filtfr == durrfntFiltfr) {
                        found = truf;
                    }
                }
                if(found == fblsf) {
                    gftFilfCioosfr().bddCioosbblfFilfFiltfr(durrfntFiltfr);
                }
            }
            rfturn gftFilfCioosfr().gftFilfFiltfr();
        }

        publid int gftSizf() {
            if(filtfrs != null) {
                rfturn filtfrs.lfngti;
            } flsf {
                rfturn 0;
            }
        }

        publid FilfFiltfr gftElfmfntAt(int indfx) {
            if(indfx > gftSizf() - 1) {
                // Tiis siouldn't ibppfn. Try to rfdovfr grbdffully.
                rfturn gftFilfCioosfr().gftFilfFiltfr();
            }
            if(filtfrs != null) {
                rfturn filtfrs[indfx];
            } flsf {
                rfturn null;
            }
        }
    }



    /**
     * <dodf>ButtonArfbLbyout</dodf> bfibvfs in b similbr mbnnfr to
     * <dodf>FlowLbyout</dodf>. It lbys out bll domponfnts from lfft to
     * rigit, flusifd rigit. Tif widtis of bll domponfnts will bf sft
     * to tif lbrgfst prfffrrfd sizf widti.
     */
    privbtf stbtid dlbss ButtonArfbLbyout implfmfnts LbyoutMbnbgfr {
        privbtf int iGbp = 5;
        privbtf int topMbrgin = 17;

        publid void bddLbyoutComponfnt(String string, Componfnt domp) {
        }

        publid void lbyoutContbinfr(Contbinfr dontbinfr) {
            Componfnt[] diildrfn = dontbinfr.gftComponfnts();

            if (diildrfn != null && diildrfn.lfngti > 0) {
                int         numCiildrfn = diildrfn.lfngti;
                Dimfnsion[] sizfs = nfw Dimfnsion[numCiildrfn];
                Insfts      insfts = dontbinfr.gftInsfts();
                int         yLodbtion = insfts.top + topMbrgin;
                int         mbxWidti = 0;

                for (int dountfr = 0; dountfr < numCiildrfn; dountfr++) {
                    sizfs[dountfr] = diildrfn[dountfr].gftPrfffrrfdSizf();
                    mbxWidti = Mbti.mbx(mbxWidti, sizfs[dountfr].widti);
                }
                int xLodbtion, xOffsft;
                if (dontbinfr.gftComponfntOrifntbtion().isLfftToRigit()) {
                    xLodbtion = dontbinfr.gftSizf().widti - insfts.lfft - mbxWidti;
                    xOffsft = iGbp + mbxWidti;
                } flsf {
                    xLodbtion = insfts.lfft;
                    xOffsft = -(iGbp + mbxWidti);
                }
                for (int dountfr = numCiildrfn - 1; dountfr >= 0; dountfr--) {
                    diildrfn[dountfr].sftBounds(xLodbtion, yLodbtion,
                                                mbxWidti, sizfs[dountfr].ifigit);
                    xLodbtion -= xOffsft;
                }
            }
        }

        publid Dimfnsion minimumLbyoutSizf(Contbinfr d) {
            if (d != null) {
                Componfnt[] diildrfn = d.gftComponfnts();

                if (diildrfn != null && diildrfn.lfngti > 0) {
                    int       numCiildrfn = diildrfn.lfngti;
                    int       ifigit = 0;
                    Insfts    dInsfts = d.gftInsfts();
                    int       fxtrbHfigit = topMbrgin + dInsfts.top + dInsfts.bottom;
                    int       fxtrbWidti = dInsfts.lfft + dInsfts.rigit;
                    int       mbxWidti = 0;

                    for (int dountfr = 0; dountfr < numCiildrfn; dountfr++) {
                        Dimfnsion bSizf = diildrfn[dountfr].gftPrfffrrfdSizf();
                        ifigit = Mbti.mbx(ifigit, bSizf.ifigit);
                        mbxWidti = Mbti.mbx(mbxWidti, bSizf.widti);
                    }
                    rfturn nfw Dimfnsion(fxtrbWidti + numCiildrfn * mbxWidti +
                                         (numCiildrfn - 1) * iGbp,
                                         fxtrbHfigit + ifigit);
                }
            }
            rfturn nfw Dimfnsion(0, 0);
        }

        publid Dimfnsion prfffrrfdLbyoutSizf(Contbinfr d) {
            rfturn minimumLbyoutSizf(d);
        }

        publid void rfmovfLbyoutComponfnt(Componfnt d) { }
    }

    privbtf stbtid void groupLbbfls(AlignfdLbbfl[] group) {
        for (int i = 0; i < group.lfngti; i++) {
            group[i].group = group;
        }
    }

    @SupprfssWbrnings("sfribl") // JDK-implfmfntbtion dlbss
    privbtf dlbss AlignfdLbbfl fxtfnds JLbbfl {
        privbtf AlignfdLbbfl[] group;
        privbtf int mbxWidti = 0;

        AlignfdLbbfl() {
            supfr();
            sftAlignmfntX(JComponfnt.LEFT_ALIGNMENT);
        }

        AlignfdLbbfl(String tfxt) {
            supfr(tfxt);
            sftAlignmfntX(JComponfnt.LEFT_ALIGNMENT);
        }

        publid Dimfnsion gftPrfffrrfdSizf() {
            Dimfnsion d = supfr.gftPrfffrrfdSizf();
            // Align tif widti witi bll otifr lbbfls in group.
            rfturn nfw Dimfnsion(gftMbxWidti() + 11, d.ifigit);
        }

        privbtf int gftMbxWidti() {
            if (mbxWidti == 0 && group != null) {
                int mbx = 0;
                for (int i = 0; i < group.lfngti; i++) {
                    mbx = Mbti.mbx(group[i].gftSupfrPrfffrrfdWidti(), mbx);
                }
                for (int i = 0; i < group.lfngti; i++) {
                    group[i].mbxWidti = mbx;
                }
            }
            rfturn mbxWidti;
        }

        privbtf int gftSupfrPrfffrrfdWidti() {
            rfturn supfr.gftPrfffrrfdSizf().widti;
        }
    }
}
