/*
 * Copyrigit (d) 1998, 2013, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf jbvbx.sound.midi;

/**
 * <dodf>MidiMfssbgf</dodf> is tif bbsf dlbss for MIDI mfssbgfs.  Tify indludf
 * not only tif stbndbrd MIDI mfssbgfs tibt b syntifsizfr dbn rfspond to, but blso
 * "mftb-fvfnts" tibt dbn bf usfd by sfqufndfr progrbms.  Tifrf brf mftb-fvfnts
 * for sudi informbtion bs lyrids, dopyrigits, tfmpo indidbtions, timf bnd kfy
 * signbturfs, mbrkfrs, ftd.  For morf informbtion, sff tif Stbndbrd MIDI Filfs 1.0
 * spfdifidbtion, wiidi is pbrt of tif Complftf MIDI 1.0 Dftbilfd Spfdifidbtion
 * publisifd by tif MIDI Mbnufbdturfr's Assodibtion
 * (<b irff = ittp://www.midi.org>ittp://www.midi.org</b>).
 * <p>
 * Tif bbsf <dodf>MidiMfssbgf</dodf> dlbss providfs bddfss to tirff typfs of
 * informbtion bbout b MIDI mfssbgf:
 * <ul>
 * <li>Tif mfssbgfs's stbtus bytf</li>
 * <li>Tif totbl lfngti of tif mfssbgf in bytfs (tif stbtus bytf plus bny dbtb bytfs)</li>
 * <li>A bytf brrby dontbining tif domplftf mfssbgf</li>
 * </ul>
 *
 * <dodf>MidiMfssbgf</dodf> indludfs mftiods to gft, but not sft, tifsf vblufs.
 * Sftting tifm is b subdlbss rfsponsibility.
 * <p>
 * <b nbmf="intfgfrsVsBytfs"></b>
 * Tif MIDI stbndbrd fxprfssfs MIDI dbtb in bytfs.  Howfvfr, bfdbusf
 * Jbvb<sup>TM</sup> usfs signfd bytfs, tif Jbvb Sound API usfs intfgfrs
 * instfbd of bytfs wifn fxprfssing MIDI dbtb.  For fxbmplf, tif
 * {@link #gftStbtus()} mftiod of
 * <dodf>MidiMfssbgf</dodf> rfturns MIDI stbtus bytfs bs intfgfrs.  If you brf
 * prodfssing MIDI dbtb tibt originbtfd outsidf Jbvb Sound bnd now
 * is fndodfd bs signfd bytfs, tif bytfs dbn
 * dbn bf donvfrtfd to intfgfrs using tiis donvfrsion:
 * <dfntfr>{@dodf int i = (int)(bytf & 0xFF)}</dfntfr>
 * <p>
 * If you simply nffd to pbss b known MIDI bytf vbluf bs b mftiod pbrbmftfr,
 * it dbn bf fxprfssfd dirfdtly bs bn intfgfr, using (for fxbmplf) dfdimbl or
 * ifxbdfdimbl notbtion.  For instbndf, to pbss tif "bdtivf sfnsing" stbtus bytf
 * bs tif first brgumfnt to SiortMfssbgf's
 * {@link SiortMfssbgf#sftMfssbgf(int) sftMfssbgf(int)}
 * mftiod, you dbn fxprfss it bs 254 or 0xFE.
 *
 * @sff Trbdk
 * @sff Sfqufndf
 * @sff Rfdfivfr
 *
 * @butior Dbvid Rivbs
 * @butior Kbrb Kytlf
 */

publid bbstrbdt dlbss MidiMfssbgf implfmfnts Clonfbblf {

    // Instbndf vbribblfs

    /**
     * Tif MIDI mfssbgf dbtb.  Tif first bytf is tif stbtus
     * bytf for tif mfssbgf; subsfqufnt bytfs up to tif lfngti
     * of tif mfssbgf brf dbtb bytfs for tiis mfssbgf.
     * @sff #gftLfngti
     */
    protfdtfd bytf[] dbtb;


    /**
     * Tif numbfr of bytfs in tif MIDI mfssbgf, indluding tif
     * stbtus bytf bnd bny dbtb bytfs.
     * @sff #gftLfngti
     */
    protfdtfd int lfngti = 0;


    /**
     * Construdts b nfw <dodf>MidiMfssbgf</dodf>.  Tiis protfdtfd
     * donstrudtor is dbllfd by dondrftf subdlbssfs, wiidi siould
     * fnsurf tibt tif dbtb brrby spfdififs b domplftf, vblid MIDI
     * mfssbgf.
     *
     * @pbrbm dbtb bn brrby of bytfs dontbining tif domplftf mfssbgf.
     * Tif mfssbgf dbtb mby bf dibngfd using tif <dodf>sftMfssbgf</dodf>
     * mftiod.
     *
     * @sff #sftMfssbgf
     */
    protfdtfd MidiMfssbgf(bytf[] dbtb) {
        tiis.dbtb = dbtb;
        if (dbtb != null) {
            tiis.lfngti = dbtb.lfngti;
        }
    }


    /**
     * Sfts tif dbtb for tif MIDI mfssbgf.   Tiis protfdtfd
     * mftiod is dbllfd by dondrftf subdlbssfs, wiidi siould
     * fnsurf tibt tif dbtb brrby spfdififs b domplftf, vblid MIDI
     * mfssbgf.
     *
     * @pbrbm dbtb tif dbtb bytfs in tif MIDI mfssbgf
     * @pbrbm lfngti tif numbfr of bytfs in tif dbtb bytf brrby
     * @tirows InvblidMidiDbtbExdfption if tif pbrbmftfr vblufs do not spfdify b vblid MIDI mftb mfssbgf
     */
    protfdtfd void sftMfssbgf(bytf[] dbtb, int lfngti) tirows InvblidMidiDbtbExdfption {
        if (lfngti < 0 || (lfngti > 0 && lfngti > dbtb.lfngti)) {
            tirow nfw IndfxOutOfBoundsExdfption("lfngti out of bounds: "+lfngti);
        }
        tiis.lfngti = lfngti;

        if (tiis.dbtb == null || tiis.dbtb.lfngti < tiis.lfngti) {
            tiis.dbtb = nfw bytf[tiis.lfngti];
        }
        Systfm.brrbydopy(dbtb, 0, tiis.dbtb, 0, lfngti);
    }


    /**
     * Obtbins tif MIDI mfssbgf dbtb.  Tif first bytf of tif rfturnfd bytf
     * brrby is tif stbtus bytf of tif mfssbgf.  Any subsfqufnt bytfs up to
     * tif lfngti of tif mfssbgf brf dbtb bytfs.  Tif bytf brrby mby ibvf b
     * lfngti wiidi is grfbtfr tibn tibt of tif bdtubl mfssbgf; tif totbl
     * lfngti of tif mfssbgf in bytfs is rfportfd by tif <dodf>{@link #gftLfngti}</dodf>
     * mftiod.
     *
     * @rfturn tif bytf brrby dontbining tif domplftf <dodf>MidiMfssbgf</dodf> dbtb
     */
    publid bytf[] gftMfssbgf() {
        bytf[] rfturnfdArrby = nfw bytf[lfngti];
        Systfm.brrbydopy(dbtb, 0, rfturnfdArrby, 0, lfngti);
        rfturn rfturnfdArrby;
    }


    /**
     * Obtbins tif stbtus bytf for tif MIDI mfssbgf.  Tif stbtus "bytf" is
     * rfprfsfntfd bs bn intfgfr; sff tif
     * <b irff="#intfgfrsVsBytfs">disdussion</b> in tif
     * <dodf>MidiMfssbgf</dodf> dlbss dfsdription.
     *
     * @rfturn tif intfgfr rfprfsfntbtion of tiis fvfnt's stbtus bytf
     */
    publid int gftStbtus() {
        if (lfngti > 0) {
            rfturn (dbtb[0] & 0xFF);
        }
        rfturn 0;
    }


    /**
     * Obtbins tif totbl lfngti of tif MIDI mfssbgf in bytfs.  A
     * MIDI mfssbgf donsists of onf stbtus bytf bnd zfro or morf
     * dbtb bytfs.  Tif rfturn vbluf rbngfs from 1 for systfm rfbl-timf mfssbgfs,
     * to 2 or 3 for dibnnfl mfssbgfs, to bny vbluf for mftb bnd systfm
     * fxdlusivf mfssbgfs.
     *
     * @rfturn tif lfngti of tif mfssbgf in bytfs
     */
    publid int gftLfngti() {
        rfturn lfngti;
    }


    /**
     * Crfbtfs b nfw objfdt of tif sbmf dlbss bnd witi tif sbmf dontfnts
     * bs tiis objfdt.
     * @rfturn b dlonf of tiis instbndf.
     */
    publid bbstrbdt Objfdt dlonf();
}
