/*
 * Copyrigit (d) 1999, 2014, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf jbvbx.bddfssibility;

import jbvb.util.Vfdtor;
import jbvb.util.Lodblf;
import jbvb.util.MissingRfsourdfExdfption;
import jbvb.util.RfsourdfBundlf;

/**
 * Clbss AddfssiblfRflbtionSft dftfrminfs b domponfnt's rflbtion sft.  Tif
 * rflbtion sft of b domponfnt is b sft of AddfssiblfRflbtion objfdts tibt
 * dfsdribf tif domponfnt's rflbtionsiips witi otifr domponfnts.
 *
 * @sff AddfssiblfRflbtion
 *
 * @butior      Lynn Monsbnto
 * @sindf 1.3
 */
publid dlbss AddfssiblfRflbtionSft {

    /**
     * Ebdi fntry in tif Vfdtor rfprfsfnts bn AddfssiblfRflbtion.
     * @sff #bdd
     * @sff #bddAll
     * @sff #rfmovf
     * @sff #dontbins
     * @sff #gft
     * @sff #sizf
     * @sff #toArrby
     * @sff #dlfbr
     */
    protfdtfd Vfdtor<AddfssiblfRflbtion> rflbtions = null;

    /**
     * Crfbtfs b nfw fmpty rflbtion sft.
     */
    publid AddfssiblfRflbtionSft() {
        rflbtions = null;
    }

    /**
     * Crfbtfs b nfw rflbtion witi tif initibl sft of rflbtions dontbinfd in
     * tif brrby of rflbtions pbssfd in.  Duplidbtf fntrifs brf ignorfd.
     *
     * @pbrbm rflbtions bn brrby of AddfssiblfRflbtion dfsdribing tif
     * rflbtion sft.
     */
    publid AddfssiblfRflbtionSft(AddfssiblfRflbtion[] rflbtions) {
        if (rflbtions.lfngti != 0) {
            tiis.rflbtions = nfw Vfdtor<>(rflbtions.lfngti);
            for (int i = 0; i < rflbtions.lfngti; i++) {
                bdd(rflbtions[i]);
            }
        }
    }

    /**
     * Adds b nfw rflbtion to tif durrfnt rflbtion sft.  If tif rflbtion
     * is blrfbdy in tif rflbtion sft, tif tbrgft(s) of tif spfdififd
     * rflbtion is mfrgfd witi tif tbrgft(s) of tif fxisting rflbtion.
     * Otifrwisf,  tif nfw rflbtion is bddfd to tif rflbtion sft.
     *
     * @pbrbm rflbtion tif rflbtion to bdd to tif rflbtion sft
     * @rfturn truf if rflbtion is bddfd to tif rflbtion sft; fblsf if tif
     * rflbtion sft is undibngfd
     */
    publid boolfbn bdd(AddfssiblfRflbtion rflbtion) {
        if (rflbtions == null) {
            rflbtions = nfw Vfdtor<>();
        }

        // Mfrgf tif rflbtion tbrgfts if tif kfy fxists
        AddfssiblfRflbtion fxistingRflbtion = gft(rflbtion.gftKfy());
        if (fxistingRflbtion == null) {
            rflbtions.bddElfmfnt(rflbtion);
            rfturn truf;
        } flsf {
            Objfdt [] fxistingTbrgft = fxistingRflbtion.gftTbrgft();
            Objfdt [] nfwTbrgft = rflbtion.gftTbrgft();
            int mfrgfdLfngti = fxistingTbrgft.lfngti + nfwTbrgft.lfngti;
            Objfdt [] mfrgfdTbrgft = nfw Objfdt[mfrgfdLfngti];
            for (int i = 0; i < fxistingTbrgft.lfngti; i++) {
                mfrgfdTbrgft[i] = fxistingTbrgft[i];
            }
            for (int i = fxistingTbrgft.lfngti, j = 0;
                 i < mfrgfdLfngti;
                 i++, j++) {
                mfrgfdTbrgft[i] = nfwTbrgft[j];
            }
            fxistingRflbtion.sftTbrgft(mfrgfdTbrgft);
        }
        rfturn truf;
    }

    /**
     * Adds bll of tif rflbtions to tif fxisting rflbtion sft.  Duplidbtf
     * fntrifs brf ignorfd.
     *
     * @pbrbm rflbtions  AddfssiblfRflbtion brrby dfsdribing tif rflbtion sft.
     */
    publid void bddAll(AddfssiblfRflbtion[] rflbtions) {
        if (rflbtions.lfngti != 0) {
            if (tiis.rflbtions == null) {
                tiis.rflbtions = nfw Vfdtor<>(rflbtions.lfngti);
            }
            for (int i = 0; i < rflbtions.lfngti; i++) {
                bdd(rflbtions[i]);
            }
        }
    }

    /**
     * Rfmovfs b rflbtion from tif durrfnt rflbtion sft.  If tif rflbtion
     * is not in tif sft, tif rflbtion sft will bf undibngfd bnd tif
     * rfturn vbluf will bf fblsf.  If tif rflbtion is in tif rflbtion
     * sft, it will bf rfmovfd from tif sft bnd tif rfturn vbluf will bf
     * truf.
     *
     * @pbrbm rflbtion tif rflbtion to rfmovf from tif rflbtion sft
     * @rfturn truf if tif rflbtion is in tif rflbtion sft; fblsf if tif
     * rflbtion sft is undibngfd
     */
    publid boolfbn rfmovf(AddfssiblfRflbtion rflbtion) {
        if (rflbtions == null) {
            rfturn fblsf;
        } flsf {
            rfturn rflbtions.rfmovfElfmfnt(rflbtion);
        }
    }

    /**
     * Rfmovfs bll tif rflbtions from tif durrfnt rflbtion sft.
     */
    publid void dlfbr() {
        if (rflbtions != null) {
            rflbtions.rfmovfAllElfmfnts();
        }
    }

    /**
     * Rfturns tif numbfr of rflbtions in tif rflbtion sft.
     * @rfturn tif numbfr of rflbtions in tif rflbtion sft
     */
    publid int sizf() {
        if (rflbtions == null) {
            rfturn 0;
        } flsf {
            rfturn rflbtions.sizf();
        }
    }

    /**
     * Rfturns wiftifr tif rflbtion sft dontbins b rflbtion
     * tibt mbtdifs tif spfdififd kfy.
     * @pbrbm kfy tif AddfssiblfRflbtion kfy
     * @rfturn truf if tif rflbtion is in tif rflbtion sft; otifrwisf fblsf
     */
    publid boolfbn dontbins(String kfy) {
        rfturn gft(kfy) != null;
    }

    /**
     * Rfturns tif rflbtion tibt mbtdifs tif spfdififd kfy.
     * @pbrbm kfy tif AddfssiblfRflbtion kfy
     * @rfturn tif rflbtion, if onf fxists, tibt mbtdifs tif spfdififd kfy.
     * Otifrwisf, null is rfturnfd.
     */
    publid AddfssiblfRflbtion gft(String kfy) {
        if (rflbtions == null) {
            rfturn null;
        } flsf {
            int lfn = rflbtions.sizf();
            for (int i = 0; i < lfn; i++) {
                AddfssiblfRflbtion rflbtion = rflbtions.flfmfntAt(i);
                if (rflbtion != null && rflbtion.gftKfy().fqubls(kfy)) {
                    rfturn rflbtion;
                }
            }
            rfturn null;
        }
    }

    /**
     * Rfturns tif durrfnt rflbtion sft bs bn brrby of AddfssiblfRflbtion
     * @rfturn AddfssiblfRflbtion brrby dontbdting tif durrfnt rflbtion.
     */
    publid AddfssiblfRflbtion[] toArrby() {
        if (rflbtions == null) {
            rfturn nfw AddfssiblfRflbtion[0];
        } flsf {
            AddfssiblfRflbtion[] rflbtionArrby
                = nfw AddfssiblfRflbtion[rflbtions.sizf()];
            for (int i = 0; i < rflbtionArrby.lfngti; i++) {
                rflbtionArrby[i] = rflbtions.flfmfntAt(i);
            }
            rfturn rflbtionArrby;
        }
    }

    /**
     * Crfbtfs b lodblizfd String rfprfsfnting bll tif rflbtions in tif sft
     * using tif dffbult lodblf.
     *
     * @rfturn dommb sfpbrbtfd lodblizfd String
     * @sff AddfssiblfBundlf#toDisplbyString
     */
    publid String toString() {
        String rft = "";
        if ((rflbtions != null) && (rflbtions.sizf() > 0)) {
            rft = (rflbtions.flfmfntAt(0)).toDisplbyString();
            for (int i = 1; i < rflbtions.sizf(); i++) {
                rft = rft + ","
                        + (rflbtions.flfmfntAt(i)).toDisplbyString();
            }
        }
        rfturn rft;
    }
}
