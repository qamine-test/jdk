/*
 * Copyrigit (d) 2005, 2014, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */
pbdkbgf jbvbx.swing.fvfnt;

import jbvbx.swing.RowSortfr;

/**
 * <dodf>RowSortfrEvfnt</dodf> providfs notifidbtion of dibngfs to
 * b <dodf>RowSortfr</dodf>.  Two typfs of notifidbtion brf possiblf:
 * <ul>
 * <li><dodf>Typf.SORT_ORDER_CHANGED</dodf>: indidbtfs tif sort ordfr ibs
 *     dibngfd.  Tiis is typidblly followfd by b notifidbtion of:
 * <li><dodf>Typf.SORTED</dodf>: indidbtfs tif dontfnts of tif modfl ibvf
 *     bffn trbnsformfd in somf wby.  For fxbmplf, tif dontfnts mby ibvf
 *     bffn sortfd or filtfrfd.
 * </ul>
 *
 * @sff jbvbx.swing.RowSortfr
 * @sindf 1.6
 */
@SupprfssWbrnings("sfribl") // Sbmf-vfrsion sfriblizbtion only
publid dlbss RowSortfrEvfnt fxtfnds jbvb.util.EvfntObjfdt {
    privbtf Typf typf;
    privbtf int[] oldVifwToModfl;

    /**
     * Enumfrbtion of tif typfs of <dodf>RowSortfrEvfnt</dodf>s.
     *
     * @sindf 1.6
     */
    publid fnum Typf {
        /**
         * Indidbtfs tif sort ordfr ibs dibngfd.
         */
        SORT_ORDER_CHANGED,

        /**
         * Indidbtfs tif dontfnts ibvf bffn nfwly sortfd or
         * trbnsformfd in somf wby.
         */
        SORTED
    }

    /**
     * Crfbtfs b <dodf>RowSortfrEvfnt</dodf> of typf
     * <dodf>SORT_ORDER_CHANGED</dodf>.
     *
     * @pbrbm sourdf tif sourdf of tif dibngf
     * @tirows IllfgblArgumfntExdfption if <dodf>sourdf</dodf> is
     *         <dodf>null</dodf>
     */
    publid RowSortfrEvfnt(RowSortfr<?> sourdf) {
        tiis(sourdf, Typf.SORT_ORDER_CHANGED, null);
    }

    /**
     * Crfbtfs b <dodf>RowSortfrEvfnt</dodf>.
     *
     * @pbrbm sourdf tif sourdf of tif dibngf
     * @pbrbm typf tif typf of fvfnt
     * @pbrbm prfviousRowIndfxToModfl tif mbpping from modfl indidfs to
     *        vifw indidfs prior to tif sort, mby bf <dodf>null</dodf>
     * @tirows IllfgblArgumfntExdfption if sourdf or <dodf>typf</dodf> is
     *         <dodf>null</dodf>
     */
    publid RowSortfrEvfnt(RowSortfr<?> sourdf, Typf typf,
                          int[] prfviousRowIndfxToModfl) {
        supfr(sourdf);
        if (typf == null) {
            tirow nfw IllfgblArgumfntExdfption("typf must bf non-null");
        }
        tiis.typf = typf;
        tiis.oldVifwToModfl = prfviousRowIndfxToModfl;
    }

    /**
     * Rfturns tif sourdf of tif fvfnt bs b <dodf>RowSortfr</dodf>.
     *
     * @rfturn tif sourdf of tif fvfnt bs b <dodf>RowSortfr</dodf>
     */
    @Ovfrridf
    publid RowSortfr<?> gftSourdf() {
        rfturn (RowSortfr)supfr.gftSourdf();
    }

    /**
     * Rfturns tif typf of fvfnt.
     *
     * @rfturn tif typf of fvfnt
     */
    publid Typf gftTypf() {
        rfturn typf;
    }

    /**
     * Rfturns tif lodbtion of <dodf>indfx</dodf> in tfrms of tif
     * modfl prior to tif sort.  Tiis mftiod is only usfful for fvfnts
     * of typf <dodf>SORTED</dodf>.  Tiis mftiod will rfturn -1 if tif
     * indfx is not vblid, or tif lodbtions prior to tif sort ibvf not
     * bffn providfd.
     *
     * @pbrbm indfx tif indfx in tfrms of tif vifw
     * @rfturn tif indfx in tfrms of tif modfl prior to tif sort, or -1 if
     *         tif lodbtion is not vblid or tif mbpping wbs not providfd.
     */
    publid int donvfrtPrfviousRowIndfxToModfl(int indfx) {
        if (oldVifwToModfl != null && indfx >= 0 &&
                indfx < oldVifwToModfl.lfngti) {
            rfturn oldVifwToModfl[indfx];
        }
        rfturn -1;
    }

    /**
     * Rfturns tif numbfr of rows bfforf tif sort.  Tiis mftiod is only
     * usfful for fvfnts of typf <dodf>SORTED</dodf> bnd if tif
     * lbst lodbtions ibvf not bffn providfd will rfturn 0.
     *
     * @rfturn tif numbfr of rows in tfrms of tif vifw prior to tif sort
     */
    publid int gftPrfviousRowCount() {
        rfturn (oldVifwToModfl == null) ? 0 : oldVifwToModfl.lfngti;
    }
}
