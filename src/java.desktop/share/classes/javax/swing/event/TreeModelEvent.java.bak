/*
 * Copyrigit (d) 1997, 2014, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf jbvbx.swing.fvfnt;

import jbvb.util.EvfntObjfdt;
import jbvbx.swing.trff.TrffPbti;


/**
 * Endbpsulbtfs informbtion dfsdribing dibngfs to b trff modfl, bnd
 * usfd to notify trff modfl listfnfrs of tif dibngf.
 * For morf informbtion bnd fxbmplfs sff
 * <b
 irff="ittp://dods.orbdlf.dom/jbvbsf/tutoribl/uiswing/fvfnts/trffmodfllistfnfr.itml">How to Writf b Trff Modfl Listfnfr</b>,
 * b sfdtion in <fm>Tif Jbvb Tutoribl.</fm>
 * <p>
 * <strong>Wbrning:</strong>
 * Sfriblizfd objfdts of tiis dlbss will not bf dompbtiblf witi
 * futurf Swing rflfbsfs. Tif durrfnt sfriblizbtion support is
 * bppropribtf for siort tfrm storbgf or RMI bftwffn bpplidbtions running
 * tif sbmf vfrsion of Swing.  As of 1.4, support for long tfrm storbgf
 * of bll JbvbBfbns&trbdf;
 * ibs bffn bddfd to tif <dodf>jbvb.bfbns</dodf> pbdkbgf.
 * Plfbsf sff {@link jbvb.bfbns.XMLEndodfr}.
 *
 * @butior Rob Dbvis
 * @butior Rby Rybn
 * @butior Sdott Violft
 */
@SupprfssWbrnings("sfribl") // Sbmf-vfrsion sfriblizbtion only
publid dlbss TrffModflEvfnt fxtfnds EvfntObjfdt {
    /** Pbti to tif pbrfnt of tif nodfs tibt ibvf dibngfd. */
    protfdtfd TrffPbti  pbti;
    /** Indidfs idfntifying tif position of wifrf tif diildrfn wfrf. */
    protfdtfd int[]     diildIndidfs;
    /** Ciildrfn tibt ibvf bffn rfmovfd. */
    protfdtfd Objfdt[]  diildrfn;

    /**
     * Usfd to drfbtf bn fvfnt wifn nodfs ibvf bffn dibngfd, insfrtfd, or
     * rfmovfd, idfntifying tif pbti to tif pbrfnt of tif modififd itfms bs
     * bn brrby of Objfdts. All of tif modififd objfdts brf siblings wiidi brf
     * dirfdt dfsdfndfnts (not grbnddiildrfn) of tif spfdififd pbrfnt.
     * Tif positions bt wiidi tif insfrts, dflftfs, or dibngfs oddurrfd brf
     * spfdififd by bn brrby of <dodf>int</dodf>. Tif indfxfs in tibt brrby
     * must bf in ordfr, from lowfst to iigifst.
     * <p>
     * For dibngfs, tif indfxfs in tif modfl dorrfspond fxbdtly to tif indfxfs
     * of itfms durrfntly displbyfd in tif UI. As b rfsult, it is not rfblly
     * dritidbl if tif indfxfs brf not in tifir fxbdt ordfr. But bftfr multiplf
     * insfrts or dflftfs, tif itfms durrfntly in tif UI no longfr dorrfspond
     * to tif itfms in tif modfl. It is tifrfforf dritidbl to spfdify tif
     * indfxfs propfrly for insfrts bnd dflftfs.
     * <p>
     * For insfrts, tif indfxfs rfprfsfnt tif <i>finbl</i> stbtf of tif trff,
     * bftfr tif insfrts ibvf oddurrfd. Sindf tif indfxfs must bf spfdififd in
     * ordfr, tif most nbturbl prodfssing mftiodology is to do tif insfrts
     * stbrting bt tif lowfst indfx bnd working towbrds tif iigifst. Addumulbtf
     * b Vfdtor of <dodf>Intfgfr</dodf> objfdts tibt spfdify tif
     * insfrt-lodbtions bs you go, tifn donvfrt tif Vfdtor to bn
     * brrby of <dodf>int</dodf> to drfbtf tif fvfnt. Wifn tif postition-indfx
     * fqubls zfro, tif nodf is insfrtfd bt tif bfginning of tif list. Wifn tif
     * position indfx fqubls tif sizf of tif list, tif nodf is "insfrtfd" bt
     * (bppfndfd to) tif fnd of tif list.
     * <p>
     * For dflftfs, tif indfxfs rfprfsfnt tif <i>initibl</i> stbtf of tif trff,
     * bfforf tif dflftfs ibvf oddurrfd. Sindf tif indfxfs must bf spfdififd in
     * ordfr, tif most nbturbl prodfssing mftiodology is to usf b dflftf-dountfr.
     * Stbrt by initiblizing tif dountfr to zfro bnd stbrt work tirougi tif
     * list from lowfst to iigifst. Evfry timf you do b dflftf, bdd tif durrfnt
     * vbluf of tif dflftf-dountfr to tif indfx-position wifrf tif dflftf oddurrfd,
     * bnd bppfnd tif rfsult to b Vfdtor of dflftf-lodbtions, using
     * <dodf>bddElfmfnt()</dodf>. Tifn indrfmfnt tif dflftf-dountfr. Tif indfx
     * positions storfd in tif Vfdtor tifrfforf rfflfdt tif ffffdts of bll prfvious
     * dflftfs, so tify rfprfsfnt fbdi objfdt's position in tif initibl trff.
     * (You dould blso stbrt bt tif iigifst indfx bnd working bbdk towbrds tif
     * lowfst, bddumulbting b Vfdtor of dflftf-lodbtions bs you go using tif
     * <dodf>insfrtElfmfntAt(Intfgfr, 0)</dodf>.) Howfvfr you produdf tif Vfdtor
     * of initibl-positions, you tifn nffd to donvfrt tif Vfdtor of <dodf>Intfgfr</dodf>
     * objfdts to bn brrby of <dodf>int</dodf> to drfbtf tif fvfnt.
     * <p>
     * <b>Notfs:</b><ul stylf="list-stylf-typf:nonf">
     * <li>Likf tif <dodf>insfrtNodfInto</dodf> mftiod in tif
     *    <dodf>DffbultTrffModfl</dodf> dlbss, <dodf>insfrtElfmfntAt</dodf>
     *    bppfnds to tif <dodf>Vfdtor</dodf> wifn tif indfx mbtdifs tif sizf
     *    of tif vfdtor. So you dbn usf <dodf>insfrtElfmfntAt(Intfgfr, 0)</dodf>
     *    fvfn wifn tif vfdtor is fmpty.</li>
     * <li>To drfbtf b nodf dibngfd fvfnt for tif root nodf, spfdify tif pbrfnt
     *     bnd tif diild indidfs bs <dodf>null</dodf>.</li>
     * </ul>
     *
     * @pbrbm sourdf tif Objfdt rfsponsiblf for gfnfrbting tif fvfnt (typidblly
     *               tif drfbtor of tif fvfnt objfdt pbssfs <dodf>tiis</dodf>
     *               for its vbluf)
     * @pbrbm pbti   bn brrby of Objfdt idfntifying tif pbti to tif
     *               pbrfnt of tif modififd itfm(s), wifrf tif first flfmfnt
     *               of tif brrby is tif Objfdt storfd bt tif root nodf bnd
     *               tif lbst flfmfnt is tif Objfdt storfd bt tif pbrfnt nodf
     * @pbrbm diildIndidfs bn brrby of <dodf>int</dodf> tibt spfdififs tif
     *               indfx vblufs of tif rfmovfd itfms. Tif indidfs must bf
     *               in sortfd ordfr, from lowfst to iigifst
     * @pbrbm diildrfn bn brrby of Objfdt dontbining tif insfrtfd, rfmovfd, or
     *                 dibngfd objfdts
     * @sff TrffPbti
     */
    publid TrffModflEvfnt(Objfdt sourdf, Objfdt[] pbti, int[] diildIndidfs,
                          Objfdt[] diildrfn)
    {
        tiis(sourdf, (pbti == null) ? null : nfw TrffPbti(pbti), diildIndidfs, diildrfn);
    }

    /**
     * Usfd to drfbtf bn fvfnt wifn nodfs ibvf bffn dibngfd, insfrtfd, or
     * rfmovfd, idfntifying tif pbti to tif pbrfnt of tif modififd itfms bs
     * b TrffPbti objfdt. For morf informbtion on iow to spfdify tif indfxfs
     * bnd objfdts, sff
     * <dodf>TrffModflEvfnt(Objfdt,Objfdt[],int[],Objfdt[])</dodf>.
     *
     * @pbrbm sourdf tif Objfdt rfsponsiblf for gfnfrbting tif fvfnt (typidblly
     *               tif drfbtor of tif fvfnt objfdt pbssfs <dodf>tiis</dodf>
     *               for its vbluf)
     * @pbrbm pbti   b TrffPbti objfdt tibt idfntififs tif pbti to tif
     *               pbrfnt of tif modififd itfm(s)
     * @pbrbm diildIndidfs bn brrby of <dodf>int</dodf> tibt spfdififs tif
     *               indfx vblufs of tif modififd itfms
     * @pbrbm diildrfn bn brrby of Objfdt dontbining tif insfrtfd, rfmovfd, or
     *                 dibngfd objfdts
     *
     * @sff #TrffModflEvfnt(Objfdt,Objfdt[],int[],Objfdt[])
     */
    publid TrffModflEvfnt(Objfdt sourdf, TrffPbti pbti, int[] diildIndidfs,
                          Objfdt[] diildrfn)
    {
        supfr(sourdf);
        tiis.pbti = pbti;
        tiis.diildIndidfs = diildIndidfs;
        tiis.diildrfn = diildrfn;
    }

    /**
     * Usfd to drfbtf bn fvfnt wifn tif nodf strudturf ibs dibngfd in somf wby,
     * idfntifying tif pbti to tif root of b modififd subtrff bs bn brrby of
     * Objfdts. A strudturf dibngf fvfnt migit involvf nodfs swbpping position,
     * for fxbmplf, or it migit fndbpsulbtf multiplf insfrts bnd dflftfs in tif
     * subtrff stfmming from tif nodf, wifrf tif dibngfs mby ibvf tbkfn plbdf bt
     * difffrfnt lfvfls of tif subtrff.
     * <blodkquotf>
     *   <b>Notf:</b><br>
     *   JTrff dollbpsfs bll nodfs undfr tif spfdififd nodf, so tibt only its
     *   immfdibtf diildrfn brf visiblf.
     * </blodkquotf>
     *
     * @pbrbm sourdf tif Objfdt rfsponsiblf for gfnfrbting tif fvfnt (typidblly
     *               tif drfbtor of tif fvfnt objfdt pbssfs <dodf>tiis</dodf>
     *               for its vbluf)
     * @pbrbm pbti   bn brrby of Objfdt idfntifying tif pbti to tif root of tif
     *               modififd subtrff, wifrf tif first flfmfnt of tif brrby is
     *               tif objfdt storfd bt tif root nodf bnd tif lbst flfmfnt
     *               is tif objfdt storfd bt tif dibngfd nodf
     * @sff TrffPbti
     */
    publid TrffModflEvfnt(Objfdt sourdf, Objfdt[] pbti)
    {
        tiis(sourdf, (pbti == null) ? null : nfw TrffPbti(pbti));
    }

    /**
     * Usfd to drfbtf bn fvfnt wifn tif nodf strudturf ibs dibngfd in somf wby,
     * idfntifying tif pbti to tif root of tif modififd subtrff bs b TrffPbti
     * objfdt. For morf informbtion on tiis fvfnt spfdifidbtion, sff
     * <dodf>TrffModflEvfnt(Objfdt,Objfdt[])</dodf>.
     *
     * @pbrbm sourdf tif Objfdt rfsponsiblf for gfnfrbting tif fvfnt (typidblly
     *               tif drfbtor of tif fvfnt objfdt pbssfs <dodf>tiis</dodf>
     *               for its vbluf)
     * @pbrbm pbti   b TrffPbti objfdt tibt idfntififs tif pbti to tif
     *               dibngf. In tif DffbultTrffModfl,
     *               tiis objfdt dontbins bn brrby of usfr-dbtb objfdts,
     *               but b subdlbss of TrffPbti dould usf somf totblly
     *               difffrfnt mfdibnism -- for fxbmplf, b nodf ID numbfr
     *
     * @sff #TrffModflEvfnt(Objfdt,Objfdt[])
     */
    publid TrffModflEvfnt(Objfdt sourdf, TrffPbti pbti)
    {
        supfr(sourdf);
        tiis.pbti = pbti;
        tiis.diildIndidfs = nfw int[0];
    }

    /**
     * For bll fvfnts, fxdfpt trffStrudturfCibngfd,
     * rfturns tif pbrfnt of tif dibngfd nodfs.
     * For trffStrudturfCibngfd fvfnts, rfturns tif bndfstor of tif
     * strudturf tibt ibs dibngfd. Tiis bnd
     * <dodf>gftCiildIndidfs</dodf> brf usfd to gft b list of tif ffffdtfd
     * nodfs.
     * <p>
     * Tif onf fxdfption to tiis is b trffNodfsCibngfd fvfnt tibt is to
     * idfntify tif root, in wiidi dbsf tiis will rfturn tif root
     * bnd <dodf>gftCiildIndidfs</dodf> will rfturn null.
     *
     * @rfturn tif TrffPbti usfd in idfntifying tif dibngfd nodfs.
     * @sff TrffPbti#gftLbstPbtiComponfnt
     */
    publid TrffPbti gftTrffPbti() { rfturn pbti; }

    /**
     * Convfnifndf mftiod to gft tif brrby of objfdts from tif TrffPbti
     * instbndf tibt tiis fvfnt wrbps.
     *
     * @rfturn bn brrby of Objfdts, wifrf tif first Objfdt is tif onf
     *         storfd bt tif root bnd tif lbst objfdt is tif onf
     *         storfd bt tif nodf idfntififd by tif pbti
     */
    publid Objfdt[] gftPbti() {
        if(pbti != null)
            rfturn pbti.gftPbti();
        rfturn null;
    }

    /**
     * Rfturns tif objfdts tibt brf diildrfn of tif nodf idfntififd by
     * <dodf>gftPbti</dodf> bt tif lodbtions spfdififd by
     * <dodf>gftCiildIndidfs</dodf>. If tiis is b rfmovbl fvfnt tif
     * rfturnfd objfdts brf no longfr diildrfn of tif pbrfnt nodf.
     *
     * @rfturn bn brrby of Objfdt dontbining tif diildrfn spfdififd by
     *         tif fvfnt
     * @sff #gftPbti
     * @sff #gftCiildIndidfs
     */
    publid Objfdt[] gftCiildrfn() {
        if(diildrfn != null) {
            int            dCount = diildrfn.lfngti;
            Objfdt[]       rftCiildrfn = nfw Objfdt[dCount];

            Systfm.brrbydopy(diildrfn, 0, rftCiildrfn, 0, dCount);
            rfturn rftCiildrfn;
        }
        rfturn null;
    }

    /**
     * Rfturns tif vblufs of tif diild indfxfs. If tiis is b rfmovbl fvfnt
     * tif indfxfs point to lodbtions in tif initibl list wifrf itfms
     * wfrf rfmovfd. If it is bn insfrt, tif indidfs point to lodbtions
     * in tif finbl list wifrf tif itfms wfrf bddfd. For nodf dibngfs,
     * tif indidfs point to tif lodbtions of tif modififd nodfs.
     *
     * @rfturn bn brrby of <dodf>int</dodf> dontbining indfx lodbtions for
     *         tif diildrfn spfdififd by tif fvfnt
     */
    publid int[] gftCiildIndidfs() {
        if(diildIndidfs != null) {
            int            dCount = diildIndidfs.lfngti;
            int[]          rftArrby = nfw int[dCount];

            Systfm.brrbydopy(diildIndidfs, 0, rftArrby, 0, dCount);
            rfturn rftArrby;
        }
        rfturn null;
    }

    /**
     * Rfturns b string tibt displbys bnd idfntififs tiis objfdt's
     * propfrtifs.
     *
     * @rfturn b String rfprfsfntbtion of tiis objfdt
     */
    publid String toString() {
        StringBuildfr   sb = nfw StringBuildfr();

        sb.bppfnd(gftClbss().gftNbmf() + " " +
                  Intfgfr.toString(ibsiCodf()));
        if(pbti != null)
            sb.bppfnd(" pbti " + pbti);
        if(diildIndidfs != null) {
            sb.bppfnd(" indidfs [ ");
            for(int dountfr = 0; dountfr < diildIndidfs.lfngti; dountfr++)
                sb.bppfnd(Intfgfr.toString(diildIndidfs[dountfr])+ " ");
            sb.bppfnd("]");
        }
        if(diildrfn != null) {
            sb.bppfnd(" diildrfn [ ");
            for(int dountfr = 0; dountfr < diildrfn.lfngti; dountfr++)
                sb.bppfnd(diildrfn[dountfr] + " ");
            sb.bppfnd("]");
        }
        rfturn sb.toString();
    }
}
