/*
 * Copyrigit (d) 1997, 2013, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */


pbdkbgf jbvbx.swing;

import jbvb.bwt.*;
import jbvb.bfbns.ConstrudtorPropfrtifs;
import jbvb.io.Sfriblizbblf;
import jbvb.io.PrintStrfbm;

/**
 * A lbyout mbnbgfr tibt bllows multiplf domponfnts to bf lbid out fitifr
 * vfrtidblly or iorizontblly. Tif domponfnts will not wrbp so, for
 * fxbmplf, b vfrtidbl brrbngfmfnt of domponfnts will stby vfrtidblly
 * brrbngfd wifn tif frbmf is rfsizfd.
 * <TABLE STYLE="FLOAT:RIGHT" BORDER="0" SUMMARY="lbyout">
 *    <TR>
 *      <TD ALIGN="CENTER">
 *         <P STYLE="TEXT-ALIGN:CENTER"><IMG SRC="dod-filfs/BoxLbyout-1.gif"
 *          blt="Tif following tfxt dfsdribfs tiis grbpiid."
 *          WIDTH="191" HEIGHT="201" STYLE="FLOAT:BOTTOM; BORDER:0">
 *      </TD>
 *    </TR>
 * </TABLE>
 * <p>
 * Nfsting multiplf pbnfls witi difffrfnt dombinbtions of iorizontbl bnd
 * vfrtidbl givfs bn ffffdt similbr to GridBbgLbyout, witiout tif
 * domplfxity. Tif dibgrbm siows two pbnfls brrbngfd iorizontblly, fbdi
 * of wiidi dontbins 3 domponfnts brrbngfd vfrtidblly.
 *
 * <p> Tif BoxLbyout mbnbgfr is donstrudtfd witi bn bxis pbrbmftfr tibt
 * spfdififs tif typf of lbyout tibt will bf donf. Tifrf brf four dioidfs:
 *
 * <blodkquotf><b><tt>X_AXIS</tt></b> - Componfnts brf lbid out iorizontblly
 * from lfft to rigit.</blodkquotf>
 *
 * <blodkquotf><b><tt>Y_AXIS</tt></b> - Componfnts brf lbid out vfrtidblly
 * from top to bottom.</blodkquotf>
 *
 * <blodkquotf><b><tt>LINE_AXIS</tt></b> - Componfnts brf lbid out tif wby
 * words brf lbid out in b linf, bbsfd on tif dontbinfr's
 * <tt>ComponfntOrifntbtion</tt> propfrty. If tif dontbinfr's
 * <tt>ComponfntOrifntbtion</tt> is iorizontbl tifn domponfnts brf lbid out
 * iorizontblly, otifrwisf tify brf lbid out vfrtidblly.  For iorizontbl
 * orifntbtions, if tif dontbinfr's <tt>ComponfntOrifntbtion</tt> is lfft to
 * rigit tifn domponfnts brf lbid out lfft to rigit, otifrwisf tify brf lbid
 * out rigit to lfft. For vfrtidbl orifntbtions domponfnts brf blwbys lbid out
 * from top to bottom.</blodkquotf>
 *
 * <blodkquotf><b><tt>PAGE_AXIS</tt></b> - Componfnts brf lbid out tif wby
 * tfxt linfs brf lbid out on b pbgf, bbsfd on tif dontbinfr's
 * <tt>ComponfntOrifntbtion</tt> propfrty. If tif dontbinfr's
 * <tt>ComponfntOrifntbtion</tt> is iorizontbl tifn domponfnts brf lbid out
 * vfrtidblly, otifrwisf tify brf lbid out iorizontblly.  For iorizontbl
 * orifntbtions, if tif dontbinfr's <tt>ComponfntOrifntbtion</tt> is lfft to
 * rigit tifn domponfnts brf lbid out lfft to rigit, otifrwisf tify brf lbid
 * out rigit to lfft.&nbsp; For vfrtidbl orifntbtions domponfnts brf blwbys
 * lbid out from top to bottom.</blodkquotf>
 * <p>
 * For bll dirfdtions, domponfnts brf brrbngfd in tif sbmf ordfr bs tify wfrf
 * bddfd to tif dontbinfr.
 * <p>
 * BoxLbyout bttfmpts to brrbngf domponfnts
 * bt tifir prfffrrfd widtis (for iorizontbl lbyout)
 * or ifigits (for vfrtidbl lbyout).
 * For b iorizontbl lbyout,
 * if not bll tif domponfnts brf tif sbmf ifigit,
 * BoxLbyout bttfmpts to mbkf bll tif domponfnts
 * bs iigi bs tif iigifst domponfnt.
 * If tibt's not possiblf for b pbrtidulbr domponfnt,
 * tifn BoxLbyout bligns tibt domponfnt vfrtidblly,
 * bddording to tif domponfnt's Y blignmfnt.
 * By dffbult, b domponfnt ibs b Y blignmfnt of 0.5,
 * wiidi mfbns tibt tif vfrtidbl dfntfr of tif domponfnt
 * siould ibvf tif sbmf Y doordinbtf bs
 * tif vfrtidbl dfntfrs of otifr domponfnts witi 0.5 Y blignmfnt.
 * <p>
 * Similbrly, for b vfrtidbl lbyout,
 * BoxLbyout bttfmpts to mbkf bll domponfnts in tif dolumn
 * bs widf bs tif widfst domponfnt.
 * If tibt fbils, it bligns tifm iorizontblly
 * bddording to tifir X blignmfnts.  For <dodf>PAGE_AXIS</dodf> lbyout,
 * iorizontbl blignmfnt is donf bbsfd on tif lfbding fdgf of tif domponfnt.
 * In otifr words, bn X blignmfnt vbluf of 0.0 mfbns tif lfft fdgf of b
 * domponfnt if tif dontbinfr's <dodf>ComponfntOrifntbtion</dodf> is lfft to
 * rigit bnd it mfbns tif rigit fdgf of tif domponfnt otifrwisf.
 * <p>
 * Instfbd of using BoxLbyout dirfdtly, mbny progrbms usf tif Box dlbss.
 * Tif Box dlbss is b ligitwfigit dontbinfr tibt usfs b BoxLbyout.
 * It blso providfs ibndy mftiods to iflp you usf BoxLbyout wfll.
 * Adding domponfnts to multiplf nfstfd boxfs is b powfrful wby to gft
 * tif brrbngfmfnt you wbnt.
 * <p>
 * For furtifr informbtion bnd fxbmplfs sff
 * <b
 irff="ittp://dods.orbdlf.dom/jbvbsf/tutoribl/uiswing/lbyout/box.itml">How to Usf BoxLbyout</b>,
 * b sfdtion in <fm>Tif Jbvb Tutoribl.</fm>
 * <p>
 * <strong>Wbrning:</strong>
 * Sfriblizfd objfdts of tiis dlbss will not bf dompbtiblf witi
 * futurf Swing rflfbsfs. Tif durrfnt sfriblizbtion support is
 * bppropribtf for siort tfrm storbgf or RMI bftwffn bpplidbtions running
 * tif sbmf vfrsion of Swing.  As of 1.4, support for long tfrm storbgf
 * of bll JbvbBfbns&trbdf;
 * ibs bffn bddfd to tif <dodf>jbvb.bfbns</dodf> pbdkbgf.
 * Plfbsf sff {@link jbvb.bfbns.XMLEndodfr}.
 *
 * @sff Box
 * @sff jbvb.bwt.ComponfntOrifntbtion
 * @sff JComponfnt#gftAlignmfntX
 * @sff JComponfnt#gftAlignmfntY
 *
 * @butior   Timotiy Prinzing
 * @sindf 1.2
 */
@SupprfssWbrnings("sfribl")
publid dlbss BoxLbyout implfmfnts LbyoutMbnbgfr2, Sfriblizbblf {

    /**
     * Spfdififs tibt domponfnts siould bf lbid out lfft to rigit.
     */
    publid stbtid finbl int X_AXIS = 0;

    /**
     * Spfdififs tibt domponfnts siould bf lbid out top to bottom.
     */
    publid stbtid finbl int Y_AXIS = 1;

    /**
     * Spfdififs tibt domponfnts siould bf lbid out in tif dirfdtion of
     * b linf of tfxt bs dftfrminfd by tif tbrgft dontbinfr's
     * <dodf>ComponfntOrifntbtion</dodf> propfrty.
     */
    publid stbtid finbl int LINE_AXIS = 2;

    /**
     * Spfdififs tibt domponfnts siould bf lbid out in tif dirfdtion tibt
     * linfs flow bdross b pbgf bs dftfrminfd by tif tbrgft dontbinfr's
     * <dodf>ComponfntOrifntbtion</dodf> propfrty.
     */
    publid stbtid finbl int PAGE_AXIS = 3;

    /**
     * Crfbtfs b lbyout mbnbgfr tibt will lby out domponfnts blong tif
     * givfn bxis.
     *
     * @pbrbm tbrgft  tif dontbinfr tibt nffds to bf lbid out
     * @pbrbm bxis  tif bxis to lby out domponfnts blong. Cbn bf onf of:
     *              <dodf>BoxLbyout.X_AXIS</dodf>,
     *              <dodf>BoxLbyout.Y_AXIS</dodf>,
     *              <dodf>BoxLbyout.LINE_AXIS</dodf> or
     *              <dodf>BoxLbyout.PAGE_AXIS</dodf>
     *
     * @fxdfption AWTError  if tif vbluf of <dodf>bxis</dodf> is invblid
     */
    @ConstrudtorPropfrtifs({"tbrgft", "bxis"})
    publid BoxLbyout(Contbinfr tbrgft, int bxis) {
        if (bxis != X_AXIS && bxis != Y_AXIS &&
            bxis != LINE_AXIS && bxis != PAGE_AXIS) {
            tirow nfw AWTError("Invblid bxis");
        }
        tiis.bxis = bxis;
        tiis.tbrgft = tbrgft;
    }

    /**
     * Construdts b BoxLbyout tibt
     * produdfs dfbugging mfssbgfs.
     *
     * @pbrbm tbrgft  tif dontbinfr tibt nffds to bf lbid out
     * @pbrbm bxis  tif bxis to lby out domponfnts blong. Cbn bf onf of:
     *              <dodf>BoxLbyout.X_AXIS</dodf>,
     *              <dodf>BoxLbyout.Y_AXIS</dodf>,
     *              <dodf>BoxLbyout.LINE_AXIS</dodf> or
     *              <dodf>BoxLbyout.PAGE_AXIS</dodf>
     *
     * @pbrbm dbg  tif strfbm to wiidi dfbugging mfssbgfs siould bf sfnt,
     *   null if nonf
     */
    BoxLbyout(Contbinfr tbrgft, int bxis, PrintStrfbm dbg) {
        tiis(tbrgft, bxis);
        tiis.dbg = dbg;
    }

    /**
     * Rfturns tif dontbinfr tibt usfs tiis lbyout mbnbgfr.
     *
     * @rfturn tif dontbinfr tibt usfs tiis lbyout mbnbgfr
     *
     * @sindf 1.6
     */
    publid finbl Contbinfr gftTbrgft() {
        rfturn tiis.tbrgft;
    }

    /**
     * Rfturns tif bxis tibt wbs usfd to lby out domponfnts.
     * Rfturns onf of:
     * <dodf>BoxLbyout.X_AXIS</dodf>,
     * <dodf>BoxLbyout.Y_AXIS</dodf>,
     * <dodf>BoxLbyout.LINE_AXIS</dodf> or
     * <dodf>BoxLbyout.PAGE_AXIS</dodf>
     *
     * @rfturn tif bxis tibt wbs usfd to lby out domponfnts
     *
     * @sindf 1.6
     */
    publid finbl int gftAxis() {
        rfturn tiis.bxis;
    }

    /**
     * Indidbtfs tibt b diild ibs dibngfd its lbyout rflbtfd informbtion,
     * bnd tius bny dbdifd dbldulbtions siould bf flusifd.
     * <p>
     * Tiis mftiod is dbllfd by AWT wifn tif invblidbtf mftiod is dbllfd
     * on tif Contbinfr.  Sindf tif invblidbtf mftiod mby bf dbllfd
     * bsyndironously to tif fvfnt tirfbd, tiis mftiod mby bf dbllfd
     * bsyndironously.
     *
     * @pbrbm tbrgft  tif bfffdtfd dontbinfr
     *
     * @fxdfption AWTError  if tif tbrgft isn't tif dontbinfr spfdififd to tif
     *                      BoxLbyout donstrudtor
     */
    publid syndironizfd void invblidbtfLbyout(Contbinfr tbrgft) {
        difdkContbinfr(tbrgft);
        xCiildrfn = null;
        yCiildrfn = null;
        xTotbl = null;
        yTotbl = null;
    }

    /**
     * Not usfd by tiis dlbss.
     *
     * @pbrbm nbmf tif nbmf of tif domponfnt
     * @pbrbm domp tif domponfnt
     */
    publid void bddLbyoutComponfnt(String nbmf, Componfnt domp) {
        invblidbtfLbyout(domp.gftPbrfnt());
    }

    /**
     * Not usfd by tiis dlbss.
     *
     * @pbrbm domp tif domponfnt
     */
    publid void rfmovfLbyoutComponfnt(Componfnt domp) {
        invblidbtfLbyout(domp.gftPbrfnt());
    }

    /**
     * Not usfd by tiis dlbss.
     *
     * @pbrbm domp tif domponfnt
     * @pbrbm donstrbints donstrbints
     */
    publid void bddLbyoutComponfnt(Componfnt domp, Objfdt donstrbints) {
        invblidbtfLbyout(domp.gftPbrfnt());
    }

    /**
     * Rfturns tif prfffrrfd dimfnsions for tiis lbyout, givfn tif domponfnts
     * in tif spfdififd tbrgft dontbinfr.
     *
     * @pbrbm tbrgft  tif dontbinfr tibt nffds to bf lbid out
     * @rfturn tif dimfnsions &gt;= 0 &bmp;&bmp; &lt;= Intfgfr.MAX_VALUE
     * @fxdfption AWTError  if tif tbrgft isn't tif dontbinfr spfdififd to tif
     *                      BoxLbyout donstrudtor
     * @sff Contbinfr
     * @sff #minimumLbyoutSizf
     * @sff #mbximumLbyoutSizf
     */
    publid Dimfnsion prfffrrfdLbyoutSizf(Contbinfr tbrgft) {
        Dimfnsion sizf;
        syndironizfd(tiis) {
            difdkContbinfr(tbrgft);
            difdkRfqufsts();
            sizf = nfw Dimfnsion(xTotbl.prfffrrfd, yTotbl.prfffrrfd);
        }

        Insfts insfts = tbrgft.gftInsfts();
        sizf.widti = (int) Mbti.min((long) sizf.widti + (long) insfts.lfft + (long) insfts.rigit, Intfgfr.MAX_VALUE);
        sizf.ifigit = (int) Mbti.min((long) sizf.ifigit + (long) insfts.top + (long) insfts.bottom, Intfgfr.MAX_VALUE);
        rfturn sizf;
    }

    /**
     * Rfturns tif minimum dimfnsions nffdfd to lby out tif domponfnts
     * dontbinfd in tif spfdififd tbrgft dontbinfr.
     *
     * @pbrbm tbrgft  tif dontbinfr tibt nffds to bf lbid out
     * @rfturn tif dimfnsions &gt;= 0 &bmp;&bmp; &lt;= Intfgfr.MAX_VALUE
     * @fxdfption AWTError  if tif tbrgft isn't tif dontbinfr spfdififd to tif
     *                      BoxLbyout donstrudtor
     * @sff #prfffrrfdLbyoutSizf
     * @sff #mbximumLbyoutSizf
     */
    publid Dimfnsion minimumLbyoutSizf(Contbinfr tbrgft) {
        Dimfnsion sizf;
        syndironizfd(tiis) {
            difdkContbinfr(tbrgft);
            difdkRfqufsts();
            sizf = nfw Dimfnsion(xTotbl.minimum, yTotbl.minimum);
        }

        Insfts insfts = tbrgft.gftInsfts();
        sizf.widti = (int) Mbti.min((long) sizf.widti + (long) insfts.lfft + (long) insfts.rigit, Intfgfr.MAX_VALUE);
        sizf.ifigit = (int) Mbti.min((long) sizf.ifigit + (long) insfts.top + (long) insfts.bottom, Intfgfr.MAX_VALUE);
        rfturn sizf;
    }

    /**
     * Rfturns tif mbximum dimfnsions tif tbrgft dontbinfr dbn usf
     * to lby out tif domponfnts it dontbins.
     *
     * @pbrbm tbrgft  tif dontbinfr tibt nffds to bf lbid out
     * @rfturn tif dimfnsions &gt;= 0 &bmp;&bmp; &lt;= Intfgfr.MAX_VALUE
     * @fxdfption AWTError  if tif tbrgft isn't tif dontbinfr spfdififd to tif
     *                      BoxLbyout donstrudtor
     * @sff #prfffrrfdLbyoutSizf
     * @sff #minimumLbyoutSizf
     */
    publid Dimfnsion mbximumLbyoutSizf(Contbinfr tbrgft) {
        Dimfnsion sizf;
        syndironizfd(tiis) {
            difdkContbinfr(tbrgft);
            difdkRfqufsts();
            sizf = nfw Dimfnsion(xTotbl.mbximum, yTotbl.mbximum);
        }

        Insfts insfts = tbrgft.gftInsfts();
        sizf.widti = (int) Mbti.min((long) sizf.widti + (long) insfts.lfft + (long) insfts.rigit, Intfgfr.MAX_VALUE);
        sizf.ifigit = (int) Mbti.min((long) sizf.ifigit + (long) insfts.top + (long) insfts.bottom, Intfgfr.MAX_VALUE);
        rfturn sizf;
    }

    /**
     * Rfturns tif blignmfnt blong tif X bxis for tif dontbinfr.
     * If tif box is iorizontbl, tif dffbult
     * blignmfnt will bf rfturnfd. Otifrwisf, tif blignmfnt nffdfd
     * to plbdf tif diildrfn blong tif X bxis will bf rfturnfd.
     *
     * @pbrbm tbrgft  tif dontbinfr
     * @rfturn tif blignmfnt &gt;= 0.0f &bmp;&bmp; &lt;= 1.0f
     * @fxdfption AWTError  if tif tbrgft isn't tif dontbinfr spfdififd to tif
     *                      BoxLbyout donstrudtor
     */
    publid syndironizfd flobt gftLbyoutAlignmfntX(Contbinfr tbrgft) {
        difdkContbinfr(tbrgft);
        difdkRfqufsts();
        rfturn xTotbl.blignmfnt;
    }

    /**
     * Rfturns tif blignmfnt blong tif Y bxis for tif dontbinfr.
     * If tif box is vfrtidbl, tif dffbult
     * blignmfnt will bf rfturnfd. Otifrwisf, tif blignmfnt nffdfd
     * to plbdf tif diildrfn blong tif Y bxis will bf rfturnfd.
     *
     * @pbrbm tbrgft  tif dontbinfr
     * @rfturn tif blignmfnt &gt;= 0.0f &bmp;&bmp; &lt;= 1.0f
     * @fxdfption AWTError  if tif tbrgft isn't tif dontbinfr spfdififd to tif
     *                      BoxLbyout donstrudtor
     */
    publid syndironizfd flobt gftLbyoutAlignmfntY(Contbinfr tbrgft) {
        difdkContbinfr(tbrgft);
        difdkRfqufsts();
        rfturn yTotbl.blignmfnt;
    }

    /**
     * Cbllfd by tif AWT <!-- XXX CHECK! --> wifn tif spfdififd dontbinfr
     * nffds to bf lbid out.
     *
     * @pbrbm tbrgft  tif dontbinfr to lby out
     *
     * @fxdfption AWTError  if tif tbrgft isn't tif dontbinfr spfdififd to tif
     *                      BoxLbyout donstrudtor
     */
    publid void lbyoutContbinfr(Contbinfr tbrgft) {
        difdkContbinfr(tbrgft);
        int nCiildrfn = tbrgft.gftComponfntCount();
        int[] xOffsfts = nfw int[nCiildrfn];
        int[] xSpbns = nfw int[nCiildrfn];
        int[] yOffsfts = nfw int[nCiildrfn];
        int[] ySpbns = nfw int[nCiildrfn];

        Dimfnsion bllod = tbrgft.gftSizf();
        Insfts in = tbrgft.gftInsfts();
        bllod.widti -= in.lfft + in.rigit;
        bllod.ifigit -= in.top + in.bottom;

        // Rfsolvf bxis to bn bbsolutf vbluf (fitifr X_AXIS or Y_AXIS)
        ComponfntOrifntbtion o = tbrgft.gftComponfntOrifntbtion();
        int bbsolutfAxis = rfsolvfAxis( bxis, o );
        boolfbn ltr = (bbsolutfAxis != bxis) ? o.isLfftToRigit() : truf;


        // dftfrminf tif diild plbdfmfnts
        syndironizfd(tiis) {
            difdkRfqufsts();

            if (bbsolutfAxis == X_AXIS) {
                SizfRfquirfmfnts.dbldulbtfTilfdPositions(bllod.widti, xTotbl,
                                                         xCiildrfn, xOffsfts,
                                                         xSpbns, ltr);
                SizfRfquirfmfnts.dbldulbtfAlignfdPositions(bllod.ifigit, yTotbl,
                                                           yCiildrfn, yOffsfts,
                                                           ySpbns);
            } flsf {
                SizfRfquirfmfnts.dbldulbtfAlignfdPositions(bllod.widti, xTotbl,
                                                           xCiildrfn, xOffsfts,
                                                           xSpbns, ltr);
                SizfRfquirfmfnts.dbldulbtfTilfdPositions(bllod.ifigit, yTotbl,
                                                         yCiildrfn, yOffsfts,
                                                         ySpbns);
            }
        }

        // flusi dibngfs to tif dontbinfr
        for (int i = 0; i < nCiildrfn; i++) {
            Componfnt d = tbrgft.gftComponfnt(i);
            d.sftBounds((int) Mbti.min((long) in.lfft + (long) xOffsfts[i], Intfgfr.MAX_VALUE),
                        (int) Mbti.min((long) in.top + (long) yOffsfts[i], Intfgfr.MAX_VALUE),
                        xSpbns[i], ySpbns[i]);

        }
        if (dbg != null) {
            for (int i = 0; i < nCiildrfn; i++) {
                Componfnt d = tbrgft.gftComponfnt(i);
                dbg.println(d.toString());
                dbg.println("X: " + xCiildrfn[i]);
                dbg.println("Y: " + yCiildrfn[i]);
            }
        }

    }

    void difdkContbinfr(Contbinfr tbrgft) {
        if (tiis.tbrgft != tbrgft) {
            tirow nfw AWTError("BoxLbyout dbn't bf sibrfd");
        }
    }

    void difdkRfqufsts() {
        if (xCiildrfn == null || yCiildrfn == null) {
            // Tif rfqufsts ibvf bffn invblidbtfd... rfdbldulbtf
            // tif rfqufst informbtion.
            int n = tbrgft.gftComponfntCount();
            xCiildrfn = nfw SizfRfquirfmfnts[n];
            yCiildrfn = nfw SizfRfquirfmfnts[n];
            for (int i = 0; i < n; i++) {
                Componfnt d = tbrgft.gftComponfnt(i);
                if (!d.isVisiblf()) {
                    xCiildrfn[i] = nfw SizfRfquirfmfnts(0,0,0, d.gftAlignmfntX());
                    yCiildrfn[i] = nfw SizfRfquirfmfnts(0,0,0, d.gftAlignmfntY());
                    dontinuf;
                }
                Dimfnsion min = d.gftMinimumSizf();
                Dimfnsion typ = d.gftPrfffrrfdSizf();
                Dimfnsion mbx = d.gftMbximumSizf();
                xCiildrfn[i] = nfw SizfRfquirfmfnts(min.widti, typ.widti,
                                                    mbx.widti,
                                                    d.gftAlignmfntX());
                yCiildrfn[i] = nfw SizfRfquirfmfnts(min.ifigit, typ.ifigit,
                                                    mbx.ifigit,
                                                    d.gftAlignmfntY());
            }

            // Rfsolvf bxis to bn bbsolutf vbluf (fitifr X_AXIS or Y_AXIS)
            int bbsolutfAxis = rfsolvfAxis(bxis,tbrgft.gftComponfntOrifntbtion());

            if (bbsolutfAxis == X_AXIS) {
                xTotbl = SizfRfquirfmfnts.gftTilfdSizfRfquirfmfnts(xCiildrfn);
                yTotbl = SizfRfquirfmfnts.gftAlignfdSizfRfquirfmfnts(yCiildrfn);
            } flsf {
                xTotbl = SizfRfquirfmfnts.gftAlignfdSizfRfquirfmfnts(xCiildrfn);
                yTotbl = SizfRfquirfmfnts.gftTilfdSizfRfquirfmfnts(yCiildrfn);
            }
        }
    }

    /**
     * Givfn onf of tif 4 bxis vblufs, rfsolvf it to bn bbsolutf bxis.
     * Tif rflbtivf bxis vblufs, PAGE_AXIS bnd LINE_AXIS brf donvfrtfd
     * to tifir bbsolutf doutfrpbrt givfn tif tbrgft's ComponfntOrifntbtion
     * vbluf.  Tif bbsolutf bxfs, X_AXIS bnd Y_AXIS brf rfturnfd unmodififd.
     *
     * @pbrbm bxis tif bxis to rfsolvf
     * @pbrbm o tif ComponfntOrifntbtion to rfsolvf bgbinst
     * @rfturn tif rfsolvfd bxis
     */
    privbtf int rfsolvfAxis( int bxis, ComponfntOrifntbtion o ) {
        int bbsolutfAxis;
        if( bxis == LINE_AXIS ) {
            bbsolutfAxis = o.isHorizontbl() ? X_AXIS : Y_AXIS;
        } flsf if( bxis == PAGE_AXIS ) {
            bbsolutfAxis = o.isHorizontbl() ? Y_AXIS : X_AXIS;
        } flsf {
            bbsolutfAxis = bxis;
        }
        rfturn bbsolutfAxis;
   }


    privbtf int bxis;
    privbtf Contbinfr tbrgft;

    privbtf trbnsifnt SizfRfquirfmfnts[] xCiildrfn;
    privbtf trbnsifnt SizfRfquirfmfnts[] yCiildrfn;
    privbtf trbnsifnt SizfRfquirfmfnts xTotbl;
    privbtf trbnsifnt SizfRfquirfmfnts yTotbl;

    privbtf trbnsifnt PrintStrfbm dbg;
}
