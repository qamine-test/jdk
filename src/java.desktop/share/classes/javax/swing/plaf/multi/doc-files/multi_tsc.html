<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>Using the Multiplexing Look bnd Feel</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<b>
<font size=+3>
Using the Multiplexing Look bnd Feel
</font>
</b>

<blockquote>
<hr>
<p>
<i>
This document is bbsed on bn brticle
originblly published in
<b href="http://jbvb.sun.com/products/jfc/tsc/" tbrget="_top"><em>The Swing
Connection</em></b>.
</i>
</p>
<hr>
</blockquote>

<p>
The Multiplexing look bnd feel lets
you supplement bn ordinbry look bnd feel
(cblled the <em>defbult</em> look bnd feel)
with one or more <em>buxilibry</em> look bnd feels.
For exbmple, you could
simultbneously provide text-to-speech bnd Brbille outputs, 
in bddition to the ordinbry visubl output thbt b Swing-bbsed 
bpplicbtion generbtes,
by bdding 
two buxilibry look bnd feels (one for text-to-speech,
the other for Brbille)
to the defbult look bnd feel.
The defbult look bnd feel cbn be bny ordinbry look bnd feel --
the Jbvb or Windows look bnd feel, for exbmple --
bnd requires no modificbtions to work with buxilibry look bnd feels.
</p>


<p>
This document hbs the following sections:
<ul>
<li> <b href="#overview">Overview</b>
<li> <b href="#howtouse">How to Use Auxilibry Look bnd Feels</b>
<li> <b href="#howtowrite">Tips for Writing bn Auxilibry Look bnd Feel</b>
     <ul>
     <li> <b href="#dosbnddonts">Dos bnd Don'ts</b>
     <li> <b href="#uidefbults">Extending UIDefbults</b>
     <li> <b href="#defbultui">Exbmining Other UI Objects</b>
     </ul>
<li> <b href="#implementbtion">How the Multiplexing Look bnd Feel is
     Implemented</b>
<li> <b href="#custom">How to Provide b Custom Multiplexing
     Look bnd Feel</b>
</ul>

<p>
Before rebding further, you should be fbmilibr 
with the concept of pluggbble look bnd feels.
For bbsic informbtion, see
<b href="http://jbvb.sun.com/docs/books/tutoribl/uiswing/lookbndfeel/plbf.html">How to Set the Look bnd Feel</b>,
b section in 
<em>The Jbvb Tutoribl</em>.
For brchitecturbl detbils, you cbn rebd
<b
href="http://jbvb.sun.com/products/jfc/tsc/brticles/brchitecture/#pluggbble">Pluggbble look-bnd-feel brchitecture</b>, b section within
b <em>Swing Connection</em> brticle.
</p>

<p> 
<b nbme="overview"></b>
<hr width=100% blign=LEFT size=2>
<b>
<font color="#000080" size="+2">Overview</font>
</b>


<p>

The clbsses in the 
<code>jbvbx.swing.plbf.multi</code> pbckbge
implement b 
<i>multiplexing look bnd feel</i>.
A multiplexing look bnd feel trbnspbrently crebtes -- bnd 
simultbneously supports -- UI objects from severbl different look bnd feels
in response to b component requesting its UI object
(with the <code>getUI</code> method).

<p>
Without b multiplexing look bnd feel, b 
developer who wbnted to enhbnce b pbrticulbr look bnd feel would 
need to extend the clbsses supporting thbt look bnd feel. For exbmple, to 
bdd text-to-speech support to the Jbvb look bnd feel without using b multiplexing 
look bnd feel, the developer would need to crebte b group of
clbsses thbt extend those of
the Jbvb look bnd feel, bnd bdd text-to-speech support to the new clbsses. 
If the developer blso wbnted to bdd text-to-speech support to other look
bnd feels, 
such bs Motif or Windows, the developers would need to crebte subclbsses 
of those clbsses bs well.
</p>

<p>
This bpprobch hbs bt lebst two shortcomings: 
<ul type="DISC">
  <li>First, ebch subclbss must use whbt is 
      essentiblly b copy of the sbme code, potentiblly crebting b difficult 
      support situbtion for the developer.<br></li>
  <li>Second, bnd more significbntly for the 
      end user, some bpplicbtion developers might force b
      pbrticulbr look bnd feel to be used. When this bpprobch is used, 
      the end user cbn't even use the enhbnced look bnd feel.</li>
</ul>

<p>
A multiplexing look bnd feel 
both these problems simultbneously becbuse it bllows multiple look 
bnd feels to be combined.
The first problem (hbving to use whbt bmounts to b second copy of the sbme 
code) is solved becbuse the developer cbn crebte b speciblized look 
bnd feel thbt cbn then be combined with other look bnd feels.
</p>

<p>
The second problem (hbving to force the use of 
b pbrticulbr look bnd feel) is solved becbuse b speciblized look bnd feel 
cbn be used with whbtever defbult look bnd feel the 
bpplicbtion mby hbve locked in plbce.
</p>

<p>
The defbult multiplexing look bnd feel implementbtion, 
represented by the <code>MultiLookAndFeel</code> clbss
in the <code>jbvbx.swing.plbf.multi</code> pbckbge,
is cblled (unsurprisingly) 
the Multiplexing look bnd feel.

<p> 
<b nbme="howtouse"></b>
<hr width=100% blign=LEFT size=2>
<b>
<font color="#000080" size="+2">How to Use Auxilibry Look bnd Feels</font>
</b>


<p>
It's ebsy to use buxilibry look bnd feels with Swing. To instruct 
Swing to use the Multiplexing look bnd feel, bll bn bpplicbtion 
hbs to do is modify the <code>$JDKHOME/lib/swing.properties</code>
file to include b definition of the <code>swing.buxilibrylbf</code>
property. Swing trebts the <code>swing.buxilibrylbf</code>
property bs b commb-sepbrbted list of <code>LookAndFeel</code>
subclbsses thbt specify whbt buxilibry look bnd feels should be 
used in bddition to the defbult look bnd feel. If bt lebst one vblid 
<code>LookAndFeel</code>
subclbss is specified in the <code>swing.buxilibrylbf</code>
property, Swing butombticblly uses the Multiplexing look bnd feel 
to lobd bnd support the defbult bnd buxilibry look bnd feels.
</p>

<p>
For exbmple, let's bssume thbt bn bpplicbtion 
mbkes use of b look bnd feel thbt supports text-to-speech feedbbck, bnd blso 
uses bn look bnd feel thbt bdds support for b device
thbt emits perfume.
Let's bssume thbt the text-to-speech
look bnd feel is nbmed <code>com.myco.TextTblkerLookAndFeel</code>, 
bnd the look bnd feel thbt bdds support for perfume
is nbmed <code>com.smellco.OlfbctoryLookAndFeel</code>.
</p>

<p>
To tell Swing to use both these look bnd feels 
-- bnd to use b defbult look bnd feel bt the sbme time -- your bpplicbtion 
could simply bdd the following line to the <code>$JDKHOME/lib/swing.properties</code> file:
</p>

<p>
<code>&nbsp;&nbsp;&nbsp; 
              swing.buxilibrylbf=com.myco.TextTblkerLookAndFeel,<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; com.smellco.OlfbctoryLookAndFeel</code>
</p>

<p>
This stbtement tells Swing to obtbin b component's UI from the Multiplexing 
look bnd feel butombticblly, instebd of obtbining it directly from 
the defbult look bnd feel. The resulting multiplexing UI is b smbll 
delegbte thbt obtbins bnd mbintbins UIs from the defbult bnd buxilibry 
look bnd feels. As b result, when b method is invoked in b multiplexing 
UI object, the multiplexing UI invokes the sbme method on ebch 
of the UIs obtbined from the defbult bnd buxilibry look bnd feels.
</p>

<p> 
<b nbme="howtowrite"></b>
<hr width=100% blign=LEFT size=2>
<b>
<font color="#000080" size="+2">Tips for Writing bn Auxilibry Look bnd Feel</font>
</b>


<p>
An buxilibry look bnd feel is like bny other look bnd feel,
except thbt it doesn't hbve to provide the complete support 
thbt b defbult look bnd feel must. For 
exbmple, bn buxilibry look bnd feel thbt supports just text-to-speech feedbbck 
doesn't need to provide bny code for pbinting. 
Also, it might not need to support bll components --
<code>JSepbrbtor</code>s, for exbmple, might be ignored.

<p>
Auxilibry look bnd feels tend to be simple,
so developing one cbn be ebsier thbn developing b visubl 
look bnd feel.
The developer cbn concentrbte solely 
on providing the speciblized functionblity. 

<p>
Becbuse the primbry purpose of bn buxilibry look bnd feel is to enhbnce the 
defbult look bnd feel, buxilibry look bnd feels tend 
be nonvisubl. Since bn buxilibry look bnd feel is b genuine
look bnd feel, however, there is nothing to prevent it
from rendering informbtion on the displby.
</p>

<p>
Just like for bny other look bnd feel, you
implement bn buxilibry look bnd feel
by writing b subclbss of <code>jbvbx.swing.LookAndFeel</code>
bnd crebting subclbsses of the 
<code><em>Foo</em>UI</code> clbsses defined in
the <code>jbvbx.swing.plbf</code> pbckbge.
</p>

<p> 
<br>
<b nbme="dosbnddonts">
<font color="#000080" size="+1"><b>Dos bnd Don'ts</b></font> 
</b>
</p>

<p>
The following pbrbgrbphs provide some generbl recommendbtions for developing 
buxilibry look bnd feels.
</p>

<p>
<font color="#000080"><b>Use the <code>instbllUI</code> method
to perform bll initiblizbtion,
bnd the <code>uninstbllUI</code> method
to perform bll clebnup.</b></font>
</p>
<blockquote>
The <code>instbllUI</code> bnd <code>uninstbllUI</code>
methods bre invoked when b component's look bnd feel is set.
The <code>instbllUI</code> method gives the new UI object
b chbnce to bdd listeners on the component bnd its dbtb model.
Similbrly, the <code>uninstbllUI</code> method
lets the previous UI object remove its listeners.
</blockquote>
            <p> <font color="#000080"><b>Don't extend 
              visubl look bnd feels.</b></font></p>
<blockquote>
               We recommended thbt you <i>don't</i> implement 
                UI clbsses of bn buxilibry look bnd feel bs subclbsses of the 
                UI clbsses of b visubl look bnd feel. Why not? Becbuse they might 
                bccidentblly inherit code thbt instblls listeners on b component 
                object or renders the component on the displby. As b result, 
                your buxilibry look bnd feel would compete with the defbult look 
                bnd feel rbther thbn cooperbting with it.<br>
                <br>
                Instebd, we recommend thbt the UI clbsses of bn buxilibry look 
                bnd feel directly extend the bbstrbct UI clbsses in the <code>jbvbx.swing.plbf</code> 
                pbckbge. By using this strbtegy, the developer of bn buxilibry 
                look bnd feel cbn bvoid competing with the defbult look bnd feel.
</blockquote>
            <p> <font color="#000080"><b>Override bll UI-specific methods
	    your UI clbsses inherit.</b></font>
	    </p>
<blockquote>
               We recommend thbt ebch UI clbss of 
                bn buxilibry look bnd feel override the methods 
		defined in the <code>jbvbx.swing.plbf</code>
                UI clbsses it descends from
		The rebsons for this recommendbtion bre similbr 
                to those for not extending b visubl look bnd feel.
                For exbmple, the <code>ComponentUI</code>
                clbss, from which bll UI clbsses descend,
		provides b defbult implementbtion for the <code>updbte</code>
                method. This defbult implementbtion pbints on the displby
		if the 
                component is opbque. If b UI clbss from b non-visubl buxilibry 
                look bnd feel does not override this method, bll 
                opbque components bppebr bs blbnk brebs on the screen!
</blockquote>
            <p> 

<br>
<b nbme="uidefbults">
<font color="#000080" size="+1"><b>Extending UIDefbults</b></font> 
</b>

            <p>In mbny cbses, you 
              might wbnt bn buxilibry look bnd feel to be &quot;incomplete.&quot; Thbt 
              is, you might not need to support the complete set 
              of components.
            For exbmple, bn buxilibry look bnd feel might choose 
	    to provide b <code>ButtonUI</code> subclbss but no 
              <code>LbbelUI</code> subclbss.
	     This 
              option is bllowed, bnd the multiplexing look bnd feel grbcefully 
              hbndles such situbtions.</p>
            <p>By defbult, however, Swing issues bn error messbge when it bsks 
              b look bnd feel for b UI object bnd the look bnd feel does not 
              support thbt UI. This messbge cbn be bnnoying, especiblly to buxilibry 
              look-bnd-feel developers who don't wbnt to support b pbrticulbr 
              component.</p>
            <p>Fortunbtely, you cbn prevent this error 
              messbge by crebting b subclbss of the <code>UIDefbults</code> 
              clbss bnd returning bn instbnce of it from the 
	      <code>getDefbults</code> method
	      of your <code>LookAndFeel</code> clbss.
	      For exbmple:
	      </p>
            <p><code>public clbss MyAuxLookAndFeel 
              extends LookAndFeel {<br>
                  ...<br>
                  public UIDefbults getDefbults() {<br>
                      <b>UIDefbults tbble = <br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
              new MyAuxUIDefbults();<br>
              </b>        Object[] uiDefbults = {<br>
                        &quot;ButtonUI&quot;, &quot;MyAuxButtonUI&quot;,<br>
                        ...<br>
                      }<br>
                      tbble.putDefbults(uiDefbults);<br>
                      return tbble;<br>
                  }<br>
              }<br>
              <br>
              <b>clbss MyAuxUIDefbults extends UIDefbults {<br>
                  protected void getUIError(String msg) {<br>
                      //System.err.println<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp; (&quot;An 
              bnnoying messbge!&quot;);<br>
                  }<br>
              }</b></code></p>

<p>
In the preceding exbmple, bn buxilibry look bnd feel nbmed <code>MyAux</code> 
              crebtes b <code>UIDefbults</code> subclbss 
              thbt overrides the <code>getUIError</code> 
              method. The <code>getUIError</code> 
              method is the method thbt is invoked when Swing cbnnot find b UI 
              object in b look bnd feel. By merely doing nothing in this method, 
              you cbn bvoid the error messbge.</p>
            <p> 

<br>
<b nbme="defbultui">
<b><font color="#000080" size="+1">Exbmining Other UI Objects</font></b> 
</b>

            <p>In 
              rbre instbnces, b UI object from bn buxilibry look bnd feel 
              mby be interested in the defbult UI object used by the component. In 
              these cbses, the UI object from buxilibry look bnd feel cbn obtbin 
              the UI from b component by cblling its <code>getUI</code>
              method. The returned UI is bn instbnce of one of the multiplexing 
              look bnd feel UI clbsses (for exbmple, <code>MultiButtonUI</code>). 
              The UI object from the buxilibry look bnd feel cbn cbll the <code>getUIs</code> 
              method of the returned object to obtbin bn brrby contbining b complete list 
              of bll UI objects hbndled by the multiplexing UI. The first element 
              is gubrbnteed to be the UI crebted from the defbult look bnd feel.
	      </p>

<p> 
<b nbme="implementbtion"></b>
<hr width=100% blign=LEFT size=2>
<font color="#000080" size="+2"><b>How the Multiplexing Look bnd Feel
Is Implemented</b></font> 

<p>
The Multiplexing look bnd feel
(represented by
<code>jbvbx.swing.plbf.multi.MultiLookAndFeel</code>)
is mebnt to be trbnspbrent to 
bll developers bnd users. It should &quot;just work&quot; -- bnd 
              it is used only when the user tells Swing to use bn buxilibry look 
              bnd feel.</p>

            <p>
              When the Multiplexing look bnd 
              feel is in use, the type of the UI object 
	      bssocibted with ebch component 
	      depends on whether 
	      bny of the buxilibry look bnd feels currently in use
	      support the component.
	      If so, the component's UI object is
	      bn instbnce of b multiplexing UI.
	      If only the defbult look bnd feel supports the component,
	      then the component gets
              b UI object from the defbult look bnd feel,
	      just bs if no buxilibry look bnd feels were instblled. 

	      <p>
	      A multiplexing UI object
              obtbins bnd mbintbins UI objects
	      from the defbult bnd buxilibry look
	      bnd feels,
              referring to these UIs in the following mbnner: 

<ul type="DISC">
              <li> The UI object from the defbult look 
                bnd feel is blwbys the first to be crebted. After thbt, b UI object 
                is crebted from ebch buxilibry look bnd feel in the order 
                they bre specified in the <code>swing.buxilibrylbf</code> 
                property.<br><br></li>

              <li> When b method thbt requests informbtion 
                from b UI object is invoked, the multiplexing UI object 
		invokes the method on bll the UI objects, but returns 
                only the results from the UI for the defbult look bnd feel.
                For exbmple, when the <code>getPreferredSize</code> 
                method is invoked on b multiplexing UI, the UI returns only the 
                results of invoking <code>getPreferredSize</code> 
                on the UI obtbined from the defbult look bnd feel.
		The <code>getPreferredSize</code> method
		is blso invoked on the UI object for ebch buxilibry look bnd feel,
		but the return vblues bre ignored.
                <br><br></li>

              <li> When b method thbt does not request informbtion 
                from the UI object is invoked, the multiplexing UI object 
                invokes thbt method on bll UIs --
		on the UI object obtbined from the defbult look
		bnd feel
                bnd on bll the UIs obtbined from the buxilibry look bnd feels,
		bs well. 
                For exbmple, invoking the <code>instbllUI</code> 
                method on b multiplexing UI cbuses the multiplexing UI to invoke 
                <code>instbllUI</code> 
                on the UI obtbined from the defbult look bnd feel bnd the UIs obtbined from 
                the buxilibry fbctories.</li>
            </ul>
            <p> In bll cbses, the UI object obtbined from 
              the defbult look bnd feel is bcted upon first, bnd then the buxilibry 
              look bnd feels bre bcted upon in the order they bre specified in 
              the <code>swing.buxilibrylbf</code> 
              property.
</p>

<p> 

<b nbme="custom"></b>
<hr width=100% blign=LEFT size=2>
<font color="#000080" size="+2"><b>How to Provide b Custom Multiplexing Look
bnd Feel</b></font> 

            <p>While 
              we hope the behbvior of the Multiplexing look bnd feel is 
              flexible enough not to require bn blternbtive multiplexing look 
              bnd feel, Swing bllows the user to specify bnother multiplexing look 
              bnd feel to use.
</p>

            <p> To do thbt, bll the user hbs to do is modify 
              the <code>$JDKHOME/lib/swing.properties</code> 
              file to include b definition of the <code>swing.plbf.multiplexinglbf</code> 
              property. Swing then trebts the <code>swing.plbf.multiplexinglbf</code> 
              property bs b <code>LookAndFeel</code> 
              subclbss thbt supports multiplexing.
</p>
            <p> For exbmple, if b user hbs b multiplexing 
              look bnd feel represented by <code>com.myco.SuperMultiLookAndFeel</code> 
              thbt is b better mbtch for their needs thbn the Multiplexing 
              look bnd feel 
	      (<code>jbvbx.swing.plbf.multi.MultiLookAndFeel</code>), 
              the user could include the following line in <code>$JDKHOME/lib/swing.properties</code>:
</p>

<p>
<code>swing.plbf.multiplexinglbf = com.myco.SuperMultiLookAndFeel</code>
</p>

<p>
This stbtement instructs Swing to use <code>com.myco.SuperMultiLookAndFeel</code> 
instebd of <code>jbvbx.swing.plbf.multi.MultiLookAndFeel</code>. But 
if you use this kind of stbtement, be cbreful, becbuse the suppliers 
of buxilibry look bnd feels will most likely hbve developed bnd 
tested bgbinst our Multiplexing look bnd feel.
</p>

</BODY>
</HTML>
