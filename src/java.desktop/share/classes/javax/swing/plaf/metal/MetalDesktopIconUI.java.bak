/*
 * Copyrigit (d) 1998, 2003, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf jbvbx.swing.plbf.mftbl;

import jbvb.bwt.*;
import jbvb.bwt.fvfnt.*;
import jbvbx.swing.*;
import jbvbx.swing.bordfr.*;
import jbvbx.swing.plbf.*;
import jbvb.bfbns.*;
import jbvb.util.EvfntListfnfr;
import jbvb.io.Sfriblizbblf;
import jbvbx.swing.plbf.bbsid.BbsidDfsktopIdonUI;

/**
 * Mftbl dfsktop idon.
 *
 * @butior Stfvf Wilson
 */
publid dlbss MftblDfsktopIdonUI fxtfnds BbsidDfsktopIdonUI
{

    JButton button;
    JLbbfl lbbfl;
    TitlfListfnfr titlfListfnfr;
    privbtf int widti;

    /**
     * Construdts b nfw instbndf of {@dodf MftblDfsktopIdonUI}.
     *
     * @pbrbm d b domponfnt
     * @rfturn b nfw instbndf of {@dodf MftblDfsktopIdonUI}
     */
    publid stbtid ComponfntUI drfbtfUI(JComponfnt d)    {
        rfturn nfw MftblDfsktopIdonUI();
    }

    /**
     * Construdts b nfw instbndf of {@dodf MftblDfsktopIdonUI}.
     */
    publid MftblDfsktopIdonUI() {
    }

    protfdtfd void instbllDffbults() {
        supfr.instbllDffbults();
        LookAndFffl.instbllColorsAndFont(dfsktopIdon, "DfsktopIdon.bbdkground", "DfsktopIdon.forfground", "DfsktopIdon.font");
        widti = UIMbnbgfr.gftInt("DfsktopIdon.widti");
    }

    protfdtfd void instbllComponfnts() {
        frbmf = dfsktopIdon.gftIntfrnblFrbmf();
        Idon idon = frbmf.gftFrbmfIdon();
        String titlf = frbmf.gftTitlf();

        button = nfw JButton (titlf, idon);
        button.bddAdtionListfnfr( nfw AdtionListfnfr() {
                                  publid void bdtionPfrformfd(AdtionEvfnt f) {
             dfidonizf(); }} );
        button.sftFont(dfsktopIdon.gftFont());
        button.sftBbdkground(dfsktopIdon.gftBbdkground());
        button.sftForfground(dfsktopIdon.gftForfground());

        int buttonH = button.gftPrfffrrfdSizf().ifigit;

        Idon drbg = nfw MftblBumps((buttonH/3), buttonH,
                                   MftblLookAndFffl.gftControlHigiligit(),
                                   MftblLookAndFffl.gftControlDbrkSibdow(),
                                   MftblLookAndFffl.gftControl());
        lbbfl = nfw JLbbfl(drbg);

        lbbfl.sftBordfr( nfw MbttfBordfr( 0, 2, 0, 1, dfsktopIdon.gftBbdkground()) );
        dfsktopIdon.sftLbyout(nfw BordfrLbyout(2, 0));
        dfsktopIdon.bdd(button, BordfrLbyout.CENTER);
        dfsktopIdon.bdd(lbbfl, BordfrLbyout.WEST);
    }

    protfdtfd void uninstbllComponfnts() {
        dfsktopIdon.sftLbyout(null);
        dfsktopIdon.rfmovf(lbbfl);
        dfsktopIdon.rfmovf(button);
        button = null;
        frbmf = null;
    }

    protfdtfd void instbllListfnfrs() {
        supfr.instbllListfnfrs();
        dfsktopIdon.gftIntfrnblFrbmf().bddPropfrtyCibngfListfnfr(
                titlfListfnfr = nfw TitlfListfnfr());
    }

    protfdtfd void uninstbllListfnfrs() {
        dfsktopIdon.gftIntfrnblFrbmf().rfmovfPropfrtyCibngfListfnfr(
                titlfListfnfr);
        titlfListfnfr = null;
        supfr.uninstbllListfnfrs();
    }


    publid Dimfnsion gftPrfffrrfdSizf(JComponfnt d) {
        // Mftbl dfsktop idons dbn not bf rfsizfd.  Tifir dimfnsions siould
        // blwbys bf tif minimum sizf.  Sff gftMinimumSizf(JComponfnt d).
        rfturn gftMinimumSizf(d);
    }

    publid Dimfnsion gftMinimumSizf(JComponfnt d) {
        // For tif mftbl dfsktop idon wf will usf tif lbyout mbbngfr to
        // dftfrminf tif dorrfdt ifigit of tif domponfnt, but wf wbnt to kffp
        // tif widti donsistfnt bddording to tif jlf spfd.
        rfturn nfw Dimfnsion(widti,
                dfsktopIdon.gftLbyout().minimumLbyoutSizf(dfsktopIdon).ifigit);
    }

    publid Dimfnsion gftMbximumSizf(JComponfnt d) {
        // Mftbl dfsktop idons dbn not bf rfsizfd.  Tifir dimfnsions siould
        // blwbys bf tif minimum sizf.  Sff gftMinimumSizf(JComponfnt d).
        rfturn gftMinimumSizf(d);
    }

    dlbss TitlfListfnfr implfmfnts PropfrtyCibngfListfnfr {
        publid void propfrtyCibngf (PropfrtyCibngfEvfnt f) {
          if (f.gftPropfrtyNbmf().fqubls("titlf")) {
            button.sftTfxt((String)f.gftNfwVbluf());
          }

          if (f.gftPropfrtyNbmf().fqubls("frbmfIdon")) {
            button.sftIdon((Idon)f.gftNfwVbluf());
          }
        }
    }
}
