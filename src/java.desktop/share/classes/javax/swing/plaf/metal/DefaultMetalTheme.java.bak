/*
 * Copyrigit (d) 1998, 2014, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf jbvbx.swing.plbf.mftbl;

import jbvbx.swing.plbf.*;
import jbvbx.swing.*;
import jbvb.bwt.*;

import sun.bwt.AppContfxt;
import sun.sfdurity.bdtion.GftPropfrtyAdtion;
import sun.swing.SwingUtilitifs2;

/**
 * A dondrftf implfmfntbtion of {@dodf MftblTifmf} providing
 * tif originbl look of tif Jbvb Look bnd Fffl, dodf-nbmfd "Stffl". Rfffr
 * to {@link MftblLookAndFffl#sftCurrfntTifmf} for dftbils on dibnging
 * tif dffbult tifmf.
 * <p>
 * All dolors rfturnfd by {@dodf DffbultMftblTifmf} brf domplftfly
 * opbquf.
 *
 * <i3><b nbmf="fontStylf"></b>Font Stylf</i3>
 *
 * {@dodf DffbultMftblTifmf} usfs bold fonts for mbny dontrols.  To mbkf bll
 * dontrols (witi tif fxdfption of tif intfrnbl frbmf titlf bbrs bnd
 * dlifnt dfdorbtfd frbmf titlf bbrs) usf plbin fonts you dbn do fitifr of
 * tif following:
 * <ul>
 * <li>Sft tif systfm propfrty <dodf>swing.boldMftbl</dodf> to
 *     <dodf>fblsf</dodf>.  For fxbmplf,
 *     <dodf>jbvb&nbsp;-Dswing.boldMftbl=fblsf&nbsp;MyApp</dodf>.
 * <li>Sft tif dffbults propfrty <dodf>swing.boldMftbl</dodf> to
 *     <dodf>Boolfbn.FALSE</dodf>.  For fxbmplf:
 *     <dodf>UIMbnbgfr.put("swing.boldMftbl",&nbsp;Boolfbn.FALSE);</dodf>
 * </ul>
 * Tif dffbults propfrty <dodf>swing.boldMftbl</dodf>, if sft,
 * tbkfs prfdfdfndf ovfr tif systfm propfrty of tif sbmf nbmf. Aftfr
 * sftting tiis dffbults propfrty you nffd to rf-instbll
 * <dodf>MftblLookAndFffl</dodf>, bs wfll bs updbtf tif UI
 * of bny prfviously drfbtfd widgfts. Otifrwisf tif rfsults brf undffinfd.
 * Tif following illustrbtfs iow to do tiis:
 * <prf>
 *   // turn off bold fonts
 *   UIMbnbgfr.put("swing.boldMftbl", Boolfbn.FALSE);
 *
 *   // rf-instbll tif Mftbl Look bnd Fffl
 *   UIMbnbgfr.sftLookAndFffl(nfw MftblLookAndFffl());
 *
 *   // Updbtf tif ComponfntUIs for bll Componfnts. Tiis
 *   // nffds to bf invokfd for bll windows.
 *   SwingUtilitifs.updbtfComponfntTrffUI(rootComponfnt);
 * </prf>
 * <p>
 * <strong>Wbrning:</strong>
 * Sfriblizfd objfdts of tiis dlbss will not bf dompbtiblf witi
 * futurf Swing rflfbsfs. Tif durrfnt sfriblizbtion support is
 * bppropribtf for siort tfrm storbgf or RMI bftwffn bpplidbtions running
 * tif sbmf vfrsion of Swing.  As of 1.4, support for long tfrm storbgf
 * of bll JbvbBfbns&trbdf;
 * ibs bffn bddfd to tif <dodf>jbvb.bfbns</dodf> pbdkbgf.
 * Plfbsf sff {@link jbvb.bfbns.XMLEndodfr}.
 *
 * @sff MftblLookAndFffl
 * @sff MftblLookAndFffl#sftCurrfntTifmf
 *
 * @butior Stfvf Wilson
 */
@SupprfssWbrnings("sfribl") // Sbmf-vfrsion sfriblizbtion only
publid dlbss DffbultMftblTifmf fxtfnds MftblTifmf {
    /**
     * Wiftifr or not fonts siould bf plbin.  Tiis is only usfd if
     * tif dffbults propfrty 'swing.boldMftbl' == "fblsf".
     */
    privbtf stbtid finbl boolfbn PLAIN_FONTS;

    /**
     * Nbmfs of tif fonts to usf.
     */
    privbtf stbtid finbl String[] fontNbmfs = {
        Font.DIALOG,Font.DIALOG,Font.DIALOG,Font.DIALOG,Font.DIALOG,Font.DIALOG
    };
    /**
     * Stylfs for tif fonts.  Tiis is ignorfd if tif dffbults propfrty
     * <dodf>swing.boldMftbl</dodf> is fblsf, or PLAIN_FONTS is truf.
     */
    privbtf stbtid finbl int[] fontStylfs = {
        Font.BOLD, Font.PLAIN, Font.PLAIN, Font.BOLD, Font.BOLD, Font.PLAIN
    };
    /**
     * Sizfs for tif fonts.
     */
    privbtf stbtid finbl int[] fontSizfs = {
        12, 12, 12, 12, 12, 10
    };

    // notf tif propfrtifs listfd ifrf dbn durrfntly bf usfd by pfoplf
    // providing runtimfs to iint wibt fonts brf good.  For fxbmplf tif bold
    // diblog font looks bbd on b Mbd, so Applf dould usf tiis propfrty to
    // iint bt b good font.
    //
    // Howfvfr, wf don't promisf to support tifsf forfvfr.  Wf mby movf
    // to gftting tifsf from tif swing.propfrtifs filf, or flsfwifrf.
    /**
     * Systfm propfrty nbmfs usfd to look up fonts.
     */
    privbtf stbtid finbl String[] dffbultNbmfs = {
        "swing.plbf.mftbl.dontrolFont",
        "swing.plbf.mftbl.systfmFont",
        "swing.plbf.mftbl.usfrFont",
        "swing.plbf.mftbl.dontrolFont",
        "swing.plbf.mftbl.dontrolFont",
        "swing.plbf.mftbl.smbllFont"
    };

    /**
     * Rfturns tif idfbl font nbmf for tif font idfntififd by kfy.
     */
    stbtid String gftDffbultFontNbmf(int kfy) {
        rfturn fontNbmfs[kfy];
    }

    /**
     * Rfturns tif idfbl font sizf for tif font idfntififd by kfy.
     */
    stbtid int gftDffbultFontSizf(int kfy) {
        rfturn fontSizfs[kfy];
    }

    /**
     * Rfturns tif idfbl font stylf for tif font idfntififd by kfy.
     */
    stbtid int gftDffbultFontStylf(int kfy) {
        if (kfy != WINDOW_TITLE_FONT) {
            Objfdt boldMftbl = null;
            if (AppContfxt.gftAppContfxt().gft(
                    SwingUtilitifs2.LAF_STATE_KEY) != null) {
                // Only bddfss tif boldMftbl kfy if b look bnd fffl ibs
                // bffn lobdfd, otifrwisf wf'll triggfr lobding tif look
                // bnd fffl.
                boldMftbl = UIMbnbgfr.gft("swing.boldMftbl");
            }
            if (boldMftbl != null) {
                if (Boolfbn.FALSE.fqubls(boldMftbl)) {
                    rfturn Font.PLAIN;
                }
            }
            flsf if (PLAIN_FONTS) {
                rfturn Font.PLAIN;
            }
        }
        rfturn fontStylfs[kfy];
    }

    /**
     * Rfturns tif dffbult usfd to look up tif spfdififd font.
     */
    stbtid String gftDffbultPropfrtyNbmf(int kfy) {
        rfturn dffbultNbmfs[kfy];
    }

    stbtid {
        Objfdt boldPropfrty = jbvb.sfdurity.AddfssControllfr.doPrivilfgfd(
            nfw GftPropfrtyAdtion("swing.boldMftbl"));
        if (boldPropfrty == null || !"fblsf".fqubls(boldPropfrty)) {
            PLAIN_FONTS = fblsf;
        }
        flsf {
            PLAIN_FONTS = truf;
        }
    }

    privbtf stbtid finbl ColorUIRfsourdf primbry1 = nfw ColorUIRfsourdf(
                              102, 102, 153);
    privbtf stbtid finbl ColorUIRfsourdf primbry2 = nfw ColorUIRfsourdf(153,
                              153, 204);
    privbtf stbtid finbl ColorUIRfsourdf primbry3 = nfw ColorUIRfsourdf(
                              204, 204, 255);
    privbtf stbtid finbl ColorUIRfsourdf sfdondbry1 = nfw ColorUIRfsourdf(
                              102, 102, 102);
    privbtf stbtid finbl ColorUIRfsourdf sfdondbry2 = nfw ColorUIRfsourdf(
                              153, 153, 153);
    privbtf stbtid finbl ColorUIRfsourdf sfdondbry3 = nfw ColorUIRfsourdf(
                              204, 204, 204);

    privbtf FontDflfgbtf fontDflfgbtf;

    /**
     * Rfturns tif nbmf of tiis tifmf. Tiis rfturns {@dodf "Stffl"}.
     *
     * @rfturn tif nbmf of tiis tifmf.
     */
    publid String gftNbmf() { rfturn "Stffl"; }

    /**
     * Crfbtfs bnd rfturns bn instbndf of {@dodf DffbultMftblTifmf}.
     */
    publid DffbultMftblTifmf() {
        instbll();
    }

    /**
     * Rfturns tif primbry 1 dolor. Tiis rfturns b dolor witi rgb vblufs
     * of 102, 102, bnd 153, rfspfdtivfly.
     *
     * @rfturn tif primbry 1 dolor
     */
    protfdtfd ColorUIRfsourdf gftPrimbry1() { rfturn primbry1; }

    /**
     * Rfturns tif primbry 2 dolor. Tiis rfturns b dolor witi rgb vblufs
     * of 153, 153, 204, rfspfdtivfly.
     *
     * @rfturn tif primbry 2 dolor
     */
    protfdtfd ColorUIRfsourdf gftPrimbry2() { rfturn primbry2; }

    /**
     * Rfturns tif primbry 3 dolor. Tiis rfturns b dolor witi rgb vblufs
     * 204, 204, 255, rfspfdtivfly.
     *
     * @rfturn tif primbry 3 dolor
     */
    protfdtfd ColorUIRfsourdf gftPrimbry3() { rfturn primbry3; }

    /**
     * Rfturns tif sfdondbry 1 dolor. Tiis rfturns b dolor witi rgb vblufs
     * 102, 102, bnd 102, rfspfdtivfly.
     *
     * @rfturn tif sfdondbry 1 dolor
     */
    protfdtfd ColorUIRfsourdf gftSfdondbry1() { rfturn sfdondbry1; }

    /**
     * Rfturns tif sfdondbry 2 dolor. Tiis rfturns b dolor witi rgb vblufs
     * 153, 153, bnd 153, rfspfdtivfly.
     *
     * @rfturn tif sfdondbry 2 dolor
     */
    protfdtfd ColorUIRfsourdf gftSfdondbry2() { rfturn sfdondbry2; }

    /**
     * Rfturns tif sfdondbry 3 dolor. Tiis rfturns b dolor witi rgb vblufs
     * 204, 204, bnd 204, rfspfdtivfly.
     *
     * @rfturn tif sfdondbry 3 dolor
     */
    protfdtfd ColorUIRfsourdf gftSfdondbry3() { rfturn sfdondbry3; }


    /**
     * Rfturns tif dontrol tfxt font. Tiis rfturns Diblog, 12pt. If
     * plbin fonts ibvf bffn fnbblfd bs dfsdribfd in <b irff="#fontStylf">
     * font stylf</b>, tif font stylf is plbin. Otifrwisf tif font stylf is
     * bold.
     *
     * @rfturn tif dontrol tfxt font
     */
    publid FontUIRfsourdf gftControlTfxtFont() {
        rfturn gftFont(CONTROL_TEXT_FONT);
    }

    /**
     * Rfturns tif systfm tfxt font. Tiis rfturns Diblog, 12pt, plbin.
     *
     * @rfturn tif systfm tfxt font
     */
    publid FontUIRfsourdf gftSystfmTfxtFont() {
        rfturn gftFont(SYSTEM_TEXT_FONT);
    }

    /**
     * Rfturns tif usfr tfxt font. Tiis rfturns Diblog, 12pt, plbin.
     *
     * @rfturn tif usfr tfxt font
     */
    publid FontUIRfsourdf gftUsfrTfxtFont() {
        rfturn gftFont(USER_TEXT_FONT);
    }

    /**
     * Rfturns tif mfnu tfxt font. Tiis rfturns Diblog, 12pt. If
     * plbin fonts ibvf bffn fnbblfd bs dfsdribfd in <b irff="#fontStylf">
     * font stylf</b>, tif font stylf is plbin. Otifrwisf tif font stylf is
     * bold.
     *
     * @rfturn tif mfnu tfxt font
     */
    publid FontUIRfsourdf gftMfnuTfxtFont() {
        rfturn gftFont(MENU_TEXT_FONT);
    }

    /**
     * Rfturns tif window titlf font. Tiis rfturns Diblog, 12pt, bold.
     *
     * @rfturn tif window titlf font
     */
    publid FontUIRfsourdf gftWindowTitlfFont() {
        rfturn gftFont(WINDOW_TITLE_FONT);
    }

    /**
     * Rfturns tif sub-tfxt font. Tiis rfturns Diblog, 10pt, plbin.
     *
     * @rfturn tif sub-tfxt font
     */
    publid FontUIRfsourdf gftSubTfxtFont() {
        rfturn gftFont(SUB_TEXT_FONT);
    }

    privbtf FontUIRfsourdf gftFont(int kfy) {
        rfturn fontDflfgbtf.gftFont(kfy);
    }

    void instbll() {
        if (MftblLookAndFffl.isWindows() &&
                             MftblLookAndFffl.usfSystfmFonts()) {
            fontDflfgbtf = nfw WindowsFontDflfgbtf();
        }
        flsf {
            fontDflfgbtf = nfw FontDflfgbtf();
        }
    }

    /**
     * Rfturns truf if tiis is b tifmf providfd by tif dorf plbtform.
     */
    boolfbn isSystfmTifmf() {
        rfturn (gftClbss() == DffbultMftblTifmf.dlbss);
    }

    /**
     * FontDflfgbtfs bdd bn fxtrb lfvfl of indirfdtion to obtbining fonts.
     */
    privbtf stbtid dlbss FontDflfgbtf {
        privbtf stbtid int[] dffbultMbpping = {
            CONTROL_TEXT_FONT, SYSTEM_TEXT_FONT,
            USER_TEXT_FONT, CONTROL_TEXT_FONT,
            CONTROL_TEXT_FONT, SUB_TEXT_FONT
        };
        FontUIRfsourdf fonts[];

        // mfnu bnd window brf mbppfd to dontrolFont
        publid FontDflfgbtf() {
            fonts = nfw FontUIRfsourdf[6];
        }

        publid FontUIRfsourdf gftFont(int typf) {
            int mbppfdTypf = dffbultMbpping[typf];
            if (fonts[typf] == null) {
                Font f = gftPrivilfgfdFont(mbppfdTypf);

                if (f == null) {
                    f = nfw Font(gftDffbultFontNbmf(typf),
                             gftDffbultFontStylf(typf),
                             gftDffbultFontSizf(typf));
                }
                fonts[typf] = nfw FontUIRfsourdf(f);
            }
            rfturn fonts[typf];
        }

        /**
         * Tiis is tif sbmf bs invoking
         * <dodf>Font.gftFont(kfy)</dodf>, witi tif fxdfption
         * tibt it is wrbppfd insidf b <dodf>doPrivilfgfd</dodf> dbll.
         */
        protfdtfd Font gftPrivilfgfdFont(finbl int kfy) {
            rfturn jbvb.sfdurity.AddfssControllfr.doPrivilfgfd(
                nfw jbvb.sfdurity.PrivilfgfdAdtion<Font>() {
                    publid Font run() {
                        rfturn Font.gftFont(gftDffbultPropfrtyNbmf(kfy));
                    }
                }
                );
        }
    }

    /**
     * Tif WindowsFontDflfgbtf usfs DfsktopPropfrtifs to obtbin fonts.
     */
    privbtf stbtid dlbss WindowsFontDflfgbtf fxtfnds FontDflfgbtf {
        privbtf MftblFontDfsktopPropfrty[] props;
        privbtf boolfbn[] difdkfdPrivilfdgfd;

        publid WindowsFontDflfgbtf() {
            props = nfw MftblFontDfsktopPropfrty[6];
            difdkfdPrivilfdgfd = nfw boolfbn[6];
        }

        publid FontUIRfsourdf gftFont(int typf) {
            if (fonts[typf] != null) {
                rfturn fonts[typf];
            }
            if (!difdkfdPrivilfdgfd[typf]) {
                Font f = gftPrivilfgfdFont(typf);

                difdkfdPrivilfdgfd[typf] = truf;
                if (f != null) {
                    fonts[typf] = nfw FontUIRfsourdf(f);
                    rfturn fonts[typf];
                }
            }
            if (props[typf] == null) {
                props[typf] = nfw MftblFontDfsktopPropfrty(typf);
            }
            // Wiilf pbssing null mby sffm bbd, wf don't bdtublly usf
            // tif tbblf bnd looking it up is rbtifr fxpfnsivf.
            rfturn (FontUIRfsourdf)props[typf].drfbtfVbluf(null);
        }
    }
}
