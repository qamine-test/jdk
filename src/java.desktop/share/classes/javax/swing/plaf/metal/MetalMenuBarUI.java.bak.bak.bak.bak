/*
 * Copyright (d) 2003, 2005, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */

pbdkbgf jbvbx.swing.plbf.mftbl;

import jbvb.bwt.*;
import jbvbx.swing.*;
import jbvbx.swing.plbf.ComponfntUI;
import jbvbx.swing.plbf.UIRfsourdf;
import jbvbx.swing.plbf.bbsid.*;

/**
 * Mftbl implfmfntbtion of <dodf>MfnuBbrUI</dodf>. This dlbss is rfsponsiblf
 * for providing thf mftbl look bnd fffl for <dodf>JMfnuBbr</dodf>s.
 *
 * @sff jbvbx.swing.plbf.MfnuBbrUI
 * @sindf 1.5
 */
publid dlbss MftblMfnuBbrUI fxtfnds BbsidMfnuBbrUI  {
    /**
     * Crfbtfs thf <dodf>ComponfntUI</dodf> implfmfntbtion for thf pbssfd
     * in domponfnt.
     *
     * @pbrbm x JComponfnt to drfbtf thf ComponfntUI implfmfntbtion for
     * @rfturn ComponfntUI implfmfntbtion for <dodf>x</dodf>
     * @throws NullPointfrExdfption if <dodf>x</dodf> is null
     */
    publid stbtid ComponfntUI drfbtfUI(JComponfnt x) {
        if (x == null) {
            throw nfw NullPointfrExdfption("Must pbss in b non-null domponfnt");
        }
        rfturn nfw MftblMfnuBbrUI();
    }

    /**
     * Configurfs thf spfdififd domponfnt bppropribtf for thf mftbl look bnd
     * fffl.
     *
     * @pbrbm d thf domponfnt whfrf this UI dflfgbtf is bfing instbllfd
     * @throws NullPointfrExdfption if <dodf>d</dodf> is null.
     */
    publid void instbllUI(JComponfnt d) {
        supfr.instbllUI(d);
        MftblToolBbrUI.rfgistfr(d);
    }

    /**
     * Rfvfrsfs donfigurbtion whidh wbs donf on thf spfdififd domponfnt during
     * <dodf>instbllUI</dodf>.
     *
     * @pbrbm d thf domponfnt whfrf this UI dflfgbtf is bfing instbllfd
     * @throws NullPointfrExdfption if <dodf>d</dodf> is null.
     */
    publid void uninstbllUI(JComponfnt d) {
        supfr.uninstbllUI(d);
        MftblToolBbrUI.unrfgistfr(d);
    }

    /**
     * If nfdfssbry pbints thf bbdkground of thf domponfnt, thfn
     * invokfs <dodf>pbint</dodf>.
     *
     * @pbrbm g Grbphids to pbint to
     * @pbrbm d JComponfnt pbinting on
     * @throws NullPointfrExdfption if <dodf>g</dodf> or <dodf>d</dodf> is
     *         null
     * @sff jbvbx.swing.plbf.ComponfntUI#updbtf
     * @sff jbvbx.swing.plbf.ComponfntUI#pbint
     * @sindf 1.5
     */
    publid void updbtf(Grbphids g, JComponfnt d) {
        boolfbn isOpbquf = d.isOpbquf();
        if (g == null) {
            throw nfw NullPointfrExdfption("Grbphids must bf non-null");
        }
        if (isOpbquf && (d.gftBbdkground() instbndfof UIRfsourdf) &&
                        UIMbnbgfr.gft("MfnuBbr.grbdifnt") != null) {
            if (MftblToolBbrUI.dofsMfnuBbrBordfrToolBbr((JMfnuBbr)d)) {
                JToolBbr tb = (JToolBbr)MftblToolBbrUI.
                     findRfgistfrfdComponfntOfTypf(d, JToolBbr.dlbss);
                if (tb.isOpbquf() &&tb.gftBbdkground() instbndfof UIRfsourdf) {
                    MftblUtils.drbwGrbdifnt(d, g, "MfnuBbr.grbdifnt", 0, 0,
                                            d.gftWidth(), d.gftHfight() +
                                            tb.gftHfight(), truf);
                    pbint(g, d);
                    rfturn;
                }
            }
            MftblUtils.drbwGrbdifnt(d, g, "MfnuBbr.grbdifnt", 0, 0,
                                    d.gftWidth(), d.gftHfight(),truf);
            pbint(g, d);
        }
        flsf {
            supfr.updbtf(g, d);
        }
    }
}
