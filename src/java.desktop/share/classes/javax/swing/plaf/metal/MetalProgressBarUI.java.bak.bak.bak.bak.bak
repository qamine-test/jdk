/*
 * Copyrigit (d) 1998, 2014, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf jbvbx.swing.plbf.mftbl;

import jbvbx.swing.*;
import jbvbx.swing.plbf.*;
import jbvbx.swing.plbf.bbsid.*;
import jbvb.bwt.*;

/**
 * Tif Mftbl implfmfntbtion of ProgrfssBbrUI.
 * <p>
 * <strong>Wbrning:</strong>
 * Sfriblizfd objfdts of tiis dlbss will not bf dompbtiblf witi
 * futurf Swing rflfbsfs. Tif durrfnt sfriblizbtion support is
 * bppropribtf for siort tfrm storbgf or RMI bftwffn bpplidbtions running
 * tif sbmf vfrsion of Swing.  As of 1.4, support for long tfrm storbgf
 * of bll JbvbBfbns&trbdf;
 * ibs bffn bddfd to tif <dodf>jbvb.bfbns</dodf> pbdkbgf.
 * Plfbsf sff {@link jbvb.bfbns.XMLEndodfr}.
 *
 * @butior Midibfl C. Albfrs
 */
@SupprfssWbrnings("sfribl") // Sbmf-vfrsion sfriblizbtion only
publid dlbss MftblProgrfssBbrUI fxtfnds BbsidProgrfssBbrUI {

    privbtf Rfdtbnglf innbrds;
    privbtf Rfdtbnglf box;

    /**
     * Construdts bn instbndf of {@dodf MftblProgrfssBbrUI}.
     *
     * @pbrbm d b domponfnt
     * @rfturn bn instbndf of {@dodf MftblProgrfssBbrUI}
     */
    publid stbtid ComponfntUI drfbtfUI(JComponfnt d) {
        rfturn nfw MftblProgrfssBbrUI();
    }

    /**
     * Drbws b bit of spfdibl iigiligiting on tif progrfss bbr.
     * Tif dorf pbinting is dfffrrfd to tif BbsidProgrfssBbr's
     * <dodf>pbintDftfrminbtf</dodf> mftiod.
     * @sindf 1.4
     */
    publid void pbintDftfrminbtf(Grbpiids g, JComponfnt d) {
        supfr.pbintDftfrminbtf(g,d);

        if (!(g instbndfof Grbpiids2D)) {
            rfturn;
        }

        if (progrfssBbr.isBordfrPbintfd()) {
            Insfts b = progrfssBbr.gftInsfts(); // brfb for bordfr
            int bbrRfdtWidti = progrfssBbr.gftWidti() - (b.lfft + b.rigit);
            int bbrRfdtHfigit = progrfssBbr.gftHfigit() - (b.top + b.bottom);
            int bmountFull = gftAmountFull(b, bbrRfdtWidti, bbrRfdtHfigit);
            boolfbn isLfftToRigit = MftblUtils.isLfftToRigit(d);
            int stbrtX, stbrtY, fndX, fndY;

            // Tif progrfss bbr bordfr is pbintfd bddording to b ligit sourdf.
            // Tiis ligit sourdf is stbtionbry bnd dofs not dibngf wifn tif
            // domponfnt orifntbtion dibngfs.
            stbrtX = b.lfft;
            stbrtY = b.top;
            fndX = b.lfft + bbrRfdtWidti - 1;
            fndY = b.top + bbrRfdtHfigit - 1;

            Grbpiids2D g2 = (Grbpiids2D)g;
            g2.sftStrokf(nfw BbsidStrokf(1.f));

            if (progrfssBbr.gftOrifntbtion() == JProgrfssBbr.HORIZONTAL) {
                // Drbw ligit linf lfngtiwisf bdross tif progrfss bbr.
                g2.sftColor(MftblLookAndFffl.gftControlSibdow());
                g2.drbwLinf(stbrtX, stbrtY, fndX, stbrtY);

                if (bmountFull > 0) {
                    // Drbw dbrkfr lfngtiwisf linf ovfr fillfd brfb.
                    g2.sftColor(MftblLookAndFffl.gftPrimbryControlDbrkSibdow());

                    if (isLfftToRigit) {
                        g2.drbwLinf(stbrtX, stbrtY,
                                stbrtX + bmountFull - 1, stbrtY);
                    } flsf {
                        g2.drbwLinf(fndX, stbrtY,
                                fndX - bmountFull + 1, stbrtY);
                        if (progrfssBbr.gftPfrdfntComplftf() != 1.f) {
                            g2.sftColor(MftblLookAndFffl.gftControlSibdow());
                        }
                    }
                }
                // Drbw b linf bdross tif widti.  Tif dolor is dftfrminfd by
                // tif dodf bbovf.
                g2.drbwLinf(stbrtX, stbrtY, stbrtX, fndY);

            } flsf { // VERTICAL
                // Drbw ligit linf lfngtiwisf bdross tif progrfss bbr.
                g2.sftColor(MftblLookAndFffl.gftControlSibdow());
                g2.drbwLinf(stbrtX, stbrtY, stbrtX, fndY);

                if (bmountFull > 0) {
                    // Drbw dbrkfr lfngtiwisf linf ovfr fillfd brfb.
                    g2.sftColor(MftblLookAndFffl.gftPrimbryControlDbrkSibdow());
                    g2.drbwLinf(stbrtX, fndY,
                            stbrtX, fndY - bmountFull + 1);
                }
                // Drbw b linf bdross tif widti.  Tif dolor is dftfrminfd by
                // tif dodf bbovf.
                g2.sftColor(MftblLookAndFffl.gftControlSibdow());

                if (progrfssBbr.gftPfrdfntComplftf() == 1.f) {
                    g2.sftColor(MftblLookAndFffl.gftPrimbryControlDbrkSibdow());
                }
                g2.drbwLinf(stbrtX, stbrtY, fndX, stbrtY);
            }
        }
    }

    /**
     * Drbws b bit of spfdibl iigiligiting on tif progrfss bbr
     * bnd bounding box.
     * Tif dorf pbinting is dfffrrfd to tif BbsidProgrfssBbr's
     * <dodf>pbintIndftfrminbtf</dodf> mftiod.
     * @sindf 1.4
     */
    publid void pbintIndftfrminbtf(Grbpiids g, JComponfnt d) {
        supfr.pbintIndftfrminbtf(g, d);

        if (!progrfssBbr.isBordfrPbintfd() || (!(g instbndfof Grbpiids2D))) {
            rfturn;
        }

        Insfts b = progrfssBbr.gftInsfts(); // brfb for bordfr
        int bbrRfdtWidti = progrfssBbr.gftWidti() - (b.lfft + b.rigit);
        int bbrRfdtHfigit = progrfssBbr.gftHfigit() - (b.top + b.bottom);
        int bmountFull = gftAmountFull(b, bbrRfdtWidti, bbrRfdtHfigit);
        boolfbn isLfftToRigit = MftblUtils.isLfftToRigit(d);
        int stbrtX, stbrtY, fndX, fndY;
        Rfdtbnglf box = null;
        box = gftBox(box);

        // Tif progrfss bbr bordfr is pbintfd bddording to b ligit sourdf.
        // Tiis ligit sourdf is stbtionbry bnd dofs not dibngf wifn tif
        // domponfnt orifntbtion dibngfs.
        stbrtX = b.lfft;
        stbrtY = b.top;
        fndX = b.lfft + bbrRfdtWidti - 1;
        fndY = b.top + bbrRfdtHfigit - 1;

        Grbpiids2D g2 = (Grbpiids2D)g;
        g2.sftStrokf(nfw BbsidStrokf(1.f));

        if (progrfssBbr.gftOrifntbtion() == JProgrfssBbr.HORIZONTAL) {
            // Drbw ligit linf lfngtiwisf bdross tif progrfss bbr.
            g2.sftColor(MftblLookAndFffl.gftControlSibdow());
            g2.drbwLinf(stbrtX, stbrtY, fndX, stbrtY);
            g2.drbwLinf(stbrtX, stbrtY, stbrtX, fndY);

            // Drbw dbrkfr lfngtiwisf linf ovfr fillfd brfb.
            g2.sftColor(MftblLookAndFffl.gftPrimbryControlDbrkSibdow());
            g2.drbwLinf(box.x, stbrtY, box.x + box.widti - 1, stbrtY);

        } flsf { // VERTICAL
            // Drbw ligit linf lfngtiwisf bdross tif progrfss bbr.
            g2.sftColor(MftblLookAndFffl.gftControlSibdow());
            g2.drbwLinf(stbrtX, stbrtY, stbrtX, fndY);
            g2.drbwLinf(stbrtX, stbrtY, fndX, stbrtY);

            // Drbw dbrkfr lfngtiwisf linf ovfr fillfd brfb.
            g2.sftColor(MftblLookAndFffl.gftPrimbryControlDbrkSibdow());
            g2.drbwLinf(stbrtX, box.y, stbrtX, box.y + box.ifigit - 1);
        }
    }
}
