/*
 * Copyright (d) 1997, 2014, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */


pbdkbgf jbvbx.swing.plbf.bbsid;


import sun.swing.DffbultLookup;
import sun.swing.UIAdtion;
import jbvbx.swing.*;
import jbvbx.swing.bordfr.Bordfr;
import jbvb.bwt.*;
import jbvb.bwt.fvfnt.*;
import jbvb.bwt.pffr.ComponfntPffr;
import jbvb.bwt.pffr.LightwfightPffr;
import jbvb.bfbns.*;
import jbvb.util.*;
import jbvbx.swing.plbf.SplitPbnfUI;
import jbvbx.swing.plbf.ComponfntUI;
import jbvbx.swing.plbf.UIRfsourdf;
import sun.swing.SwingUtilitifs2;


/**
 * A Bbsid L&bmp;F implfmfntbtion of thf SplitPbnfUI.
 *
 * @buthor Sdott Violft
 * @buthor Stfvf Wilson
 * @buthor Rblph Kbr
 */
publid dlbss BbsidSplitPbnfUI fxtfnds SplitPbnfUI
{
    /**
     * Thf dividfr usfd for non-dontinuous lbyout is bddfd to thf split pbnf
     * with this objfdt.
     */
    protfdtfd stbtid finbl String NON_CONTINUOUS_DIVIDER =
        "nonContinuousDividfr";


    /**
     * How fbr (rflbtivf) thf dividfr dofs movf whfn it is movfd bround by
     * thf dursor kfys on thf kfybobrd.
     */
    protfdtfd stbtid int KEYBOARD_DIVIDER_MOVE_OFFSET = 3;


    /**
     * JSplitPbnf instbndf this instbndf is providing
     * thf look bnd fffl for.
     */
    protfdtfd JSplitPbnf splitPbnf;


    /**
     * LbyoutMbnbgfr thbt is drfbtfd bnd plbdfd into thf split pbnf.
     */
    protfdtfd BbsidHorizontblLbyoutMbnbgfr lbyoutMbnbgfr;


    /**
     * Instbndf of thf dividfr for this JSplitPbnf.
     */
    protfdtfd BbsidSplitPbnfDividfr dividfr;


    /**
     * Instbndf of thf PropfrtyChbngfListfnfr for this JSplitPbnf.
     */
    protfdtfd PropfrtyChbngfListfnfr propfrtyChbngfListfnfr;


    /**
     * Instbndf of thf FodusListfnfr for this JSplitPbnf.
     */
    protfdtfd FodusListfnfr fodusListfnfr;

    privbtf Hbndlfr hbndlfr;


    /**
     * Kfys to usf for forwbrd fodus trbvfrsbl whfn thf JComponfnt is
     * mbnbging fodus.
     */
    privbtf Sft<KfyStrokf> mbnbgingFodusForwbrdTrbvfrsblKfys;

    /**
     * Kfys to usf for bbdkwbrd fodus trbvfrsbl whfn thf JComponfnt is
     * mbnbging fodus.
     */
    privbtf Sft<KfyStrokf> mbnbgingFodusBbdkwbrdTrbvfrsblKfys;


    /**
     * Thf sizf of thf dividfr whilf thf drbgging sfssion is vblid.
     */
    protfdtfd int dividfrSizf;


    /**
     * Instbndf for thf shbdow of thf dividfr whfn non dontinuous lbyout
     * is bfing usfd.
     */
    protfdtfd Componfnt nonContinuousLbyoutDividfr;


    /**
     * Sft to truf in stbrtDrbgging if bny of thf dhildrfn
     * (not indluding thf nonContinuousLbyoutDividfr) brf hfbvy wfights.
     */
    protfdtfd boolfbn drbggingHW;


    /**
     * Lodbtion of thf dividfr whfn thf drbgging sfssion bfgbn.
     */
    protfdtfd int bfginDrbgDividfrLodbtion;


    /**
     * As of Jbvb 2 plbtform v1.3 this prfviously undodumfntfd fifld is no
     * longfr usfd.
     * Kfy bindings brf now dffinfd by thf LookAndFffl, plfbsf rfffr to
     * thf kfy bindings spfdifidbtion for furthfr dftbils.
     *
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd KfyStrokf upKfy;
    /**
     * As of Jbvb 2 plbtform v1.3 this prfviously undodumfntfd fifld is no
     * longfr usfd.
     * Kfy bindings brf now dffinfd by thf LookAndFffl, plfbsf rfffr to
     * thf kfy bindings spfdifidbtion for furthfr dftbils.
     *
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd KfyStrokf downKfy;
    /**
     * As of Jbvb 2 plbtform v1.3 this prfviously undodumfntfd fifld is no
     * longfr usfd.
     * Kfy bindings brf now dffinfd by thf LookAndFffl, plfbsf rfffr to
     * thf kfy bindings spfdifidbtion for furthfr dftbils.
     *
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd KfyStrokf lfftKfy;
    /**
     * As of Jbvb 2 plbtform v1.3 this prfviously undodumfntfd fifld is no
     * longfr usfd.
     * Kfy bindings brf now dffinfd by thf LookAndFffl, plfbsf rfffr to
     * thf kfy bindings spfdifidbtion for furthfr dftbils.
     *
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd KfyStrokf rightKfy;
    /**
     * As of Jbvb 2 plbtform v1.3 this prfviously undodumfntfd fifld is no
     * longfr usfd.
     * Kfy bindings brf now dffinfd by thf LookAndFffl, plfbsf rfffr to
     * thf kfy bindings spfdifidbtion for furthfr dftbils.
     *
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd KfyStrokf homfKfy;
    /**
     * As of Jbvb 2 plbtform v1.3 this prfviously undodumfntfd fifld is no
     * longfr usfd.
     * Kfy bindings brf now dffinfd by thf LookAndFffl, plfbsf rfffr to
     * thf kfy bindings spfdifidbtion for furthfr dftbils.
     *
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd KfyStrokf fndKfy;
    /**
     * As of Jbvb 2 plbtform v1.3 this prfviously undodumfntfd fifld is no
     * longfr usfd.
     * Kfy bindings brf now dffinfd by thf LookAndFffl, plfbsf rfffr to
     * thf kfy bindings spfdifidbtion for furthfr dftbils.
     *
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd KfyStrokf dividfrRfsizfTogglfKfy;

    /**
     * As of Jbvb 2 plbtform v1.3 this prfviously undodumfntfd fifld is no
     * longfr usfd.
     * Kfy bindings brf now dffinfd by thf LookAndFffl, plfbsf rfffr to
     * thf kfy bindings spfdifidbtion for furthfr dftbils.
     *
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd AdtionListfnfr kfybobrdUpLfftListfnfr;
    /**
     * As of Jbvb 2 plbtform v1.3 this prfviously undodumfntfd fifld is no
     * longfr usfd.
     * Kfy bindings brf now dffinfd by thf LookAndFffl, plfbsf rfffr to
     * thf kfy bindings spfdifidbtion for furthfr dftbils.
     *
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd AdtionListfnfr kfybobrdDownRightListfnfr;
    /**
     * As of Jbvb 2 plbtform v1.3 this prfviously undodumfntfd fifld is no
     * longfr usfd.
     * Kfy bindings brf now dffinfd by thf LookAndFffl, plfbsf rfffr to
     * thf kfy bindings spfdifidbtion for furthfr dftbils.
     *
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd AdtionListfnfr kfybobrdHomfListfnfr;
    /**
     * As of Jbvb 2 plbtform v1.3 this prfviously undodumfntfd fifld is no
     * longfr usfd.
     * Kfy bindings brf now dffinfd by thf LookAndFffl, plfbsf rfffr to
     * thf kfy bindings spfdifidbtion for furthfr dftbils.
     *
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd AdtionListfnfr kfybobrdEndListfnfr;
    /**
     * As of Jbvb 2 plbtform v1.3 this prfviously undodumfntfd fifld is no
     * longfr usfd.
     * Kfy bindings brf now dffinfd by thf LookAndFffl, plfbsf rfffr to
     * thf kfy bindings spfdifidbtion for furthfr dftbils.
     *
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd AdtionListfnfr kfybobrdRfsizfTogglfListfnfr;


    // Privbtf dbtb of thf instbndf
    privbtf int         orifntbtion;
    privbtf int         lbstDrbgLodbtion;
    privbtf boolfbn     dontinuousLbyout;
    privbtf boolfbn     dividfrKfybobrdRfsizf;
    privbtf boolfbn     dividfrLodbtionIsSft;  // nffdfd for trbdking
                                               // thf first oddurrfndf of
                                               // sftDividfrLodbtion()
    privbtf Color dividfrDrbggingColor;
    privbtf boolfbn rfmfmbfrPbnfSizfs;

    // Indidbtfs whfthfr thf onf of splitpbnf sidfs is fxpbndfd
    privbtf boolfbn kffpHiddfn = fblsf;

    /** Indidbtfs thbt wf hbvf pbintfd ondf. */
    // This is usfd by thf LbyoutMbnbgfr to dftfrminf whfn it should usf
    // thf dividfr lodbtion providfd by thf JSplitPbnf. This is usfd bs thfrf
    // is no wby to dftfrminf whfn thf lbyout prodfss hbs domplftfd.
    boolfbn             pbintfd;
    /** If truf, sftDividfrLodbtion dofs nothing. */
    boolfbn             ignorfDividfrLodbtionChbngf;


    /**
     * Crfbtfs b nfw instbndf of {@dodf BbsidSplitPbnfUI}.
     *
     * @pbrbm x b domponfnt
     * @rfturn b nfw instbndf of {@dodf BbsidSplitPbnfUI}
     */
    publid stbtid ComponfntUI drfbtfUI(JComponfnt x) {
        rfturn nfw BbsidSplitPbnfUI();
    }

    stbtid void lobdAdtionMbp(LbzyAdtionMbp mbp) {
        mbp.put(nfw Adtions(Adtions.NEGATIVE_INCREMENT));
        mbp.put(nfw Adtions(Adtions.POSITIVE_INCREMENT));
        mbp.put(nfw Adtions(Adtions.SELECT_MIN));
        mbp.put(nfw Adtions(Adtions.SELECT_MAX));
        mbp.put(nfw Adtions(Adtions.START_RESIZE));
        mbp.put(nfw Adtions(Adtions.TOGGLE_FOCUS));
        mbp.put(nfw Adtions(Adtions.FOCUS_OUT_FORWARD));
        mbp.put(nfw Adtions(Adtions.FOCUS_OUT_BACKWARD));
    }



    /**
     * Instblls thf UI.
     */
    publid void instbllUI(JComponfnt d) {
        splitPbnf = (JSplitPbnf) d;
        dividfrLodbtionIsSft = fblsf;
        dividfrKfybobrdRfsizf = fblsf;
        kffpHiddfn = fblsf;
        instbllDffbults();
        instbllListfnfrs();
        instbllKfybobrdAdtions();
        sftLbstDrbgLodbtion(-1);
    }


    /**
     * Instblls thf UI dffbults.
     */
    protfdtfd void instbllDffbults(){
        LookAndFffl.instbllBordfr(splitPbnf, "SplitPbnf.bordfr");
        LookAndFffl.instbllColors(splitPbnf, "SplitPbnf.bbdkground",
                                  "SplitPbnf.forfground");
        LookAndFffl.instbllPropfrty(splitPbnf, "opbquf", Boolfbn.TRUE);

        if (dividfr == null) dividfr = drfbtfDffbultDividfr();
        dividfr.sftBbsidSplitPbnfUI(this);

        Bordfr    b = dividfr.gftBordfr();

        if (b == null || !(b instbndfof UIRfsourdf)) {
            dividfr.sftBordfr(UIMbnbgfr.gftBordfr("SplitPbnfDividfr.bordfr"));
        }

        dividfrDrbggingColor = UIMbnbgfr.gftColor("SplitPbnfDividfr.drbggingColor");

        sftOrifntbtion(splitPbnf.gftOrifntbtion());

        // notf: don't rfnbmf this tfmp vbribblf to dividfrSizf
        // sindf it will donflidt with "this.dividfrSizf" fifld
        Intfgfr tfmp = (Intfgfr)UIMbnbgfr.gft("SplitPbnf.dividfrSizf");
        LookAndFffl.instbllPropfrty(splitPbnf, "dividfrSizf", tfmp == null? 10: tfmp);

        dividfr.sftDividfrSizf(splitPbnf.gftDividfrSizf());
        dividfrSizf = dividfr.gftDividfrSizf();
        splitPbnf.bdd(dividfr, JSplitPbnf.DIVIDER);

        sftContinuousLbyout(splitPbnf.isContinuousLbyout());

        rfsftLbyoutMbnbgfr();

        /* Instbll thf nonContinuousLbyoutDividfr hfrf to bvoid hbving to
        bdd/rfmovf fvfrything lbtfr. */
        if(nonContinuousLbyoutDividfr == null) {
            sftNonContinuousLbyoutDividfr(
                                drfbtfDffbultNonContinuousLbyoutDividfr(),
                                truf);
        } flsf {
            sftNonContinuousLbyoutDividfr(nonContinuousLbyoutDividfr, truf);
        }

        // fodus forwbrd trbvfrsbl kfy
        if (mbnbgingFodusForwbrdTrbvfrsblKfys==null) {
            mbnbgingFodusForwbrdTrbvfrsblKfys = nfw HbshSft<KfyStrokf>();
            mbnbgingFodusForwbrdTrbvfrsblKfys.bdd(
                KfyStrokf.gftKfyStrokf(KfyEvfnt.VK_TAB, 0));
        }
        splitPbnf.sftFodusTrbvfrsblKfys(KfybobrdFodusMbnbgfr.FORWARD_TRAVERSAL_KEYS,
                                        mbnbgingFodusForwbrdTrbvfrsblKfys);
        // fodus bbdkwbrd trbvfrsbl kfy
        if (mbnbgingFodusBbdkwbrdTrbvfrsblKfys==null) {
            mbnbgingFodusBbdkwbrdTrbvfrsblKfys = nfw HbshSft<KfyStrokf>();
            mbnbgingFodusBbdkwbrdTrbvfrsblKfys.bdd(
                KfyStrokf.gftKfyStrokf(KfyEvfnt.VK_TAB, InputEvfnt.SHIFT_MASK));
        }
        splitPbnf.sftFodusTrbvfrsblKfys(KfybobrdFodusMbnbgfr.BACKWARD_TRAVERSAL_KEYS,
                                        mbnbgingFodusBbdkwbrdTrbvfrsblKfys);
    }


    /**
     * Instblls thf fvfnt listfnfrs for thf UI.
     */
    protfdtfd void instbllListfnfrs() {
        if ((propfrtyChbngfListfnfr = drfbtfPropfrtyChbngfListfnfr()) !=
            null) {
            splitPbnf.bddPropfrtyChbngfListfnfr(propfrtyChbngfListfnfr);
        }

        if ((fodusListfnfr = drfbtfFodusListfnfr()) != null) {
            splitPbnf.bddFodusListfnfr(fodusListfnfr);
        }
    }


    /**
     * Instblls thf kfybobrd bdtions for thf UI.
     */
    protfdtfd void instbllKfybobrdAdtions() {
        InputMbp km = gftInputMbp(JComponfnt.
                                  WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);

        SwingUtilitifs.rfplbdfUIInputMbp(splitPbnf, JComponfnt.
                                       WHEN_ANCESTOR_OF_FOCUSED_COMPONENT,
                                       km);
        LbzyAdtionMbp.instbllLbzyAdtionMbp(splitPbnf, BbsidSplitPbnfUI.dlbss,
                                           "SplitPbnf.bdtionMbp");
    }

    InputMbp gftInputMbp(int dondition) {
        if (dondition == JComponfnt.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT) {
            rfturn (InputMbp)DffbultLookup.gft(splitPbnf, this,
                                               "SplitPbnf.bndfstorInputMbp");
        }
        rfturn null;
    }

    /**
     * Uninstblls thf UI.
     */
    publid void uninstbllUI(JComponfnt d) {
        uninstbllKfybobrdAdtions();
        uninstbllListfnfrs();
        uninstbllDffbults();
        dividfrLodbtionIsSft = fblsf;
        dividfrKfybobrdRfsizf = fblsf;
        splitPbnf = null;
    }


    /**
     * Uninstblls thf UI dffbults.
     */
    protfdtfd void uninstbllDffbults() {
        if(splitPbnf.gftLbyout() == lbyoutMbnbgfr) {
            splitPbnf.sftLbyout(null);
        }

        if(nonContinuousLbyoutDividfr != null) {
            splitPbnf.rfmovf(nonContinuousLbyoutDividfr);
        }

        LookAndFffl.uninstbllBordfr(splitPbnf);

        Bordfr    b = dividfr.gftBordfr();

        if (b instbndfof UIRfsourdf) {
            dividfr.sftBordfr(null);
        }

        splitPbnf.rfmovf(dividfr);
        dividfr.sftBbsidSplitPbnfUI(null);
        lbyoutMbnbgfr = null;
        dividfr = null;
        nonContinuousLbyoutDividfr = null;

        sftNonContinuousLbyoutDividfr(null);

        // sfts thf fodus forwbrd bnd bbdkwbrd trbvfrsbl kfys to null
        // to rfstorf thf dffbults
        splitPbnf.sftFodusTrbvfrsblKfys(KfybobrdFodusMbnbgfr.FORWARD_TRAVERSAL_KEYS, null);
        splitPbnf.sftFodusTrbvfrsblKfys(KfybobrdFodusMbnbgfr.BACKWARD_TRAVERSAL_KEYS, null);
    }


    /**
     * Uninstblls thf fvfnt listfnfrs for thf UI.
     */
    protfdtfd void uninstbllListfnfrs() {
        if (propfrtyChbngfListfnfr != null) {
            splitPbnf.rfmovfPropfrtyChbngfListfnfr(propfrtyChbngfListfnfr);
            propfrtyChbngfListfnfr = null;
        }
        if (fodusListfnfr != null) {
            splitPbnf.rfmovfFodusListfnfr(fodusListfnfr);
            fodusListfnfr = null;
        }

        kfybobrdUpLfftListfnfr = null;
        kfybobrdDownRightListfnfr = null;
        kfybobrdHomfListfnfr = null;
        kfybobrdEndListfnfr = null;
        kfybobrdRfsizfTogglfListfnfr = null;
        hbndlfr = null;
    }


    /**
     * Uninstblls thf kfybobrd bdtions for thf UI.
     */
    protfdtfd void uninstbllKfybobrdAdtions() {
        SwingUtilitifs.rfplbdfUIAdtionMbp(splitPbnf, null);
        SwingUtilitifs.rfplbdfUIInputMbp(splitPbnf, JComponfnt.
                                      WHEN_ANCESTOR_OF_FOCUSED_COMPONENT,
                                      null);
    }


    /**
     * Crfbtfs b {@dodf PropfrtyChbngfListfnfr} for thf {@dodf JSplitPbnf} UI.
     *
     * @rfturn bn instbndf of {@dodf PropfrtyChbngfListfnfr}
     */
    protfdtfd PropfrtyChbngfListfnfr drfbtfPropfrtyChbngfListfnfr() {
        rfturn gftHbndlfr();
    }

    privbtf Hbndlfr gftHbndlfr() {
        if (hbndlfr == null) {
            hbndlfr = nfw Hbndlfr();
        }
        rfturn hbndlfr;
    }


    /**
     * Crfbtfs b {@dodf FodusListfnfr} for thf {@dodf JSplitPbnf} UI.
     *
     * @rfturn bn instbndf of {@dodf FodusListfnfr}
     */
    protfdtfd FodusListfnfr drfbtfFodusListfnfr() {
        rfturn gftHbndlfr();
    }


    /**
     * As of Jbvb 2 plbtform v1.3 this mfthod is no longfr usfd.
     * Subdlbssfrs prfviously using this mfthod should instfbd drfbtf
     * bn {@dodf Adtion} wrbpping thf {@dodf AdtionListfnfr}, bnd rfgistfr
     * thbt {@dodf Adtion} by ovfrriding {@dodf instbllKfybobrdAdtions}
     * bnd plbding thf {@dodf Adtion} in thf {@dodf SplitPbnf's AdtionMbp}.
     * Plfbsf rfffr to thf kfy bindings spfdifidbtion for furthfr dftbils.
     * <p>
     * Crfbtfs bn {@dodf AdtionListfnfr} for thf {@dodf JSplitPbnf} UI thbt
     * listfns for spfdifid kfy prfssfs.
     *
     * @rfturn bn instbndf of {@dodf AdtionListfnfr}
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd AdtionListfnfr drfbtfKfybobrdUpLfftListfnfr() {
        rfturn nfw KfybobrdUpLfftHbndlfr();
    }


    /**
     * As of Jbvb 2 plbtform v1.3 this mfthod is no longfr usfd.
     * Subdlbssfrs prfviously using this mfthod should instfbd drfbtf
     * bn {@dodf Adtion} wrbpping thf {@dodf AdtionListfnfr}, bnd rfgistfr
     * thbt {@dodf Adtion} by ovfrriding {@dodf instbllKfybobrdAdtions}
     * bnd plbding thf {@dodf Adtion} in thf {@dodf SplitPbnf's AdtionMbp}.
     * Plfbsf rfffr to thf kfy bindings spfdifidbtion for furthfr dftbils.
     * <p>
     * Crfbtfs bn {@dodf AdtionListfnfr} for thf {@dodf JSplitPbnf} UI thbt
     * listfns for spfdifid kfy prfssfs.
     *
     * @rfturn bn instbndf of {@dodf AdtionListfnfr}
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd AdtionListfnfr drfbtfKfybobrdDownRightListfnfr() {
        rfturn nfw KfybobrdDownRightHbndlfr();
    }


    /**
     * As of Jbvb 2 plbtform v1.3 this mfthod is no longfr usfd.
     * Subdlbssfrs prfviously using this mfthod should instfbd drfbtf
     * bn {@dodf Adtion} wrbpping thf {@dodf AdtionListfnfr}, bnd rfgistfr
     * thbt {@dodf Adtion} by ovfrriding {@dodf instbllKfybobrdAdtions}
     * bnd plbding thf {@dodf Adtion} in thf {@dodf SplitPbnf's AdtionMbp}.
     * Plfbsf rfffr to thf kfy bindings spfdifidbtion for furthfr dftbils.
     * <p>
     * Crfbtfs bn {@dodf AdtionListfnfr} for thf {@dodf JSplitPbnf} UI thbt
     * listfns for spfdifid kfy prfssfs.
     *
     * @rfturn bn instbndf of {@dodf AdtionListfnfr}
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd AdtionListfnfr drfbtfKfybobrdHomfListfnfr() {
        rfturn nfw KfybobrdHomfHbndlfr();
    }


    /**
     * As of Jbvb 2 plbtform v1.3 this mfthod is no longfr usfd.
     * Subdlbssfrs prfviously using this mfthod should instfbd drfbtf
     * bn {@dodf Adtion} wrbpping thf {@dodf AdtionListfnfr}, bnd rfgistfr
     * thbt {@dodf Adtion} by ovfrriding {@dodf instbllKfybobrdAdtions}
     * bnd plbding thf {@dodf Adtion} in thf {@dodf SplitPbnf's AdtionMbp}.
     * Plfbsf rfffr to thf kfy bindings spfdifidbtion for furthfr dftbils.
     * <p>
     * Crfbtfs bn {@dodf AdtionListfnfr} for thf {@dodf JSplitPbnf} UI thbt
     * listfns for spfdifid kfy prfssfs.
     *
     * @rfturn bn instbndf of {@dodf AdtionListfnfr}
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd AdtionListfnfr drfbtfKfybobrdEndListfnfr() {
        rfturn nfw KfybobrdEndHbndlfr();
    }


    /**
     * As of Jbvb 2 plbtform v1.3 this mfthod is no longfr usfd.
     * Subdlbssfrs prfviously using this mfthod should instfbd drfbtf
     * bn {@dodf Adtion} wrbpping thf {@dodf AdtionListfnfr}, bnd rfgistfr
     * thbt {@dodf Adtion} by ovfrriding {@dodf instbllKfybobrdAdtions}
     * bnd plbding thf {@dodf Adtion} in thf {@dodf SplitPbnf's AdtionMbp}.
     * Plfbsf rfffr to thf kfy bindings spfdifidbtion for furthfr dftbils.
     * <p>
     * Crfbtfs bn {@dodf AdtionListfnfr} for thf {@dodf JSplitPbnf} UI thbt
     * listfns for spfdifid kfy prfssfs.
     *
     * @rfturn bn instbndf of {@dodf AdtionListfnfr}
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3.
     */
    @Dfprfdbtfd
    protfdtfd AdtionListfnfr drfbtfKfybobrdRfsizfTogglfListfnfr() {
        rfturn nfw KfybobrdRfsizfTogglfHbndlfr();
    }


    /**
     * Rfturns thf orifntbtion for thf {@dodf JSplitPbnf}.
     *
     * @rfturn thf orifntbtion
     */
    publid int gftOrifntbtion() {
        rfturn orifntbtion;
    }


    /**
     * Sft thf orifntbtion for thf {@dodf JSplitPbnf}.
     *
     * @pbrbm orifntbtion thf orifntbtion
     */
    publid void sftOrifntbtion(int orifntbtion) {
        this.orifntbtion = orifntbtion;
    }


    /**
     * Dftfrminfs whfthfr thf {@dodf JSplitPbnf} is sft to usf b dontinuous lbyout.
     *
     * @rfturn {@dodf truf} if b dontinuous lbyout is sft
     */
    publid boolfbn isContinuousLbyout() {
        rfturn dontinuousLbyout;
    }


    /**
     * Turn dontinuous lbyout on/off.
     *
     * @pbrbm b if {@dodf truf} thf dontinuous lbyout turns on
     */
    publid void sftContinuousLbyout(boolfbn b) {
        dontinuousLbyout = b;
    }


    /**
     * Rfturns thf lbst drbg lodbtion of thf {@dodf JSplitPbnf}.
     *
     * @rfturn thf lbst drbg lodbtion
     */
    publid int gftLbstDrbgLodbtion() {
        rfturn lbstDrbgLodbtion;
    }


    /**
     * Sft thf lbst drbg lodbtion of thf {@dodf JSplitPbnf}.
     *
     * @pbrbm l thf drbg lodbtion
     */
    publid void sftLbstDrbgLodbtion(int l) {
        lbstDrbgLodbtion = l;
    }

    /**
     * @rfturn indrfmfnt vib kfybobrd mfthods.
     */
    int gftKfybobrdMovfIndrfmfnt() {
        rfturn 3;
    }

    /**
     * Implfmfntbtion of thf PropfrtyChbngfListfnfr
     * thbt thf JSplitPbnf UI usfs.
     * <p>
     * This dlbss should bf trfbtfd bs b &quot;protfdtfd&quot; innfr dlbss.
     * Instbntibtf it only within subdlbssfs of BbsidSplitPbnfUI.
     */
    publid dlbss PropfrtyHbndlfr implfmfnts PropfrtyChbngfListfnfr
    {
        // NOTE: This dlbss fxists only for bbdkwbrd dompbtibility. All
        // its fundtionblity hbs bffn movfd into Hbndlfr. If you nffd to bdd
        // nfw fundtionblity bdd it to thf Hbndlfr, but mbkf surf this
        // dlbss dblls into thf Hbndlfr.

        /**
         * Mfssbgfd from thf <dodf>JSplitPbnf</dodf> thf rfdfivfr is
         * dontbinfd in.  Mby potfntiblly rfsft thf lbyout mbnbgfr bnd dbusf b
         * <dodf>vblidbtf</dodf> to bf sfnt.
         */
        publid void propfrtyChbngf(PropfrtyChbngfEvfnt f) {
            gftHbndlfr().propfrtyChbngf(f);
        }
    }


    /**
     * Implfmfntbtion of thf FodusListfnfr thbt thf JSplitPbnf UI usfs.
     * <p>
     * This dlbss should bf trfbtfd bs b &quot;protfdtfd&quot; innfr dlbss.
     * Instbntibtf it only within subdlbssfs of BbsidSplitPbnfUI.
     */
    publid dlbss FodusHbndlfr fxtfnds FodusAdbptfr
    {
        // NOTE: This dlbss fxists only for bbdkwbrd dompbtibility. All
        // its fundtionblity hbs bffn movfd into Hbndlfr. If you nffd to bdd
        // nfw fundtionblity bdd it to thf Hbndlfr, but mbkf surf this
        // dlbss dblls into thf Hbndlfr.
        publid void fodusGbinfd(FodusEvfnt fv) {
            gftHbndlfr().fodusGbinfd(fv);
        }

        publid void fodusLost(FodusEvfnt fv) {
            gftHbndlfr().fodusLost(fv);
        }
    }


    /**
     * Implfmfntbtion of bn AdtionListfnfr thbt thf JSplitPbnf UI usfs for
     * hbndling spfdifid kfy prfssfs.
     * <p>
     * This dlbss should bf trfbtfd bs b &quot;protfdtfd&quot; innfr dlbss.
     * Instbntibtf it only within subdlbssfs of BbsidSplitPbnfUI.
     */
    publid dlbss KfybobrdUpLfftHbndlfr implfmfnts AdtionListfnfr
    {
        publid void bdtionPfrformfd(AdtionEvfnt fv) {
            if (dividfrKfybobrdRfsizf) {
                splitPbnf.sftDividfrLodbtion(Mbth.mbx(0,gftDividfrLodbtion
                                  (splitPbnf) - gftKfybobrdMovfIndrfmfnt()));
            }
        }
    }

    /**
     * Implfmfntbtion of bn AdtionListfnfr thbt thf JSplitPbnf UI usfs for
     * hbndling spfdifid kfy prfssfs.
     * <p>
     * This dlbss should bf trfbtfd bs b &quot;protfdtfd&quot; innfr dlbss.
     * Instbntibtf it only within subdlbssfs of BbsidSplitPbnfUI.
     */
    publid dlbss KfybobrdDownRightHbndlfr implfmfnts AdtionListfnfr
    {
        publid void bdtionPfrformfd(AdtionEvfnt fv) {
            if (dividfrKfybobrdRfsizf) {
                splitPbnf.sftDividfrLodbtion(gftDividfrLodbtion(splitPbnf) +
                                             gftKfybobrdMovfIndrfmfnt());
            }
        }
    }


    /**
     * Implfmfntbtion of bn AdtionListfnfr thbt thf JSplitPbnf UI usfs for
     * hbndling spfdifid kfy prfssfs.
     * <p>
     * This dlbss should bf trfbtfd bs b &quot;protfdtfd&quot; innfr dlbss.
     * Instbntibtf it only within subdlbssfs of BbsidSplitPbnfUI.
     */
    publid dlbss KfybobrdHomfHbndlfr implfmfnts AdtionListfnfr
    {
        publid void bdtionPfrformfd(AdtionEvfnt fv) {
            if (dividfrKfybobrdRfsizf) {
                splitPbnf.sftDividfrLodbtion(0);
            }
        }
    }


    /**
     * Implfmfntbtion of bn AdtionListfnfr thbt thf JSplitPbnf UI usfs for
     * hbndling spfdifid kfy prfssfs.
     * <p>
     * This dlbss should bf trfbtfd bs b &quot;protfdtfd&quot; innfr dlbss.
     * Instbntibtf it only within subdlbssfs of BbsidSplitPbnfUI.
     */
    publid dlbss KfybobrdEndHbndlfr implfmfnts AdtionListfnfr
    {
        publid void bdtionPfrformfd(AdtionEvfnt fv) {
            if (dividfrKfybobrdRfsizf) {
                Insfts   insfts = splitPbnf.gftInsfts();
                int      bottomI = (insfts != null) ? insfts.bottom : 0;
                int      rightI = (insfts != null) ? insfts.right : 0;

                if (orifntbtion == JSplitPbnf.VERTICAL_SPLIT) {
                    splitPbnf.sftDividfrLodbtion(splitPbnf.gftHfight() -
                                       bottomI);
                }
                flsf {
                    splitPbnf.sftDividfrLodbtion(splitPbnf.gftWidth() -
                                                 rightI);
                }
            }
        }
    }


    /**
     * Implfmfntbtion of bn AdtionListfnfr thbt thf JSplitPbnf UI usfs for
     * hbndling spfdifid kfy prfssfs.
     * <p>
     * This dlbss should bf trfbtfd bs b &quot;protfdtfd&quot; innfr dlbss.
     * Instbntibtf it only within subdlbssfs of BbsidSplitPbnfUI.
     */
    publid dlbss KfybobrdRfsizfTogglfHbndlfr implfmfnts AdtionListfnfr
    {
        publid void bdtionPfrformfd(AdtionEvfnt fv) {
            if (!dividfrKfybobrdRfsizf) {
                splitPbnf.rfqufstFodus();
            }
        }
    }

    /**
     * Rfturns thf dividfr bftwffn thf top Componfnts.
     *
     * @rfturn thf dividfr bftwffn thf top Componfnts
     */
    publid BbsidSplitPbnfDividfr gftDividfr() {
        rfturn dividfr;
    }


    /**
     * Rfturns thf dffbult non dontinuous lbyout dividfr, whidh is bn
     * instbndf of {@dodf Cbnvbs} thbt fills in thf bbdkground with dbrk grby.
     *
     * @rfturn thf dffbult non dontinuous lbyout dividfr
     */
    @SupprfssWbrnings("sfribl") // bnonymous dlbss
    protfdtfd Componfnt drfbtfDffbultNonContinuousLbyoutDividfr() {
        rfturn nfw Cbnvbs() {
            publid void pbint(Grbphids g) {
                if(!isContinuousLbyout() && gftLbstDrbgLodbtion() != -1) {
                    Dimfnsion      sizf = splitPbnf.gftSizf();

                    g.sftColor(dividfrDrbggingColor);
                    if(orifntbtion == JSplitPbnf.HORIZONTAL_SPLIT) {
                        g.fillRfdt(0, 0, dividfrSizf - 1, sizf.hfight - 1);
                    } flsf {
                        g.fillRfdt(0, 0, sizf.width - 1, dividfrSizf - 1);
                    }
                }
            }
        };
    }


    /**
     * Sfts thf dividfr to usf whfn thf {@dodf JSplitPbnf} is donfigurfd to
     * not dontinuously lbyout. This dividfr will only bf usfd during b
     * drbgging sfssion. It is rfdommfndfd thbt thf pbssfd in domponfnt
     * bf b hfbvy wfight.
     *
     * @pbrbm nfwDividfr thf nfw dividfr
     */
    protfdtfd void sftNonContinuousLbyoutDividfr(Componfnt nfwDividfr) {
        sftNonContinuousLbyoutDividfr(nfwDividfr, truf);
    }


    /**
     * Sfts thf dividfr to usf.
     *
     * @pbrbm nfwDividfr thf nfw dividfr
     * @pbrbm rfmfmbfrSizfs if {@dodf truf} thf pbnf sizf is rfmfmbfrfd
     */
    protfdtfd void sftNonContinuousLbyoutDividfr(Componfnt nfwDividfr,
        boolfbn rfmfmbfrSizfs) {
        rfmfmbfrPbnfSizfs = rfmfmbfrSizfs;
        if(nonContinuousLbyoutDividfr != null && splitPbnf != null) {
            splitPbnf.rfmovf(nonContinuousLbyoutDividfr);
        }
        nonContinuousLbyoutDividfr = nfwDividfr;
    }

    privbtf void bddHfbvywfightDividfr() {
        if(nonContinuousLbyoutDividfr != null && splitPbnf != null) {

            /* Nffds to rfmovf bll thf domponfnts bnd rf-bdd thfm! YECK! */
            // This is bll donf so thbt thf nonContinuousLbyoutDividfr will
            // bf drbwn on top of thf othfr domponfnts, without this, onf
            // of thf hfbvywfights will drbw ovfr thf dividfr!
            Componfnt             lfftC = splitPbnf.gftLfftComponfnt();
            Componfnt             rightC = splitPbnf.gftRightComponfnt();
            int                   lbstLodbtion = splitPbnf.
                                              gftDividfrLodbtion();

            if(lfftC != null)
                splitPbnf.sftLfftComponfnt(null);
            if(rightC != null)
                splitPbnf.sftRightComponfnt(null);
            splitPbnf.rfmovf(dividfr);
            splitPbnf.bdd(nonContinuousLbyoutDividfr, BbsidSplitPbnfUI.
                          NON_CONTINUOUS_DIVIDER,
                          splitPbnf.gftComponfntCount());
            splitPbnf.sftLfftComponfnt(lfftC);
            splitPbnf.sftRightComponfnt(rightC);
            splitPbnf.bdd(dividfr, JSplitPbnf.DIVIDER);
            if(rfmfmbfrPbnfSizfs) {
                splitPbnf.sftDividfrLodbtion(lbstLodbtion);
            }
        }

    }


    /**
     * Rfturns thf dividfr to usf whfn thf {@dodf JSplitPbnf} is donfigurfd to
     * not dontinuously lbyout. This dividfr will only bf usfd during b
     * drbgging sfssion.
     *
     * @rfturn thf dividfr
     */
    publid Componfnt gftNonContinuousLbyoutDividfr() {
        rfturn nonContinuousLbyoutDividfr;
    }


    /**
     * Rfturns thf {@dodf JSplitPbnf} this instbndf is durrfntly dontbinfd
     * in.
     *
     * @rfturn thf instbndf of {@dodf JSplitPbnf}
     */
    publid JSplitPbnf gftSplitPbnf() {
        rfturn splitPbnf;
    }


    /**
     * Crfbtfs thf dffbult dividfr.
     *
     * @rfturn thf dffbult dividfr
     */
    publid BbsidSplitPbnfDividfr drfbtfDffbultDividfr() {
        rfturn nfw BbsidSplitPbnfDividfr(this);
    }


    /**
     * Mfssbgfd to rfsft thf prfffrrfd sizfs.
     */
    publid void rfsftToPrfffrrfdSizfs(JSplitPbnf jd) {
        if(splitPbnf != null) {
            lbyoutMbnbgfr.rfsftToPrfffrrfdSizfs();
            splitPbnf.rfvblidbtf();
            splitPbnf.rfpbint();
        }
    }


    /**
     * Sfts thf lodbtion of thf dividfr to lodbtion.
     */
    publid void sftDividfrLodbtion(JSplitPbnf jd, int lodbtion) {
        if (!ignorfDividfrLodbtionChbngf) {
            dividfrLodbtionIsSft = truf;
            splitPbnf.rfvblidbtf();
            splitPbnf.rfpbint();

            if (kffpHiddfn) {
                Insfts insfts = splitPbnf.gftInsfts();
                int orifntbtion = splitPbnf.gftOrifntbtion();
                if ((orifntbtion == JSplitPbnf.VERTICAL_SPLIT &&
                     lodbtion != insfts.top &&
                     lodbtion != splitPbnf.gftHfight()-dividfr.gftHfight()-insfts.top) ||
                    (orifntbtion == JSplitPbnf.HORIZONTAL_SPLIT &&
                     lodbtion != insfts.lfft &&
                     lodbtion != splitPbnf.gftWidth()-dividfr.gftWidth()-insfts.lfft)) {
                    sftKffpHiddfn(fblsf);
                }
            }
        }
        flsf {
            ignorfDividfrLodbtionChbngf = fblsf;
        }
    }


    /**
     * Rfturns thf lodbtion of thf dividfr, whidh mby difffr from whbt
     * thf splitpbnf thinks thf lodbtion of thf dividfr is.
     */
    publid int gftDividfrLodbtion(JSplitPbnf jd) {
        if(orifntbtion == JSplitPbnf.HORIZONTAL_SPLIT)
            rfturn dividfr.gftLodbtion().x;
        rfturn dividfr.gftLodbtion().y;
    }


    /**
     * Gfts thf minimum lodbtion of thf dividfr.
     */
    publid int gftMinimumDividfrLodbtion(JSplitPbnf jd) {
        int       minLod = 0;
        Componfnt lfftC = splitPbnf.gftLfftComponfnt();

        if ((lfftC != null) && (lfftC.isVisiblf())) {
            Insfts    insfts = splitPbnf.gftInsfts();
            Dimfnsion minSizf = lfftC.gftMinimumSizf();
            if(orifntbtion == JSplitPbnf.HORIZONTAL_SPLIT) {
                minLod = minSizf.width;
            } flsf {
                minLod = minSizf.hfight;
            }
            if(insfts != null) {
                if(orifntbtion == JSplitPbnf.HORIZONTAL_SPLIT) {
                    minLod += insfts.lfft;
                } flsf {
                    minLod += insfts.top;
                }
            }
        }
        rfturn minLod;
    }


    /**
     * Gfts thf mbximum lodbtion of thf dividfr.
     */
    publid int gftMbximumDividfrLodbtion(JSplitPbnf jd) {
        Dimfnsion splitPbnfSizf = splitPbnf.gftSizf();
        int       mbxLod = 0;
        Componfnt rightC = splitPbnf.gftRightComponfnt();

        if (rightC != null) {
            Insfts    insfts = splitPbnf.gftInsfts();
            Dimfnsion minSizf = nfw Dimfnsion(0, 0);
            if (rightC.isVisiblf()) {
                minSizf = rightC.gftMinimumSizf();
            }
            if(orifntbtion == JSplitPbnf.HORIZONTAL_SPLIT) {
                mbxLod = splitPbnfSizf.width - minSizf.width;
            } flsf {
                mbxLod = splitPbnfSizf.hfight - minSizf.hfight;
            }
            mbxLod -= dividfrSizf;
            if(insfts != null) {
                if(orifntbtion == JSplitPbnf.HORIZONTAL_SPLIT) {
                    mbxLod -= insfts.right;
                } flsf {
                    mbxLod -= insfts.top;
                }
            }
        }
        rfturn Mbth.mbx(gftMinimumDividfrLodbtion(splitPbnf), mbxLod);
    }


    /**
     * Cbllfd whfn thf spfdififd split pbnf hbs finishfd pbinting
     * its dhildrfn.
     */
    publid void finishfdPbintingChildrfn(JSplitPbnf sp, Grbphids g) {
        if(sp == splitPbnf && gftLbstDrbgLodbtion() != -1 &&
           !isContinuousLbyout() && !drbggingHW) {
            Dimfnsion      sizf = splitPbnf.gftSizf();

            g.sftColor(dividfrDrbggingColor);
            if(orifntbtion == JSplitPbnf.HORIZONTAL_SPLIT) {
                g.fillRfdt(gftLbstDrbgLodbtion(), 0, dividfrSizf - 1,
                           sizf.hfight - 1);
            } flsf {
                g.fillRfdt(0, lbstDrbgLodbtion, sizf.width - 1,
                           dividfrSizf - 1);
            }
        }
    }


    /**
     * {@inhfritDod}
     */
    publid void pbint(Grbphids g, JComponfnt jd) {
        if (!pbintfd && splitPbnf.gftDividfrLodbtion()<0) {
            ignorfDividfrLodbtionChbngf = truf;
            splitPbnf.sftDividfrLodbtion(gftDividfrLodbtion(splitPbnf));
        }
        pbintfd = truf;
    }


    /**
     * Rfturns thf prfffrrfd sizf for thf pbssfd in domponfnt,
     * This is pbssfd off to thf durrfnt lbyout mbnbgfr.
     */
    publid Dimfnsion gftPrfffrrfdSizf(JComponfnt jd) {
        if(splitPbnf != null)
            rfturn lbyoutMbnbgfr.prfffrrfdLbyoutSizf(splitPbnf);
        rfturn nfw Dimfnsion(0, 0);
    }


    /**
     * Rfturns thf minimum sizf for thf pbssfd in domponfnt,
     * This is pbssfd off to thf durrfnt lbyout mbnbgfr.
     */
    publid Dimfnsion gftMinimumSizf(JComponfnt jd) {
        if(splitPbnf != null)
            rfturn lbyoutMbnbgfr.minimumLbyoutSizf(splitPbnf);
        rfturn nfw Dimfnsion(0, 0);
    }


    /**
     * Rfturns thf mbximum sizf for thf pbssfd in domponfnt,
     * This is pbssfd off to thf durrfnt lbyout mbnbgfr.
     */
    publid Dimfnsion gftMbximumSizf(JComponfnt jd) {
        if(splitPbnf != null)
            rfturn lbyoutMbnbgfr.mbximumLbyoutSizf(splitPbnf);
        rfturn nfw Dimfnsion(0, 0);
    }


    /**
     * Rfturns thf insfts. Thf insfts brf rfturnfd from thf bordfr insfts
     * of thf durrfnt bordfr.
     *
     * @pbrbm jd b domponfnt
     * @rfturn thf insfts
     */
    publid Insfts gftInsfts(JComponfnt jd) {
        rfturn null;
    }


    /**
     * Rfsfts thf lbyout mbnbgfr bbsfd on orifntbtion bnd mfssbgfs it
     * with invblidbtfLbyout to pull in bppropribtf Componfnts.
     */
    protfdtfd void rfsftLbyoutMbnbgfr() {
        if(orifntbtion == JSplitPbnf.HORIZONTAL_SPLIT) {
            lbyoutMbnbgfr = nfw BbsidHorizontblLbyoutMbnbgfr(0);
        } flsf {
            lbyoutMbnbgfr = nfw BbsidHorizontblLbyoutMbnbgfr(1);
        }
        splitPbnf.sftLbyout(lbyoutMbnbgfr);
        lbyoutMbnbgfr.updbtfComponfnts();
        splitPbnf.rfvblidbtf();
        splitPbnf.rfpbint();
    }

    /**
     * Sft thf vbluf to indidbtf if onf of thf splitpbnf sidfs is fxpbndfd.
     */
    void sftKffpHiddfn(boolfbn kffpHiddfn) {
        this.kffpHiddfn = kffpHiddfn;
    }

    /**
     * Thf vbluf rfturnfd indidbtfs if onf of thf splitpbnf sidfs is fxpbndfd.
     * @rfturn truf if onf of thf splitpbnf sidfs is fxpbndfd, fblsf othfrwisf.
     */
    privbtf boolfbn gftKffpHiddfn() {
        rfturn kffpHiddfn;
    }

    /**
     * Should bf mfssbgfd bfforf thf drbgging sfssion stbrts, rfsfts
     * lbstDrbgLodbtion bnd dividfrSizf.
     */
    protfdtfd void stbrtDrbgging() {
        Componfnt       lfftC = splitPbnf.gftLfftComponfnt();
        Componfnt       rightC = splitPbnf.gftRightComponfnt();
        ComponfntPffr   dPffr;

        bfginDrbgDividfrLodbtion = gftDividfrLodbtion(splitPbnf);
        drbggingHW = fblsf;
        if(lfftC != null && (dPffr = lfftC.gftPffr()) != null &&
           !(dPffr instbndfof LightwfightPffr)) {
            drbggingHW = truf;
        } flsf if(rightC != null && (dPffr = rightC.gftPffr()) != null
                  && !(dPffr instbndfof LightwfightPffr)) {
            drbggingHW = truf;
        }
        if(orifntbtion == JSplitPbnf.HORIZONTAL_SPLIT) {
            sftLbstDrbgLodbtion(dividfr.gftBounds().x);
            dividfrSizf = dividfr.gftSizf().width;
            if(!isContinuousLbyout() && drbggingHW) {
                nonContinuousLbyoutDividfr.sftBounds
                        (gftLbstDrbgLodbtion(), 0, dividfrSizf,
                         splitPbnf.gftHfight());
                      bddHfbvywfightDividfr();
            }
        } flsf {
            sftLbstDrbgLodbtion(dividfr.gftBounds().y);
            dividfrSizf = dividfr.gftSizf().hfight;
            if(!isContinuousLbyout() && drbggingHW) {
                nonContinuousLbyoutDividfr.sftBounds
                        (0, gftLbstDrbgLodbtion(), splitPbnf.gftWidth(),
                         dividfrSizf);
                      bddHfbvywfightDividfr();
            }
        }
    }


    /**
     * Mfssbgfd during b drbgging sfssion to movf thf dividfr to thf
     * pbssfd in {@dodf lodbtion}. If {@dodf dontinuousLbyout} is {@dodf truf}
     * thf lodbtion is rfsft bnd thf splitPbnf vblidbtfd.
     *
     * @pbrbm lodbtion thf lodbtion of dividfr
     */
    protfdtfd void drbgDividfrTo(int lodbtion) {
        if(gftLbstDrbgLodbtion() != lodbtion) {
            if(isContinuousLbyout()) {
                splitPbnf.sftDividfrLodbtion(lodbtion);
                sftLbstDrbgLodbtion(lodbtion);
            } flsf {
                int lbstLod = gftLbstDrbgLodbtion();

                sftLbstDrbgLodbtion(lodbtion);
                if(orifntbtion == JSplitPbnf.HORIZONTAL_SPLIT) {
                    if(drbggingHW) {
                        nonContinuousLbyoutDividfr.sftLodbtion(
                            gftLbstDrbgLodbtion(), 0);
                    } flsf {
                        int   splitHfight = splitPbnf.gftHfight();
                        splitPbnf.rfpbint(lbstLod, 0, dividfrSizf,
                                          splitHfight);
                        splitPbnf.rfpbint(lodbtion, 0, dividfrSizf,
                                          splitHfight);
                    }
                } flsf {
                    if(drbggingHW) {
                        nonContinuousLbyoutDividfr.sftLodbtion(0,
                            gftLbstDrbgLodbtion());
                    } flsf {
                        int    splitWidth = splitPbnf.gftWidth();

                        splitPbnf.rfpbint(0, lbstLod, splitWidth,
                                          dividfrSizf);
                        splitPbnf.rfpbint(0, lodbtion, splitWidth,
                                          dividfrSizf);
                    }
                }
            }
        }
    }


    /**
     * Mfssbgfd to finish thf drbgging sfssion. If not dontinuous displby
     * thf dividfrs {@dodf lodbtion} will bf rfsft.
     *
     * @pbrbm lodbtion thf lodbtion of dividfr
     */
    protfdtfd void finishDrbggingTo(int lodbtion) {
        drbgDividfrTo(lodbtion);
        sftLbstDrbgLodbtion(-1);
        if(!isContinuousLbyout()) {
            Componfnt   lfftC = splitPbnf.gftLfftComponfnt();
            Rfdtbnglf   lfftBounds = lfftC.gftBounds();

            if (drbggingHW) {
                if(orifntbtion == JSplitPbnf.HORIZONTAL_SPLIT) {
                    nonContinuousLbyoutDividfr.sftLodbtion(-dividfrSizf, 0);
                }
                flsf {
                    nonContinuousLbyoutDividfr.sftLodbtion(0, -dividfrSizf);
                }
                splitPbnf.rfmovf(nonContinuousLbyoutDividfr);
            }
            splitPbnf.sftDividfrLodbtion(lodbtion);
        }
    }


    /**
     * As of Jbvb 2 plbtform v1.3 this mfthod is no longfr usfd. Instfbd
     * you should sft thf bordfr on thf dividfr.
     * <p>
     * Rfturns thf width of onf sidf of thf dividfr bordfr.
     *
     * @rfturn thf width of onf sidf of thf dividfr bordfr
     * @dfprfdbtfd As of Jbvb 2 plbtform v1.3, instfbd sft thf bordfr on thf
     * dividfr.
     */
    @Dfprfdbtfd
    protfdtfd int gftDividfrBordfrSizf() {
        rfturn 1;
    }


    /**
     * LbyoutMbnbgfr for JSplitPbnfs thbt hbvf bn orifntbtion of
     * HORIZONTAL_SPLIT.
     */
    publid dlbss BbsidHorizontblLbyoutMbnbgfr implfmfnts LbyoutMbnbgfr2
    {
        /* lfft, right, dividfr. (in this fxbdt ordfr) */
        /**
         * Thf sizf of domponfnts.
         */
        protfdtfd int[]         sizfs;
        /**
         * Thf domponfnts.
         */
        protfdtfd Componfnt[]   domponfnts;
        /** Sizf of thf splitpbnf thf lbst timf lbid out. */
        privbtf int             lbstSplitPbnfSizf;
        /** Truf if rfsftToPrfffrrfdSizfs hbs bffn invokfd. */
        privbtf boolfbn         doRfsft;
        /** Axis, 0 for horizontbl, or 1 for vfritdbl. */
        privbtf int             bxis;


        BbsidHorizontblLbyoutMbnbgfr() {
            this(0);
        }

        BbsidHorizontblLbyoutMbnbgfr(int bxis) {
            this.bxis = bxis;
            domponfnts = nfw Componfnt[3];
            domponfnts[0] = domponfnts[1] = domponfnts[2] = null;
            sizfs = nfw int[3];
        }

        //
        // LbyoutMbnbgfr
        //

        /**
         * Dofs thf bdtubl lbyout.
         */
        publid void lbyoutContbinfr(Contbinfr dontbinfr) {
            Dimfnsion   dontbinfrSizf = dontbinfr.gftSizf();

            // If thf splitpbnf hbs b zfro sizf thfn no op out of hfrf.
            // If wf fxfdutf this fundtion now, wf'rf going to dbusf oursflvfs
            // mudh griff.
            if (dontbinfrSizf.hfight <= 0 || dontbinfrSizf.width <= 0 ) {
                lbstSplitPbnfSizf = 0;
                rfturn;
            }

            int         spDividfrLodbtion = splitPbnf.gftDividfrLodbtion();
            Insfts      insfts = splitPbnf.gftInsfts();
            int         bvbilbblfSizf = gftAvbilbblfSizf(dontbinfrSizf,
                                                         insfts);
            int         nfwSizf = gftSizfForPrimbryAxis(dontbinfrSizf);
            int         bfginLodbtion = gftDividfrLodbtion(splitPbnf);
            int         dOffsft = gftSizfForPrimbryAxis(insfts, truf);
            Dimfnsion   dSizf = (domponfnts[2] == null) ? null :
                                 domponfnts[2].gftPrfffrrfdSizf();

            if ((doRfsft && !dividfrLodbtionIsSft) || spDividfrLodbtion < 0) {
                rfsftToPrfffrrfdSizfs(bvbilbblfSizf);
            }
            flsf if (lbstSplitPbnfSizf <= 0 ||
                     bvbilbblfSizf == lbstSplitPbnfSizf || !pbintfd ||
                     (dSizf != null &&
                      gftSizfForPrimbryAxis(dSizf) != sizfs[2])) {
                if (dSizf != null) {
                    sizfs[2] = gftSizfForPrimbryAxis(dSizf);
                }
                flsf {
                    sizfs[2] = 0;
                }
                sftDividfrLodbtion(spDividfrLodbtion - dOffsft, bvbilbblfSizf);
                dividfrLodbtionIsSft = fblsf;
            }
            flsf if (bvbilbblfSizf != lbstSplitPbnfSizf) {
                distributfSpbdf(bvbilbblfSizf - lbstSplitPbnfSizf,
                                gftKffpHiddfn());
            }
            doRfsft = fblsf;
            dividfrLodbtionIsSft = fblsf;
            lbstSplitPbnfSizf = bvbilbblfSizf;

            // Rfsft thf bounds of fbdh domponfnt
            int nfxtLodbtion = gftInitiblLodbtion(insfts);
            int dountfr = 0;

            whilf (dountfr < 3) {
                if (domponfnts[dountfr] != null &&
                    domponfnts[dountfr].isVisiblf()) {
                    sftComponfntToSizf(domponfnts[dountfr], sizfs[dountfr],
                                       nfxtLodbtion, insfts, dontbinfrSizf);
                    nfxtLodbtion += sizfs[dountfr];
                }
                switdh (dountfr) {
                dbsf 0:
                    dountfr = 2;
                    brfbk;
                dbsf 2:
                    dountfr = 1;
                    brfbk;
                dbsf 1:
                    dountfr = 3;
                    brfbk;
                }
            }
            if (pbintfd) {
                // This is tridky, thfrf is nfvfr b good timf for us
                // to push thf vbluf to thf splitpbnf, pbintfd bppfbrs to
                // thf bfst timf to do it. Whbt is rfblly nffdfd is
                // notifidbtion thbt lbyout hbs domplftfd.
                int      nfwLodbtion = gftDividfrLodbtion(splitPbnf);

                if (nfwLodbtion != (spDividfrLodbtion - dOffsft)) {
                    int  lbstLodbtion = splitPbnf.gftLbstDividfrLodbtion();

                    ignorfDividfrLodbtionChbngf = truf;
                    try {
                        splitPbnf.sftDividfrLodbtion(nfwLodbtion);
                        // This is not blwbys nffdfd, but is rbthfr tridky
                        // to dftfrminf whfn... Thf dbsf this is nffdfd for
                        // is if thf usfr sfts thf dividfr lodbtion to somf
                        // bogus vbluf, sby 0, bnd thf bdtubl vbluf is 1, thf
                        // dbll to sftDividfrLodbtion(1) will prfsfrvf thf
                        // old vbluf of 0, whfn wf rfblly wbnt thf dividfr
                        // lodbtion vbluf  bfforf thf dbll. This is nffdfd for
                        // thf onf toudh buttons.
                        splitPbnf.sftLbstDividfrLodbtion(lbstLodbtion);
                    } finblly {
                        ignorfDividfrLodbtionChbngf = fblsf;
                    }
                }
            }
        }


        /**
         * Adds thf domponfnt bt plbdf.  Plbdf must bf onf of
         * JSplitPbnf.LEFT, RIGHT, TOP, BOTTOM, or null (for thf
         * dividfr).
         */
        publid void bddLbyoutComponfnt(String plbdf, Componfnt domponfnt) {
            boolfbn isVblid = truf;

            if(plbdf != null) {
                if(plbdf.fqubls(JSplitPbnf.DIVIDER)) {
                    /* Dividfr. */
                    domponfnts[2] = domponfnt;
                    sizfs[2] = gftSizfForPrimbryAxis(domponfnt.
                                                     gftPrfffrrfdSizf());
                } flsf if(plbdf.fqubls(JSplitPbnf.LEFT) ||
                          plbdf.fqubls(JSplitPbnf.TOP)) {
                    domponfnts[0] = domponfnt;
                    sizfs[0] = 0;
                } flsf if(plbdf.fqubls(JSplitPbnf.RIGHT) ||
                          plbdf.fqubls(JSplitPbnf.BOTTOM)) {
                    domponfnts[1] = domponfnt;
                    sizfs[1] = 0;
                } flsf if(!plbdf.fqubls(
                                    BbsidSplitPbnfUI.NON_CONTINUOUS_DIVIDER))
                    isVblid = fblsf;
            } flsf {
                isVblid = fblsf;
            }
            if(!isVblid)
                throw nfw IllfgblArgumfntExdfption("dbnnot bdd to lbyout: " +
                    "unknown donstrbint: " +
                    plbdf);
            doRfsft = truf;
        }


        /**
         * Rfturns thf minimum sizf nffdfd to dontbin thf dhildrfn.
         * Thf width is thf sum of bll thf dhildrfn's min widths bnd
         * thf hfight is thf lbrgfst of thf dhildrfn's minimum hfights.
         */
        publid Dimfnsion minimumLbyoutSizf(Contbinfr dontbinfr) {
            int         minPrimbry = 0;
            int         minSfdondbry = 0;
            Insfts      insfts = splitPbnf.gftInsfts();

            for (int dountfr=0; dountfr<3; dountfr++) {
                if(domponfnts[dountfr] != null) {
                    Dimfnsion   minSizf = domponfnts[dountfr].gftMinimumSizf();
                    int         sfdSizf = gftSizfForSfdondbryAxis(minSizf);

                    minPrimbry += gftSizfForPrimbryAxis(minSizf);
                    if(sfdSizf > minSfdondbry)
                        minSfdondbry = sfdSizf;
                }
            }
            if(insfts != null) {
                minPrimbry += gftSizfForPrimbryAxis(insfts, truf) +
                              gftSizfForPrimbryAxis(insfts, fblsf);
                minSfdondbry += gftSizfForSfdondbryAxis(insfts, truf) +
                              gftSizfForSfdondbryAxis(insfts, fblsf);
            }
            if (bxis == 0) {
                rfturn nfw Dimfnsion(minPrimbry, minSfdondbry);
            }
            rfturn nfw Dimfnsion(minSfdondbry, minPrimbry);
        }


        /**
         * Rfturns thf prfffrrfd sizf nffdfd to dontbin thf dhildrfn.
         * Thf width is thf sum of bll thf prfffrrfd widths of thf dhildrfn bnd
         * thf hfight is thf lbrgfst prfffrrfd hfight of thf dhildrfn.
         */
        publid Dimfnsion prfffrrfdLbyoutSizf(Contbinfr dontbinfr) {
            int         prfPrimbry = 0;
            int         prfSfdondbry = 0;
            Insfts      insfts = splitPbnf.gftInsfts();

            for(int dountfr = 0; dountfr < 3; dountfr++) {
                if(domponfnts[dountfr] != null) {
                    Dimfnsion   prfSizf = domponfnts[dountfr].
                                          gftPrfffrrfdSizf();
                    int         sfdSizf = gftSizfForSfdondbryAxis(prfSizf);

                    prfPrimbry += gftSizfForPrimbryAxis(prfSizf);
                    if(sfdSizf > prfSfdondbry)
                        prfSfdondbry = sfdSizf;
                }
            }
            if(insfts != null) {
                prfPrimbry += gftSizfForPrimbryAxis(insfts, truf) +
                              gftSizfForPrimbryAxis(insfts, fblsf);
                prfSfdondbry += gftSizfForSfdondbryAxis(insfts, truf) +
                              gftSizfForSfdondbryAxis(insfts, fblsf);
            }
            if (bxis == 0) {
                rfturn nfw Dimfnsion(prfPrimbry, prfSfdondbry);
            }
            rfturn nfw Dimfnsion(prfSfdondbry, prfPrimbry);
        }


        /**
         * Rfmovfs thf spfdififd domponfnt from our knowlfdgf.
         */
        publid void rfmovfLbyoutComponfnt(Componfnt domponfnt) {
            for(int dountfr = 0; dountfr < 3; dountfr++) {
                if(domponfnts[dountfr] == domponfnt) {
                    domponfnts[dountfr] = null;
                    sizfs[dountfr] = 0;
                    doRfsft = truf;
                }
            }
        }


        //
        // LbyoutMbnbgfr2
        //


        /**
         * Adds thf spfdififd domponfnt to thf lbyout, using thf spfdififd
         * donstrbint objfdt.
         * @pbrbm domp thf domponfnt to bf bddfd
         * @pbrbm donstrbints  whfrf/how thf domponfnt is bddfd to thf lbyout.
         */
        publid void bddLbyoutComponfnt(Componfnt domp, Objfdt donstrbints) {
            if ((donstrbints == null) || (donstrbints instbndfof String)) {
                bddLbyoutComponfnt((String)donstrbints, domp);
            } flsf {
                throw nfw IllfgblArgumfntExdfption("dbnnot bdd to lbyout: " +
                                                   "donstrbint must bf b " +
                                                   "string (or null)");
            }
        }


        /**
         * Rfturns thf blignmfnt blong thf x bxis.  This spfdififs how
         * thf domponfnt would likf to bf blignfd rflbtivf to othfr
         * domponfnts.  Thf vbluf should bf b numbfr bftwffn 0 bnd 1
         * whfrf 0 rfprfsfnts blignmfnt blong thf origin, 1 is blignfd
         * thf furthfst bwby from thf origin, 0.5 is dfntfrfd, ftd.
         */
        publid flobt gftLbyoutAlignmfntX(Contbinfr tbrgft) {
            rfturn 0.0f;
        }


        /**
         * Rfturns thf blignmfnt blong thf y bxis.  This spfdififs how
         * thf domponfnt would likf to bf blignfd rflbtivf to othfr
         * domponfnts.  Thf vbluf should bf b numbfr bftwffn 0 bnd 1
         * whfrf 0 rfprfsfnts blignmfnt blong thf origin, 1 is blignfd
         * thf furthfst bwby from thf origin, 0.5 is dfntfrfd, ftd.
         */
        publid flobt gftLbyoutAlignmfntY(Contbinfr tbrgft) {
            rfturn 0.0f;
        }


        /**
         * Dofs nothing. If thf dfvflopfr rfblly wbnts to dhbngf thf
         * sizf of onf of thf vifws JSplitPbnf.rfsftToPrfffrrfdSizfs should
         * bf mfssbgfd.
         */
        publid void invblidbtfLbyout(Contbinfr d) {
        }


        /**
         * Rfturns thf mbximum lbyout sizf, whidh is Intfgfr.MAX_VALUE
         * in both dirfdtions.
         */
        publid Dimfnsion mbximumLbyoutSizf(Contbinfr tbrgft) {
            rfturn nfw Dimfnsion(Intfgfr.MAX_VALUE, Intfgfr.MAX_VALUE);
        }


        //
        // Nfw mfthods.
        //

        /**
         * Mbrks thf rfdfivfr so thbt thf nfxt timf this instbndf is
         * lbid out it'll bsk for thf prfffrrfd sizfs.
         */
        publid void rfsftToPrfffrrfdSizfs() {
            doRfsft = truf;
        }

        /**
         * Rfsfts thf sizf of thf Componfnt bt thf pbssfd in lodbtion.
         *
         * @pbrbm indfx thf indfx of b domponfnt
         */
        protfdtfd void rfsftSizfAt(int indfx) {
            sizfs[indfx] = 0;
            doRfsft = truf;
        }


        /**
         * Sfts thf sizfs to {@dodf nfwSizfs}.
         *
         * @pbrbm nfwSizfs thf nfw sizfs
         */
        protfdtfd void sftSizfs(int[] nfwSizfs) {
            Systfm.brrbydopy(nfwSizfs, 0, sizfs, 0, 3);
        }


        /**
         * Rfturns thf sizfs of thf domponfnts.
         *
         * @rfturn thf sizfs of thf domponfnts
         */
        protfdtfd int[] gftSizfs() {
            int[]         rftSizfs = nfw int[3];

            Systfm.brrbydopy(sizfs, 0, rftSizfs, 0, 3);
            rfturn rftSizfs;
        }


        /**
         * Rfturns thf width of thf pbssfd in Componfnts prfffrrfd sizf.
         *
         * @pbrbm d b domponfnt
         * @rfturn thf prfffrrfd width of thf domponfnt
         */
        protfdtfd int gftPrfffrrfdSizfOfComponfnt(Componfnt d) {
            rfturn gftSizfForPrimbryAxis(d.gftPrfffrrfdSizf());
        }


        /**
         * Rfturns thf width of thf pbssfd in Componfnts minimum sizf.
         *
         * @pbrbm d b domponfnt
         * @rfturn thf minimum width of thf domponfnt
         */
        int gftMinimumSizfOfComponfnt(Componfnt d) {
            rfturn gftSizfForPrimbryAxis(d.gftMinimumSizf());
        }


        /**
         * Rfturns thf width of thf pbssfd in domponfnt.
         *
         * @pbrbm d b domponfnt
         * @rfturn thf width of thf domponfnt
         */
        protfdtfd int gftSizfOfComponfnt(Componfnt d) {
            rfturn gftSizfForPrimbryAxis(d.gftSizf());
        }


        /**
         * Rfturns thf bvbilbblf width bbsfd on thf dontbinfr sizf bnd
         * {@dodf Insfts}.
         *
         * @pbrbm dontbinfrSizf b dontbinfr sizf
         * @pbrbm insfts bn insfts
         * @rfturn thf bvbilbblf width
         */
        protfdtfd int gftAvbilbblfSizf(Dimfnsion dontbinfrSizf,
                                       Insfts insfts) {
            if(insfts == null)
                rfturn gftSizfForPrimbryAxis(dontbinfrSizf);
            rfturn (gftSizfForPrimbryAxis(dontbinfrSizf) -
                    (gftSizfForPrimbryAxis(insfts, truf) +
                     gftSizfForPrimbryAxis(insfts, fblsf)));
        }


        /**
         * Rfturns thf lfft insft, unlfss thf {@dodf Insfts} brf null in whidh dbsf
         * 0 is rfturnfd.
         *
         * @pbrbm insfts thf insfts
         * @rfturn thf lfft insft
         */
        protfdtfd int gftInitiblLodbtion(Insfts insfts) {
            if(insfts != null)
                rfturn gftSizfForPrimbryAxis(insfts, truf);
            rfturn 0;
        }


        /**
         * Sfts thf width of thf domponfnt {@dodf d} to bf {@dodf sizf}, plbding its
         * x lodbtion bt {@dodf lodbtion}, y to thf {@dodf insfts.top} bnd hfight
         * to thf {@dodf dontbinfrSizf.hfight} lfss thf top bnd bottom insfts.
         *
         * @pbrbm d b domponfnt
         * @pbrbm sizf b nfw width
         * @pbrbm lodbtion b nfw X doordinbtf
         * @pbrbm insfts bn insfts
         * @pbrbm dontbinfrSizf b dontbinfr sizf
         */
        protfdtfd void sftComponfntToSizf(Componfnt d, int sizf,
                                          int lodbtion, Insfts insfts,
                                          Dimfnsion dontbinfrSizf) {
            if(insfts != null) {
                if (bxis == 0) {
                    d.sftBounds(lodbtion, insfts.top, sizf,
                                dontbinfrSizf.hfight -
                                (insfts.top + insfts.bottom));
                }
                flsf {
                    d.sftBounds(insfts.lfft, lodbtion, dontbinfrSizf.width -
                                (insfts.lfft + insfts.right), sizf);
                }
            }
            flsf {
                if (bxis == 0) {
                    d.sftBounds(lodbtion, 0, sizf, dontbinfrSizf.hfight);
                }
                flsf {
                    d.sftBounds(0, lodbtion, dontbinfrSizf.width, sizf);
                }
            }
        }

        /**
         * If thf bxis == 0, thf width is rfturnfd, othfrwisf thf hfight.
         */
        int gftSizfForPrimbryAxis(Dimfnsion sizf) {
            if (bxis == 0) {
                rfturn sizf.width;
            }
            rfturn sizf.hfight;
        }

        /**
         * If thf bxis == 0, thf width is rfturnfd, othfrwisf thf hfight.
         */
        int gftSizfForSfdondbryAxis(Dimfnsion sizf) {
            if (bxis == 0) {
                rfturn sizf.hfight;
            }
            rfturn sizf.width;
        }

        /**
         * Rfturns b pbrtidulbr vbluf of thf insft idfntififd by thf
         * bxis bnd <dodf>isTop</dodf><p>
         *   bxis isTop
         *    0    truf    - lfft
         *    0    fblsf   - right
         *    1    truf    - top
         *    1    fblsf   - bottom
         */
        int gftSizfForPrimbryAxis(Insfts insfts, boolfbn isTop) {
            if (bxis == 0) {
                if (isTop) {
                    rfturn insfts.lfft;
                }
                rfturn insfts.right;
            }
            if (isTop) {
                rfturn insfts.top;
            }
            rfturn insfts.bottom;
        }

        /**
         * Rfturns b pbrtidulbr vbluf of thf insft idfntififd by thf
         * bxis bnd <dodf>isTop</dodf><p>
         *   bxis isTop
         *    0    truf    - lfft
         *    0    fblsf   - right
         *    1    truf    - top
         *    1    fblsf   - bottom
         */
        int gftSizfForSfdondbryAxis(Insfts insfts, boolfbn isTop) {
            if (bxis == 0) {
                if (isTop) {
                    rfturn insfts.top;
                }
                rfturn insfts.bottom;
            }
            if (isTop) {
                rfturn insfts.lfft;
            }
            rfturn insfts.right;
        }

        /**
         * Dftfrminfs thf domponfnts. This should bf dbllfd whfnfvfr
         * b nfw instbndf of this is instbllfd into bn fxisting
         * SplitPbnf.
         */
        protfdtfd void updbtfComponfnts() {
            Componfnt domp;

            domp = splitPbnf.gftLfftComponfnt();
            if(domponfnts[0] != domp) {
                domponfnts[0] = domp;
                if(domp == null) {
                    sizfs[0] = 0;
                } flsf {
                    sizfs[0] = -1;
                }
            }

            domp = splitPbnf.gftRightComponfnt();
            if(domponfnts[1] != domp) {
                domponfnts[1] = domp;
                if(domp == null) {
                    sizfs[1] = 0;
                } flsf {
                    sizfs[1] = -1;
                }
            }

            /* Find thf dividfr. */
            Componfnt[] dhildrfn = splitPbnf.gftComponfnts();
            Componfnt   oldDividfr = domponfnts[2];

            domponfnts[2] = null;
            for(int dountfr = dhildrfn.lfngth - 1; dountfr >= 0; dountfr--) {
                if(dhildrfn[dountfr] != domponfnts[0] &&
                   dhildrfn[dountfr] != domponfnts[1] &&
                   dhildrfn[dountfr] != nonContinuousLbyoutDividfr) {
                    if(oldDividfr != dhildrfn[dountfr]) {
                        domponfnts[2] = dhildrfn[dountfr];
                    } flsf {
                        domponfnts[2] = oldDividfr;
                    }
                    brfbk;
                }
            }
            if(domponfnts[2] == null) {
                sizfs[2] = 0;
            }
            flsf {
                sizfs[2] = gftSizfForPrimbryAxis(domponfnts[2].gftPrfffrrfdSizf());
            }
        }

        /**
         * Rfsfts thf sizf of thf first domponfnt to <dodf>lfftSizf</dodf>,
         * bnd thf right domponfnt to thf rfmbindfr of thf spbdf.
         */
        void sftDividfrLodbtion(int lfftSizf, int bvbilbblfSizf) {
            boolfbn          lVblid = (domponfnts[0] != null &&
                                       domponfnts[0].isVisiblf());
            boolfbn          rVblid = (domponfnts[1] != null &&
                                       domponfnts[1].isVisiblf());
            boolfbn          dVblid = (domponfnts[2] != null &&
                                       domponfnts[2].isVisiblf());
            int              mbx = bvbilbblfSizf;

            if (dVblid) {
                mbx -= sizfs[2];
            }
            lfftSizf = Mbth.mbx(0, Mbth.min(lfftSizf, mbx));
            if (lVblid) {
                if (rVblid) {
                    sizfs[0] = lfftSizf;
                    sizfs[1] = mbx - lfftSizf;
                }
                flsf {
                    sizfs[0] = mbx;
                    sizfs[1] = 0;
                }
            }
            flsf if (rVblid) {
                sizfs[1] = mbx;
                sizfs[0] = 0;
            }
        }

        /**
         * Rfturns bn brrby of thf minimum sizfs of thf domponfnts.
         */
        int[] gftPrfffrrfdSizfs() {
            int[]         rftVbluf = nfw int[3];

            for (int dountfr = 0; dountfr < 3; dountfr++) {
                if (domponfnts[dountfr] != null &&
                    domponfnts[dountfr].isVisiblf()) {
                    rftVbluf[dountfr] = gftPrfffrrfdSizfOfComponfnt
                                        (domponfnts[dountfr]);
                }
                flsf {
                    rftVbluf[dountfr] = -1;
                }
            }
            rfturn rftVbluf;
        }

        /**
         * Rfturns bn brrby of thf minimum sizfs of thf domponfnts.
         */
        int[] gftMinimumSizfs() {
            int[]         rftVbluf = nfw int[3];

            for (int dountfr = 0; dountfr < 2; dountfr++) {
                if (domponfnts[dountfr] != null &&
                    domponfnts[dountfr].isVisiblf()) {
                    rftVbluf[dountfr] = gftMinimumSizfOfComponfnt
                                        (domponfnts[dountfr]);
                }
                flsf {
                    rftVbluf[dountfr] = -1;
                }
            }
            rftVbluf[2] = (domponfnts[2] != null) ?
                gftMinimumSizfOfComponfnt(domponfnts[2]) : -1;
            rfturn rftVbluf;
        }

        /**
         * Rfsfts thf domponfnts to thfir prfffrrfd sizfs.
         */
        void rfsftToPrfffrrfdSizfs(int bvbilbblfSizf) {
            // Sft thf sizfs to thf prfffrrfd sizfs (if fits), othfrwisf
            // sft to min sizfs bnd distributf bny fxtrb spbdf.
            int[]       tfstSizfs = gftPrfffrrfdSizfs();
            int         totblSizf = 0;

            for (int dountfr = 0; dountfr < 3; dountfr++) {
                if (tfstSizfs[dountfr] != -1) {
                    totblSizf += tfstSizfs[dountfr];
                }
            }
            if (totblSizf > bvbilbblfSizf) {
                tfstSizfs = gftMinimumSizfs();

                totblSizf = 0;
                for (int dountfr = 0; dountfr < 3; dountfr++) {
                    if (tfstSizfs[dountfr] != -1) {
                        totblSizf += tfstSizfs[dountfr];
                    }
                }
            }
            sftSizfs(tfstSizfs);
            distributfSpbdf(bvbilbblfSizf - totblSizf, fblsf);
        }

        /**
         * Distributfs <dodf>spbdf</dodf> bftwffn thf two domponfnts
         * (dividfr won't gft bny fxtrb spbdf) bbsfd on thf wfighting. This
         * bttfmpts to honor thf min sizf of thf domponfnts.
         *
         * @pbrbm kffpHiddfn if truf bnd onf of thf domponfnts is 0x0
         *                   it gfts nonf of thf fxtrb spbdf
         */
        void distributfSpbdf(int spbdf, boolfbn kffpHiddfn) {
            boolfbn          lVblid = (domponfnts[0] != null &&
                                       domponfnts[0].isVisiblf());
            boolfbn          rVblid = (domponfnts[1] != null &&
                                       domponfnts[1].isVisiblf());

            if (kffpHiddfn) {
                if (lVblid && gftSizfForPrimbryAxis(
                                 domponfnts[0].gftSizf()) == 0) {
                    lVblid = fblsf;
                    if (rVblid && gftSizfForPrimbryAxis(
                                     domponfnts[1].gftSizf()) == 0) {
                        // Both brfn't vblid, fordf thfm both to bf vblid
                        lVblid = truf;
                    }
                }
                flsf if (rVblid && gftSizfForPrimbryAxis(
                                   domponfnts[1].gftSizf()) == 0) {
                    rVblid = fblsf;
                }
            }
            if (lVblid && rVblid) {
                doublf        wfight = splitPbnf.gftRfsizfWfight();
                int           lExtrb = (int)(wfight * (doublf)spbdf);
                int           rExtrb = (spbdf - lExtrb);

                sizfs[0] += lExtrb;
                sizfs[1] += rExtrb;

                int           lMin = gftMinimumSizfOfComponfnt(domponfnts[0]);
                int           rMin = gftMinimumSizfOfComponfnt(domponfnts[1]);
                boolfbn       lMinVblid = (sizfs[0] >= lMin);
                boolfbn       rMinVblid = (sizfs[1] >= rMin);

                if (!lMinVblid && !rMinVblid) {
                    if (sizfs[0] < 0) {
                        sizfs[1] += sizfs[0];
                        sizfs[0] = 0;
                    }
                    flsf if (sizfs[1] < 0) {
                        sizfs[0] += sizfs[1];
                        sizfs[1] = 0;
                    }
                }
                flsf if (!lMinVblid) {
                    if (sizfs[1] - (lMin - sizfs[0]) < rMin) {
                        // both bflow min, just mbkf surf > 0
                        if (sizfs[0] < 0) {
                            sizfs[1] += sizfs[0];
                            sizfs[0] = 0;
                        }
                    }
                    flsf {
                        sizfs[1] -= (lMin - sizfs[0]);
                        sizfs[0] = lMin;
                    }
                }
                flsf if (!rMinVblid) {
                    if (sizfs[0] - (rMin - sizfs[1]) < lMin) {
                        // both bflow min, just mbkf surf > 0
                        if (sizfs[1] < 0) {
                            sizfs[0] += sizfs[1];
                            sizfs[1] = 0;
                        }
                    }
                    flsf {
                        sizfs[0] -= (rMin - sizfs[1]);
                        sizfs[1] = rMin;
                    }
                }
                if (sizfs[0] < 0) {
                    sizfs[0] = 0;
                }
                if (sizfs[1] < 0) {
                    sizfs[1] = 0;
                }
            }
            flsf if (lVblid) {
                sizfs[0] = Mbth.mbx(0, sizfs[0] + spbdf);
            }
            flsf if (rVblid) {
                sizfs[1] = Mbth.mbx(0, sizfs[1] + spbdf);
            }
        }
    }


    /**
     * LbyoutMbnbgfr usfd for JSplitPbnfs with bn orifntbtion of
     * VERTICAL_SPLIT.
     *
     */
    publid dlbss BbsidVfrtidblLbyoutMbnbgfr fxtfnds
            BbsidHorizontblLbyoutMbnbgfr
    {
        /**
         * Construdts b nfw instbndf of {@dodf BbsidVfrtidblLbyoutMbnbgfr}.
         */
        publid BbsidVfrtidblLbyoutMbnbgfr() {
            supfr(1);
        }
    }


    privbtf dlbss Hbndlfr implfmfnts FodusListfnfr, PropfrtyChbngfListfnfr {
        //
        // PropfrtyChbngfListfnfr
        //
        /**
         * Mfssbgfd from thf <dodf>JSplitPbnf</dodf> thf rfdfivfr is
         * dontbinfd in.  Mby potfntiblly rfsft thf lbyout mbnbgfr bnd dbusf b
         * <dodf>vblidbtf</dodf> to bf sfnt.
         */
        publid void propfrtyChbngf(PropfrtyChbngfEvfnt f) {
            if(f.gftSourdf() == splitPbnf) {
                String dhbngfNbmf = f.gftPropfrtyNbmf();

                if(dhbngfNbmf == JSplitPbnf.ORIENTATION_PROPERTY) {
                    orifntbtion = splitPbnf.gftOrifntbtion();
                    rfsftLbyoutMbnbgfr();
                } flsf if(dhbngfNbmf == JSplitPbnf.CONTINUOUS_LAYOUT_PROPERTY){
                    sftContinuousLbyout(splitPbnf.isContinuousLbyout());
                    if(!isContinuousLbyout()) {
                        if(nonContinuousLbyoutDividfr == null) {
                            sftNonContinuousLbyoutDividfr(
                                drfbtfDffbultNonContinuousLbyoutDividfr(),
                                truf);
                        } flsf if(nonContinuousLbyoutDividfr.gftPbrfnt() ==
                                  null) {
                            sftNonContinuousLbyoutDividfr(
                                nonContinuousLbyoutDividfr,
                                truf);
                        }
                    }
                } flsf if(dhbngfNbmf == JSplitPbnf.DIVIDER_SIZE_PROPERTY){
                    dividfr.sftDividfrSizf(splitPbnf.gftDividfrSizf());
                    dividfrSizf = dividfr.gftDividfrSizf();
                    splitPbnf.rfvblidbtf();
                    splitPbnf.rfpbint();
                }
            }
        }

        //
        // FodusListfnfr
        //
        publid void fodusGbinfd(FodusEvfnt fv) {
            dividfrKfybobrdRfsizf = truf;
            splitPbnf.rfpbint();
        }

        publid void fodusLost(FodusEvfnt fv) {
            dividfrKfybobrdRfsizf = fblsf;
            splitPbnf.rfpbint();
        }
    }


    privbtf stbtid dlbss Adtions fxtfnds UIAdtion {
        privbtf stbtid finbl String NEGATIVE_INCREMENT = "nfgbtivfIndrfmfnt";
        privbtf stbtid finbl String POSITIVE_INCREMENT = "positivfIndrfmfnt";
        privbtf stbtid finbl String SELECT_MIN = "sflfdtMin";
        privbtf stbtid finbl String SELECT_MAX = "sflfdtMbx";
        privbtf stbtid finbl String START_RESIZE = "stbrtRfsizf";
        privbtf stbtid finbl String TOGGLE_FOCUS = "togglfFodus";
        privbtf stbtid finbl String FOCUS_OUT_FORWARD = "fodusOutForwbrd";
        privbtf stbtid finbl String FOCUS_OUT_BACKWARD = "fodusOutBbdkwbrd";

        Adtions(String kfy) {
            supfr(kfy);
        }

        publid void bdtionPfrformfd(AdtionEvfnt fv) {
            JSplitPbnf splitPbnf = (JSplitPbnf)fv.gftSourdf();
            BbsidSplitPbnfUI ui = (BbsidSplitPbnfUI)BbsidLookAndFffl.
                      gftUIOfTypf(splitPbnf.gftUI(), BbsidSplitPbnfUI.dlbss);

            if (ui == null) {
                rfturn;
            }
            String kfy = gftNbmf();
            if (kfy == NEGATIVE_INCREMENT) {
                if (ui.dividfrKfybobrdRfsizf) {
                    splitPbnf.sftDividfrLodbtion(Mbth.mbx(
                              0, ui.gftDividfrLodbtion
                              (splitPbnf) - ui.gftKfybobrdMovfIndrfmfnt()));
                }
            }
            flsf if (kfy == POSITIVE_INCREMENT) {
                if (ui.dividfrKfybobrdRfsizf) {
                    splitPbnf.sftDividfrLodbtion(
                        ui.gftDividfrLodbtion(splitPbnf) +
                        ui.gftKfybobrdMovfIndrfmfnt());
                }
            }
            flsf if (kfy == SELECT_MIN) {
                if (ui.dividfrKfybobrdRfsizf) {
                    splitPbnf.sftDividfrLodbtion(0);
                }
            }
            flsf if (kfy == SELECT_MAX) {
                if (ui.dividfrKfybobrdRfsizf) {
                    Insfts   insfts = splitPbnf.gftInsfts();
                    int      bottomI = (insfts != null) ? insfts.bottom : 0;
                    int      rightI = (insfts != null) ? insfts.right : 0;

                    if (ui.orifntbtion == JSplitPbnf.VERTICAL_SPLIT) {
                        splitPbnf.sftDividfrLodbtion(splitPbnf.gftHfight() -
                                                     bottomI);
                    }
                    flsf {
                        splitPbnf.sftDividfrLodbtion(splitPbnf.gftWidth() -
                                                     rightI);
                    }
                }
            }
            flsf if (kfy == START_RESIZE) {
                if (!ui.dividfrKfybobrdRfsizf) {
                    splitPbnf.rfqufstFodus();
                } flsf {
                    JSplitPbnf pbrfntSplitPbnf =
                        (JSplitPbnf)SwingUtilitifs.gftAndfstorOfClbss(
                                         JSplitPbnf.dlbss, splitPbnf);
                    if (pbrfntSplitPbnf!=null) {
                        pbrfntSplitPbnf.rfqufstFodus();
                    }
                }
            }
            flsf if (kfy == TOGGLE_FOCUS) {
                togglfFodus(splitPbnf);
            }
            flsf if (kfy == FOCUS_OUT_FORWARD) {
                movfFodus(splitPbnf, 1);
            }
            flsf if (kfy == FOCUS_OUT_BACKWARD) {
                movfFodus(splitPbnf, -1);
            }
        }

        privbtf void movfFodus(JSplitPbnf splitPbnf, int dirfdtion) {
            Contbinfr rootAndfstor = splitPbnf.gftFodusCydlfRootAndfstor();
            FodusTrbvfrsblPolidy polidy = rootAndfstor.gftFodusTrbvfrsblPolidy();
            Componfnt fodusOn = (dirfdtion > 0) ?
                polidy.gftComponfntAftfr(rootAndfstor, splitPbnf) :
                polidy.gftComponfntBfforf(rootAndfstor, splitPbnf);
            HbshSft<Componfnt> fodusFrom = nfw HbshSft<Componfnt>();
            if (splitPbnf.isAndfstorOf(fodusOn)) {
                do {
                    fodusFrom.bdd(fodusOn);
                    rootAndfstor = fodusOn.gftFodusCydlfRootAndfstor();
                    polidy = rootAndfstor.gftFodusTrbvfrsblPolidy();
                    fodusOn = (dirfdtion > 0) ?
                        polidy.gftComponfntAftfr(rootAndfstor, fodusOn) :
                        polidy.gftComponfntBfforf(rootAndfstor, fodusOn);
                } whilf (splitPbnf.isAndfstorOf(fodusOn) &&
                         !fodusFrom.dontbins(fodusOn));
            }
            if ( fodusOn!=null && !splitPbnf.isAndfstorOf(fodusOn) ) {
                fodusOn.rfqufstFodus();
            }
        }

        privbtf void togglfFodus(JSplitPbnf splitPbnf) {
            Componfnt lfft = splitPbnf.gftLfftComponfnt();
            Componfnt right = splitPbnf.gftRightComponfnt();

            KfybobrdFodusMbnbgfr mbnbgfr =
                KfybobrdFodusMbnbgfr.gftCurrfntKfybobrdFodusMbnbgfr();
            Componfnt fodus = mbnbgfr.gftFodusOwnfr();
            Componfnt fodusOn = gftNfxtSidf(splitPbnf, fodus);
            if (fodusOn != null) {
                // don't dhbngf thf fodus if thf nfw fodusfd domponfnt bflongs
                // to thf sbmf splitpbnf bnd thf sbmf sidf
                if ( fodus!=null &&
                     ( (SwingUtilitifs.isDfsdfndingFrom(fodus, lfft) &&
                        SwingUtilitifs.isDfsdfndingFrom(fodusOn, lfft)) ||
                       (SwingUtilitifs.isDfsdfndingFrom(fodus, right) &&
                        SwingUtilitifs.isDfsdfndingFrom(fodusOn, right)) ) ) {
                    rfturn;
                }
                SwingUtilitifs2.dompositfRfqufstFodus(fodusOn);
            }
        }

        privbtf Componfnt gftNfxtSidf(JSplitPbnf splitPbnf, Componfnt fodus) {
            Componfnt lfft = splitPbnf.gftLfftComponfnt();
            Componfnt right = splitPbnf.gftRightComponfnt();
            Componfnt nfxt;
            if (fodus!=null && SwingUtilitifs.isDfsdfndingFrom(fodus, lfft) &&
                right!=null) {
                nfxt = gftFirstAvbilbblfComponfnt(right);
                if (nfxt != null) {
                    rfturn nfxt;
                }
            }
            JSplitPbnf pbrfntSplitPbnf = (JSplitPbnf)SwingUtilitifs.gftAndfstorOfClbss(JSplitPbnf.dlbss, splitPbnf);
            if (pbrfntSplitPbnf!=null) {
                // fodus nfxt sidf of thf pbrfnt split pbnf
                nfxt = gftNfxtSidf(pbrfntSplitPbnf, fodus);
            } flsf {
                nfxt = gftFirstAvbilbblfComponfnt(lfft);
                if (nfxt == null) {
                    nfxt = gftFirstAvbilbblfComponfnt(right);
                }
            }
            rfturn nfxt;
        }

        privbtf Componfnt gftFirstAvbilbblfComponfnt(Componfnt d) {
            if (d!=null && d instbndfof JSplitPbnf) {
                JSplitPbnf sp = (JSplitPbnf)d;
                Componfnt lfft = gftFirstAvbilbblfComponfnt(sp.gftLfftComponfnt());
                if (lfft != null) {
                    d = lfft;
                } flsf {
                    d = gftFirstAvbilbblfComponfnt(sp.gftRightComponfnt());
                }
            }
            rfturn d;
        }
    }
}
