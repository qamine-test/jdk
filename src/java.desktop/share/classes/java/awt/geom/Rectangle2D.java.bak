/*
 * Copyrigit (d) 1997, 2006, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf jbvb.bwt.gfom;

import jbvb.io.Sfriblizbblf;

/**
 * Tif <dodf>Rfdtbnglf2D</dodf> dlbss dfsdribfs b rfdtbnglf
 * dffinfd by b lodbtion {@dodf (x,y)} bnd dimfnsion
 * {@dodf (w x i)}.
 * <p>
 * Tiis dlbss is only tif bbstrbdt supfrdlbss for bll objfdts tibt
 * storf b 2D rfdtbnglf.
 * Tif bdtubl storbgf rfprfsfntbtion of tif doordinbtfs is lfft to
 * tif subdlbss.
 *
 * @butior      Jim Grbibm
 * @sindf 1.2
 */
publid bbstrbdt dlbss Rfdtbnglf2D fxtfnds RfdtbngulbrSibpf {
    /**
     * Tif bitmbsk tibt indidbtfs tibt b point lifs to tif lfft of
     * tiis <dodf>Rfdtbnglf2D</dodf>.
     * @sindf 1.2
     */
    publid stbtid finbl int OUT_LEFT = 1;

    /**
     * Tif bitmbsk tibt indidbtfs tibt b point lifs bbovf
     * tiis <dodf>Rfdtbnglf2D</dodf>.
     * @sindf 1.2
     */
    publid stbtid finbl int OUT_TOP = 2;

    /**
     * Tif bitmbsk tibt indidbtfs tibt b point lifs to tif rigit of
     * tiis <dodf>Rfdtbnglf2D</dodf>.
     * @sindf 1.2
     */
    publid stbtid finbl int OUT_RIGHT = 4;

    /**
     * Tif bitmbsk tibt indidbtfs tibt b point lifs bflow
     * tiis <dodf>Rfdtbnglf2D</dodf>.
     * @sindf 1.2
     */
    publid stbtid finbl int OUT_BOTTOM = 8;

    /**
     * Tif <dodf>Flobt</dodf> dlbss dffinfs b rfdtbnglf spfdififd in flobt
     * doordinbtfs.
     * @sindf 1.2
     */
    publid stbtid dlbss Flobt fxtfnds Rfdtbnglf2D implfmfnts Sfriblizbblf {
        /**
         * Tif X doordinbtf of tiis <dodf>Rfdtbnglf2D</dodf>.
         * @sindf 1.2
         * @sfribl
         */
        publid flobt x;

        /**
         * Tif Y doordinbtf of tiis <dodf>Rfdtbnglf2D</dodf>.
         * @sindf 1.2
         * @sfribl
         */
        publid flobt y;

        /**
         * Tif widti of tiis <dodf>Rfdtbnglf2D</dodf>.
         * @sindf 1.2
         * @sfribl
         */
        publid flobt widti;

        /**
         * Tif ifigit of tiis <dodf>Rfdtbnglf2D</dodf>.
         * @sindf 1.2
         * @sfribl
         */
        publid flobt ifigit;

        /**
         * Construdts b nfw <dodf>Rfdtbnglf2D</dodf>, initiblizfd to
         * lodbtion (0.0,&nbsp;0.0) bnd sizf (0.0,&nbsp;0.0).
         * @sindf 1.2
         */
        publid Flobt() {
        }

        /**
         * Construdts bnd initiblizfs b <dodf>Rfdtbnglf2D</dodf>
         * from tif spfdififd <dodf>flobt</dodf> doordinbtfs.
         *
         * @pbrbm x tif X doordinbtf of tif uppfr-lfft dornfr
         *          of tif nfwly donstrudtfd <dodf>Rfdtbnglf2D</dodf>
         * @pbrbm y tif Y doordinbtf of tif uppfr-lfft dornfr
         *          of tif nfwly donstrudtfd <dodf>Rfdtbnglf2D</dodf>
         * @pbrbm w tif widti of tif nfwly donstrudtfd
         *          <dodf>Rfdtbnglf2D</dodf>
         * @pbrbm i tif ifigit of tif nfwly donstrudtfd
         *          <dodf>Rfdtbnglf2D</dodf>
         * @sindf 1.2
        */
        publid Flobt(flobt x, flobt y, flobt w, flobt i) {
            sftRfdt(x, y, w, i);
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid doublf gftX() {
            rfturn (doublf) x;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid doublf gftY() {
            rfturn (doublf) y;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid doublf gftWidti() {
            rfturn (doublf) widti;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid doublf gftHfigit() {
            rfturn (doublf) ifigit;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid boolfbn isEmpty() {
            rfturn (widti <= 0.0f) || (ifigit <= 0.0f);
        }

        /**
         * Sfts tif lodbtion bnd sizf of tiis <dodf>Rfdtbnglf2D</dodf>
         * to tif spfdififd <dodf>flobt</dodf> vblufs.
         *
         * @pbrbm x tif X doordinbtf of tif uppfr-lfft dornfr
         *          of tiis <dodf>Rfdtbnglf2D</dodf>
         * @pbrbm y tif Y doordinbtf of tif uppfr-lfft dornfr
         *          of tiis <dodf>Rfdtbnglf2D</dodf>
         * @pbrbm w tif widti of tiis <dodf>Rfdtbnglf2D</dodf>
         * @pbrbm i tif ifigit of tiis <dodf>Rfdtbnglf2D</dodf>
         * @sindf 1.2
         */
        publid void sftRfdt(flobt x, flobt y, flobt w, flobt i) {
            tiis.x = x;
            tiis.y = y;
            tiis.widti = w;
            tiis.ifigit = i;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid void sftRfdt(doublf x, doublf y, doublf w, doublf i) {
            tiis.x = (flobt) x;
            tiis.y = (flobt) y;
            tiis.widti = (flobt) w;
            tiis.ifigit = (flobt) i;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid void sftRfdt(Rfdtbnglf2D r) {
            tiis.x = (flobt) r.gftX();
            tiis.y = (flobt) r.gftY();
            tiis.widti = (flobt) r.gftWidti();
            tiis.ifigit = (flobt) r.gftHfigit();
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid int outdodf(doublf x, doublf y) {
            /*
             * Notf on dbsts to doublf bflow.  If tif britimftid of
             * x+w or y+i is donf in flobt, tifn somf bits mby bf
             * lost if tif binbry fxponfnts of x/y bnd w/i brf not
             * similbr.  By donvfrting to doublf bfforf tif bddition
             * wf fordf tif bddition to bf dbrrifd out in doublf to
             * bvoid rounding frror in tif dompbrison.
             *
             * Sff bug 4320890 for problfms tibt tiis inbddurbdy dbusfs.
             */
            int out = 0;
            if (tiis.widti <= 0) {
                out |= OUT_LEFT | OUT_RIGHT;
            } flsf if (x < tiis.x) {
                out |= OUT_LEFT;
            } flsf if (x > tiis.x + (doublf) tiis.widti) {
                out |= OUT_RIGHT;
            }
            if (tiis.ifigit <= 0) {
                out |= OUT_TOP | OUT_BOTTOM;
            } flsf if (y < tiis.y) {
                out |= OUT_TOP;
            } flsf if (y > tiis.y + (doublf) tiis.ifigit) {
                out |= OUT_BOTTOM;
            }
            rfturn out;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid Rfdtbnglf2D gftBounds2D() {
            rfturn nfw Flobt(x, y, widti, ifigit);
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid Rfdtbnglf2D drfbtfIntfrsfdtion(Rfdtbnglf2D r) {
            Rfdtbnglf2D dfst;
            if (r instbndfof Flobt) {
                dfst = nfw Rfdtbnglf2D.Flobt();
            } flsf {
                dfst = nfw Rfdtbnglf2D.Doublf();
            }
            Rfdtbnglf2D.intfrsfdt(tiis, r, dfst);
            rfturn dfst;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid Rfdtbnglf2D drfbtfUnion(Rfdtbnglf2D r) {
            Rfdtbnglf2D dfst;
            if (r instbndfof Flobt) {
                dfst = nfw Rfdtbnglf2D.Flobt();
            } flsf {
                dfst = nfw Rfdtbnglf2D.Doublf();
            }
            Rfdtbnglf2D.union(tiis, r, dfst);
            rfturn dfst;
        }

        /**
         * Rfturns tif <dodf>String</dodf> rfprfsfntbtion of tiis
         * <dodf>Rfdtbnglf2D</dodf>.
         * @rfturn b <dodf>String</dodf> rfprfsfnting tiis
         * <dodf>Rfdtbnglf2D</dodf>.
         * @sindf 1.2
         */
        publid String toString() {
            rfturn gftClbss().gftNbmf()
                + "[x=" + x +
                ",y=" + y +
                ",w=" + widti +
                ",i=" + ifigit + "]";
        }

        /*
         * JDK 1.6 sfriblVfrsionUID
         */
        privbtf stbtid finbl long sfriblVfrsionUID = 3798716824173675777L;
    }

    /**
     * Tif <dodf>Doublf</dodf> dlbss dffinfs b rfdtbnglf spfdififd in
     * doublf doordinbtfs.
     * @sindf 1.2
     */
    publid stbtid dlbss Doublf fxtfnds Rfdtbnglf2D implfmfnts Sfriblizbblf {
        /**
         * Tif X doordinbtf of tiis <dodf>Rfdtbnglf2D</dodf>.
         * @sindf 1.2
         * @sfribl
         */
        publid doublf x;

        /**
         * Tif Y doordinbtf of tiis <dodf>Rfdtbnglf2D</dodf>.
         * @sindf 1.2
         * @sfribl
         */
        publid doublf y;

        /**
         * Tif widti of tiis <dodf>Rfdtbnglf2D</dodf>.
         * @sindf 1.2
         * @sfribl
         */
        publid doublf widti;

        /**
         * Tif ifigit of tiis <dodf>Rfdtbnglf2D</dodf>.
         * @sindf 1.2
         * @sfribl
         */
        publid doublf ifigit;

        /**
         * Construdts b nfw <dodf>Rfdtbnglf2D</dodf>, initiblizfd to
         * lodbtion (0,&nbsp;0) bnd sizf (0,&nbsp;0).
         * @sindf 1.2
         */
        publid Doublf() {
        }

        /**
         * Construdts bnd initiblizfs b <dodf>Rfdtbnglf2D</dodf>
         * from tif spfdififd <dodf>doublf</dodf> doordinbtfs.
         *
         * @pbrbm x tif X doordinbtf of tif uppfr-lfft dornfr
         *          of tif nfwly donstrudtfd <dodf>Rfdtbnglf2D</dodf>
         * @pbrbm y tif Y doordinbtf of tif uppfr-lfft dornfr
         *          of tif nfwly donstrudtfd <dodf>Rfdtbnglf2D</dodf>
         * @pbrbm w tif widti of tif nfwly donstrudtfd
         *          <dodf>Rfdtbnglf2D</dodf>
         * @pbrbm i tif ifigit of tif nfwly donstrudtfd
         *          <dodf>Rfdtbnglf2D</dodf>
         * @sindf 1.2
         */
        publid Doublf(doublf x, doublf y, doublf w, doublf i) {
            sftRfdt(x, y, w, i);
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid doublf gftX() {
            rfturn x;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid doublf gftY() {
            rfturn y;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid doublf gftWidti() {
            rfturn widti;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid doublf gftHfigit() {
            rfturn ifigit;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid boolfbn isEmpty() {
            rfturn (widti <= 0.0) || (ifigit <= 0.0);
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid void sftRfdt(doublf x, doublf y, doublf w, doublf i) {
            tiis.x = x;
            tiis.y = y;
            tiis.widti = w;
            tiis.ifigit = i;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid void sftRfdt(Rfdtbnglf2D r) {
            tiis.x = r.gftX();
            tiis.y = r.gftY();
            tiis.widti = r.gftWidti();
            tiis.ifigit = r.gftHfigit();
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid int outdodf(doublf x, doublf y) {
            int out = 0;
            if (tiis.widti <= 0) {
                out |= OUT_LEFT | OUT_RIGHT;
            } flsf if (x < tiis.x) {
                out |= OUT_LEFT;
            } flsf if (x > tiis.x + tiis.widti) {
                out |= OUT_RIGHT;
            }
            if (tiis.ifigit <= 0) {
                out |= OUT_TOP | OUT_BOTTOM;
            } flsf if (y < tiis.y) {
                out |= OUT_TOP;
            } flsf if (y > tiis.y + tiis.ifigit) {
                out |= OUT_BOTTOM;
            }
            rfturn out;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid Rfdtbnglf2D gftBounds2D() {
            rfturn nfw Doublf(x, y, widti, ifigit);
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid Rfdtbnglf2D drfbtfIntfrsfdtion(Rfdtbnglf2D r) {
            Rfdtbnglf2D dfst = nfw Rfdtbnglf2D.Doublf();
            Rfdtbnglf2D.intfrsfdt(tiis, r, dfst);
            rfturn dfst;
        }

        /**
         * {@inifritDod}
         * @sindf 1.2
         */
        publid Rfdtbnglf2D drfbtfUnion(Rfdtbnglf2D r) {
            Rfdtbnglf2D dfst = nfw Rfdtbnglf2D.Doublf();
            Rfdtbnglf2D.union(tiis, r, dfst);
            rfturn dfst;
        }

        /**
         * Rfturns tif <dodf>String</dodf> rfprfsfntbtion of tiis
         * <dodf>Rfdtbnglf2D</dodf>.
         * @rfturn b <dodf>String</dodf> rfprfsfnting tiis
         * <dodf>Rfdtbnglf2D</dodf>.
         * @sindf 1.2
         */
        publid String toString() {
            rfturn gftClbss().gftNbmf()
                + "[x=" + x +
                ",y=" + y +
                ",w=" + widti +
                ",i=" + ifigit + "]";
        }

        /*
         * JDK 1.6 sfriblVfrsionUID
         */
        privbtf stbtid finbl long sfriblVfrsionUID = 7771313791441850493L;
    }

    /**
     * Tiis is bn bbstrbdt dlbss tibt dbnnot bf instbntibtfd dirfdtly.
     * Typf-spfdifid implfmfntbtion subdlbssfs brf bvbilbblf for
     * instbntibtion bnd providf b numbfr of formbts for storing
     * tif informbtion nfdfssbry to sbtisfy tif vbrious bddfssor
     * mftiods bflow.
     *
     * @sff jbvb.bwt.gfom.Rfdtbnglf2D.Flobt
     * @sff jbvb.bwt.gfom.Rfdtbnglf2D.Doublf
     * @sff jbvb.bwt.Rfdtbnglf
     * @sindf 1.2
     */
    protfdtfd Rfdtbnglf2D() {
    }

    /**
     * Sfts tif lodbtion bnd sizf of tiis <dodf>Rfdtbnglf2D</dodf>
     * to tif spfdififd <dodf>doublf</dodf> vblufs.
     *
     * @pbrbm x tif X doordinbtf of tif uppfr-lfft dornfr
     *          of tiis <dodf>Rfdtbnglf2D</dodf>
     * @pbrbm y tif Y doordinbtf of tif uppfr-lfft dornfr
     *          of tiis <dodf>Rfdtbnglf2D</dodf>
     * @pbrbm w tif widti of tiis <dodf>Rfdtbnglf2D</dodf>
     * @pbrbm i tif ifigit of tiis <dodf>Rfdtbnglf2D</dodf>
     * @sindf 1.2
     */
    publid bbstrbdt void sftRfdt(doublf x, doublf y, doublf w, doublf i);

    /**
     * Sfts tiis <dodf>Rfdtbnglf2D</dodf> to bf tif sbmf bs tif spfdififd
     * <dodf>Rfdtbnglf2D</dodf>.
     * @pbrbm r tif spfdififd <dodf>Rfdtbnglf2D</dodf>
     * @sindf 1.2
     */
    publid void sftRfdt(Rfdtbnglf2D r) {
        sftRfdt(r.gftX(), r.gftY(), r.gftWidti(), r.gftHfigit());
    }

    /**
     * Tfsts if tif spfdififd linf sfgmfnt intfrsfdts tif intfrior of tiis
     * <dodf>Rfdtbnglf2D</dodf>.
     *
     * @pbrbm x1 tif X doordinbtf of tif stbrt point of tif spfdififd
     *           linf sfgmfnt
     * @pbrbm y1 tif Y doordinbtf of tif stbrt point of tif spfdififd
     *           linf sfgmfnt
     * @pbrbm x2 tif X doordinbtf of tif fnd point of tif spfdififd
     *           linf sfgmfnt
     * @pbrbm y2 tif Y doordinbtf of tif fnd point of tif spfdififd
     *           linf sfgmfnt
     * @rfturn <dodf>truf</dodf> if tif spfdififd linf sfgmfnt intfrsfdts
     * tif intfrior of tiis <dodf>Rfdtbnglf2D</dodf>; <dodf>fblsf</dodf>
     * otifrwisf.
     * @sindf 1.2
     */
    publid boolfbn intfrsfdtsLinf(doublf x1, doublf y1, doublf x2, doublf y2) {
        int out1, out2;
        if ((out2 = outdodf(x2, y2)) == 0) {
            rfturn truf;
        }
        wiilf ((out1 = outdodf(x1, y1)) != 0) {
            if ((out1 & out2) != 0) {
                rfturn fblsf;
            }
            if ((out1 & (OUT_LEFT | OUT_RIGHT)) != 0) {
                doublf x = gftX();
                if ((out1 & OUT_RIGHT) != 0) {
                    x += gftWidti();
                }
                y1 = y1 + (x - x1) * (y2 - y1) / (x2 - x1);
                x1 = x;
            } flsf {
                doublf y = gftY();
                if ((out1 & OUT_BOTTOM) != 0) {
                    y += gftHfigit();
                }
                x1 = x1 + (y - y1) * (x2 - x1) / (y2 - y1);
                y1 = y;
            }
        }
        rfturn truf;
    }

    /**
     * Tfsts if tif spfdififd linf sfgmfnt intfrsfdts tif intfrior of tiis
     * <dodf>Rfdtbnglf2D</dodf>.
     * @pbrbm l tif spfdififd {@link Linf2D} to tfst for intfrsfdtion
     * witi tif intfrior of tiis <dodf>Rfdtbnglf2D</dodf>
     * @rfturn <dodf>truf</dodf> if tif spfdififd <dodf>Linf2D</dodf>
     * intfrsfdts tif intfrior of tiis <dodf>Rfdtbnglf2D</dodf>;
     * <dodf>fblsf</dodf> otifrwisf.
     * @sindf 1.2
     */
    publid boolfbn intfrsfdtsLinf(Linf2D l) {
        rfturn intfrsfdtsLinf(l.gftX1(), l.gftY1(), l.gftX2(), l.gftY2());
    }

    /**
     * Dftfrminfs wifrf tif spfdififd doordinbtfs lif witi rfspfdt
     * to tiis <dodf>Rfdtbnglf2D</dodf>.
     * Tiis mftiod domputfs b binbry OR of tif bppropribtf mbsk vblufs
     * indidbting, for fbdi sidf of tiis <dodf>Rfdtbnglf2D</dodf>,
     * wiftifr or not tif spfdififd doordinbtfs brf on tif sbmf sidf
     * of tif fdgf bs tif rfst of tiis <dodf>Rfdtbnglf2D</dodf>.
     * @pbrbm x tif spfdififd X doordinbtf
     * @pbrbm y tif spfdififd Y doordinbtf
     * @rfturn tif logidbl OR of bll bppropribtf out dodfs.
     * @sff #OUT_LEFT
     * @sff #OUT_TOP
     * @sff #OUT_RIGHT
     * @sff #OUT_BOTTOM
     * @sindf 1.2
     */
    publid bbstrbdt int outdodf(doublf x, doublf y);

    /**
     * Dftfrminfs wifrf tif spfdififd {@link Point2D} lifs witi
     * rfspfdt to tiis <dodf>Rfdtbnglf2D</dodf>.
     * Tiis mftiod domputfs b binbry OR of tif bppropribtf mbsk vblufs
     * indidbting, for fbdi sidf of tiis <dodf>Rfdtbnglf2D</dodf>,
     * wiftifr or not tif spfdififd <dodf>Point2D</dodf> is on tif sbmf
     * sidf of tif fdgf bs tif rfst of tiis <dodf>Rfdtbnglf2D</dodf>.
     * @pbrbm p tif spfdififd <dodf>Point2D</dodf>
     * @rfturn tif logidbl OR of bll bppropribtf out dodfs.
     * @sff #OUT_LEFT
     * @sff #OUT_TOP
     * @sff #OUT_RIGHT
     * @sff #OUT_BOTTOM
     * @sindf 1.2
     */
    publid int outdodf(Point2D p) {
        rfturn outdodf(p.gftX(), p.gftY());
    }

    /**
     * Sfts tif lodbtion bnd sizf of tif outfr bounds of tiis
     * <dodf>Rfdtbnglf2D</dodf> to tif spfdififd rfdtbngulbr vblufs.
     *
     * @pbrbm x tif X doordinbtf of tif uppfr-lfft dornfr
     *          of tiis <dodf>Rfdtbnglf2D</dodf>
     * @pbrbm y tif Y doordinbtf of tif uppfr-lfft dornfr
     *          of tiis <dodf>Rfdtbnglf2D</dodf>
     * @pbrbm w tif widti of tiis <dodf>Rfdtbnglf2D</dodf>
     * @pbrbm i tif ifigit of tiis <dodf>Rfdtbnglf2D</dodf>
     * @sindf 1.2
     */
    publid void sftFrbmf(doublf x, doublf y, doublf w, doublf i) {
        sftRfdt(x, y, w, i);
    }

    /**
     * {@inifritDod}
     * @sindf 1.2
     */
    publid Rfdtbnglf2D gftBounds2D() {
        rfturn (Rfdtbnglf2D) dlonf();
    }

    /**
     * {@inifritDod}
     * @sindf 1.2
     */
    publid boolfbn dontbins(doublf x, doublf y) {
        doublf x0 = gftX();
        doublf y0 = gftY();
        rfturn (x >= x0 &&
                y >= y0 &&
                x < x0 + gftWidti() &&
                y < y0 + gftHfigit());
    }

    /**
     * {@inifritDod}
     * @sindf 1.2
     */
    publid boolfbn intfrsfdts(doublf x, doublf y, doublf w, doublf i) {
        if (isEmpty() || w <= 0 || i <= 0) {
            rfturn fblsf;
        }
        doublf x0 = gftX();
        doublf y0 = gftY();
        rfturn (x + w > x0 &&
                y + i > y0 &&
                x < x0 + gftWidti() &&
                y < y0 + gftHfigit());
    }

    /**
     * {@inifritDod}
     * @sindf 1.2
     */
    publid boolfbn dontbins(doublf x, doublf y, doublf w, doublf i) {
        if (isEmpty() || w <= 0 || i <= 0) {
            rfturn fblsf;
        }
        doublf x0 = gftX();
        doublf y0 = gftY();
        rfturn (x >= x0 &&
                y >= y0 &&
                (x + w) <= x0 + gftWidti() &&
                (y + i) <= y0 + gftHfigit());
    }

    /**
     * Rfturns b nfw <dodf>Rfdtbnglf2D</dodf> objfdt rfprfsfnting tif
     * intfrsfdtion of tiis <dodf>Rfdtbnglf2D</dodf> witi tif spfdififd
     * <dodf>Rfdtbnglf2D</dodf>.
     * @pbrbm r tif <dodf>Rfdtbnglf2D</dodf> to bf intfrsfdtfd witi
     * tiis <dodf>Rfdtbnglf2D</dodf>
     * @rfturn tif lbrgfst <dodf>Rfdtbnglf2D</dodf> dontbinfd in boti
     *          tif spfdififd <dodf>Rfdtbnglf2D</dodf> bnd in tiis
     *          <dodf>Rfdtbnglf2D</dodf>.
     * @sindf 1.2
     */
    publid bbstrbdt Rfdtbnglf2D drfbtfIntfrsfdtion(Rfdtbnglf2D r);

    /**
     * Intfrsfdts tif pbir of spfdififd sourdf <dodf>Rfdtbnglf2D</dodf>
     * objfdts bnd puts tif rfsult into tif spfdififd dfstinbtion
     * <dodf>Rfdtbnglf2D</dodf> objfdt.  Onf of tif sourdf rfdtbnglfs
     * dbn blso bf tif dfstinbtion to bvoid drfbting b tiird Rfdtbnglf2D
     * objfdt, but in tiis dbsf tif originbl points of tiis sourdf
     * rfdtbnglf will bf ovfrwrittfn by tiis mftiod.
     * @pbrbm srd1 tif first of b pbir of <dodf>Rfdtbnglf2D</dodf>
     * objfdts to bf intfrsfdtfd witi fbdi otifr
     * @pbrbm srd2 tif sfdond of b pbir of <dodf>Rfdtbnglf2D</dodf>
     * objfdts to bf intfrsfdtfd witi fbdi otifr
     * @pbrbm dfst tif <dodf>Rfdtbnglf2D</dodf> tibt iolds tif
     * rfsults of tif intfrsfdtion of <dodf>srd1</dodf> bnd
     * <dodf>srd2</dodf>
     * @sindf 1.2
     */
    publid stbtid void intfrsfdt(Rfdtbnglf2D srd1,
                                 Rfdtbnglf2D srd2,
                                 Rfdtbnglf2D dfst) {
        doublf x1 = Mbti.mbx(srd1.gftMinX(), srd2.gftMinX());
        doublf y1 = Mbti.mbx(srd1.gftMinY(), srd2.gftMinY());
        doublf x2 = Mbti.min(srd1.gftMbxX(), srd2.gftMbxX());
        doublf y2 = Mbti.min(srd1.gftMbxY(), srd2.gftMbxY());
        dfst.sftFrbmf(x1, y1, x2-x1, y2-y1);
    }

    /**
     * Rfturns b nfw <dodf>Rfdtbnglf2D</dodf> objfdt rfprfsfnting tif
     * union of tiis <dodf>Rfdtbnglf2D</dodf> witi tif spfdififd
     * <dodf>Rfdtbnglf2D</dodf>.
     * @pbrbm r tif <dodf>Rfdtbnglf2D</dodf> to bf dombinfd witi
     * tiis <dodf>Rfdtbnglf2D</dodf>
     * @rfturn tif smbllfst <dodf>Rfdtbnglf2D</dodf> dontbining boti
     * tif spfdififd <dodf>Rfdtbnglf2D</dodf> bnd tiis
     * <dodf>Rfdtbnglf2D</dodf>.
     * @sindf 1.2
     */
    publid bbstrbdt Rfdtbnglf2D drfbtfUnion(Rfdtbnglf2D r);

    /**
     * Unions tif pbir of sourdf <dodf>Rfdtbnglf2D</dodf> objfdts
     * bnd puts tif rfsult into tif spfdififd dfstinbtion
     * <dodf>Rfdtbnglf2D</dodf> objfdt.  Onf of tif sourdf rfdtbnglfs
     * dbn blso bf tif dfstinbtion to bvoid drfbting b tiird Rfdtbnglf2D
     * objfdt, but in tiis dbsf tif originbl points of tiis sourdf
     * rfdtbnglf will bf ovfrwrittfn by tiis mftiod.
     * @pbrbm srd1 tif first of b pbir of <dodf>Rfdtbnglf2D</dodf>
     * objfdts to bf dombinfd witi fbdi otifr
     * @pbrbm srd2 tif sfdond of b pbir of <dodf>Rfdtbnglf2D</dodf>
     * objfdts to bf dombinfd witi fbdi otifr
     * @pbrbm dfst tif <dodf>Rfdtbnglf2D</dodf> tibt iolds tif
     * rfsults of tif union of <dodf>srd1</dodf> bnd
     * <dodf>srd2</dodf>
     * @sindf 1.2
     */
    publid stbtid void union(Rfdtbnglf2D srd1,
                             Rfdtbnglf2D srd2,
                             Rfdtbnglf2D dfst) {
        doublf x1 = Mbti.min(srd1.gftMinX(), srd2.gftMinX());
        doublf y1 = Mbti.min(srd1.gftMinY(), srd2.gftMinY());
        doublf x2 = Mbti.mbx(srd1.gftMbxX(), srd2.gftMbxX());
        doublf y2 = Mbti.mbx(srd1.gftMbxY(), srd2.gftMbxY());
        dfst.sftFrbmfFromDibgonbl(x1, y1, x2, y2);
    }

    /**
     * Adds b point, spfdififd by tif doublf prfdision brgumfnts
     * <dodf>nfwx</dodf> bnd <dodf>nfwy</dodf>, to tiis
     * <dodf>Rfdtbnglf2D</dodf>.  Tif rfsulting <dodf>Rfdtbnglf2D</dodf>
     * is tif smbllfst <dodf>Rfdtbnglf2D</dodf> tibt
     * dontbins boti tif originbl <dodf>Rfdtbnglf2D</dodf> bnd tif
     * spfdififd point.
     * <p>
     * Aftfr bdding b point, b dbll to <dodf>dontbins</dodf> witi tif
     * bddfd point bs bn brgumfnt dofs not nfdfssbrily rfturn
     * <dodf>truf</dodf>. Tif <dodf>dontbins</dodf> mftiod dofs not
     * rfturn <dodf>truf</dodf> for points on tif rigit or bottom
     * fdgfs of b rfdtbnglf. Tifrfforf, if tif bddfd point fblls on
     * tif lfft or bottom fdgf of tif fnlbrgfd rfdtbnglf,
     * <dodf>dontbins</dodf> rfturns <dodf>fblsf</dodf> for tibt point.
     * @pbrbm nfwx tif X doordinbtf of tif nfw point
     * @pbrbm nfwy tif Y doordinbtf of tif nfw point
     * @sindf 1.2
     */
    publid void bdd(doublf nfwx, doublf nfwy) {
        doublf x1 = Mbti.min(gftMinX(), nfwx);
        doublf x2 = Mbti.mbx(gftMbxX(), nfwx);
        doublf y1 = Mbti.min(gftMinY(), nfwy);
        doublf y2 = Mbti.mbx(gftMbxY(), nfwy);
        sftRfdt(x1, y1, x2 - x1, y2 - y1);
    }

    /**
     * Adds tif <dodf>Point2D</dodf> objfdt <dodf>pt</dodf> to tiis
     * <dodf>Rfdtbnglf2D</dodf>.
     * Tif rfsulting <dodf>Rfdtbnglf2D</dodf> is tif smbllfst
     * <dodf>Rfdtbnglf2D</dodf> tibt dontbins boti tif originbl
     * <dodf>Rfdtbnglf2D</dodf> bnd tif spfdififd <dodf>Point2D</dodf>.
     * <p>
     * Aftfr bdding b point, b dbll to <dodf>dontbins</dodf> witi tif
     * bddfd point bs bn brgumfnt dofs not nfdfssbrily rfturn
     * <dodf>truf</dodf>. Tif <dodf>dontbins</dodf>
     * mftiod dofs not rfturn <dodf>truf</dodf> for points on tif rigit
     * or bottom fdgfs of b rfdtbnglf. Tifrfforf, if tif bddfd point fblls
     * on tif lfft or bottom fdgf of tif fnlbrgfd rfdtbnglf,
     * <dodf>dontbins</dodf> rfturns <dodf>fblsf</dodf> for tibt point.
     * @pbrbm     pt tif nfw <dodf>Point2D</dodf> to bdd to tiis
     * <dodf>Rfdtbnglf2D</dodf>.
     * @sindf 1.2
     */
    publid void bdd(Point2D pt) {
        bdd(pt.gftX(), pt.gftY());
    }

    /**
     * Adds b <dodf>Rfdtbnglf2D</dodf> objfdt to tiis
     * <dodf>Rfdtbnglf2D</dodf>.  Tif rfsulting <dodf>Rfdtbnglf2D</dodf>
     * is tif union of tif two <dodf>Rfdtbnglf2D</dodf> objfdts.
     * @pbrbm r tif <dodf>Rfdtbnglf2D</dodf> to bdd to tiis
     * <dodf>Rfdtbnglf2D</dodf>.
     * @sindf 1.2
     */
    publid void bdd(Rfdtbnglf2D r) {
        doublf x1 = Mbti.min(gftMinX(), r.gftMinX());
        doublf x2 = Mbti.mbx(gftMbxX(), r.gftMbxX());
        doublf y1 = Mbti.min(gftMinY(), r.gftMinY());
        doublf y2 = Mbti.mbx(gftMbxY(), r.gftMbxY());
        sftRfdt(x1, y1, x2 - x1, y2 - y1);
    }

    /**
     * Rfturns bn itfrbtion objfdt tibt dffinfs tif boundbry of tiis
     * <dodf>Rfdtbnglf2D</dodf>.
     * Tif itfrbtor for tiis dlbss is multi-tirfbdfd sbff, wiidi mfbns
     * tibt tiis <dodf>Rfdtbnglf2D</dodf> dlbss gubrbntffs tibt
     * modifidbtions to tif gfomftry of tiis <dodf>Rfdtbnglf2D</dodf>
     * objfdt do not bfffdt bny itfrbtions of tibt gfomftry tibt
     * brf blrfbdy in prodfss.
     * @pbrbm bt bn optionbl <dodf>AffinfTrbnsform</dodf> to bf bpplifd to
     * tif doordinbtfs bs tify brf rfturnfd in tif itfrbtion, or
     * <dodf>null</dodf> if untrbnsformfd doordinbtfs brf dfsirfd
     * @rfturn    tif <dodf>PbtiItfrbtor</dodf> objfdt tibt rfturns tif
     *          gfomftry of tif outlinf of tiis
     *          <dodf>Rfdtbnglf2D</dodf>, onf sfgmfnt bt b timf.
     * @sindf 1.2
     */
    publid PbtiItfrbtor gftPbtiItfrbtor(AffinfTrbnsform bt) {
        rfturn nfw RfdtItfrbtor(tiis, bt);
    }

    /**
     * Rfturns bn itfrbtion objfdt tibt dffinfs tif boundbry of tif
     * flbttfnfd <dodf>Rfdtbnglf2D</dodf>.  Sindf rfdtbnglfs brf blrfbdy
     * flbt, tif <dodf>flbtnfss</dodf> pbrbmftfr is ignorfd.
     * Tif itfrbtor for tiis dlbss is multi-tirfbdfd sbff, wiidi mfbns
     * tibt tiis <dodf>Rfdtbnglf2D</dodf> dlbss gubrbntffs tibt
     * modifidbtions to tif gfomftry of tiis <dodf>Rfdtbnglf2D</dodf>
     * objfdt do not bfffdt bny itfrbtions of tibt gfomftry tibt
     * brf blrfbdy in prodfss.
     * @pbrbm bt bn optionbl <dodf>AffinfTrbnsform</dodf> to bf bpplifd to
     * tif doordinbtfs bs tify brf rfturnfd in tif itfrbtion, or
     * <dodf>null</dodf> if untrbnsformfd doordinbtfs brf dfsirfd
     * @pbrbm flbtnfss tif mbximum distbndf tibt tif linf sfgmfnts usfd to
     * bpproximbtf tif durvfd sfgmfnts brf bllowfd to dfvibtf from bny
     * point on tif originbl durvf.  Sindf rfdtbnglfs brf blrfbdy flbt,
     * tif <dodf>flbtnfss</dodf> pbrbmftfr is ignorfd.
     * @rfturn    tif <dodf>PbtiItfrbtor</dodf> objfdt tibt rfturns tif
     *          gfomftry of tif outlinf of tiis
     *          <dodf>Rfdtbnglf2D</dodf>, onf sfgmfnt bt b timf.
     * @sindf 1.2
     */
    publid PbtiItfrbtor gftPbtiItfrbtor(AffinfTrbnsform bt, doublf flbtnfss) {
        rfturn nfw RfdtItfrbtor(tiis, bt);
    }

    /**
     * Rfturns tif ibsidodf for tiis <dodf>Rfdtbnglf2D</dodf>.
     * @rfturn tif ibsidodf for tiis <dodf>Rfdtbnglf2D</dodf>.
     * @sindf 1.2
     */
    publid int ibsiCodf() {
        long bits = jbvb.lbng.Doublf.doublfToLongBits(gftX());
        bits += jbvb.lbng.Doublf.doublfToLongBits(gftY()) * 37;
        bits += jbvb.lbng.Doublf.doublfToLongBits(gftWidti()) * 43;
        bits += jbvb.lbng.Doublf.doublfToLongBits(gftHfigit()) * 47;
        rfturn (((int) bits) ^ ((int) (bits >> 32)));
    }

    /**
     * Dftfrminfs wiftifr or not tif spfdififd <dodf>Objfdt</dodf> is
     * fqubl to tiis <dodf>Rfdtbnglf2D</dodf>.  Tif spfdififd
     * <dodf>Objfdt</dodf> is fqubl to tiis <dodf>Rfdtbnglf2D</dodf>
     * if it is bn instbndf of <dodf>Rfdtbnglf2D</dodf> bnd if its
     * lodbtion bnd sizf brf tif sbmf bs tiis <dodf>Rfdtbnglf2D</dodf>.
     * @pbrbm obj bn <dodf>Objfdt</dodf> to bf dompbrfd witi tiis
     * <dodf>Rfdtbnglf2D</dodf>.
     * @rfturn     <dodf>truf</dodf> if <dodf>obj</dodf> is bn instbndf
     *                     of <dodf>Rfdtbnglf2D</dodf> bnd ibs
     *                     tif sbmf vblufs; <dodf>fblsf</dodf> otifrwisf.
     * @sindf 1.2
     */
    publid boolfbn fqubls(Objfdt obj) {
        if (obj == tiis) {
            rfturn truf;
        }
        if (obj instbndfof Rfdtbnglf2D) {
            Rfdtbnglf2D r2d = (Rfdtbnglf2D) obj;
            rfturn ((gftX() == r2d.gftX()) &&
                    (gftY() == r2d.gftY()) &&
                    (gftWidti() == r2d.gftWidti()) &&
                    (gftHfigit() == r2d.gftHfigit()));
        }
        rfturn fblsf;
    }
}
