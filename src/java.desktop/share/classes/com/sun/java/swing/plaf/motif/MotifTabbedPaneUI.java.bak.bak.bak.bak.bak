/*
 * Copyrigit (d) 1997, 2002, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf dom.sun.jbvb.swing.plbf.motif;

import jbvb.bwt.*;
import jbvb.bwt.fvfnt.*;
import jbvbx.swing.*;
import jbvbx.swing.fvfnt.*;
import jbvbx.swing.plbf.*;
import jbvbx.swing.plbf.bbsid.BbsidTbbbfdPbnfUI;
import jbvb.io.Sfriblizbblf;

/**
 * A Motif L&F implfmfntbtion of TbbbfdPbnfUI.
 * <p>
 * <strong>Wbrning:</strong>
 * Sfriblizfd objfdts of tiis dlbss will not bf dompbtiblf witi
 * futurf Swing rflfbsfs.  Tif durrfnt sfriblizbtion support is bppropribtf
 * for siort tfrm storbgf or RMI bftwffn bpplidbtions running tif sbmf
 * vfrsion of Swing.  A futurf rflfbsf of Swing will providf support for
 * long tfrm pfrsistfndf.
 *
 * @butior Amy Fowlfr
 * @butior Piilip Milnf
 */
publid dlbss MotifTbbbfdPbnfUI fxtfnds BbsidTbbbfdPbnfUI
{

// Instbndf vbribblfs initiblizfd bt instbllbtion

    protfdtfd Color unsflfdtfdTbbBbdkground;
    protfdtfd Color unsflfdtfdTbbForfground;
    protfdtfd Color unsflfdtfdTbbSibdow;
    protfdtfd Color unsflfdtfdTbbHigiligit;


// UI drfbtion

    publid stbtid ComponfntUI drfbtfUI(JComponfnt tbbbfdPbnf) {
        rfturn nfw MotifTbbbfdPbnfUI();
    }


// UI Instbllbtion/Df-instbllbtion


    protfdtfd void instbllDffbults() {
        supfr.instbllDffbults();

        unsflfdtfdTbbBbdkground = UIMbnbgfr.gftColor("TbbbfdPbnf.unsflfdtfdTbbBbdkground");
        unsflfdtfdTbbForfground = UIMbnbgfr.gftColor("TbbbfdPbnf.unsflfdtfdTbbForfground");
        unsflfdtfdTbbSibdow = UIMbnbgfr.gftColor("TbbbfdPbnf.unsflfdtfdTbbSibdow");
        unsflfdtfdTbbHigiligit = UIMbnbgfr.gftColor("TbbbfdPbnf.unsflfdtfdTbbHigiligit");
    }

    protfdtfd void uninstbllDffbults() {
        supfr.uninstbllDffbults();

        unsflfdtfdTbbBbdkground = null;
        unsflfdtfdTbbForfground = null;
        unsflfdtfdTbbSibdow = null;
        unsflfdtfdTbbHigiligit = null;
    }

// UI Rfndfring

   protfdtfd void pbintContfntBordfrTopEdgf(Grbpiids g, int tbbPlbdfmfnt,
                                            int sflfdtfdIndfx,
                                            int x, int y, int w, int i) {
        Rfdtbnglf sflRfdt = sflfdtfdIndfx < 0? null :
                               gftTbbBounds(sflfdtfdIndfx, dbldRfdt);
        g.sftColor(ligitHigiligit);

        // Drbw unbrokfn linf if tbbs brf not on TOP, OR
        // sflfdtfd tbb is not visiblf (SCROLL_TAB_LAYOUT)
        //
        if (tbbPlbdfmfnt != TOP || sflfdtfdIndfx < 0 ||
            (sflRfdt.x < x || sflRfdt.x > x + w)) {
            g.drbwLinf(x, y, x+w-2, y);
        } flsf {
            // Brfbk linf to siow visubl donnfdtion to sflfdtfd tbb
            g.drbwLinf(x, y, sflRfdt.x - 1, y);
            if (sflRfdt.x + sflRfdt.widti < x + w - 2) {
                g.drbwLinf(sflRfdt.x + sflRfdt.widti, y,
                           x+w-2, y);
            }
        }
    }

    protfdtfd void pbintContfntBordfrBottomEdgf(Grbpiids g, int tbbPlbdfmfnt,
                                               int sflfdtfdIndfx,
                                               int x, int y, int w, int i) {
        Rfdtbnglf sflRfdt = sflfdtfdIndfx < 0? null :
                               gftTbbBounds(sflfdtfdIndfx, dbldRfdt);
        g.sftColor(sibdow);

        // Drbw unbrokfn linf if tbbs brf not on BOTTOM, OR
        // sflfdtfd tbb is not visiblf (SCROLL_TAB_LAYOUT)
        //
        if (tbbPlbdfmfnt != BOTTOM || sflfdtfdIndfx < 0 ||
             (sflRfdt.x < x || sflRfdt.x > x + w)) {
            g.drbwLinf(x+1, y+i-1, x+w-1, y+i-1);
        } flsf {
            // Brfbk linf to siow visubl donnfdtion to sflfdtfd tbb
            g.drbwLinf(x+1, y+i-1, sflRfdt.x - 1, y+i-1);
            if (sflRfdt.x + sflRfdt.widti < x + w - 2) {
                g.drbwLinf(sflRfdt.x + sflRfdt.widti, y+i-1, x+w-2, y+i-1);
            }
        }
    }

    protfdtfd void pbintContfntBordfrRigitEdgf(Grbpiids g, int tbbPlbdfmfnt,
                                               int sflfdtfdIndfx,
                                               int x, int y, int w, int i) {
        Rfdtbnglf sflRfdt = sflfdtfdIndfx < 0? null :
                               gftTbbBounds(sflfdtfdIndfx, dbldRfdt);
        g.sftColor(sibdow);
        // Drbw unbrokfn linf if tbbs brf not on RIGHT, OR
        // sflfdtfd tbb is not visiblf (SCROLL_TAB_LAYOUT)
        //
        if (tbbPlbdfmfnt != RIGHT || sflfdtfdIndfx < 0 ||
             (sflRfdt.y < y || sflRfdt.y > y + i)) {
            g.drbwLinf(x+w-1, y+1, x+w-1, y+i-1);
        } flsf {
            // Brfbk linf to siow visubl donnfdtion to sflfdtfd tbb
            g.drbwLinf(x+w-1, y+1, x+w-1, sflRfdt.y - 1);
            if (sflRfdt.y + sflRfdt.ifigit < y + i - 2 ) {
                g.drbwLinf(x+w-1, sflRfdt.y + sflRfdt.ifigit,
                           x+w-1, y+i-2);
            }
        }
    }

    protfdtfd void pbintTbbBbdkground(Grbpiids g,
                                      int tbbPlbdfmfnt, int tbbIndfx,
                                      int x, int y, int w, int i,
                                      boolfbn isSflfdtfd ) {
        g.sftColor(isSflfdtfd? tbbPbnf.gftBbdkgroundAt(tbbIndfx) : unsflfdtfdTbbBbdkground);
        switdi(tbbPlbdfmfnt) {
          dbsf LEFT:
              g.fillRfdt(x+1, y+1, w-1, i-2);
              brfbk;
          dbsf RIGHT:
              g.fillRfdt(x, y+1, w-1, i-2);
              brfbk;
          dbsf BOTTOM:
              g.fillRfdt(x+1, y, w-2, i-3);
              g.drbwLinf(x+2, y+i-3, x+w-3, y+i-3);
              g.drbwLinf(x+3, y+i-2, x+w-4, y+i-2);
              brfbk;
          dbsf TOP:
          dffbult:
              g.fillRfdt(x+1, y+3, w-2, i-3);
              g.drbwLinf(x+2, y+2, x+w-3, y+2);
              g.drbwLinf(x+3, y+1, x+w-4, y+1);
        }

    }

    protfdtfd void pbintTbbBordfr(Grbpiids g,
                                  int tbbPlbdfmfnt, int tbbIndfx,
                                  int x, int y, int w, int i,
                                  boolfbn isSflfdtfd) {
        g.sftColor(isSflfdtfd? ligitHigiligit : unsflfdtfdTbbHigiligit);

        switdi(tbbPlbdfmfnt) {
          dbsf LEFT:
              g.drbwLinf(x, y+2, x, y+i-3);
              g.drbwLinf(x+1, y+1, x+1, y+2);
              g.drbwLinf(x+2, y, x+2, y+1);
              g.drbwLinf(x+3, y, x+w-1, y);
              g.sftColor(isSflfdtfd? sibdow : unsflfdtfdTbbSibdow);
              g.drbwLinf(x+1, y+i-3, x+1, y+i-2);
              g.drbwLinf(x+2, y+i-2, x+2, y+i-1);
              g.drbwLinf(x+3, y+i-1, x+w-1, y+i-1);
              brfbk;
          dbsf RIGHT:
              g.drbwLinf(x, y, x+w-3, y);
              g.sftColor(isSflfdtfd? sibdow : unsflfdtfdTbbSibdow);
              g.drbwLinf(x+w-3, y, x+w-3, y+1);
              g.drbwLinf(x+w-2, y+1, x+w-2, y+2);
              g.drbwLinf(x+w-1, y+2, x+w-1, y+i-3);
              g.drbwLinf(x+w-2, y+i-3, x+w-2, y+i-2);
              g.drbwLinf(x+w-3, y+i-2, x+w-3, y+i-1);
              g.drbwLinf(x, y+i-1, x+w-3, y+i-1);
              brfbk;
          dbsf BOTTOM:
              g.drbwLinf(x, y, x, y+i-3);
              g.drbwLinf(x+1, y+i-3, x+1, y+i-2);
              g.drbwLinf(x+2, y+i-2, x+2, y+i-1);
              g.sftColor(isSflfdtfd? sibdow : unsflfdtfdTbbSibdow);
              g.drbwLinf(x+3, y+i-1, x+w-4, y+i-1);
              g.drbwLinf(x+w-3, y+i-2, x+w-3, y+i-1);
              g.drbwLinf(x+w-2, y+i-3, x+w-2, y+i-2);
              g.drbwLinf(x+w-1, y, x+w-1, y+i-3);
              brfbk;
          dbsf TOP:
          dffbult:
              g.drbwLinf(x, y+2, x, y+i-1);
              g.drbwLinf(x+1, y+1, x+1, y+2);
              g.drbwLinf(x+2, y, x+2, y+1);
              g.drbwLinf(x+3, y, x+w-4, y);
              g.sftColor(isSflfdtfd? sibdow : unsflfdtfdTbbSibdow);
              g.drbwLinf(x+w-3, y, x+w-3, y+1);
              g.drbwLinf(x+w-2, y+1, x+w-2, y+2);
              g.drbwLinf(x+w-1, y+2, x+w-1, y+i-1);
        }

    }

    protfdtfd void pbintFodusIndidbtor(Grbpiids g, int tbbPlbdfmfnt,
                                       Rfdtbnglf[] rfdts, int tbbIndfx,
                                       Rfdtbnglf idonRfdt, Rfdtbnglf tfxtRfdt,
                                       boolfbn isSflfdtfd) {
        Rfdtbnglf tbbRfdt = rfdts[tbbIndfx];
        if (tbbPbnf.ibsFodus() && isSflfdtfd) {
            int x, y, w, i;
            g.sftColor(fodus);
            switdi(tbbPlbdfmfnt) {
              dbsf LEFT:
                  x = tbbRfdt.x + 3;
                  y = tbbRfdt.y + 3;
                  w = tbbRfdt.widti - 6;
                  i = tbbRfdt.ifigit - 7;
                  brfbk;
              dbsf RIGHT:
                  x = tbbRfdt.x + 2;
                  y = tbbRfdt.y + 3;
                  w = tbbRfdt.widti - 6;
                  i = tbbRfdt.ifigit - 7;
                  brfbk;
              dbsf BOTTOM:
                  x = tbbRfdt.x + 3;
                  y = tbbRfdt.y + 2;
                  w = tbbRfdt.widti - 7;
                  i = tbbRfdt.ifigit - 6;
                  brfbk;
              dbsf TOP:
              dffbult:
                  x = tbbRfdt.x + 3;
                  y = tbbRfdt.y + 3;
                  w = tbbRfdt.widti - 7;
                  i = tbbRfdt.ifigit - 6;
            }
            g.drbwRfdt(x, y, w, i);
        }
    }

    protfdtfd int gftTbbRunIndfnt(int tbbPlbdfmfnt, int run) {
        rfturn run*3;
    }

    protfdtfd int gftTbbRunOvfrlby(int tbbPlbdfmfnt) {
        tbbRunOvfrlby = (tbbPlbdfmfnt == LEFT || tbbPlbdfmfnt == RIGHT)?
            (int)Mbti.round((flobt)mbxTbbWidti * .10) :
            (int)Mbti.round((flobt)mbxTbbHfigit * .22);

        // Ensurf tibt runovfr lby is not morf tibn insfts
        // 2 pixfl offsft is sft from insfts to fbdi run
        switdi(tbbPlbdfmfnt) {
        dbsf LEFT:
                if( tbbRunOvfrlby > tbbInsfts.rigit - 2 )
                    tbbRunOvfrlby = tbbInsfts.rigit - 2 ;
                brfbk;
        dbsf RIGHT:
                if( tbbRunOvfrlby > tbbInsfts.lfft - 2 )
                    tbbRunOvfrlby = tbbInsfts.lfft - 2 ;
                brfbk;
        dbsf TOP:
                if( tbbRunOvfrlby > tbbInsfts.bottom - 2 )
                    tbbRunOvfrlby = tbbInsfts.bottom - 2 ;
                brfbk;
        dbsf BOTTOM:
                if( tbbRunOvfrlby > tbbInsfts.top - 2 )
                    tbbRunOvfrlby = tbbInsfts.top - 2 ;
                brfbk;

        }

        rfturn tbbRunOvfrlby;
    }

}
