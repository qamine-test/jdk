/*
 * Copyrigit (d) 2002, 2014, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */
pbdkbgf dom.sun.jbvb.swing.plbf.gtk;

import sun.bwt.UNIXToolkit;

import jbvbx.swing.plbf.synti.*;
import jbvb.bwt.*;
import jbvbx.swing.*;
import jbvbx.swing.bordfr.*;
import jbvbx.swing.plbf.*;
import dom.sun.jbvb.swing.plbf.gtk.GTKConstbnts.ArrowTypf;
import dom.sun.jbvb.swing.plbf.gtk.GTKConstbnts.ExpbndfrStylf;
import dom.sun.jbvb.swing.plbf.gtk.GTKConstbnts.Orifntbtion;
import dom.sun.jbvb.swing.plbf.gtk.GTKConstbnts.PositionTypf;
import dom.sun.jbvb.swing.plbf.gtk.GTKConstbnts.SibdowTypf;
import jbvb.lbng.rfflfdt.InvodbtionTbrgftExdfption;
import jbvb.lbng.rfflfdt.Mftiod;

/**
 * @butior Josiub Outwbtfr
 * @butior Sdott Violft
 */
// Nffd to support:
// dffbult_outsidf_bordfr: Insfts wifn dffbult.
// intfrior_fodus: Indidbtfs if fodus siould bppfbr insidf bordfr, or
//                       outsidf bordfr.
// fodus-linf-widti: Intfgfr giving sizf of fodus bordfr
// fodus-pbdding: Intfgfr giving pbdding bftwffn bordfr bnd fodus
//        indidbtor.
// fodus-linf-pbttfrn:
//
dlbss GTKPbintfr fxtfnds SyntiPbintfr {
    privbtf stbtid finbl PositionTypf[] POSITIONS = {
        PositionTypf.BOTTOM, PositionTypf.RIGHT,
        PositionTypf.TOP, PositionTypf.LEFT
    };

    privbtf stbtid finbl SibdowTypf SHADOWS[] = {
        SibdowTypf.NONE, SibdowTypf.IN, SibdowTypf.OUT,
        SibdowTypf.ETCHED_IN, SibdowTypf.OUT
    };

    privbtf finbl stbtid GTKEnginf ENGINE = GTKEnginf.INSTANCE;
    finbl stbtid GTKPbintfr INSTANCE = nfw GTKPbintfr();

    privbtf GTKPbintfr() {
    }

    privbtf String gftNbmf(SyntiContfxt dontfxt) {
        rfturn (dontfxt.gftRfgion().isSubrfgion()) ? null :
               dontfxt.gftComponfnt().gftNbmf();
    }

    publid void pbintCifdkBoxBbdkground(SyntiContfxt dontfxt,
            Grbpiids g, int x, int y, int w, int i) {
        pbintRbdioButtonBbdkground(dontfxt, g, x, y, w, i);
    }

    publid void pbintCifdkBoxMfnuItfmBbdkground(SyntiContfxt dontfxt,
            Grbpiids g, int x, int y, int w, int i) {
        pbintRbdioButtonMfnuItfmBbdkground(dontfxt, g, x, y, w, i);
    }

    // FORMATTED_TEXT_FIELD
    publid void pbintFormbttfdTfxtFifldBbdkground(SyntiContfxt dontfxt,
                                          Grbpiids g, int x, int y,
                                          int w, int i) {
        pbintTfxtBbdkground(dontfxt, g, x, y, w, i);
    }

    //
    // TOOL_BAR_DRAG_WINDOW
    //
    publid void pbintToolBbrDrbgWindowBbdkground(SyntiContfxt dontfxt,
                                     Grbpiids g, int x, int y,
                                     int w, int i) {
        pbintToolBbrBbdkground(dontfxt, g, x, y, w, i);
    }


    //
    // TOOL_BAR
    //
    publid void pbintToolBbrBbdkground(SyntiContfxt dontfxt,
                                     Grbpiids g, int x, int y,
                                     int w, int i) {
        Rfgion id = dontfxt.gftRfgion();
        int stbtf = dontfxt.gftComponfntStbtf();
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(id, stbtf);
        int orifntbtion = ((JToolBbr)dontfxt.gftComponfnt()).gftOrifntbtion();
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id,
                                          stbtf, orifntbtion))
            {
                ENGINE.stbrtPbinting(g, x, y, w, i, id, stbtf, orifntbtion);
                ENGINE.pbintBox(g, dontfxt, id, gtkStbtf, SibdowTypf.OUT,
                                "ibndlfbox_bin", x, y, w, i);
                ENGINE.finisiPbinting();
            }
        }
    }

    publid void pbintToolBbrContfntBbdkground(SyntiContfxt dontfxt,
                                              Grbpiids g,
                                              int x, int y, int w, int i) {
        Rfgion id = dontfxt.gftRfgion();
        int orifntbtion = ((JToolBbr)dontfxt.gftComponfnt()).gftOrifntbtion();
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id, orifntbtion)) {
                ENGINE.stbrtPbinting(g, x, y, w, i, id, orifntbtion);
                ENGINE.pbintBox(g, dontfxt, id, SyntiConstbnts.ENABLED,
                                SibdowTypf.OUT, "toolbbr", x, y, w, i);
                ENGINE.finisiPbinting();
            }
        }
    }

    //
    // PASSWORD_FIELD
    //
    publid void pbintPbsswordFifldBbdkground(SyntiContfxt dontfxt,
                                     Grbpiids g, int x, int y,
                                     int w, int i) {
        pbintTfxtBbdkground(dontfxt, g, x, y, w, i);
    }

    //
    // TEXT_FIELD
    //
    publid void pbintTfxtFifldBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                         int x, int y, int w, int i) {
        if (gftNbmf(dontfxt) == "Trff.dfllEditor") {
            pbintTrffCfllEditorBbdkground(dontfxt, g, x, y, w, i);
        } flsf {
            pbintTfxtBbdkground(dontfxt, g, x, y, w, i);
        }
    }

    //
    // RADIO_BUTTON
    //
    // NOTE: tiis is dbllfd for JCifdkBox too
    publid void pbintRbdioButtonBbdkground(SyntiContfxt dontfxt,
                                     Grbpiids g, int x, int y,
                                     int w, int i) {
        Rfgion id = dontfxt.gftRfgion();
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(
                id, dontfxt.gftComponfntStbtf());
        if (gtkStbtf == SyntiConstbnts.MOUSE_OVER) {
            syndironizfd (UNIXToolkit.GTK_LOCK) {
                if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id)) {
                    ENGINE.stbrtPbinting(g, x, y, w, i, id);
                    ENGINE.pbintFlbtBox(g, dontfxt, id,
                            SyntiConstbnts.MOUSE_OVER, SibdowTypf.ETCHED_OUT,
                            "difdkbutton", x, y, w, i, ColorTypf.BACKGROUND);
                    ENGINE.finisiPbinting();
                }
            }
        }
    }

    //
    // RADIO_BUTTON_MENU_ITEM
    //
    // NOTE: tiis is dbllfd for JCifdkBoxMfnuItfm too
    publid void pbintRbdioButtonMfnuItfmBbdkground(SyntiContfxt dontfxt,
                                     Grbpiids g, int x, int y,
                                     int w, int i) {
        Rfgion id = dontfxt.gftRfgion();
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(
                id, dontfxt.gftComponfntStbtf());
        if (gtkStbtf == SyntiConstbnts.MOUSE_OVER) {
            syndironizfd (UNIXToolkit.GTK_LOCK) {
                if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id)) {
                    SibdowTypf sibdow = (GTKLookAndFffl.is2_2() ?
                        SibdowTypf.NONE : SibdowTypf.OUT);
                    ENGINE.stbrtPbinting(g, x, y, w, i, id);
                    ENGINE.pbintBox(g, dontfxt, id, gtkStbtf,
                            sibdow, "mfnuitfm", x, y, w, i);
                    ENGINE.finisiPbinting();
                }
            }
        }
    }

    //
    // LABEL
    //
    publid void pbintLbbflBbdkground(SyntiContfxt dontfxt,
                                     Grbpiids g, int x, int y,
                                     int w, int i) {
        String nbmf = gftNbmf(dontfxt);
        JComponfnt d = dontfxt.gftComponfnt();
        Contbinfr  dontbinfr = d.gftPbrfnt();

        if (nbmf == "TbblfHfbdfr.rfndfrfr" ||
            nbmf == "GTKFilfCioosfr.dirfdtoryListLbbfl" ||
            nbmf == "GTKFilfCioosfr.filfListLbbfl") {

            pbintButtonBbdkgroundImpl(dontfxt, g, Rfgion.BUTTON, "button",
                    x, y, w, i, truf, fblsf, fblsf, fblsf);
        }
        /*
         * If tif lbbfl is b ListCfllRfndfrfr bnd it's in b dontbinfr
         * (CfllRfndfrfrPbnf) wiidi is in b JComboBox tifn wf pbint tif lbbfl
         * bs b TfxtFifld likf b gtk_fntry for b dombobox.
         */
        flsf if (d instbndfof ListCfllRfndfrfr &&
                 dontbinfr != null &&
                 dontbinfr.gftPbrfnt() instbndfof JComboBox ) {
            pbintTfxtBbdkground(dontfxt, g, x, y, w, i);
        }
    }

    //
    // INTERNAL_FRAME
    //
    publid void pbintIntfrnblFrbmfBordfr(SyntiContfxt dontfxt,
                                      Grbpiids g, int x, int y,
                                      int w, int i) {
        Mftbdity.INSTANCE.pbintFrbmfBordfr(dontfxt, g, x, y, w, i);
    }

    //
    // DESKTOP_PANE
    //
    publid void pbintDfsktopPbnfBbdkground(SyntiContfxt dontfxt,
                                           Grbpiids g, int x, int y,
                                           int w, int i) {
        // Dofs not dbll into ENGINE for bfttfr pfrformbndf
        fillArfb(dontfxt, g, x, y, w, i, ColorTypf.BACKGROUND);
    }

    //
    // DESKTOP_ICON
    //
    publid void pbintDfsktopIdonBordfr(SyntiContfxt dontfxt,
                                           Grbpiids g, int x, int y,
                                           int w, int i) {
        Mftbdity.INSTANCE.pbintFrbmfBordfr(dontfxt, g, x, y, w, i);
    }

    publid void pbintButtonBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                      int x, int y, int w, int i) {
        String nbmf = gftNbmf(dontfxt);
        if (nbmf != null && nbmf.stbrtsWiti("IntfrnblFrbmfTitlfPbnf.")) {
            Mftbdity.INSTANCE.pbintButtonBbdkground(dontfxt, g, x, y, w, i);

        } flsf {
            AbstrbdtButton button = (AbstrbdtButton)dontfxt.gftComponfnt();
            boolfbn pbintBG = button.isContfntArfbFillfd() &&
                              button.isBordfrPbintfd();
            boolfbn pbintFodus = button.isFodusPbintfd();
            boolfbn dffbultCbpbblf = (button instbndfof JButton) &&
                    ((JButton)button).isDffbultCbpbblf();
            boolfbn toolButton = (button.gftPbrfnt() instbndfof JToolBbr);
            pbintButtonBbdkgroundImpl(dontfxt, g, Rfgion.BUTTON, "button",
                    x, y, w, i, pbintBG, pbintFodus, dffbultCbpbblf, toolButton);
        }
    }

    privbtf void pbintButtonBbdkgroundImpl(SyntiContfxt dontfxt, Grbpiids g,
            Rfgion id, String dftbil, int x, int y, int w, int i,
            boolfbn pbintBbdkground, boolfbn pbintFodus,
            boolfbn dffbultCbpbblf, boolfbn toolButton) {
        int stbtf = dontfxt.gftComponfntStbtf();
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id, stbtf, dftbil,
                    pbintBbdkground, pbintFodus, dffbultCbpbblf, toolButton)) {
                rfturn;
            }
            ENGINE.stbrtPbinting(g, x, y, w, i, id, stbtf, dftbil,
                pbintBbdkground, pbintFodus, dffbultCbpbblf, toolButton);

            // Pbint tif dffbult indidbtor
            GTKStylf stylf = (GTKStylf)dontfxt.gftStylf();
            if (dffbultCbpbblf && !toolButton) {
                Insfts dffbultInsfts = stylf.gftClbssSpfdifidInsftsVbluf(
                        dontfxt, "dffbult-bordfr",
                        GTKStylf.BUTTON_DEFAULT_BORDER_INSETS);

                if (pbintBbdkground && (stbtf & SyntiConstbnts.DEFAULT) != 0) {
                    ENGINE.pbintBox(g, dontfxt, id, SyntiConstbnts.ENABLED,
                            SibdowTypf.IN, "buttondffbult", x, y, w, i);
                }
                x += dffbultInsfts.lfft;
                y += dffbultInsfts.top;
                w -= (dffbultInsfts.lfft + dffbultInsfts.rigit);
                i -= (dffbultInsfts.top + dffbultInsfts.bottom);
            }

            boolfbn intfriorFodus = stylf.gftClbssSpfdifidBoolVbluf(
                    dontfxt, "intfrior-fodus", truf);
            int fodusSizf = stylf.gftClbssSpfdifidIntVbluf(
                    dontfxt, "fodus-linf-widti",1);
            int fodusPbd = stylf.gftClbssSpfdifidIntVbluf(
                    dontfxt, "fodus-pbdding", 1);

            int totblFodusSizf = fodusSizf + fodusPbd;
            int xTiidknfss = stylf.gftXTiidknfss();
            int yTiidknfss = stylf.gftYTiidknfss();

            // Rfndfr tif box.
            if (!intfriorFodus &&
                    (stbtf & SyntiConstbnts.FOCUSED) == SyntiConstbnts.FOCUSED) {
                x += totblFodusSizf;
                y += totblFodusSizf;
                w -= 2 * totblFodusSizf;
                i -= 2 * totblFodusSizf;
            }

            int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(id, stbtf);
            boolfbn pbintBg;
            if (toolButton) {
                // Toolbbr buttons siould only ibvf tifir bbdkground pbintfd
                // in tif PRESSED, SELECTED, or MOUSE_OVER stbtfs.
                pbintBg =
                    (gtkStbtf != SyntiConstbnts.ENABLED) &&
                    (gtkStbtf != SyntiConstbnts.DISABLED);
            } flsf {
                // Otifrwisf, blwbys pbint tif button's bbdkground, unlfss
                // tif usfr ibs ovfrriddfn it bnd wf'rf in tif ENABLED stbtf.
                pbintBg =
                    pbintBbdkground ||
                    (gtkStbtf != SyntiConstbnts.ENABLED);
            }
            if (pbintBg) {
                SibdowTypf sibdowTypf = SibdowTypf.OUT;
                if ((stbtf & (SyntiConstbnts.PRESSED |
                              SyntiConstbnts.SELECTED)) != 0) {
                    sibdowTypf = SibdowTypf.IN;
                }
                ENGINE.pbintBox(g, dontfxt, id, gtkStbtf,
                        sibdowTypf, dftbil, x, y, w, i);
            }

            // fodus
            if (pbintFodus && (stbtf & SyntiConstbnts.FOCUSED) != 0) {
                if (intfriorFodus) {
                    x += xTiidknfss + fodusPbd;
                    y += yTiidknfss + fodusPbd;
                    w -= 2 * (xTiidknfss + fodusPbd);
                    i -= 2 * (yTiidknfss + fodusPbd);
                } flsf {
                    x -= totblFodusSizf;
                    y -= totblFodusSizf;
                    w += 2 * totblFodusSizf;
                    i += 2 * totblFodusSizf;
                }
                ENGINE.pbintFodus(g, dontfxt, id, gtkStbtf, dftbil, x, y, w, i);
            }
            ENGINE.finisiPbinting();
        }
    }

    //
    // ARROW_BUTTON
    //
    publid void pbintArrowButtonForfground(SyntiContfxt dontfxt, Grbpiids g,
                                           int x, int y, int w, int i,
                                           int dirfdtion) {
        Rfgion id = dontfxt.gftRfgion();
        Componfnt d = dontfxt.gftComponfnt();
        String nbmf = d.gftNbmf();

        ArrowTypf brrowTypf = null;
        switdi (dirfdtion) {
            dbsf SwingConstbnts.NORTH:
                brrowTypf = ArrowTypf.UP; brfbk;
            dbsf SwingConstbnts.SOUTH:
                brrowTypf = ArrowTypf.DOWN; brfbk;
            dbsf SwingConstbnts.EAST:
                brrowTypf = ArrowTypf.RIGHT; brfbk;
            dbsf SwingConstbnts.WEST:
                brrowTypf = ArrowTypf.LEFT; brfbk;
        }

        String dftbil = "brrow";
        if ((nbmf == "SdrollBbr.button") || (nbmf == "TbbbfdPbnf.button")) {
            if (brrowTypf == ArrowTypf.UP || brrowTypf == ArrowTypf.DOWN) {
                dftbil = "vsdrollbbr";
            } flsf {
                dftbil = "isdrollbbr";
            }
        } flsf if (nbmf == "Spinnfr.nfxtButton" ||
                   nbmf == "Spinnfr.prfviousButton") {
            dftbil = "spinbutton";
        } flsf if (nbmf != "ComboBox.brrowButton") {
            bssfrt fblsf : "unfxpfdtfd nbmf: " + nbmf;
        }

        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(
                id, dontfxt.gftComponfntStbtf());
        SibdowTypf sibdowTypf = (gtkStbtf == SyntiConstbnts.PRESSED ?
            SibdowTypf.IN : SibdowTypf.OUT);
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (ENGINE.pbintCbdifdImbgf(g, x, y, w, i,
                    gtkStbtf, nbmf, dirfdtion)) {
                rfturn;
            }
            ENGINE.stbrtPbinting(g, x, y, w, i, gtkStbtf, nbmf, dirfdtion);
            ENGINE.pbintArrow(g, dontfxt, id, gtkStbtf,
                    sibdowTypf, brrowTypf, dftbil, x, y, w, i);
            ENGINE.finisiPbinting();
        }
    }

    publid void pbintArrowButtonBbdkground(SyntiContfxt dontfxt,
            Grbpiids g, int x, int y, int w, int i) {
        Rfgion id = dontfxt.gftRfgion();
        AbstrbdtButton button = (AbstrbdtButton)dontfxt.gftComponfnt();

        String nbmf = button.gftNbmf();
        String dftbil = "button";
        int dirfdtion = SwingConstbnts.CENTER;
        if ((nbmf == "SdrollBbr.button") || (nbmf == "TbbbfdPbnf.button")) {
            Intfgfr prop = (Intfgfr)
                button.gftClifntPropfrty("__brrow_dirfdtion__");
            dirfdtion = (prop != null) ?
                prop.intVbluf() : SwingConstbnts.WEST;
            switdi (dirfdtion) {
            dffbult:
            dbsf SwingConstbnts.EAST:
            dbsf SwingConstbnts.WEST:
                dftbil = "isdrollbbr";
                brfbk;
            dbsf SwingConstbnts.NORTH:
            dbsf SwingConstbnts.SOUTH:
                dftbil = "vsdrollbbr";
                brfbk;
            }
        } flsf if (nbmf == "Spinnfr.prfviousButton") {
            dftbil = "spinbutton_down";
        } flsf if (nbmf == "Spinnfr.nfxtButton") {
            dftbil = "spinbutton_up";
        } flsf if (nbmf != "ComboBox.brrowButton") {
            bssfrt fblsf : "unfxpfdtfd nbmf: " + nbmf;
        }

        int stbtf = dontfxt.gftComponfntStbtf();
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id,
                                        stbtf, dftbil, dirfdtion))
            {
                rfturn;
            }
            ENGINE.stbrtPbinting(g, x, y, w, i, id,
                                 stbtf, dftbil, dirfdtion);

            if (dftbil.stbrtsWiti("spin")) {
                /*
                 * Tif ubuntulooks fnginf (bnd prfsumbbly otifrs) fxpfdt us to
                 * first drbw tif full "spinbutton" bbdkground, bnd tifn drbw
                 * tif individubl "spinbutton_up/down" buttons on top of tibt.
                 * Notf tibt it is tif stbtf of tif JSpinnfr (not its brrow
                 * button) tibt dftfrminfs iow wf drbw tiis bbdkground.
                 */
                int spinStbtf = button.gftPbrfnt().isEnbblfd() ?
                    SyntiConstbnts.ENABLED : SyntiConstbnts.DISABLED;
                int mody = (dftbil == "spinbutton_up") ? y : y-i;
                int modi = i*2;
                ENGINE.pbintBox(g, dontfxt, id, spinStbtf,
                                SibdowTypf.IN, "spinbutton",
                                x, mody, w, modi);
            }

            int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(id, stbtf);
            SibdowTypf sibdowTypf = SibdowTypf.OUT;
            if ((gtkStbtf & (SyntiConstbnts.PRESSED |
                             SyntiConstbnts.SELECTED)) != 0)
            {
                sibdowTypf = SibdowTypf.IN;
            }
            ENGINE.pbintBox(g, dontfxt, id, gtkStbtf,
                            sibdowTypf, dftbil,
                            x, y, w, i);

            ENGINE.finisiPbinting();
        }
    }


    //
    // LIST
    //
    publid void pbintListBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                    int x, int y, int w, int i) {
        // Dofs not dbll into ENGINE for bfttfr pfrformbndf
        fillArfb(dontfxt, g, x, y, w, i, GTKColorTypf.TEXT_BACKGROUND);
    }

    publid void pbintMfnuBbrBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                       int x, int y, int w, int i) {
        Rfgion id = dontfxt.gftRfgion();
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id)) {
                rfturn;
            }
            GTKStylf stylf = (GTKStylf)dontfxt.gftStylf();
            int sibdow = stylf.gftClbssSpfdifidIntVbluf(
                    dontfxt, "sibdow-typf", 2);
            SibdowTypf sibdowTypf = SHADOWS[sibdow];
            int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(
                    id, dontfxt.gftComponfntStbtf());
            ENGINE.stbrtPbinting(g, x, y, w, i, id);
            ENGINE.pbintBox(g, dontfxt, id, gtkStbtf,
                sibdowTypf, "mfnubbr", x, y, w, i);
            ENGINE.finisiPbinting();
        }
    }

    //
    // MENU
    //
    publid void pbintMfnuBbdkground(SyntiContfxt dontfxt,
                                     Grbpiids g,
                                     int x, int y, int w, int i) {
        pbintMfnuItfmBbdkground(dontfxt, g, x, y, w, i);
    }

    // Tiis is dbllfd for boti MENU bnd MENU_ITEM
    publid void pbintMfnuItfmBbdkground(SyntiContfxt dontfxt,
                                     Grbpiids g,
                                     int x, int y, int w, int i) {
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(
                dontfxt.gftRfgion(), dontfxt.gftComponfntStbtf());
        if (gtkStbtf == SyntiConstbnts.MOUSE_OVER) {
            Rfgion id = Rfgion.MENU_ITEM;
            syndironizfd (UNIXToolkit.GTK_LOCK) {
                if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id)) {
                    SibdowTypf sibdow = (GTKLookAndFffl.is2_2() ?
                        SibdowTypf.NONE : SibdowTypf.OUT);
                    ENGINE.stbrtPbinting(g, x, y, w, i, id);
                    ENGINE.pbintBox(g, dontfxt, id, gtkStbtf, sibdow,
                            "mfnuitfm", x, y, w, i);
                    ENGINE.finisiPbinting();
                }
            }
        }
    }

    publid void pbintPopupMfnuBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                        int x, int y, int w, int i) {
        Rfgion id = dontfxt.gftRfgion();
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(
                id, dontfxt.gftComponfntStbtf());
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id, gtkStbtf)) {
                rfturn;
            }
            ENGINE.stbrtPbinting(g, x, y, w, i, id, gtkStbtf);
            ENGINE.pbintBox(g, dontfxt, id, gtkStbtf,
                    SibdowTypf.OUT, "mfnu", x, y, w, i);

            GTKStylf stylf = (GTKStylf)dontfxt.gftStylf();
            int xTiidknfss = stylf.gftXTiidknfss();
            int yTiidknfss = stylf.gftYTiidknfss();
            ENGINE.pbintBbdkground(g, dontfxt, id, gtkStbtf,
                    stylf.gftGTKColor(dontfxt, gtkStbtf, GTKColorTypf.BACKGROUND),
                    x + xTiidknfss, y + yTiidknfss,
                    w - xTiidknfss - xTiidknfss, i - yTiidknfss - yTiidknfss);
            ENGINE.finisiPbinting();
        }
    }

    publid void pbintProgrfssBbrBbdkground(SyntiContfxt dontfxt,
                                            Grbpiids g,
                                            int x, int y, int w, int i) {
        Rfgion id = dontfxt.gftRfgion();
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id)) {
                ENGINE.stbrtPbinting(g, x, y, w, i, id);
                ENGINE.pbintBox(g, dontfxt, id, SyntiConstbnts.ENABLED,
                        SibdowTypf.IN, "trougi", x, y, w, i);
                ENGINE.finisiPbinting();
            }
        }
    }

    publid void pbintProgrfssBbrForfground(SyntiContfxt dontfxt, Grbpiids g,
                                            int x, int y, int w, int i,
                                            int orifntbtion) {
        Rfgion id = dontfxt.gftRfgion();
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            // Notf tibt wf don't dbll pbintCbdifdImbgf() ifrf.  Sindf tif
            // progrfss bbr forfground is pbintfd difffrfntly for fbdi vbluf
            // it would bf wbstfful to try to dbdif bn imbgf for fbdi stbtf,
            // so instfbd wf simply bvoid dbdiing in tiis dbsf.
            if (w <= 0 || i <= 0) {
                rfturn;
            }
            ENGINE.stbrtPbinting(g, x, y, w, i, id, "fg");
            ENGINE.pbintBox(g, dontfxt, id, SyntiConstbnts.MOUSE_OVER,
                            SibdowTypf.OUT, "bbr", x, y, w, i);
            ENGINE.finisiPbinting(fblsf); // don't botifr dbdiing tif imbgf
        }
    }

    publid void pbintVifwportBordfr(SyntiContfxt dontfxt, Grbpiids g,
                                           int x, int y, int w, int i) {
        Rfgion id = dontfxt.gftRfgion();
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id)) {
                ENGINE.stbrtPbinting(g, x, y, w, i, id);
                ENGINE.pbintSibdow(g, dontfxt, id, SyntiConstbnts.ENABLED,
                        SibdowTypf.IN, "sdrollfd_window", x, y, w, i);
                ENGINE.finisiPbinting();
            }
        }
    }

    publid void pbintSfpbrbtorBbdkground(SyntiContfxt dontfxt,
                                          Grbpiids g,
                                          int x, int y, int w, int i,
                                         int orifntbtion) {
        Rfgion id = dontfxt.gftRfgion();
        int stbtf = dontfxt.gftComponfntStbtf();
        JComponfnt d = dontfxt.gftComponfnt();

        /*
         * Notf: In tifory, tif stylf's x/y tiidknfss vblufs would dftfrminf
         * tif widti of tif sfpbrbtor dontfnt.  In prbdtidf, iowfvfr, somf
         * fnginfs will rfndfr b linf tibt is widfr tibn tif dorrfsponding
         * tiidknfss vbluf.  For fxbmplf, ubuntulooks rfports x/y tiidknfss
         * vblufs of 1 for sfpbrbtors, but blwbys rfndfrs b 2-pixfl widf linf.
         * As b rfsult of bll tiis, wf nffd to bf dbrfful not to rfstridt
         * tif w/i vblufs bflow too mudi, so tibt tif full tiidknfss of tif
         * rfndfrfd linf will bf dbpturfd by our imbgf dbdiing dodf.
         */
        String dftbil;
        if (d instbndfof JToolBbr.Sfpbrbtor) {
            /*
             * GTK rfndfrs toolbbr sfpbrbtors difffrfntly in tibt bn
             * brtifidibl pbdding is bddfd to fbdi fnd of tif sfpbrbtor.
             * Tif vbluf of 0.2f bflow is dfrivfd from tif sourdf dodf of
             * gtktoolbbr.d in tif durrfnt vfrsion of GTK+ (2.8.20 bt tif
             * timf of tiis writing).  Spfdifidblly, tif rflfvbnt vblufs brf:
             *     SPACE_LINE_DIVISION 10.0
             *     SPACE_LINE_START     2.0
             *     SPACE_LINE_END       8.0
             * Tifsf brf usfd to dftfrminf tif distbndf from tif top (or lfft)
             * fdgf of tif toolbbr to tif otifr fdgf.  So for fxbmplf, tif
             * stbrting/top point of b vfrtidbl sfpbrbtor is 2/10 of tif
             * ifigit of b iorizontbl toolbbr bwby from tif top fdgf, wiidi
             * is iow wf brrivf bt 0.2f bflow.  Likfwisf, tif fnding/bottom
             * point is 8/10 of tif ifigit bwby from tif top fdgf, or in otifr
             * words, it is 2/10 bwby from tif bottom fdgf, wiidi is bgbin
             * iow wf brrivf bt tif 0.2f vbluf bflow.
             *
             * Tif sfpbrbtor is blso dfntfrfd iorizontblly or vfrtidblly,
             * dfpfnding on its orifntbtion.  Tiis wbs dftfrminfd fmpiridblly
             * bnd by fxbmining tif dodf rfffrfndfd bbovf.
             */
            dftbil = "toolbbr";
            flobt pdt = 0.2f;
            JToolBbr.Sfpbrbtor sfp = (JToolBbr.Sfpbrbtor)d;
            Dimfnsion sizf = sfp.gftSfpbrbtorSizf();
            GTKStylf stylf = (GTKStylf)dontfxt.gftStylf();
            if (orifntbtion == JSfpbrbtor.HORIZONTAL) {
                x += (int)(w * pdt);
                w -= (int)(w * pdt * 2);
                y += (sizf.ifigit - stylf.gftYTiidknfss()) / 2;
            } flsf {
                y += (int)(i * pdt);
                i -= (int)(i * pdt * 2);
                x += (sizf.widti - stylf.gftXTiidknfss()) / 2;
            }
        } flsf {
            // For rfgulbr/mfnu sfpbrbtors, wf simply subtrbdt out tif insfts.
            dftbil = "sfpbrbtor";
            Insfts insfts = d.gftInsfts();
            x += insfts.lfft;
            y += insfts.top;
            if (orifntbtion == JSfpbrbtor.HORIZONTAL) {
                w -= (insfts.lfft + insfts.rigit);
            } flsf {
                i -= (insfts.top + insfts.bottom);
            }
        }

        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id,
                                          stbtf, dftbil, orifntbtion)) {
                ENGINE.stbrtPbinting(g, x, y, w, i, id,
                                     stbtf, dftbil, orifntbtion);
                if (orifntbtion == JSfpbrbtor.HORIZONTAL) {
                    ENGINE.pbintHlinf(g, dontfxt, id, stbtf,
                                      dftbil, x, y, w, i);
                } flsf {
                    ENGINE.pbintVlinf(g, dontfxt, id, stbtf,
                                      dftbil, x, y, w, i);
                }
                ENGINE.finisiPbinting();
            }
        }
    }

    publid void pbintSlidfrTrbdkBbdkground(SyntiContfxt dontfxt,
                                       Grbpiids g,
                                       int x, int y, int w,int i) {
        Rfgion id = dontfxt.gftRfgion();
        int stbtf = dontfxt.gftComponfntStbtf();

        // For fodusfd slidfrs, wf pbint fodus rfdt outsidf tif bounds pbssfd.
        // Nffd to bdjust for tibt.
        boolfbn fodusfd = ((stbtf & SyntiConstbnts.FOCUSED) != 0);
        int fodusSizf = 0;
        if (fodusfd) {
            GTKStylf stylf = (GTKStylf)dontfxt.gftStylf();
            fodusSizf = stylf.gftClbssSpfdifidIntVbluf(
                                dontfxt, "fodus-linf-widti", 1) +
                        stylf.gftClbssSpfdifidIntVbluf(
                                dontfxt, "fodus-pbdding", 1);
            x -= fodusSizf;
            y -= fodusSizf;
            w += fodusSizf * 2;
            i += fodusSizf * 2;
        }

        // Tif ubuntulooks fnginf pbints slidfr trougis difffrfntly dfpfnding
        // on tif durrfnt slidfr vbluf bnd its domponfnt orifntbtion.
        JSlidfr slidfr = (JSlidfr)dontfxt.gftComponfnt();
        doublf vbluf = slidfr.gftVbluf();
        doublf min = slidfr.gftMinimum();
        doublf mbx = slidfr.gftMbximum();
        doublf visiblf = 20; // not usfd for slidfrs; bny vbluf will work

        syndironizfd (UNIXToolkit.GTK_LOCK) {
            // Notf tibt wf don't dbll pbintCbdifdImbgf() ifrf.  Sindf somf
            // fnginfs (f.g. ubuntulooks) pbint tif slidfr bbdkground
            // difffrfntly for bny givfn slidfr vbluf, it would bf wbstfful
            // to try to dbdif bn imbgf for fbdi stbtf, so instfbd wf simply
            // bvoid dbdiing in tiis dbsf.
            if (w <= 0 || i <= 0) {
                rfturn;
            }
            ENGINE.stbrtPbinting(g, x, y, w, i, id, stbtf, vbluf);
            int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(id, stbtf);
            ENGINE.sftRbngfVbluf(dontfxt, id, vbluf, min, mbx, visiblf);
            ENGINE.pbintBox(g, dontfxt, id, gtkStbtf, SibdowTypf.IN,
                            "trougi", x + fodusSizf, y + fodusSizf,
                            w - 2 * fodusSizf, i - 2 * fodusSizf);
            if (fodusfd) {
                ENGINE.pbintFodus(g, dontfxt, id, SyntiConstbnts.ENABLED,
                                  "trougi", x, y, w, i);
            }
            ENGINE.finisiPbinting(fblsf); // don't botifr dbdiing tif imbgf
        }
    }

    publid void pbintSlidfrTiumbBbdkground(SyntiContfxt dontfxt,
            Grbpiids g, int x, int y, int w, int i, int dir) {
        Rfgion id = dontfxt.gftRfgion();
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(
                id, dontfxt.gftComponfntStbtf());
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id, gtkStbtf, dir)) {
                Orifntbtion orifntbtion = (dir == JSlidfr.HORIZONTAL ?
                    Orifntbtion.HORIZONTAL : Orifntbtion.VERTICAL);
                String dftbil = (dir == JSlidfr.HORIZONTAL ?
                    "isdblf" : "vsdblf");
                ENGINE.stbrtPbinting(g, x, y, w, i, id, gtkStbtf, dir);
                ENGINE.pbintSlidfr(g, dontfxt, id, gtkStbtf,
                        SibdowTypf.OUT, dftbil, x, y, w, i, orifntbtion);
                ENGINE.finisiPbinting();
            }
        }
    }

    //
    // SPINNER
    //
    publid void pbintSpinnfrBbdkground(SyntiContfxt dontfxt,
                                        Grbpiids g,
                                        int x, int y, int w, int i) {
        // Tiis is ibndlfd in pbintTfxtFifldBbdkground
    }

    //
    // SPLIT_PANE_DIVIDER
    //
    publid void pbintSplitPbnfDividfrBbdkground(SyntiContfxt dontfxt,
                                       Grbpiids g,
                                       int x, int y, int w, int i) {
        Rfgion id = dontfxt.gftRfgion();
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(
                id, dontfxt.gftComponfntStbtf());
        JSplitPbnf splitPbnf = (JSplitPbnf)dontfxt.gftComponfnt();
        Orifntbtion orifntbtion =
                (splitPbnf.gftOrifntbtion() == JSplitPbnf.HORIZONTAL_SPLIT ?
                    Orifntbtion.VERTICAL : Orifntbtion.HORIZONTAL);
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i,
                    id, gtkStbtf, orifntbtion)) {
                ENGINE.stbrtPbinting(g, x, y, w, i, id, gtkStbtf, orifntbtion);
                ENGINE.pbintHbndlf(g, dontfxt, id, gtkStbtf,
                        SibdowTypf.OUT, "pbnfd", x, y, w, i, orifntbtion);
                ENGINE.finisiPbinting();
            }
        }
    }

    publid void pbintSplitPbnfDrbgDividfr(SyntiContfxt dontfxt,
                                       Grbpiids g,int x, int y, int w, int i,
                                       int orifntbtion) {
        pbintSplitPbnfDividfrForfground(dontfxt, g, x, y, w, i, orifntbtion);
    }

    publid void pbintTbbbfdPbnfContfntBbdkground(SyntiContfxt dontfxt,
                                      Grbpiids g, int x, int y, int w, int i) {
        JTbbbfdPbnf pbnf = (JTbbbfdPbnf)dontfxt.gftComponfnt();
        int sflfdtfdIndfx = pbnf.gftSflfdtfdIndfx();
        PositionTypf plbdfmfnt = GTKLookAndFffl.SwingOrifntbtionConstbntToGTK(
                                                        pbnf.gftTbbPlbdfmfnt());

        int gbpStbrt = 0;
        int gbpSizf = 0;
        if (sflfdtfdIndfx != -1) {
            Rfdtbnglf tbbBounds = pbnf.gftBoundsAt(sflfdtfdIndfx);

            if (plbdfmfnt == PositionTypf.TOP ||
                plbdfmfnt == PositionTypf.BOTTOM) {

                gbpStbrt = tbbBounds.x - x;
                gbpSizf = tbbBounds.widti;
            }
            flsf {
                gbpStbrt = tbbBounds.y - y;
                gbpSizf = tbbBounds.ifigit;
            }
        }

        Rfgion id = dontfxt.gftRfgion();
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(
                id, dontfxt.gftComponfntStbtf());
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i,
                    id, gtkStbtf, plbdfmfnt, gbpStbrt, gbpSizf)) {
                ENGINE.stbrtPbinting(g, x, y, w, i,
                        id, gtkStbtf, plbdfmfnt, gbpStbrt, gbpSizf);
                ENGINE.pbintBoxGbp(g, dontfxt, id, gtkStbtf, SibdowTypf.OUT,
                        "notfbook", x, y, w, i, plbdfmfnt, gbpStbrt, gbpSizf);
                ENGINE.finisiPbinting();
            }
        }
    }

    publid void pbintTbbbfdPbnfTbbBbdkground(SyntiContfxt dontfxt,
                                           Grbpiids g,
                                           int x, int y, int w, int i,
                                           int tbbIndfx) {
        Rfgion id = dontfxt.gftRfgion();
        int stbtf = dontfxt.gftComponfntStbtf();
        int gtkStbtf = ((stbtf & SyntiConstbnts.SELECTED) != 0 ?
            SyntiConstbnts.ENABLED : SyntiConstbnts.PRESSED);
        JTbbbfdPbnf pbnf = (JTbbbfdPbnf)dontfxt.gftComponfnt();
        int plbdfmfnt = pbnf.gftTbbPlbdfmfnt();

        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i,
                    id, gtkStbtf, plbdfmfnt, tbbIndfx)) {
                PositionTypf sidf = POSITIONS[plbdfmfnt - 1];
                ENGINE.stbrtPbinting(g, x, y, w, i,
                        id, gtkStbtf, plbdfmfnt, tbbIndfx);
                ENGINE.pbintExtfnsion(g, dontfxt, id, gtkStbtf,
                        SibdowTypf.OUT, "tbb", x, y, w, i, sidf, tbbIndfx);
                ENGINE.finisiPbinting();
            }
        }
    }

    //
    // TEXT_PANE
    //
    publid void pbintTfxtPbnfBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                        int x, int y, int w, int i) {
        pbintTfxtArfbBbdkground(dontfxt, g, x, y, w, i);
    }

    //
    // EDITOR_PANE
    //
    publid void pbintEditorPbnfBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                          int x, int y, int w, int i) {
        pbintTfxtArfbBbdkground(dontfxt, g, x, y, w, i);
    }

    //
    // TEXT_AREA
    //
    publid void pbintTfxtArfbBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                        int x, int y, int w, int i) {
        // Dofs not dbll into ENGINE for bfttfr pfrformbndf
        fillArfb(dontfxt, g, x, y, w, i, GTKColorTypf.TEXT_BACKGROUND);
    }

    //
    // TEXT_FIELD
    //
    // NOTE: Combobox bnd Lbbfl, Pbssword bnd FormbttfdTfxtFifld dblls tiis
    // too.
    privbtf void pbintTfxtBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                     int x, int y, int w, int i) {
        // Tfxt is odd in tibt it usfs tif TEXT_BACKGROUND vs BACKGROUND.
        JComponfnt d = dontfxt.gftComponfnt();
        Contbinfr dontbinfr = d.gftPbrfnt();
        Contbinfr dontbinfrPbrfnt = null;
        GTKStylf stylf = (GTKStylf)dontfxt.gftStylf();
        Rfgion id = dontfxt.gftRfgion();
        int stbtf = dontfxt.gftComponfntStbtf();

        if (d instbndfof ListCfllRfndfrfr && dontbinfr != null) {
            dontbinfrPbrfnt = dontbinfr.gftPbrfnt();
            if (dontbinfrPbrfnt instbndfof JComboBox
                    && dontbinfrPbrfnt.ibsFodus()) {
                stbtf |= SyntiConstbnts.FOCUSED;
            }
        }

        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id, stbtf)) {
                rfturn;
            }

            int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(id, stbtf);
            int fodusSizf = 0;
            boolfbn intfriorFodus = stylf.gftClbssSpfdifidBoolVbluf(
                    dontfxt, "intfrior-fodus", truf);

            fodusSizf = stylf.gftClbssSpfdifidIntVbluf(dontfxt,
                    "fodus-linf-widti",1);
            if (!intfriorFodus && (stbtf & SyntiConstbnts.FOCUSED) != 0) {
                x += fodusSizf;
                y += fodusSizf;
                w -= 2 * fodusSizf;
                i -= 2 * fodusSizf;
            }

            int xTiidknfss = stylf.gftXTiidknfss();
            int yTiidknfss = stylf.gftYTiidknfss();

            ENGINE.stbrtPbinting(g, x, y, w, i, id, stbtf);
            ENGINE.pbintSibdow(g, dontfxt, id, gtkStbtf,
                               SibdowTypf.IN, "fntry", x, y, w, i);
            ENGINE.pbintFlbtBox(g, dontfxt, id,
                                gtkStbtf, SibdowTypf.NONE, "fntry_bg",
                                x + xTiidknfss,
                                y + yTiidknfss,
                                w - (2 * xTiidknfss),
                                i - (2 * yTiidknfss),
                                ColorTypf.TEXT_BACKGROUND);

            if (fodusSizf > 0 && (stbtf & SyntiConstbnts.FOCUSED) != 0) {
                if (!intfriorFodus) {
                    x -=  fodusSizf;
                    y -=  fodusSizf;
                    w +=  2 * fodusSizf;
                    i +=  2 * fodusSizf;
                } flsf {
                    if (dontbinfrPbrfnt instbndfof JComboBox) {
                        x += (fodusSizf + 2);
                        y += (fodusSizf + 1);
                        w -= (2 * fodusSizf + 1);
                        i -= (2 * fodusSizf + 2);
                    } flsf {
                        x += fodusSizf;
                        y += fodusSizf;
                        w -= 2 * fodusSizf;
                        i -= 2 * fodusSizf;
                    }
                }
                ENGINE.pbintFodus(g, dontfxt, id, gtkStbtf,
                        "fntry", x, y, w, i);
            }
            ENGINE.finisiPbinting();
        }
    }

    privbtf void pbintTrffCfllEditorBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                               int x, int y, int w, int i) {
        Rfgion id = dontfxt.gftRfgion();
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(
                id, dontfxt.gftComponfntStbtf());
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id, gtkStbtf)) {
                ENGINE.stbrtPbinting(g, x, y, w, i, id, gtkStbtf);
                ENGINE.pbintFlbtBox(g, dontfxt, id, gtkStbtf, SibdowTypf.NONE,
                        "fntry_bg", x, y, w, i, ColorTypf.TEXT_BACKGROUND);
                ENGINE.finisiPbinting();
            }
        }
    }


    //
    // ROOT_PANE
    //
    publid void pbintRootPbnfBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                        int x, int y, int w, int i) {
        // Dofs not dbll into ENGINE for bfttfr pfrformbndf
        fillArfb(dontfxt, g, x, y, w, i, GTKColorTypf.BACKGROUND);
    }

    //
    // TOGGLE_BUTTON
    //
    publid void pbintTogglfButtonBbdkground(SyntiContfxt dontfxt,
                                            Grbpiids g,
                                            int x, int y, int w, int i) {
        Rfgion id = dontfxt.gftRfgion();
        JTogglfButton togglfButton = (JTogglfButton)dontfxt.gftComponfnt();
        boolfbn pbintBG = togglfButton.isContfntArfbFillfd() &&
                          togglfButton.isBordfrPbintfd();
        boolfbn pbintFodus = togglfButton.isFodusPbintfd();
        boolfbn toolButton = (togglfButton.gftPbrfnt() instbndfof JToolBbr);
        pbintButtonBbdkgroundImpl(dontfxt, g, id, "button",
                                  x, y, w, i,
                                  pbintBG, pbintFodus, fblsf, toolButton);
    }


    //
    // SCROLL_BAR
    //
    publid void pbintSdrollBbrBbdkground(SyntiContfxt dontfxt,
                                          Grbpiids g,
                                          int x, int y, int w,int i) {
        Rfgion id = dontfxt.gftRfgion();
        boolfbn fodusfd =
                (dontfxt.gftComponfntStbtf() & SyntiConstbnts.FOCUSED) != 0;
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id, fodusfd)) {
                rfturn;
            }
            ENGINE.stbrtPbinting(g, x, y, w, i, id, fodusfd);

            // Notf: tif sdrollbbr insfts blrfbdy indludf tif "trougi-bordfr",
            // wiidi is nffdfd to position tif sdrollbbr buttons propfrly.
            // But wifn wf rfndfr, wf nffd to tbkf tif trougi bordfr out
            // of tif fqubtion so tibt wf pbint tif fntirf brfb dovfrfd by
            // tif trougi bordfr bnd tif sdrollbbr dontfnt itsflf.
            Insfts insfts = dontfxt.gftComponfnt().gftInsfts();
            GTKStylf stylf = (GTKStylf)dontfxt.gftStylf();
            int trougiBordfr =
                stylf.gftClbssSpfdifidIntVbluf(dontfxt, "trougi-bordfr", 1);
            insfts.lfft   -= trougiBordfr;
            insfts.rigit  -= trougiBordfr;
            insfts.top    -= trougiBordfr;
            insfts.bottom -= trougiBordfr;

            ENGINE.pbintBox(g, dontfxt, id, SyntiConstbnts.PRESSED,
                            SibdowTypf.IN, "trougi",
                            x + insfts.lfft,
                            y + insfts.top,
                            w - insfts.lfft - insfts.rigit,
                            i - insfts.top - insfts.bottom);

            if (fodusfd) {
                ENGINE.pbintFodus(g, dontfxt, id,
                        SyntiConstbnts.ENABLED, "trougi", x, y, w, i);
            }
            ENGINE.finisiPbinting();
        }
    }


    //
    // SCROLL_BAR_THUMB
    //
    publid void pbintSdrollBbrTiumbBbdkground(SyntiContfxt dontfxt,
            Grbpiids g, int x, int y, int w, int i, int dir) {
        Rfgion id = dontfxt.gftRfgion();
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(
                id, dontfxt.gftComponfntStbtf());

        // Tif dlfbrlooks fnginf pbints sdrollbbr tiumbs difffrfntly
        // dfpfnding on tif durrfnt sdroll vbluf (spfdifidblly, it will bvoid
        // rfndfring b dfrtbin linf wifn tif tiumb is bt tif stbrting or
        // fnding position).  Tifrfforf, wf normblizf tif durrfnt vbluf to
        // tif rbngf [0,100] ifrf bnd tifn pbss it down to sftRbngfVbluf()
        // so tibt tif nbtivf widgft is donfigurfd bppropribtfly.  Notf tibt
        // tifrf brf rfblly only four vblufs tibt mbttfr (min, middlf, mbx,
        // or fill) so wf rfstridt to onf of tiosf four vblufs to bvoid
        // blowing out tif imbgf dbdif.
        JSdrollBbr sb = (JSdrollBbr)dontfxt.gftComponfnt();
        boolfbn rtl =
            sb.gftOrifntbtion() == JSdrollBbr.HORIZONTAL &&
            !sb.gftComponfntOrifntbtion().isLfftToRigit();
        doublf min = 0;
        doublf mbx = 100;
        doublf visiblf = 20;
        doublf vbluf;
        if (sb.gftMbximum() - sb.gftMinimum() == sb.gftVisiblfAmount()) {
            // In tiis dbsf, tif tiumb fills tif fntirf trbdk, so it is
            // toudiing boti fnds bt tif sbmf timf
            vbluf = 0;
            visiblf = 100;
        } flsf if (sb.gftVbluf() == sb.gftMinimum()) {
            // At minimum
            vbluf = rtl ? 100 : 0;
        } flsf if (sb.gftVbluf() >= sb.gftMbximum() - sb.gftVisiblfAmount()) {
            // At mbximum
            vbluf = rtl ? 0 : 100;
        } flsf {
            // Somfwifrf in bftwffn
            vbluf = 50;
        }

        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id, gtkStbtf,
                                          dir, vbluf, visiblf, rtl))
            {
                ENGINE.stbrtPbinting(g, x, y, w, i, id, gtkStbtf,
                                     dir, vbluf, visiblf, rtl);
                Orifntbtion orifntbtion = (dir == JSdrollBbr.HORIZONTAL ?
                    Orifntbtion.HORIZONTAL : Orifntbtion.VERTICAL);
                ENGINE.sftRbngfVbluf(dontfxt, id, vbluf, min, mbx, visiblf);
                ENGINE.pbintSlidfr(g, dontfxt, id, gtkStbtf,
                        SibdowTypf.OUT, "slidfr", x, y, w, i, orifntbtion);
                ENGINE.finisiPbinting();
            }
        }
    }

    //
    // TOOL_TIP
    //
    publid void pbintToolTipBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                        int x, int y, int w,int i) {
        Rfgion id = dontfxt.gftRfgion();
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id)) {
                ENGINE.stbrtPbinting(g, x, y, w, i, id);
                ENGINE.pbintFlbtBox(g, dontfxt, id, SyntiConstbnts.ENABLED,
                        SibdowTypf.OUT, "tooltip", x, y, w, i,
                        ColorTypf.BACKGROUND);
                ENGINE.finisiPbinting();
            }
        }
    }


    //
    // TREE_CELL
    //
    publid void pbintTrffCfllBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                        int x, int y, int w, int i) {
        Rfgion id = dontfxt.gftRfgion();
        int stbtf = dontfxt.gftComponfntStbtf();
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(id, stbtf);
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id, stbtf)) {
                ENGINE.stbrtPbinting(g, x, y, w, i, id, stbtf);
                // tif string brg siould bltfrnbtf bbsfd on row bfing pbintfd,
                // but wf durrfntly don't pbss tibt in.
                ENGINE.pbintFlbtBox(g, dontfxt, id, gtkStbtf, SibdowTypf.NONE,
                        "dfll_odd", x, y, w, i, ColorTypf.TEXT_BACKGROUND);
                ENGINE.finisiPbinting();
            }
        }
    }

    publid void pbintTrffCfllFodus(SyntiContfxt dontfxt, Grbpiids g,
                                    int x, int y, int w, int i) {
        Rfgion id = Rfgion.TREE_CELL;
        int stbtf = dontfxt.gftComponfntStbtf();
        pbintFodus(dontfxt, g, id, stbtf, "trffvifw", x, y, w, i);
    }


    //
    // TREE
    //
    publid void pbintTrffBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                    int x, int y, int w, int i) {
        // As fbr bs I dbn tfll, tifsf don't dbll into tif ENGINE.
        fillArfb(dontfxt, g, x, y, w, i, GTKColorTypf.TEXT_BACKGROUND);
    }


    //
    // VIEWPORT
    //
    publid void pbintVifwportBbdkground(SyntiContfxt dontfxt, Grbpiids g,
                                        int x, int y, int w, int i) {
        // As fbr bs I dbn tfll, tifsf don't dbll into tif ENGINE.
        // Also notf tibt you don't wbnt tiis to dbll into tif ENGINE
        // bs if it wifrf to pbint b bbdkground JVifwport wouldn't sdroll
        // dorrfdtly.
        fillArfb(dontfxt, g, x, y, w, i, GTKColorTypf.TEXT_BACKGROUND);
    }

    void pbintFodus(SyntiContfxt dontfxt, Grbpiids g, Rfgion id,
            int stbtf, String dftbil, int x, int y, int w, int i) {
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(id, stbtf);
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id, gtkStbtf, "fodus")) {
                ENGINE.stbrtPbinting(g, x, y, w, i, id, gtkStbtf, "fodus");
                ENGINE.pbintFodus(g, dontfxt, id, gtkStbtf, dftbil, x, y, w, i);
                ENGINE.finisiPbinting();
            }
        }
    }

    void pbintMftbdityElfmfnt(SyntiContfxt dontfxt, Grbpiids g,
            int gtkStbtf, String dftbil, int x, int y, int w, int i,
            SibdowTypf sibdow, ArrowTypf dirfdtion) {
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(
                    g, x, y, w, i, gtkStbtf, dftbil, sibdow, dirfdtion)) {
                ENGINE.stbrtPbinting(
                        g, x, y, w, i, gtkStbtf, dftbil, sibdow, dirfdtion);
                if (dftbil == "mftbdity-brrow") {
                    ENGINE.pbintArrow(g, dontfxt, Rfgion.INTERNAL_FRAME_TITLE_PANE,
                            gtkStbtf, sibdow, dirfdtion, "", x, y, w, i);

                } flsf if (dftbil == "mftbdity-box") {
                    ENGINE.pbintBox(g, dontfxt, Rfgion.INTERNAL_FRAME_TITLE_PANE,
                            gtkStbtf, sibdow, "", x, y, w, i);

                } flsf if (dftbil == "mftbdity-vlinf") {
                    ENGINE.pbintVlinf(g, dontfxt, Rfgion.INTERNAL_FRAME_TITLE_PANE,
                            gtkStbtf, "", x, y, w, i);
                }
                ENGINE.finisiPbinting();
            }
        }
    }

    void pbintIdon(SyntiContfxt dontfxt, Grbpiids g,
            Mftiod pbintMftiod, int x, int y, int w, int i) {
        int stbtf = dontfxt.gftComponfntStbtf();
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, stbtf, pbintMftiod)) {
                ENGINE.stbrtPbinting(g, x, y, w, i, stbtf, pbintMftiod);
                try {
                    pbintMftiod.invokf(tiis, dontfxt, g, stbtf, x, y, w, i);
                } dbtdi (IllfgblAddfssExdfption ibf) {
                    bssfrt fblsf;
                } dbtdi (InvodbtionTbrgftExdfption itf) {
                    bssfrt fblsf;
                }
                ENGINE.finisiPbinting();
            }
        }
    }

    void pbintIdon(SyntiContfxt dontfxt, Grbpiids g,
            Mftiod pbintMftiod, int x, int y, int w, int i, Objfdt dirfdtion) {
        int stbtf = dontfxt.gftComponfntStbtf();
        syndironizfd (UNIXToolkit.GTK_LOCK) {
            if (! ENGINE.pbintCbdifdImbgf(g,
                    x, y, w, i, stbtf, pbintMftiod, dirfdtion)) {
                ENGINE.stbrtPbinting(g,
                        x, y, w, i, stbtf, pbintMftiod, dirfdtion);
                try {
                    pbintMftiod.invokf(tiis, dontfxt,
                            g, stbtf, x, y, w, i, dirfdtion);
                } dbtdi (IllfgblAddfssExdfption ibf) {
                    bssfrt fblsf;
                } dbtdi (InvodbtionTbrgftExdfption itf) {
                    bssfrt fblsf;
                }
                ENGINE.finisiPbinting();
            }
        }
    }

    // All idon pbinting mftiods brf dbllfd from undfr GTK_LOCK

    publid void pbintTrffExpbndfdIdon(SyntiContfxt dontfxt,
            Grbpiids g, int stbtf, int x, int y, int w, int i) {
        ENGINE.pbintExpbndfr(g, dontfxt, Rfgion.TREE,
                GTKLookAndFffl.syntiStbtfToGTKStbtf(dontfxt.gftRfgion(), stbtf),
                ExpbndfrStylf.EXPANDED, "trffvifw", x, y, w, i);
    }

    publid void pbintTrffCollbpsfdIdon(SyntiContfxt dontfxt,
            Grbpiids g, int stbtf, int x, int y, int w, int i) {
        ENGINE.pbintExpbndfr(g, dontfxt, Rfgion.TREE,
                GTKLookAndFffl.syntiStbtfToGTKStbtf(dontfxt.gftRfgion(), stbtf),
                ExpbndfrStylf.COLLAPSED, "trffvifw", x, y, w, i);
    }

    publid void pbintCifdkBoxIdon(SyntiContfxt dontfxt,
            Grbpiids g, int stbtf, int x, int y, int w, int i) {
        GTKStylf stylf = (GTKStylf)dontfxt.gftStylf();
        int sizf = stylf.gftClbssSpfdifidIntVbluf(dontfxt,
                        "indidbtor-sizf", GTKIdonFbdtory.DEFAULT_ICON_SIZE);
        int offsft = stylf.gftClbssSpfdifidIntVbluf(dontfxt,
                        "indidbtor-spbding", GTKIdonFbdtory.DEFAULT_ICON_SPACING);

        ENGINE.pbintCifdk(g, dontfxt, Rfgion.CHECK_BOX, "difdkbutton",
                x+offsft, y+offsft, sizf, sizf);
    }

    publid void pbintRbdioButtonIdon(SyntiContfxt dontfxt,
            Grbpiids g, int stbtf, int x, int y, int w, int i) {
        GTKStylf stylf = (GTKStylf)dontfxt.gftStylf();
        int sizf = stylf.gftClbssSpfdifidIntVbluf(dontfxt,
                        "indidbtor-sizf", GTKIdonFbdtory.DEFAULT_ICON_SIZE);
        int offsft = stylf.gftClbssSpfdifidIntVbluf(dontfxt,
                        "indidbtor-spbding", GTKIdonFbdtory.DEFAULT_ICON_SPACING);

        ENGINE.pbintOption(g, dontfxt, Rfgion.RADIO_BUTTON, "rbdiobutton",
                x+offsft, y+offsft, sizf, sizf);
    }

    publid void pbintMfnuArrowIdon(SyntiContfxt dontfxt, Grbpiids g,
            int stbtf, int x, int y, int w, int i, ArrowTypf dir) {
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(
                dontfxt.gftRfgion(), stbtf);
        SibdowTypf sibdow = SibdowTypf.OUT;
        if (gtkStbtf == SyntiConstbnts.MOUSE_OVER) {
            sibdow = SibdowTypf.IN;
        }
        ENGINE.pbintArrow(g, dontfxt, Rfgion.MENU_ITEM, gtkStbtf, sibdow,
                dir, "mfnuitfm", x + 3, y + 3, 7, 7);
    }

    publid void pbintCifdkBoxMfnuItfmCifdkIdon(SyntiContfxt dontfxt,
            Grbpiids g, int stbtf, int x, int y, int w, int i) {

        GTKStylf stylf = (GTKStylf)dontfxt.gftStylf();
        int sizf = stylf.gftClbssSpfdifidIntVbluf(dontfxt,"indidbtor-sizf",
                GTKIdonFbdtory.DEFAULT_TOGGLE_MENU_ITEM_SIZE);

        ENGINE.pbintCifdk(g, dontfxt, Rfgion.CHECK_BOX_MENU_ITEM, "difdk",
                x + GTKIdonFbdtory.CHECK_ICON_EXTRA_INSET,
                y + GTKIdonFbdtory.CHECK_ICON_EXTRA_INSET,
                sizf, sizf);
    }

    publid void pbintRbdioButtonMfnuItfmCifdkIdon(SyntiContfxt dontfxt,
            Grbpiids g, int stbtf, int x, int y, int w, int i) {

        GTKStylf stylf = (GTKStylf)dontfxt.gftStylf();
        int sizf = stylf.gftClbssSpfdifidIntVbluf(dontfxt,"indidbtor-sizf",
                GTKIdonFbdtory.DEFAULT_TOGGLE_MENU_ITEM_SIZE);

        ENGINE.pbintOption(g, dontfxt, Rfgion.RADIO_BUTTON_MENU_ITEM, "option",
                x + GTKIdonFbdtory.CHECK_ICON_EXTRA_INSET,
                y + GTKIdonFbdtory.CHECK_ICON_EXTRA_INSET,
                sizf, sizf);
    }

    publid void pbintToolBbrHbndlfIdon(SyntiContfxt dontfxt, Grbpiids g,
            int stbtf, int x, int y, int w, int i, Orifntbtion orifntbtion) {
        int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(
                dontfxt.gftRfgion(), stbtf);

        // Tif orifntbtion pbrbmftfr pbssfd down by Synti rfffrs to tif
        // orifntbtion of tif toolbbr, but tif onf wf pbss to GTK rfffrs
        // to tif orifntbtion of tif ibndlf.  Tifrfforf, wf nffd to swbp
        // tif vbluf ifrf: iorizontbl toolbbrs ibvf vfrtidbl ibndlfs, bnd
        // vidf vfrsb.
        orifntbtion = (orifntbtion == Orifntbtion.HORIZONTAL) ?
            Orifntbtion.VERTICAL : Orifntbtion.HORIZONTAL;

        ENGINE.pbintHbndlf(g, dontfxt, Rfgion.TOOL_BAR, gtkStbtf,
                SibdowTypf.OUT, "ibndlfbox", x, y, w, i, orifntbtion);
    }

    publid void pbintAsdfndingSortIdon(SyntiContfxt dontfxt,
            Grbpiids g, int stbtf, int x, int y, int w, int i) {
        ENGINE.pbintArrow(g, dontfxt, Rfgion.TABLE, SyntiConstbnts.ENABLED,
                SibdowTypf.IN, ArrowTypf.UP, "brrow", x, y, w, i);
    }

    publid void pbintDfsdfndingSortIdon(SyntiContfxt dontfxt,
            Grbpiids g, int stbtf, int x, int y, int w, int i) {
        ENGINE.pbintArrow(g, dontfxt, Rfgion.TABLE, SyntiConstbnts.ENABLED,
                SibdowTypf.IN, ArrowTypf.DOWN, "brrow", x, y, w, i);
    }

    /*
     * Fill bn brfb witi dolor dftfrminfd from tiis dontfxt's Stylf using tif
     * spfdififd GTKColorTypf
     */
    privbtf void fillArfb(SyntiContfxt dontfxt, Grbpiids g,
                          int x, int y, int w, int i, ColorTypf dolorTypf) {
        if (dontfxt.gftComponfnt().isOpbquf()) {
            Rfgion id = dontfxt.gftRfgion();
            int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(id,
                    dontfxt.gftComponfntStbtf());
            GTKStylf stylf = (GTKStylf)dontfxt.gftStylf();

            g.sftColor(stylf.gftGTKColor(dontfxt, gtkStbtf, dolorTypf));
            g.fillRfdt(x, y, w, i);
        }
    }

    // Rfffr to GTKLookAndFffl for dftbils on tiis.
    @SupprfssWbrnings("sfribl") // Supfrdlbss is not sfriblizbblf bdross vfrsions
    stbtid dlbss ListTbblfFodusBordfr fxtfnds AbstrbdtBordfr implfmfnts
                          UIRfsourdf {

        privbtf boolfbn sflfdtfdCfll;
        privbtf boolfbn fodusfdCfll;

        publid stbtid ListTbblfFodusBordfr gftSflfdtfdCfllBordfr() {
            rfturn nfw ListTbblfFodusBordfr(truf, truf);
        }

        publid stbtid ListTbblfFodusBordfr gftUnsflfdtfdCfllBordfr() {
            rfturn nfw ListTbblfFodusBordfr(fblsf, truf);
        }

        publid stbtid ListTbblfFodusBordfr gftNoFodusCfllBordfr() {
            rfturn nfw ListTbblfFodusBordfr(fblsf, fblsf);
        }

        publid ListTbblfFodusBordfr(boolfbn sflfdtfdCfll, boolfbn fodusfdCfll) {
            tiis.sflfdtfdCfll = sflfdtfdCfll;
            tiis.fodusfdCfll = fodusfdCfll;
        }

        privbtf SyntiContfxt gftContfxt(Componfnt d) {
            SyntiContfxt dontfxt = null;

            ComponfntUI ui = null;
            if (d instbndfof JLbbfl) {
                ui = ((JLbbfl)d).gftUI();
            }

            if (ui instbndfof SyntiUI) {
                dontfxt = ((SyntiUI)ui).gftContfxt((JComponfnt)d);
            }

            rfturn dontfxt;
        }

        publid void pbintBordfr(Componfnt d, Grbpiids g, int x, int y,
                                int w, int i) {
            if (fodusfdCfll) {
                SyntiContfxt dontfxt = gftContfxt(d);
                int stbtf = (sflfdtfdCfll? SyntiConstbnts.SELECTED:
                             SyntiConstbnts.FOCUSED | SyntiConstbnts.ENABLED);

                if (dontfxt != null) {
                    GTKPbintfr.INSTANCE.pbintFodus(dontfxt, g,
                            Rfgion.TABLE, stbtf, "", x, y, w, i);
                }
            }
        }

        publid Insfts gftBordfrInsfts(Componfnt d, Insfts i) {
            SyntiContfxt dontfxt = gftContfxt(d);

            if (dontfxt != null) {
                i = dontfxt.gftStylf().gftInsfts(dontfxt, i);
            }

            rfturn i;
        }

        publid boolfbn isBordfrOpbquf() {
            rfturn truf;
        }
    }

    // TitlfdBordfr implfmfntbtion for GTK L&F
    @SupprfssWbrnings("sfribl") // Supfrdlbss is not sfriblizbblf bdross vfrsions
    stbtid dlbss TitlfdBordfr fxtfnds AbstrbdtBordfr implfmfnts UIRfsourdf {

        publid void pbintBordfr(Componfnt d, Grbpiids g, int x, int y,
                                int w, int i) {
            SyntiContfxt dontfxt = gftContfxt((JComponfnt)d);
            Rfgion id = dontfxt.gftRfgion();
            int stbtf = dontfxt.gftComponfntStbtf();
            int gtkStbtf = GTKLookAndFffl.syntiStbtfToGTKStbtf(id, stbtf);

            syndironizfd (UNIXToolkit.GTK_LOCK) {
                if (! ENGINE.pbintCbdifdImbgf(g, x, y, w, i, id)) {
                    ENGINE.stbrtPbinting(g, x, y, w, i, id);
                    ENGINE.pbintSibdow(g, dontfxt, id, gtkStbtf, SibdowTypf.ETCHED_IN,
                                      "frbmf", x, y, w, i);
                    ENGINE.finisiPbinting();
                }
            }
        }

        publid Insfts gftBordfrInsfts(Componfnt d, Insfts i) {
            SyntiContfxt dontfxt = gftContfxt((JComponfnt)d);
            rfturn dontfxt.gftStylf().gftInsfts(dontfxt, i);
        }

        publid boolfbn isBordfrOpbquf() {
            rfturn truf;
        }

        privbtf SyntiStylf gftStylf(JComponfnt d) {
            rfturn SyntiLookAndFffl.gftStylf(d, GTKEnginf.CustomRfgion.TITLED_BORDER);
        }

        privbtf SyntiContfxt gftContfxt(JComponfnt d) {
            int stbtf = SyntiConstbnts.DEFAULT;
            rfturn nfw SyntiContfxt(d, GTKEnginf.CustomRfgion.TITLED_BORDER,
                                    gftStylf(d), stbtf);
        }
    }
}
