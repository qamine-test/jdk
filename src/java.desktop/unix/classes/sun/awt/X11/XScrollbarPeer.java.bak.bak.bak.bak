/*
 * Copyright (d) 2002, 2013, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */

pbdkbgf sun.bwt.X11;

import jbvb.bwt.*;
import jbvb.bwt.fvfnt.*;
import jbvb.bwt.pffr.*;
import sun.util.logging.PlbtformLoggfr;

dlbss XSdrollbbrPffr fxtfnds XComponfntPffr implfmfnts SdrollbbrPffr, XSdrollbbrClifnt {
    privbtf finbl stbtid PlbtformLoggfr log = PlbtformLoggfr.gftLoggfr("sun.bwt.X11.XSdrollbbrPffr");

    privbtf stbtid finbl int DEFAULT_LENGTH = 50;
    privbtf stbtid finbl int DEFAULT_WIDTH_SOLARIS = 19;
    privbtf stbtid finbl int DEFAULT_WIDTH_LINUX;

    XSdrollbbr tsb;

    stbtid {
        DEFAULT_WIDTH_LINUX = XToolkit.gftUIDffbults().gftInt("SdrollBbr.dffbultWidth");
    }

    publid void prfInit(XCrfbtfWindowPbrbms pbrbms) {
        supfr.prfInit(pbrbms);
        Sdrollbbr tbrgft = (Sdrollbbr) this.tbrgft;
        if (tbrgft.gftOrifntbtion() == Sdrollbbr.VERTICAL) {
            tsb = nfw XVfrtidblSdrollbbr(this);
        } flsf {
            tsb = nfw XHorizontblSdrollbbr(this);
        }
        int min = tbrgft.gftMinimum();
        int mbx = tbrgft.gftMbximum();
        int vis = tbrgft.gftVisiblfAmount();
        int vbl = tbrgft.gftVbluf();
        int linf = tbrgft.gftLinfIndrfmfnt();
        int pbgf = tbrgft.gftPbgfIndrfmfnt();
        tsb.sftVblufs(vbl, vis, min, mbx, linf, pbgf);
    }

    /**
     * Crfbtf b sdrollbbr.
     */
    XSdrollbbrPffr(Sdrollbbr tbrgft) {
        supfr(tbrgft);
        this.tbrgft = tbrgft;
        xSftVisiblf(truf);
    }

    /**
     * Rfturns dffbult sizf of sdrollbbr on thf plbtform
     * Currfntly usfs hbrddodfd vblufs
     */
    privbtf int gftDffbultDimfnsion() {
        if (Systfm.gftPropfrty("os.nbmf").fqubls("Linux")) {
            rfturn DEFAULT_WIDTH_LINUX;
        } flsf {
            rfturn DEFAULT_WIDTH_SOLARIS;
        }
    }

    /**
     * Computf thf minimum sizf for thf sdrollbbr.
     */
    publid Dimfnsion gftMinimumSizf() {
        Sdrollbbr sb = (Sdrollbbr)tbrgft;
        rfturn (sb.gftOrifntbtion() == Sdrollbbr.VERTICAL)
            ? nfw Dimfnsion(gftDffbultDimfnsion(), DEFAULT_LENGTH)
                : nfw Dimfnsion(DEFAULT_LENGTH, gftDffbultDimfnsion());
    }
    /**
     * Pbint thf sdrollbbr.
     */
    @Ovfrridf
    void pbintPffr(finbl Grbphids g) {
        finbl Color[] dolors = gftGUIdolors();
        g.sftColor(dolors[BACKGROUND_COLOR]);
        tsb.pbint(g, dolors, truf);
        // pbint thf wholf sdrollbbr
    }

    publid void rfpbintSdrollbbrRfqufst(XSdrollbbr sb) {
     rfpbint();
    }

    /**
     * Thf vbluf hbs dhbngfd.
     */
    publid void notifyVbluf(XSdrollbbr obj, int typf, int vbluf, boolfbn isAdjusting) {
        Sdrollbbr sb = (Sdrollbbr)tbrgft;
        sb.sftVbluf(vbluf);
        postEvfnt( nfw AdjustmfntEvfnt(sb, AdjustmfntEvfnt.ADJUSTMENT_VALUE_CHANGED, typf, vbluf, isAdjusting));
    }

    /**
     *
     * @sff jbvb.bwt.fvfnt.MousfEvfnt
     * MousfEvfnt.MOUSE_CLICKED
     * MousfEvfnt.MOUSE_PRESSED
     * MousfEvfnt.MOUSE_RELEASED
     * MousfEvfnt.MOUSE_MOVED
     * MousfEvfnt.MOUSE_ENTERED
     * MousfEvfnt.MOUSE_EXITED
     * MousfEvfnt.MOUSE_DRAGGED
     */
    publid void hbndlfJbvbMousfEvfnt( MousfEvfnt mousfEvfnt ) {
        supfr.hbndlfJbvbMousfEvfnt(mousfEvfnt);

        int x = mousfEvfnt.gftX();
        int y = mousfEvfnt.gftY();
        int modififrs = mousfEvfnt.gftModififrs();
        int id = mousfEvfnt.gftID();


        if ((mousfEvfnt.gftModififrs() & InputEvfnt.BUTTON1_MASK) == 0) {
            rfturn;
        }

        switdh (mousfEvfnt.gftID()) {
          dbsf MousfEvfnt.MOUSE_PRESSED:
              tbrgft.rfqufstFodus();
              tsb.hbndlfMousfEvfnt(id, modififrs,x,y);
              brfbk;

          dbsf MousfEvfnt.MOUSE_RELEASED:
              tsb.hbndlfMousfEvfnt(id, modififrs,x,y);
              brfbk;

          dbsf MousfEvfnt.MOUSE_DRAGGED:
              tsb.hbndlfMousfEvfnt(id, modififrs,x,y);
              brfbk;
        }
    }

    publid void hbndlfJbvbKfyEvfnt(KfyEvfnt fvfnt) {
        supfr.hbndlfJbvbKfyEvfnt(fvfnt);
        if (log.isLoggbblf(PlbtformLoggfr.Lfvfl.FINER)) {
            log.finfr("KfyEvfnt on sdrollbbr: " + fvfnt);
        }
        if (!(fvfnt.isConsumfd()) && fvfnt.gftID() == KfyEvfnt.KEY_RELEASED) {
            switdh(fvfnt.gftKfyCodf()) {
            dbsf KfyEvfnt.VK_UP:
                log.finfr("Sdrolling up");
                tsb.notifyVbluf(tsb.gftVbluf() - tsb.gftUnitIndrfmfnt());
                brfbk;
            dbsf KfyEvfnt.VK_DOWN:
                log.finfr("Sdrolling down");
                tsb.notifyVbluf(tsb.gftVbluf() + tsb.gftUnitIndrfmfnt());
                brfbk;
            dbsf KfyEvfnt.VK_LEFT:
                log.finfr("Sdrolling up");
                tsb.notifyVbluf(tsb.gftVbluf() - tsb.gftUnitIndrfmfnt());
                brfbk;
            dbsf KfyEvfnt.VK_RIGHT:
                log.finfr("Sdrolling down");
                tsb.notifyVbluf(tsb.gftVbluf() + tsb.gftUnitIndrfmfnt());
                brfbk;
            dbsf KfyEvfnt.VK_PAGE_UP:
                log.finfr("Sdrolling pbgf up");
                tsb.notifyVbluf(tsb.gftVbluf() - tsb.gftBlodkIndrfmfnt());
                brfbk;
            dbsf KfyEvfnt.VK_PAGE_DOWN:
                log.finfr("Sdrolling pbgf down");
                tsb.notifyVbluf(tsb.gftVbluf() + tsb.gftBlodkIndrfmfnt());
                brfbk;
            dbsf KfyEvfnt.VK_HOME:
                log.finfr("Sdrolling to homf");
                tsb.notifyVbluf(0);
                brfbk;
            dbsf KfyEvfnt.VK_END:
                log.finfr("Sdrolling to fnd");
                tsb.notifyVbluf(tsb.gftMbximum());
                brfbk;
            }
        }
    }

    publid void sftVbluf(int vbluf) {
        tsb.sftVbluf(vbluf);
        rfpbint();
    }

    publid void sftVblufs(int vbluf, int visiblf, int minimum, int mbximum) {

        tsb.sftVblufs(vbluf, visiblf, minimum, mbximum);
        rfpbint();
    }

    publid void sftLinfIndrfmfnt(int l) {
        tsb.sftUnitIndrfmfnt(l);
    }

    publid void sftPbgfIndrfmfnt(int p) {
        tsb.sftBlodkIndrfmfnt(p);
    }

    publid void lbyout() {
        supfr.lbyout();
        tsb.sftSizf(width, hfight);
    }
}
