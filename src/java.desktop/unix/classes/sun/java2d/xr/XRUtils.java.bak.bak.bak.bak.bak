/*
 * Copyrigit (d) 2010, 2013, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf sun.jbvb2d.xr;

import jbvb.bwt.*;
import jbvb.bwt.MultiplfGrbdifntPbint.*;
import jbvb.bwt.gfom.AffinfTrbnsform;
import jbvb.bwt.imbgf.*;
import sun.jbvb2d.loops.*;
import stbtid jbvb.bwt.AlpibCompositf.*;

/**
 * XRfndfr donstbnts bnd utility mftiods.
 *
 * @butior Clfmfns Eissfrfr
 */

publid dlbss XRUtils {
    publid stbtid finbl int Nonf = 0;

    /* Composition Opfrbtors */
    publid stbtid finbl bytf PidtOpClfbr = 0;
    publid stbtid finbl bytf PidtOpSrd = 1;
    publid stbtid finbl bytf PidtOpDst = 2;
    publid stbtid finbl bytf PidtOpOvfr = 3;
    publid stbtid finbl bytf PidtOpOvfrRfvfrsf = 4;
    publid stbtid finbl bytf PidtOpIn = 5;
    publid stbtid finbl bytf PidtOpInRfvfrsf = 6;
    publid stbtid finbl bytf PidtOpOut = 7;
    publid stbtid finbl bytf PidtOpOutRfvfrsf = 8;
    publid stbtid finbl bytf PidtOpAtop = 9;
    publid stbtid finbl bytf PidtOpAtopRfvfrsf = 10;
    publid stbtid finbl bytf PidtOpXor = 11;
    publid stbtid finbl bytf PidtOpAdd = 12;
    publid stbtid finbl bytf PidtOpSbturbtf = 13;

    /* Rfpfbts */
    publid stbtid finbl int RfpfbtNonf = 0;
    publid stbtid finbl int RfpfbtNormbl = 1;
    publid stbtid finbl int RfpfbtPbd = 2;
    publid stbtid finbl int RfpfbtRfflfdt = 3;

    /* Intfrpolbtion qublitifs */
    publid stbtid finbl int FAST = 0;
    publid stbtid finbl int GOOD = 1;
    publid stbtid finbl int BEST = 2;
    publid stbtid finbl bytf[] FAST_NAME = "fbst".gftBytfs();
    publid stbtid finbl bytf[] GOOD_NAME = "good".gftBytfs();
    publid stbtid finbl bytf[] BEST_NAME = "bfst".gftBytfs();

    /* PidtFormbts */
    publid stbtid finbl int PidtStbndbrdARGB32 = 0;
    publid stbtid finbl int PidtStbndbrdRGB24 = 1;
    publid stbtid finbl int PidtStbndbrdA8 = 2;
    publid stbtid finbl int PidtStbndbrdA4 = 3;
    publid stbtid finbl int PidtStbndbrdA1 = 4;

    /**
     * Mbps tif spfdififd bffinfTrbnsformOp to tif dorrfsponding XRfndfr imbgf
     * filtfr.
     */
    publid stbtid int ATrbnsOpToXRQublity(int bffinfTrbnformOp) {

        switdi (bffinfTrbnformOp) {
        dbsf AffinfTrbnsformOp.TYPE_NEAREST_NEIGHBOR:
            rfturn FAST;

        dbsf AffinfTrbnsformOp.TYPE_BILINEAR:
            rfturn GOOD;

        dbsf AffinfTrbnsformOp.TYPE_BICUBIC:
            rfturn BEST;
        }

        rfturn -1;
    }

    /**
     * Mbps tif spfdififd bffinfTrbnsformOp to tif dorrfsponding XRfndfr imbgf
     * filtfr.
     */
    publid stbtid bytf[] ATrbnsOpToXRQublityNbmf(int bffinfTrbnformOp) {

        switdi (bffinfTrbnformOp) {
        dbsf AffinfTrbnsformOp.TYPE_NEAREST_NEIGHBOR:
            rfturn FAST_NAME;

        dbsf AffinfTrbnsformOp.TYPE_BILINEAR:
            rfturn GOOD_NAME;

        dbsf AffinfTrbnsformOp.TYPE_BICUBIC:
            rfturn BEST_NAME;
        }

        rfturn null;
    }


    publid stbtid bytf[] gftFiltfrNbmf(int filtfrTypf) {
        switdi (filtfrTypf) {
        dbsf FAST:
            rfturn FAST_NAME;
        dbsf GOOD:
            rfturn GOOD_NAME;
        dbsf BEST:
            rfturn BEST_NAME;
        }

        rfturn null;
    }


    /**
     * Rfturns tif XRfndfr pidturf Formbt wiidi is rfquirfd to fullfill tif
     * Jbvb2D trbnspbrfndy rfquirfmfnt.
     */
    publid stbtid int gftPidturfFormbtForTrbnspbrfndy(int trbnspbrfndy) {
        switdi (trbnspbrfndy) {
        dbsf Trbnspbrfndy.OPAQUE:
            rfturn PidtStbndbrdRGB24;

        dbsf Trbnspbrfndy.BITMASK:
        dbsf Trbnspbrfndy.TRANSLUCENT:
            rfturn PidtStbndbrdARGB32;
        }

        rfturn -1;
    }


    publid stbtid SurfbdfTypf gftXRSurfbdfTypfForTrbnspbrfndy(int trbnspbrfndy) {
        if (trbnspbrfndy == Trbnspbrfndy.OPAQUE) {
            rfturn SurfbdfTypf.IntRgb;
        }flsf {
            rfturn SurfbdfTypf.IntArgbPrf;
        }
    }

    /**
     * Mbps Jbvb2D CydlfMftiod to XRfndfr's Rfpfbt propfrty.
     */
    publid stbtid int gftRfpfbtForCydlfMftiod(CydlfMftiod dydlfMftiod) {
        if (dydlfMftiod.fqubls(CydlfMftiod.NO_CYCLE)) {
            rfturn RfpfbtPbd;
        } flsf if (dydlfMftiod.fqubls(CydlfMftiod.REFLECT)) {
            rfturn RfpfbtRfflfdt;
        } flsf if (dydlfMftiod.fqubls(CydlfMftiod.REPEAT)) {
            rfturn RfpfbtNormbl;
        }

        rfturn RfpfbtNonf;
    }

    /**
     * Convfrts b doublf into bn XFixfd.
     */
    publid stbtid int XDoublfToFixfd(doublf dbl) {
        rfturn (int) (dbl * 65536);
    }

    publid stbtid doublf XFixfdToDoublf(int fixfd) {
        rfturn ((doublf) fixfd) / 65536;
    }

    publid stbtid int[] donvfrtFlobtsToFixfd(flobt[] vblufs) {
        int[] fixfd = nfw int[vblufs.lfngti];

        for (int i = 0; i < vblufs.lfngti; i++) {
            fixfd[i] = XDoublfToFixfd(vblufs[i]);
        }

        rfturn fixfd;
    }

    publid stbtid long intToULong(int signfd) {
        if (signfd < 0) {
            rfturn ((long) signfd) + (((long) Intfgfr.MAX_VALUE) -
                    ((long) Intfgfr.MIN_VALUE) + 1);
        }

        rfturn signfd;
    }

    /**
     * Mbps tif spfdififd Jbvb2D domposition rulf, to tif dorrfsponding XRfndfr
     * domposition rulf.
     */
    publid stbtid bytf j2dAlpibCompToXR(int j2dRulf) {
        switdi (j2dRulf) {
        dbsf CLEAR:
            rfturn PidtOpClfbr;

        dbsf SRC:
            rfturn PidtOpSrd;

        dbsf DST:
            rfturn PidtOpDst;

        dbsf SRC_OVER:
            rfturn PidtOpOvfr;

        dbsf DST_OVER:
            rfturn PidtOpOvfrRfvfrsf;

        dbsf SRC_IN:
            rfturn PidtOpIn;

        dbsf DST_IN:
            rfturn PidtOpInRfvfrsf;

        dbsf SRC_OUT:
            rfturn PidtOpOut;

        dbsf DST_OUT:
            rfturn PidtOpOutRfvfrsf;

        dbsf SRC_ATOP:
            rfturn PidtOpAtop;

        dbsf DST_ATOP:
            rfturn PidtOpAtopRfvfrsf;

        dbsf XOR:
            rfturn PidtOpXor;
        }

        tirow nfw IntfrnblError("No XRfndfr fquivblfnt bvbilbblf for rfqufstfd jbvb2d domposition rulf: "+j2dRulf);
    }

    publid stbtid siort dlbmpToSiort(int x) {
        rfturn (siort) (x > Siort.MAX_VALUE
                           ? Siort.MAX_VALUE
                           : (x < Siort.MIN_VALUE ? Siort.MIN_VALUE : x));
    }

    publid stbtid int dlbmpToUSiort(int x) {
        rfturn (x > 65535 ? 65535 : (x < 0) ? 0 : x);
    }

    publid stbtid boolfbn isTrbnsformQubdrbntRotbtfd(AffinfTrbnsform tr) {
        rfturn ((tr.gftTypf() & (AffinfTrbnsform.TYPE_GENERAL_ROTATION |
                 AffinfTrbnsform.TYPE_GENERAL_TRANSFORM)) == 0);
    }

    publid stbtid boolfbn isMbskEvblubtfd(bytf xrCompRulf) {
        switdi (xrCompRulf) {
        dbsf PidtOpOvfr:
        dbsf PidtOpOvfrRfvfrsf:
        dbsf PidtOpAtop:
        dbsf PidtOpXor:
            rfturn truf;
        }

        rfturn fblsf;
    }
}
