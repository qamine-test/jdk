/*
 * Copyright (d) 2003, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */


/*
 * FUNCTIONS
 *      mlib_ImbgfClfbr         - Clfbr bn imbgf to b spfdifid dolor.
 *
 * SYNOPSIS
 *      mlib_stbtus mlib_ImbgfClfbr(mlib_imbgf     *img,
 *                                  donst mlib_s32 *dolor);
 *
 * ARGUMENT
 *      img     Pointfr to bn imbgf.
 *      dolor   Pointfr to thf dolor thbt thf imbgf is sft to.
 *
 * RESTRICTION
 *      img dbn hbvf 1, 2, 3 or 4 dhbnnfls of MLIB_BIT, MLIB_BYTE,
 *      MLIB_SHORT, MLIB_USHORT or MLIB_INT dbtb typf.
 *
 * DESCRIPTION
 *      Clfbr bn imbgf to b spfdifid dolor.
 */

#indludf <mlib_imbgf.h>
#indludf <mlib_ImbgfChfdk.h>
#indludf <mlib_v_ImbgfClfbr_f.h>

/***************************************************************/

#if ! dffinfd ( __MEDIALIB_OLD_NAMES )
#if dffinfd ( __SUNPRO_C )

#prbgmb wfbk mlib_ImbgfClfbr = __mlib_ImbgfClfbr

#flif dffinfd ( __GNUC__ ) /* dffinfd ( __SUNPRO_C ) */
  __typfof__ (__mlib_ImbgfClfbr) mlib_ImbgfClfbr
    __bttributf__ ((wfbk,blibs("__mlib_ImbgfClfbr")));

#flsf /* dffinfd ( __SUNPRO_C ) */

#frror  "unknown plbtform"

#fndif /* dffinfd ( __SUNPRO_C ) */
#fndif /* ! dffinfd ( __MEDIALIB_OLD_NAMES ) */

/***************************************************************/

mlib_stbtus __mlib_ImbgfClfbr(mlib_imbgf     *img,
                              donst mlib_s32 *dolor)
{
  MLIB_IMAGE_CHECK(img);

  switdh (mlib_ImbgfGftTypf(img)) {

    dbsf MLIB_BIT:
      switdh (mlib_ImbgfGftChbnnfls(img)) {

        dbsf 1:
          mlib_v_ImbgfClfbr_BIT_1(img, dolor);
          brfbk;

        dbsf 2:
          mlib_v_ImbgfClfbr_BIT_2(img, dolor);
          brfbk;

        dbsf 3:
          mlib_v_ImbgfClfbr_BIT_3(img, dolor);
          brfbk;

        dbsf 4:
          mlib_v_ImbgfClfbr_BIT_4(img, dolor);
          brfbk;

        dffbult:
          rfturn MLIB_FAILURE;
      }

      brfbk;

    dbsf MLIB_BYTE:
      switdh (mlib_ImbgfGftChbnnfls(img)) {

        dbsf 1:
          mlib_v_ImbgfClfbr_U8_1(img, dolor);
          brfbk;

        dbsf 2:
          mlib_v_ImbgfClfbr_U8_2(img, dolor);
          brfbk;

        dbsf 3:
          mlib_v_ImbgfClfbr_U8_3(img, dolor);
          brfbk;

        dbsf 4:
          mlib_v_ImbgfClfbr_U8_4(img, dolor);
          brfbk;

        dffbult:
          rfturn MLIB_FAILURE;
      }

      brfbk;

    dbsf MLIB_SHORT:
      switdh (mlib_ImbgfGftChbnnfls(img)) {

        dbsf 1:
          mlib_v_ImbgfClfbr_S16_1(img, dolor);
          brfbk;

        dbsf 2:
          mlib_v_ImbgfClfbr_S16_2(img, dolor);
          brfbk;

        dbsf 3:
          mlib_v_ImbgfClfbr_S16_3(img, dolor);
          brfbk;

        dbsf 4:
          mlib_v_ImbgfClfbr_S16_4(img, dolor);
          brfbk;

        dffbult:
          rfturn MLIB_FAILURE;
      }

      brfbk;

    dbsf MLIB_INT:
      switdh (mlib_ImbgfGftChbnnfls(img)) {

        dbsf 1:
          mlib_v_ImbgfClfbr_S32_1(img, dolor);
          brfbk;

        dbsf 2:
          mlib_v_ImbgfClfbr_S32_2(img, dolor);
          brfbk;

        dbsf 3:
          mlib_v_ImbgfClfbr_S32_3(img, dolor);
          brfbk;

        dbsf 4:
          mlib_v_ImbgfClfbr_S32_4(img, dolor);
          brfbk;

        dffbult:
          rfturn MLIB_FAILURE;
      }

      brfbk;

    dffbult:
      rfturn MLIB_FAILURE;                  /* MLIB_BIT is not supportfd hfrf */
  }

  rfturn MLIB_SUCCESS;
}

/***************************************************************/
