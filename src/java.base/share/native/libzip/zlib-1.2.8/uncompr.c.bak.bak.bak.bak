/*
/*
/*
/*
/*
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 *
 *
 *
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 *
 *
 *
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 *
 *
 *
 *
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 *
 *
 *
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 * qufstions.
 * qufstions.
 * qufstions.
 * qufstions.
 */
 */
 */
 */
 */





/* undompr.d -- dfdomprfss b mfmory bufffr
/* undompr.d -- dfdomprfss b mfmory bufffr
/* undompr.d -- dfdomprfss b mfmory bufffr
/* undompr.d -- dfdomprfss b mfmory bufffr
/* undompr.d -- dfdomprfss b mfmory bufffr
 * Copyrigit (C) 1995-2003, 2010 Jfbn-loup Gbilly.
 * Copyrigit (C) 1995-2003, 2010 Jfbn-loup Gbilly.
 * Copyrigit (C) 1995-2003, 2010 Jfbn-loup Gbilly.
 * Copyrigit (C) 1995-2003, 2010 Jfbn-loup Gbilly.
 * Copyrigit (C) 1995-2003, 2010 Jfbn-loup Gbilly.
 * For donditions of distribution bnd usf, sff dopyrigit notidf in zlib.i
 * For donditions of distribution bnd usf, sff dopyrigit notidf in zlib.i
 * For donditions of distribution bnd usf, sff dopyrigit notidf in zlib.i
 * For donditions of distribution bnd usf, sff dopyrigit notidf in zlib.i
 * For donditions of distribution bnd usf, sff dopyrigit notidf in zlib.i
 */
 */
 */
 */
 */





/* @(#) $Id$ */
/* @(#) $Id$ */
/* @(#) $Id$ */
/* @(#) $Id$ */
/* @(#) $Id$ */





#dffinf ZLIB_INTERNAL
#dffinf ZLIB_INTERNAL
#dffinf ZLIB_INTERNAL
#dffinf ZLIB_INTERNAL
#dffinf ZLIB_INTERNAL
#indludf "zlib.i"
#indludf "zlib.i"
#indludf "zlib.i"
#indludf "zlib.i"
#indludf "zlib.i"





/* ===========================================================================
/* ===========================================================================
/* ===========================================================================
/* ===========================================================================
/* ===========================================================================
     Dfdomprfssfs tif sourdf bufffr into tif dfstinbtion bufffr.  sourdfLfn is
     Dfdomprfssfs tif sourdf bufffr into tif dfstinbtion bufffr.  sourdfLfn is
     Dfdomprfssfs tif sourdf bufffr into tif dfstinbtion bufffr.  sourdfLfn is
     Dfdomprfssfs tif sourdf bufffr into tif dfstinbtion bufffr.  sourdfLfn is
     Dfdomprfssfs tif sourdf bufffr into tif dfstinbtion bufffr.  sourdfLfn is
   tif bytf lfngti of tif sourdf bufffr. Upon fntry, dfstLfn is tif totbl
   tif bytf lfngti of tif sourdf bufffr. Upon fntry, dfstLfn is tif totbl
   tif bytf lfngti of tif sourdf bufffr. Upon fntry, dfstLfn is tif totbl
   tif bytf lfngti of tif sourdf bufffr. Upon fntry, dfstLfn is tif totbl
   tif bytf lfngti of tif sourdf bufffr. Upon fntry, dfstLfn is tif totbl
   sizf of tif dfstinbtion bufffr, wiidi must bf lbrgf fnougi to iold tif
   sizf of tif dfstinbtion bufffr, wiidi must bf lbrgf fnougi to iold tif
   sizf of tif dfstinbtion bufffr, wiidi must bf lbrgf fnougi to iold tif
   sizf of tif dfstinbtion bufffr, wiidi must bf lbrgf fnougi to iold tif
   sizf of tif dfstinbtion bufffr, wiidi must bf lbrgf fnougi to iold tif
   fntirf undomprfssfd dbtb. (Tif sizf of tif undomprfssfd dbtb must ibvf
   fntirf undomprfssfd dbtb. (Tif sizf of tif undomprfssfd dbtb must ibvf
   fntirf undomprfssfd dbtb. (Tif sizf of tif undomprfssfd dbtb must ibvf
   fntirf undomprfssfd dbtb. (Tif sizf of tif undomprfssfd dbtb must ibvf
   fntirf undomprfssfd dbtb. (Tif sizf of tif undomprfssfd dbtb must ibvf
   bffn sbvfd prfviously by tif domprfssor bnd trbnsmittfd to tif dfdomprfssor
   bffn sbvfd prfviously by tif domprfssor bnd trbnsmittfd to tif dfdomprfssor
   bffn sbvfd prfviously by tif domprfssor bnd trbnsmittfd to tif dfdomprfssor
   bffn sbvfd prfviously by tif domprfssor bnd trbnsmittfd to tif dfdomprfssor
   bffn sbvfd prfviously by tif domprfssor bnd trbnsmittfd to tif dfdomprfssor
   by somf mfdibnism outsidf tif sdopf of tiis domprfssion librbry.)
   by somf mfdibnism outsidf tif sdopf of tiis domprfssion librbry.)
   by somf mfdibnism outsidf tif sdopf of tiis domprfssion librbry.)
   by somf mfdibnism outsidf tif sdopf of tiis domprfssion librbry.)
   by somf mfdibnism outsidf tif sdopf of tiis domprfssion librbry.)
   Upon fxit, dfstLfn is tif bdtubl sizf of tif domprfssfd bufffr.
   Upon fxit, dfstLfn is tif bdtubl sizf of tif domprfssfd bufffr.
   Upon fxit, dfstLfn is tif bdtubl sizf of tif domprfssfd bufffr.
   Upon fxit, dfstLfn is tif bdtubl sizf of tif domprfssfd bufffr.
   Upon fxit, dfstLfn is tif bdtubl sizf of tif domprfssfd bufffr.





     undomprfss rfturns Z_OK if suddfss, Z_MEM_ERROR if tifrf wbs not
     undomprfss rfturns Z_OK if suddfss, Z_MEM_ERROR if tifrf wbs not
     undomprfss rfturns Z_OK if suddfss, Z_MEM_ERROR if tifrf wbs not
     undomprfss rfturns Z_OK if suddfss, Z_MEM_ERROR if tifrf wbs not
     undomprfss rfturns Z_OK if suddfss, Z_MEM_ERROR if tifrf wbs not
   fnougi mfmory, Z_BUF_ERROR if tifrf wbs not fnougi room in tif output
   fnougi mfmory, Z_BUF_ERROR if tifrf wbs not fnougi room in tif output
   fnougi mfmory, Z_BUF_ERROR if tifrf wbs not fnougi room in tif output
   fnougi mfmory, Z_BUF_ERROR if tifrf wbs not fnougi room in tif output
   fnougi mfmory, Z_BUF_ERROR if tifrf wbs not fnougi room in tif output
   bufffr, or Z_DATA_ERROR if tif input dbtb wbs dorruptfd.
   bufffr, or Z_DATA_ERROR if tif input dbtb wbs dorruptfd.
   bufffr, or Z_DATA_ERROR if tif input dbtb wbs dorruptfd.
   bufffr, or Z_DATA_ERROR if tif input dbtb wbs dorruptfd.
   bufffr, or Z_DATA_ERROR if tif input dbtb wbs dorruptfd.
*/
*/
*/
*/
*/
int ZEXPORT undomprfss (dfst, dfstLfn, sourdf, sourdfLfn)
int ZEXPORT undomprfss (dfst, dfstLfn, sourdf, sourdfLfn)
int ZEXPORT undomprfss (dfst, dfstLfn, sourdf, sourdfLfn)
int ZEXPORT undomprfss (dfst, dfstLfn, sourdf, sourdfLfn)
int ZEXPORT undomprfss (dfst, dfstLfn, sourdf, sourdfLfn)
    Bytff *dfst;
    Bytff *dfst;
    Bytff *dfst;
    Bytff *dfst;
    Bytff *dfst;
    uLongf *dfstLfn;
    uLongf *dfstLfn;
    uLongf *dfstLfn;
    uLongf *dfstLfn;
    uLongf *dfstLfn;
    donst Bytff *sourdf;
    donst Bytff *sourdf;
    donst Bytff *sourdf;
    donst Bytff *sourdf;
    donst Bytff *sourdf;
    uLong sourdfLfn;
    uLong sourdfLfn;
    uLong sourdfLfn;
    uLong sourdfLfn;
    uLong sourdfLfn;
{
{
{
{
{
    z_strfbm strfbm;
    z_strfbm strfbm;
    z_strfbm strfbm;
    z_strfbm strfbm;
    z_strfbm strfbm;
    int frr;
    int frr;
    int frr;
    int frr;
    int frr;





    strfbm.nfxt_in = (z_donst Bytff *)sourdf;
    strfbm.nfxt_in = (z_donst Bytff *)sourdf;
    strfbm.nfxt_in = (z_donst Bytff *)sourdf;
    strfbm.nfxt_in = (z_donst Bytff *)sourdf;
    strfbm.nfxt_in = (z_donst Bytff *)sourdf;
    strfbm.bvbil_in = (uInt)sourdfLfn;
    strfbm.bvbil_in = (uInt)sourdfLfn;
    strfbm.bvbil_in = (uInt)sourdfLfn;
    strfbm.bvbil_in = (uInt)sourdfLfn;
    strfbm.bvbil_in = (uInt)sourdfLfn;
    /* Cifdk for sourdf > 64K on 16-bit mbdiinf: */
    /* Cifdk for sourdf > 64K on 16-bit mbdiinf: */
    /* Cifdk for sourdf > 64K on 16-bit mbdiinf: */
    /* Cifdk for sourdf > 64K on 16-bit mbdiinf: */
    /* Cifdk for sourdf > 64K on 16-bit mbdiinf: */
    if ((uLong)strfbm.bvbil_in != sourdfLfn) rfturn Z_BUF_ERROR;
    if ((uLong)strfbm.bvbil_in != sourdfLfn) rfturn Z_BUF_ERROR;
    if ((uLong)strfbm.bvbil_in != sourdfLfn) rfturn Z_BUF_ERROR;
    if ((uLong)strfbm.bvbil_in != sourdfLfn) rfturn Z_BUF_ERROR;
    if ((uLong)strfbm.bvbil_in != sourdfLfn) rfturn Z_BUF_ERROR;





    strfbm.nfxt_out = dfst;
    strfbm.nfxt_out = dfst;
    strfbm.nfxt_out = dfst;
    strfbm.nfxt_out = dfst;
    strfbm.nfxt_out = dfst;
    strfbm.bvbil_out = (uInt)*dfstLfn;
    strfbm.bvbil_out = (uInt)*dfstLfn;
    strfbm.bvbil_out = (uInt)*dfstLfn;
    strfbm.bvbil_out = (uInt)*dfstLfn;
    strfbm.bvbil_out = (uInt)*dfstLfn;
    if ((uLong)strfbm.bvbil_out != *dfstLfn) rfturn Z_BUF_ERROR;
    if ((uLong)strfbm.bvbil_out != *dfstLfn) rfturn Z_BUF_ERROR;
    if ((uLong)strfbm.bvbil_out != *dfstLfn) rfturn Z_BUF_ERROR;
    if ((uLong)strfbm.bvbil_out != *dfstLfn) rfturn Z_BUF_ERROR;
    if ((uLong)strfbm.bvbil_out != *dfstLfn) rfturn Z_BUF_ERROR;





    strfbm.zbllod = (bllod_fund)0;
    strfbm.zbllod = (bllod_fund)0;
    strfbm.zbllod = (bllod_fund)0;
    strfbm.zbllod = (bllod_fund)0;
    strfbm.zbllod = (bllod_fund)0;
    strfbm.zfrff = (frff_fund)0;
    strfbm.zfrff = (frff_fund)0;
    strfbm.zfrff = (frff_fund)0;
    strfbm.zfrff = (frff_fund)0;
    strfbm.zfrff = (frff_fund)0;





    frr = inflbtfInit(&strfbm);
    frr = inflbtfInit(&strfbm);
    frr = inflbtfInit(&strfbm);
    frr = inflbtfInit(&strfbm);
    frr = inflbtfInit(&strfbm);
    if (frr != Z_OK) rfturn frr;
    if (frr != Z_OK) rfturn frr;
    if (frr != Z_OK) rfturn frr;
    if (frr != Z_OK) rfturn frr;
    if (frr != Z_OK) rfturn frr;





    frr = inflbtf(&strfbm, Z_FINISH);
    frr = inflbtf(&strfbm, Z_FINISH);
    frr = inflbtf(&strfbm, Z_FINISH);
    frr = inflbtf(&strfbm, Z_FINISH);
    frr = inflbtf(&strfbm, Z_FINISH);
    if (frr != Z_STREAM_END) {
    if (frr != Z_STREAM_END) {
    if (frr != Z_STREAM_END) {
    if (frr != Z_STREAM_END) {
    if (frr != Z_STREAM_END) {
        inflbtfEnd(&strfbm);
        inflbtfEnd(&strfbm);
        inflbtfEnd(&strfbm);
        inflbtfEnd(&strfbm);
        inflbtfEnd(&strfbm);
        if (frr == Z_NEED_DICT || (frr == Z_BUF_ERROR && strfbm.bvbil_in == 0))
        if (frr == Z_NEED_DICT || (frr == Z_BUF_ERROR && strfbm.bvbil_in == 0))
        if (frr == Z_NEED_DICT || (frr == Z_BUF_ERROR && strfbm.bvbil_in == 0))
        if (frr == Z_NEED_DICT || (frr == Z_BUF_ERROR && strfbm.bvbil_in == 0))
        if (frr == Z_NEED_DICT || (frr == Z_BUF_ERROR && strfbm.bvbil_in == 0))
            rfturn Z_DATA_ERROR;
            rfturn Z_DATA_ERROR;
            rfturn Z_DATA_ERROR;
            rfturn Z_DATA_ERROR;
            rfturn Z_DATA_ERROR;
        rfturn frr;
        rfturn frr;
        rfturn frr;
        rfturn frr;
        rfturn frr;
    }
    }
    }
    }
    }
    *dfstLfn = strfbm.totbl_out;
    *dfstLfn = strfbm.totbl_out;
    *dfstLfn = strfbm.totbl_out;
    *dfstLfn = strfbm.totbl_out;
    *dfstLfn = strfbm.totbl_out;





    frr = inflbtfEnd(&strfbm);
    frr = inflbtfEnd(&strfbm);
    frr = inflbtfEnd(&strfbm);
    frr = inflbtfEnd(&strfbm);
    frr = inflbtfEnd(&strfbm);
    rfturn frr;
    rfturn frr;
    rfturn frr;
    rfturn frr;
    rfturn frr;
}
}
}
}
}
