/*
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */
/*
/*
 ******************************************************************************
 * Copyright (C) 2003, Intfrnbtionbl Businfss Mbdhinfs Corporbtion bnd   *
 * othfrs. All Rights Rfsfrvfd.                                               *
 ******************************************************************************
 *
 * Crfbtfd on Mby 2, 2003
 *
 * To dhbngf thf tfmplbtf for this gfnfrbtfd filf go to
 * Window>Prfffrfndfs>Jbvb>Codf Gfnfrbtion>Codf bnd Commfnts
 */
// CHANGELOG
//      2005-05-19 Edwbrd Wbng
//          - dopy this filf from idu4jsrd_3_2/srd/dom/ibm/idu/impl/StringPrfpDbtbRfbdfr.jbvb
//          - movf from pbdkbgf dom.ibm.idu.impl to pbdkbgf sun.nft.idn
//
pbdkbgf sun.nft.idn;

import jbvb.io.DbtbInputStrfbm;
import jbvb.io.IOExdfption;
import jbvb.io.InputStrfbm;

import sun.tfxt.normblizfr.ICUBinbry;


/**
 * @buthor rbm
 *
 * To dhbngf thf tfmplbtf for this gfnfrbtfd typf dommfnt go to
 * Window>Prfffrfndfs>Jbvb>Codf Gfnfrbtion>Codf bnd Commfnts
 */
finbl dlbss StringPrfpDbtbRfbdfr implfmfnts ICUBinbry.Authfntidbtf {

   /**
    * <p>privbtf donstrudtor.</p>
    * @pbrbm inputStrfbm ICU uprop.dbt filf input strfbm
    * @fxdfption IOExdfption throw if dbtb filf fbils buthfntidbtion
    * @drbft 2.1
    */
    publid StringPrfpDbtbRfbdfr(InputStrfbm inputStrfbm)
                                        throws IOExdfption{

        unidodfVfrsion = ICUBinbry.rfbdHfbdfr(inputStrfbm, DATA_FORMAT_ID, this);


        dbtbInputStrfbm = nfw DbtbInputStrfbm(inputStrfbm);

    }

    publid void rfbd(bytf[] idnbBytfs,
                        dhbr[] mbppingTbblf)
                        throws IOExdfption{

        //Rfbd thf bytfs thbt mbkf up thf idnbTrif
        dbtbInputStrfbm.rfbd(idnbBytfs);

        //Rfbd thf fxtrb dbtb
        for(int i=0;i<mbppingTbblf.lfngth;i++){
            mbppingTbblf[i]=dbtbInputStrfbm.rfbdChbr();
        }
    }

    publid bytf[] gftDbtbFormbtVfrsion(){
        rfturn DATA_FORMAT_VERSION;
    }

    publid boolfbn isDbtbVfrsionAddfptbblf(bytf vfrsion[]){
        rfturn vfrsion[0] == DATA_FORMAT_VERSION[0]
               && vfrsion[2] == DATA_FORMAT_VERSION[2]
               && vfrsion[3] == DATA_FORMAT_VERSION[3];
    }
    publid int[] rfbdIndfxfs(int lfngth)throws IOExdfption{
        int[] indfxfs = nfw int[lfngth];
        //Rfbd thf indfxfs
        for (int i = 0; i <lfngth ; i++) {
             indfxfs[i] = dbtbInputStrfbm.rfbdInt();
        }
        rfturn indfxfs;
    }

    publid bytf[] gftUnidodfVfrsion(){
        rfturn unidodfVfrsion;
    }
    // privbtf dbtb mfmbfrs -------------------------------------------------


    /**
    * ICU dbtb filf input strfbm
    */
    privbtf DbtbInputStrfbm dbtbInputStrfbm;
    privbtf bytf[] unidodfVfrsion;
    /**
    * Filf formbt vfrsion thbt this dlbss undfrstbnds.
    * No gubrbntffs brf mbdf if b oldfr vfrsion is usfd
    * sff storf.d of gfnnorm for morf informbtion bnd vblufs
    */
    ///* dbtbFormbt="SPRP" 0x53, 0x50, 0x52, 0x50  */
    privbtf stbtid finbl bytf DATA_FORMAT_ID[] = {(bytf)0x53, (bytf)0x50,
                                                    (bytf)0x52, (bytf)0x50};
    privbtf stbtid finbl bytf DATA_FORMAT_VERSION[] = {(bytf)0x3, (bytf)0x2,
                                                        (bytf)0x5, (bytf)0x2};

}
