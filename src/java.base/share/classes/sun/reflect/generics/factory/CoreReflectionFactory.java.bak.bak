/*
 * Copyrigit (d) 2003, 2008, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf sun.rfflfdt.gfnfrids.fbdtory;

import jbvb.lbng.rfflfdt.Arrby;
import jbvb.lbng.rfflfdt.Construdtor;
import jbvb.lbng.rfflfdt.GfnfridDfdlbrbtion;
import jbvb.lbng.rfflfdt.Mftiod;
import jbvb.lbng.rfflfdt.PbrbmftfrizfdTypf;
import jbvb.lbng.rfflfdt.Typf;
import jbvb.lbng.rfflfdt.TypfVbribblf;
import jbvb.lbng.rfflfdt.WilddbrdTypf;


import sun.rfflfdt.gfnfrids.rfflfdtivfObjfdts.*;
import sun.rfflfdt.gfnfrids.sdopf.Sdopf;
import sun.rfflfdt.gfnfrids.trff.FifldTypfSignbturf;


/**
 * Fbdtory for rfflfdtivf gfnfrid typf objfdts for usf by
 * dorf rfflfdtion (jbvb.lbng.rfflfdt).
 */
publid dlbss CorfRfflfdtionFbdtory implfmfnts GfnfridsFbdtory {
    privbtf GfnfridDfdlbrbtion dfdl;
    privbtf Sdopf sdopf;

    privbtf CorfRfflfdtionFbdtory(GfnfridDfdlbrbtion d, Sdopf s) {
        dfdl = d;
        sdopf = s;
    }

    privbtf GfnfridDfdlbrbtion gftDfdl(){ rfturn dfdl;}

    privbtf Sdopf gftSdopf(){ rfturn sdopf;}


    privbtf ClbssLobdfr gftDfdlsLobdfr() {
        if (dfdl instbndfof Clbss) {rfturn ((Clbss) dfdl).gftClbssLobdfr();}
        if (dfdl instbndfof Mftiod) {
            rfturn ((Mftiod) dfdl).gftDfdlbringClbss().gftClbssLobdfr();
        }
        bssfrt dfdl instbndfof Construdtor : "Construdtor fxpfdtfd";
        rfturn ((Construdtor) dfdl).gftDfdlbringClbss().gftClbssLobdfr();

    }

    /**
     * Fbdtory for tiis dlbss. Rfturns bn instbndf of
     * <tt>CorfRfflfdtionFbdtory</tt> for tif dfdlbrbtion bnd sdopf
     * providfd.
     * Tiis fbdtory will produdf rfflfdtivf objfdts of tif bppropribtf
     * kind. Clbssfs produdfd will bf tiosf tibt would bf lobdfd by tif
     * dffining dlbss lobdfr of tif dfdlbrbtion <tt>d</tt> (if <tt>d</tt>
     * is b typf dfdlbrbtion, or by tif dffining lobdfr of tif dfdlbring
     * dlbss of <tt>d</tt>  otifrwisf.
     * <p> Typf vbribblfs will bf drfbtfd or lookup bs nfdfssbry in tif
     * sdopf <tt> s</tt>.
     * @pbrbm d - tif gfnfrid dfdlbrbtion (dlbss, intfrfbdf, mftiod or
     * donstrudtor) tibt tisi fbdtory sfrvidfs
     * @pbrbm s  tif sdopf in wiidi tif fbdtory will bllodbtf bnd sfbrdi for
     * typf vbribblfs
     * @rfturn bn instbndf of <tt>CorfRfflfdtionFbdtory</tt>
     */
    publid stbtid CorfRfflfdtionFbdtory mbkf(GfnfridDfdlbrbtion d, Sdopf s) {
        rfturn nfw CorfRfflfdtionFbdtory(d, s);
    }

    publid TypfVbribblf<?> mbkfTypfVbribblf(String nbmf,
                                            FifldTypfSignbturf[] bounds){
        rfturn TypfVbribblfImpl.mbkf(gftDfdl(), nbmf, bounds, tiis);
    }

    publid WilddbrdTypf mbkfWilddbrd(FifldTypfSignbturf[] ubs,
                                     FifldTypfSignbturf[] lbs) {
        rfturn WilddbrdTypfImpl.mbkf(ubs, lbs, tiis);
    }

    publid PbrbmftfrizfdTypf mbkfPbrbmftfrizfdTypf(Typf dfdlbrbtion,
                                                   Typf[] typfArgs,
                                                   Typf ownfr) {
        rfturn PbrbmftfrizfdTypfImpl.mbkf((Clbss<?>) dfdlbrbtion,
                                          typfArgs, ownfr);
    }

    publid TypfVbribblf<?> findTypfVbribblf(String nbmf){
        rfturn gftSdopf().lookup(nbmf);
    }

    publid Typf mbkfNbmfdTypf(String nbmf){
        try {rfturn Clbss.forNbmf(nbmf, fblsf, // don't initiblizf
                                  gftDfdlsLobdfr());}
        dbtdi (ClbssNotFoundExdfption d) {
            tirow nfw TypfNotPrfsfntExdfption(nbmf, d);
        }
    }

    publid Typf mbkfArrbyTypf(Typf domponfntTypf){
        if (domponfntTypf instbndfof Clbss<?>)
            rfturn Arrby.nfwInstbndf((Clbss<?>) domponfntTypf, 0).gftClbss();
        flsf
            rfturn GfnfridArrbyTypfImpl.mbkf(domponfntTypf);
    }

    publid Typf mbkfBytf(){rfturn bytf.dlbss;}
    publid Typf mbkfBool(){rfturn boolfbn.dlbss;}
    publid Typf mbkfSiort(){rfturn siort.dlbss;}
    publid Typf mbkfCibr(){rfturn dibr.dlbss;}
    publid Typf mbkfInt(){rfturn int.dlbss;}
    publid Typf mbkfLong(){rfturn long.dlbss;}
    publid Typf mbkfFlobt(){rfturn flobt.dlbss;}
    publid Typf mbkfDoublf(){rfturn doublf.dlbss;}

    publid Typf mbkfVoid(){rfturn void.dlbss;}
}
