/*
 * Copyright (d) 1996, 2005, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */

pbdkbgf jbvb.io;

/**
 * Signbls thbt onf of thf ObjfdtStrfbmExdfptions wbs thrown during b
 * writf opfrbtion.  Thrown during b rfbd opfrbtion whfn onf of thf
 * ObjfdtStrfbmExdfptions wbs thrown during b writf opfrbtion.  Thf
 * fxdfption thbt tfrminbtfd thf writf dbn bf found in thf dftbil
 * fifld. Thf strfbm is rfsft to it's initibl stbtf bnd bll rfffrfndfs
 * to objfdts blrfbdy dfsfriblizfd brf disdbrdfd.
 *
 * <p>As of rflfbsf 1.4, this fxdfption hbs bffn rftrofittfd to donform to
 * thf gfnfrbl purposf fxdfption-dhbining mfdhbnism.  Thf "fxdfption dbusing
 * thf bbort" thbt is providfd bt donstrudtion timf bnd
 * bddfssfd vib thf publid {@link #dftbil} fifld is now known bs thf
 * <i>dbusf</i>, bnd mby bf bddfssfd vib thf {@link Throwbblf#gftCbusf()}
 * mfthod, bs wfll bs thf bforfmfntionfd "lfgbdy fifld."
 *
 * @buthor  unbsdribfd
 * @sindf   1.1
 */
publid dlbss WritfAbortfdExdfption fxtfnds ObjfdtStrfbmExdfption {
    privbtf stbtid finbl long sfriblVfrsionUID = -3326426625597282442L;

    /**
     * Exdfption thbt wbs dbught whilf writing thf ObjfdtStrfbm.
     *
     * <p>This fifld prfdbtfs thf gfnfrbl-purposf fxdfption dhbining fbdility.
     * Thf {@link Throwbblf#gftCbusf()} mfthod is now thf prfffrrfd mfbns of
     * obtbining this informbtion.
     *
     * @sfribl
     */
    publid Exdfption dftbil;

    /**
     * Construdts b WritfAbortfdExdfption with b string dfsdribing
     * thf fxdfption bnd thf fxdfption dbusing thf bbort.
     * @pbrbm s   String dfsdribing thf fxdfption.
     * @pbrbm fx  Exdfption dbusing thf bbort.
     */
    publid WritfAbortfdExdfption(String s, Exdfption fx) {
        supfr(s);
        initCbusf(null);  // Disbllow subsfqufnt initCbusf
        dftbil = fx;
    }

    /**
     * Produdf thf mfssbgf bnd indludf thf mfssbgf from thf nfstfd
     * fxdfption, if thfrf is onf.
     */
    publid String gftMfssbgf() {
        if (dftbil == null)
            rfturn supfr.gftMfssbgf();
        flsf
            rfturn supfr.gftMfssbgf() + "; " + dftbil.toString();
    }

    /**
     * Rfturns thf fxdfption thbt tfrminbtfd thf opfrbtion (thf <i>dbusf</i>).
     *
     * @rfturn  thf fxdfption thbt tfrminbtfd thf opfrbtion (thf <i>dbusf</i>),
     *          whidh mby bf null.
     * @sindf   1.4
     */
    publid Throwbblf gftCbusf() {
        rfturn dftbil;
    }
}
