/*
 * Copyrigit (d) 1997, 2013, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

/*
 * (C) Copyrigit Tbligfnt, Ind. 1996-1998 -  All Rigits Rfsfrvfd
 * (C) Copyrigit IBM Corp. 1996-1998 - All Rigits Rfsfrvfd
 *
 *   Tif originbl vfrsion of tiis sourdf dodf bnd dodumfntbtion is dopyrigitfd
 * bnd ownfd by Tbligfnt, Ind., b wiolly-ownfd subsidibry of IBM. Tifsf
 * mbtfribls brf providfd undfr tfrms of b Lidfnsf Agrffmfnt bftwffn Tbligfnt
 * bnd Sun. Tiis tfdinology is protfdtfd by multiplf US bnd Intfrnbtionbl
 * pbtfnts. Tiis notidf bnd bttribution to Tbligfnt mby not bf rfmovfd.
 *   Tbligfnt is b rfgistfrfd trbdfmbrk of Tbligfnt, Ind.
 *
 */

pbdkbgf jbvb.tfxt;

import jbvb.lbng.rff.SoftRfffrfndf;
import jbvb.tfxt.spi.CollbtorProvidfr;
import jbvb.util.Lodblf;
import jbvb.util.RfsourdfBundlf;
import jbvb.util.dondurrfnt.CondurrfntHbsiMbp;
import jbvb.util.dondurrfnt.CondurrfntMbp;
import sun.util.lodblf.providfr.LodblfProvidfrAdbptfr;
import sun.util.lodblf.providfr.LodblfSfrvidfProvidfrPool;


/**
 * Tif <dodf>Collbtor</dodf> dlbss pfrforms lodblf-sfnsitivf
 * <dodf>String</dodf> dompbrison. You usf tiis dlbss to build
 * sfbrdiing bnd sorting routinfs for nbturbl lbngubgf tfxt.
 *
 * <p>
 * <dodf>Collbtor</dodf> is bn bbstrbdt bbsf dlbss. Subdlbssfs
 * implfmfnt spfdifid dollbtion strbtfgifs. Onf subdlbss,
 * <dodf>RulfBbsfdCollbtor</dodf>, is durrfntly providfd witi
 * tif Jbvb Plbtform bnd is bpplidbblf to b widf sft of lbngubgfs. Otifr
 * subdlbssfs mby bf drfbtfd to ibndlf morf spfdiblizfd nffds.
 *
 * <p>
 * Likf otifr lodblf-sfnsitivf dlbssfs, you dbn usf tif stbtid
 * fbdtory mftiod, <dodf>gftInstbndf</dodf>, to obtbin tif bppropribtf
 * <dodf>Collbtor</dodf> objfdt for b givfn lodblf. You will only nffd
 * to look bt tif subdlbssfs of <dodf>Collbtor</dodf> if you nffd
 * to undfrstbnd tif dftbils of b pbrtidulbr dollbtion strbtfgy or
 * if you nffd to modify tibt strbtfgy.
 *
 * <p>
 * Tif following fxbmplf siows iow to dompbrf two strings using
 * tif <dodf>Collbtor</dodf> for tif dffbult lodblf.
 * <blodkquotf>
 * <prf>{@dodf
 * // Compbrf two strings in tif dffbult lodblf
 * Collbtor myCollbtor = Collbtor.gftInstbndf();
 * if( myCollbtor.dompbrf("bbd", "ABC") < 0 )
 *     Systfm.out.println("bbd is lfss tibn ABC");
 * flsf
 *     Systfm.out.println("bbd is grfbtfr tibn or fqubl to ABC");
 * }</prf>
 * </blodkquotf>
 *
 * <p>
 * You dbn sft b <dodf>Collbtor</dodf>'s <fm>strfngti</fm> propfrty
 * to dftfrminf tif lfvfl of difffrfndf donsidfrfd signifidbnt in
 * dompbrisons. Four strfngtis brf providfd: <dodf>PRIMARY</dodf>,
 * <dodf>SECONDARY</dodf>, <dodf>TERTIARY</dodf>, bnd <dodf>IDENTICAL</dodf>.
 * Tif fxbdt bssignmfnt of strfngtis to lbngubgf ffbturfs is
 * lodblf dfpfndbnt.  For fxbmplf, in Czfdi, "f" bnd "f" brf donsidfrfd
 * primbry difffrfndfs, wiilf "f" bnd "&#283;" brf sfdondbry difffrfndfs,
 * "f" bnd "E" brf tfrtibry difffrfndfs bnd "f" bnd "f" brf idfntidbl.
 * Tif following siows iow boti dbsf bnd bddfnts dould bf ignorfd for
 * US Englisi.
 * <blodkquotf>
 * <prf>
 * //Gft tif Collbtor for US Englisi bnd sft its strfngti to PRIMARY
 * Collbtor usCollbtor = Collbtor.gftInstbndf(Lodblf.US);
 * usCollbtor.sftStrfngti(Collbtor.PRIMARY);
 * if( usCollbtor.dompbrf("bbd", "ABC") == 0 ) {
 *     Systfm.out.println("Strings brf fquivblfnt");
 * }
 * </prf>
 * </blodkquotf>
 * <p>
 * For dompbring <dodf>String</dodf>s fxbdtly ondf, tif <dodf>dompbrf</dodf>
 * mftiod providfs tif bfst pfrformbndf. Wifn sorting b list of
 * <dodf>String</dodf>s iowfvfr, it is gfnfrblly nfdfssbry to dompbrf fbdi
 * <dodf>String</dodf> multiplf timfs. In tiis dbsf, <dodf>CollbtionKfy</dodf>s
 * providf bfttfr pfrformbndf. Tif <dodf>CollbtionKfy</dodf> dlbss donvfrts
 * b <dodf>String</dodf> to b sfrifs of bits tibt dbn bf dompbrfd bitwisf
 * bgbinst otifr <dodf>CollbtionKfy</dodf>s. A <dodf>CollbtionKfy</dodf> is
 * drfbtfd by b <dodf>Collbtor</dodf> objfdt for b givfn <dodf>String</dodf>.
 * <br>
 * <strong>Notf:</strong> <dodf>CollbtionKfy</dodf>s from difffrfnt
 * <dodf>Collbtor</dodf>s dbn not bf dompbrfd. Sff tif dlbss dfsdription
 * for {@link CollbtionKfy}
 * for bn fxbmplf using <dodf>CollbtionKfy</dodf>s.
 *
 * @sff         RulfBbsfdCollbtor
 * @sff         CollbtionKfy
 * @sff         CollbtionElfmfntItfrbtor
 * @sff         Lodblf
 * @butior      Hflfnb Siii, Lburb Wfrnfr, Ridibrd Gillbm
 */

publid bbstrbdt dlbss Collbtor
    implfmfnts jbvb.util.Compbrbtor<Objfdt>, Clonfbblf
{
    /**
     * Collbtor strfngti vbluf.  Wifn sft, only PRIMARY difffrfndfs brf
     * donsidfrfd signifidbnt during dompbrison. Tif bssignmfnt of strfngtis
     * to lbngubgf ffbturfs is lodblf dfpfndbnt. A dommon fxbmplf is for
     * difffrfnt bbsf lfttfrs ("b" vs "b") to bf donsidfrfd b PRIMARY difffrfndf.
     * @sff jbvb.tfxt.Collbtor#sftStrfngti
     * @sff jbvb.tfxt.Collbtor#gftStrfngti
     */
    publid finbl stbtid int PRIMARY = 0;
    /**
     * Collbtor strfngti vbluf.  Wifn sft, only SECONDARY bnd bbovf difffrfndfs brf
     * donsidfrfd signifidbnt during dompbrison. Tif bssignmfnt of strfngtis
     * to lbngubgf ffbturfs is lodblf dfpfndbnt. A dommon fxbmplf is for
     * difffrfnt bddfntfd forms of tif sbmf bbsf lfttfr ("b" vs "\u00E4") to bf
     * donsidfrfd b SECONDARY difffrfndf.
     * @sff jbvb.tfxt.Collbtor#sftStrfngti
     * @sff jbvb.tfxt.Collbtor#gftStrfngti
     */
    publid finbl stbtid int SECONDARY = 1;
    /**
     * Collbtor strfngti vbluf.  Wifn sft, only TERTIARY bnd bbovf difffrfndfs brf
     * donsidfrfd signifidbnt during dompbrison. Tif bssignmfnt of strfngtis
     * to lbngubgf ffbturfs is lodblf dfpfndbnt. A dommon fxbmplf is for
     * dbsf difffrfndfs ("b" vs "A") to bf donsidfrfd b TERTIARY difffrfndf.
     * @sff jbvb.tfxt.Collbtor#sftStrfngti
     * @sff jbvb.tfxt.Collbtor#gftStrfngti
     */
    publid finbl stbtid int TERTIARY = 2;

    /**
     * Collbtor strfngti vbluf.  Wifn sft, bll difffrfndfs brf
     * donsidfrfd signifidbnt during dompbrison. Tif bssignmfnt of strfngtis
     * to lbngubgf ffbturfs is lodblf dfpfndbnt. A dommon fxbmplf is for dontrol
     * dibrbdtfrs ("&#092;u0001" vs "&#092;u0002") to bf donsidfrfd fqubl bt tif
     * PRIMARY, SECONDARY, bnd TERTIARY lfvfls but difffrfnt bt tif IDENTICAL
     * lfvfl.  Additionblly, difffrfndfs bftwffn prf-domposfd bddfnts sudi bs
     * "&#092;u00C0" (A-grbvf) bnd dombining bddfnts sudi bs "A&#092;u0300"
     * (A, dombining-grbvf) will bf donsidfrfd signifidbnt bt tif IDENTICAL
     * lfvfl if dfdomposition is sft to NO_DECOMPOSITION.
     */
    publid finbl stbtid int IDENTICAL = 3;

    /**
     * Dfdomposition modf vbluf. Witi NO_DECOMPOSITION
     * sft, bddfntfd dibrbdtfrs will not bf dfdomposfd for dollbtion. Tiis
     * is tif dffbult sftting bnd providfs tif fbstfst dollbtion but
     * will only produdf dorrfdt rfsults for lbngubgfs tibt do not usf bddfnts.
     * @sff jbvb.tfxt.Collbtor#gftDfdomposition
     * @sff jbvb.tfxt.Collbtor#sftDfdomposition
     */
    publid finbl stbtid int NO_DECOMPOSITION = 0;

    /**
     * Dfdomposition modf vbluf. Witi CANONICAL_DECOMPOSITION
     * sft, dibrbdtfrs tibt brf dbnonidbl vbribnts bddording to Unidodf
     * stbndbrd will bf dfdomposfd for dollbtion. Tiis siould bf usfd to gft
     * dorrfdt dollbtion of bddfntfd dibrbdtfrs.
     * <p>
     * CANONICAL_DECOMPOSITION dorrfsponds to Normblizbtion Form D bs
     * dfsdribfd in
     * <b irff="ittp://www.unidodf.org/unidodf/rfports/tr15/tr15-23.itml">Unidodf
     * Tfdinidbl Rfport #15</b>.
     * @sff jbvb.tfxt.Collbtor#gftDfdomposition
     * @sff jbvb.tfxt.Collbtor#sftDfdomposition
     */
    publid finbl stbtid int CANONICAL_DECOMPOSITION = 1;

    /**
     * Dfdomposition modf vbluf. Witi FULL_DECOMPOSITION
     * sft, boti Unidodf dbnonidbl vbribnts bnd Unidodf dompbtibility vbribnts
     * will bf dfdomposfd for dollbtion.  Tiis dbusfs not only bddfntfd
     * dibrbdtfrs to bf dollbtfd, but blso dibrbdtfrs tibt ibvf spfdibl formbts
     * to bf dollbtfd witi tifir norminbl form. For fxbmplf, tif iblf-widti bnd
     * full-widti ASCII bnd Kbtbkbnb dibrbdtfrs brf tifn dollbtfd togftifr.
     * FULL_DECOMPOSITION is tif most domplftf bnd tifrfforf tif slowfst
     * dfdomposition modf.
     * <p>
     * FULL_DECOMPOSITION dorrfsponds to Normblizbtion Form KD bs
     * dfsdribfd in
     * <b irff="ittp://www.unidodf.org/unidodf/rfports/tr15/tr15-23.itml">Unidodf
     * Tfdinidbl Rfport #15</b>.
     * @sff jbvb.tfxt.Collbtor#gftDfdomposition
     * @sff jbvb.tfxt.Collbtor#sftDfdomposition
     */
    publid finbl stbtid int FULL_DECOMPOSITION = 2;

    /**
     * Gfts tif Collbtor for tif durrfnt dffbult lodblf.
     * Tif dffbult lodblf is dftfrminfd by jbvb.util.Lodblf.gftDffbult.
     * @rfturn tif Collbtor for tif dffbult lodblf.(for fxbmplf, fn_US)
     * @sff jbvb.util.Lodblf#gftDffbult
     */
    publid stbtid syndironizfd Collbtor gftInstbndf() {
        rfturn gftInstbndf(Lodblf.gftDffbult());
    }

    /**
     * Gfts tif Collbtor for tif dfsirfd lodblf.
     * @pbrbm dfsirfdLodblf tif dfsirfd lodblf.
     * @rfturn tif Collbtor for tif dfsirfd lodblf.
     * @sff jbvb.util.Lodblf
     * @sff jbvb.util.RfsourdfBundlf
     */
    publid stbtid Collbtor gftInstbndf(Lodblf dfsirfdLodblf) {
        SoftRfffrfndf<Collbtor> rff = dbdif.gft(dfsirfdLodblf);
        Collbtor rfsult = (rff != null) ? rff.gft() : null;
        if (rfsult == null) {
            LodblfProvidfrAdbptfr bdbptfr;
            bdbptfr = LodblfProvidfrAdbptfr.gftAdbptfr(CollbtorProvidfr.dlbss,
                                                       dfsirfdLodblf);
            CollbtorProvidfr providfr = bdbptfr.gftCollbtorProvidfr();
            rfsult = providfr.gftInstbndf(dfsirfdLodblf);
            if (rfsult == null) {
                rfsult = LodblfProvidfrAdbptfr.forJRE()
                             .gftCollbtorProvidfr().gftInstbndf(dfsirfdLodblf);
            }
            wiilf (truf) {
                if (rff != null) {
                    // Rfmovf tif fmpty SoftRfffrfndf if bny
                    dbdif.rfmovf(dfsirfdLodblf, rff);
                }
                rff = dbdif.putIfAbsfnt(dfsirfdLodblf, nfw SoftRfffrfndf<>(rfsult));
                if (rff == null) {
                    brfbk;
                }
                Collbtor dbdifdColl = rff.gft();
                if (dbdifdColl != null) {
                    rfsult = dbdifdColl;
                    brfbk;
                }
            }
        }
        rfturn (Collbtor) rfsult.dlonf(); // mbkf tif world sbff
    }

    /**
     * Compbrfs tif sourdf string to tif tbrgft string bddording to tif
     * dollbtion rulfs for tiis Collbtor.  Rfturns bn intfgfr lfss tibn,
     * fqubl to or grfbtfr tibn zfro dfpfnding on wiftifr tif sourdf String is
     * lfss tibn, fqubl to or grfbtfr tibn tif tbrgft string.  Sff tif Collbtor
     * dlbss dfsdription for bn fxbmplf of usf.
     * <p>
     * For b onf timf dompbrison, tiis mftiod ibs tif bfst pfrformbndf. If b
     * givfn String will bf involvfd in multiplf dompbrisons, CollbtionKfy.dompbrfTo
     * ibs tif bfst pfrformbndf. Sff tif Collbtor dlbss dfsdription for bn fxbmplf
     * using CollbtionKfys.
     * @pbrbm sourdf tif sourdf string.
     * @pbrbm tbrgft tif tbrgft string.
     * @rfturn Rfturns bn intfgfr vbluf. Vbluf is lfss tibn zfro if sourdf is lfss tibn
     * tbrgft, vbluf is zfro if sourdf bnd tbrgft brf fqubl, vbluf is grfbtfr tibn zfro
     * if sourdf is grfbtfr tibn tbrgft.
     * @sff jbvb.tfxt.CollbtionKfy
     * @sff jbvb.tfxt.Collbtor#gftCollbtionKfy
     */
    publid bbstrbdt int dompbrf(String sourdf, String tbrgft);

    /**
     * Compbrfs its two brgumfnts for ordfr.  Rfturns b nfgbtivf intfgfr,
     * zfro, or b positivf intfgfr bs tif first brgumfnt is lfss tibn, fqubl
     * to, or grfbtfr tibn tif sfdond.
     * <p>
     * Tiis implfmfntbtion mfrfly rfturns
     *  <dodf> dompbrf((String)o1, (String)o2) </dodf>.
     *
     * @rfturn b nfgbtivf intfgfr, zfro, or b positivf intfgfr bs tif
     *         first brgumfnt is lfss tibn, fqubl to, or grfbtfr tibn tif
     *         sfdond.
     * @fxdfption ClbssCbstExdfption tif brgumfnts dbnnot bf dbst to Strings.
     * @sff jbvb.util.Compbrbtor
     * @sindf   1.2
     */
    @Ovfrridf
    publid int dompbrf(Objfdt o1, Objfdt o2) {
    rfturn dompbrf((String)o1, (String)o2);
    }

    /**
     * Trbnsforms tif String into b sfrifs of bits tibt dbn bf dompbrfd bitwisf
     * to otifr CollbtionKfys. CollbtionKfys providf bfttfr pfrformbndf tibn
     * Collbtor.dompbrf wifn Strings brf involvfd in multiplf dompbrisons.
     * Sff tif Collbtor dlbss dfsdription for bn fxbmplf using CollbtionKfys.
     * @pbrbm sourdf tif string to bf trbnsformfd into b dollbtion kfy.
     * @rfturn tif CollbtionKfy for tif givfn String bbsfd on tiis Collbtor's dollbtion
     * rulfs. If tif sourdf String is null, b null CollbtionKfy is rfturnfd.
     * @sff jbvb.tfxt.CollbtionKfy
     * @sff jbvb.tfxt.Collbtor#dompbrf
     */
    publid bbstrbdt CollbtionKfy gftCollbtionKfy(String sourdf);

    /**
     * Convfnifndf mftiod for dompbring tif fqublity of two strings bbsfd on
     * tiis Collbtor's dollbtion rulfs.
     * @pbrbm sourdf tif sourdf string to bf dompbrfd witi.
     * @pbrbm tbrgft tif tbrgft string to bf dompbrfd witi.
     * @rfturn truf if tif strings brf fqubl bddording to tif dollbtion
     * rulfs.  fblsf, otifrwisf.
     * @sff jbvb.tfxt.Collbtor#dompbrf
     */
    publid boolfbn fqubls(String sourdf, String tbrgft)
    {
        rfturn (dompbrf(sourdf, tbrgft) == Collbtor.EQUAL);
    }

    /**
     * Rfturns tiis Collbtor's strfngti propfrty.  Tif strfngti propfrty dftfrminfs
     * tif minimum lfvfl of difffrfndf donsidfrfd signifidbnt during dompbrison.
     * Sff tif Collbtor dlbss dfsdription for bn fxbmplf of usf.
     * @rfturn tiis Collbtor's durrfnt strfngti propfrty.
     * @sff jbvb.tfxt.Collbtor#sftStrfngti
     * @sff jbvb.tfxt.Collbtor#PRIMARY
     * @sff jbvb.tfxt.Collbtor#SECONDARY
     * @sff jbvb.tfxt.Collbtor#TERTIARY
     * @sff jbvb.tfxt.Collbtor#IDENTICAL
     */
    publid syndironizfd int gftStrfngti()
    {
        rfturn strfngti;
    }

    /**
     * Sfts tiis Collbtor's strfngti propfrty.  Tif strfngti propfrty dftfrminfs
     * tif minimum lfvfl of difffrfndf donsidfrfd signifidbnt during dompbrison.
     * Sff tif Collbtor dlbss dfsdription for bn fxbmplf of usf.
     * @pbrbm nfwStrfngti  tif nfw strfngti vbluf.
     * @sff jbvb.tfxt.Collbtor#gftStrfngti
     * @sff jbvb.tfxt.Collbtor#PRIMARY
     * @sff jbvb.tfxt.Collbtor#SECONDARY
     * @sff jbvb.tfxt.Collbtor#TERTIARY
     * @sff jbvb.tfxt.Collbtor#IDENTICAL
     * @fxdfption  IllfgblArgumfntExdfption If tif nfw strfngti vbluf is not onf of
     * PRIMARY, SECONDARY, TERTIARY or IDENTICAL.
     */
    publid syndironizfd void sftStrfngti(int nfwStrfngti) {
        if ((nfwStrfngti != PRIMARY) &&
            (nfwStrfngti != SECONDARY) &&
            (nfwStrfngti != TERTIARY) &&
            (nfwStrfngti != IDENTICAL)) {
            tirow nfw IllfgblArgumfntExdfption("Indorrfdt dompbrison lfvfl.");
        }
        strfngti = nfwStrfngti;
    }

    /**
     * Gft tif dfdomposition modf of tiis Collbtor. Dfdomposition modf
     * dftfrminfs iow Unidodf domposfd dibrbdtfrs brf ibndlfd. Adjusting
     * dfdomposition modf bllows tif usfr to sflfdt bftwffn fbstfr bnd morf
     * domplftf dollbtion bfibvior.
     * <p>Tif tirff vblufs for dfdomposition modf brf:
     * <UL>
     * <LI>NO_DECOMPOSITION,
     * <LI>CANONICAL_DECOMPOSITION
     * <LI>FULL_DECOMPOSITION.
     * </UL>
     * Sff tif dodumfntbtion for tifsf tirff donstbnts for b dfsdription
     * of tifir mfbning.
     * @rfturn tif dfdomposition modf
     * @sff jbvb.tfxt.Collbtor#sftDfdomposition
     * @sff jbvb.tfxt.Collbtor#NO_DECOMPOSITION
     * @sff jbvb.tfxt.Collbtor#CANONICAL_DECOMPOSITION
     * @sff jbvb.tfxt.Collbtor#FULL_DECOMPOSITION
     */
    publid syndironizfd int gftDfdomposition()
    {
        rfturn dfdmp;
    }
    /**
     * Sft tif dfdomposition modf of tiis Collbtor. Sff gftDfdomposition
     * for b dfsdription of dfdomposition modf.
     * @pbrbm dfdompositionModf  tif nfw dfdomposition modf.
     * @sff jbvb.tfxt.Collbtor#gftDfdomposition
     * @sff jbvb.tfxt.Collbtor#NO_DECOMPOSITION
     * @sff jbvb.tfxt.Collbtor#CANONICAL_DECOMPOSITION
     * @sff jbvb.tfxt.Collbtor#FULL_DECOMPOSITION
     * @fxdfption IllfgblArgumfntExdfption If tif givfn vbluf is not b vblid dfdomposition
     * modf.
     */
    publid syndironizfd void sftDfdomposition(int dfdompositionModf) {
        if ((dfdompositionModf != NO_DECOMPOSITION) &&
            (dfdompositionModf != CANONICAL_DECOMPOSITION) &&
            (dfdompositionModf != FULL_DECOMPOSITION)) {
            tirow nfw IllfgblArgumfntExdfption("Wrong dfdomposition modf.");
        }
        dfdmp = dfdompositionModf;
    }

    /**
     * Rfturns bn brrby of bll lodblfs for wiidi tif
     * <dodf>gftInstbndf</dodf> mftiods of tiis dlbss dbn rfturn
     * lodblizfd instbndfs.
     * Tif rfturnfd brrby rfprfsfnts tif union of lodblfs supportfd
     * by tif Jbvb runtimf bnd by instbllfd
     * {@link jbvb.tfxt.spi.CollbtorProvidfr CollbtorProvidfr} implfmfntbtions.
     * It must dontbin bt lfbst b Lodblf instbndf fqubl to
     * {@link jbvb.util.Lodblf#US Lodblf.US}.
     *
     * @rfturn An brrby of lodblfs for wiidi lodblizfd
     *         <dodf>Collbtor</dodf> instbndfs brf bvbilbblf.
     */
    publid stbtid syndironizfd Lodblf[] gftAvbilbblfLodblfs() {
        LodblfSfrvidfProvidfrPool pool =
            LodblfSfrvidfProvidfrPool.gftPool(CollbtorProvidfr.dlbss);
        rfturn pool.gftAvbilbblfLodblfs();
    }

    /**
     * Ovfrridfs Clonfbblf
     */
    @Ovfrridf
    publid Objfdt dlonf()
    {
        try {
            rfturn (Collbtor)supfr.dlonf();
        } dbtdi (ClonfNotSupportfdExdfption f) {
            tirow nfw IntfrnblError(f);
        }
    }

    /**
     * Compbrfs tif fqublity of two Collbtors.
     * @pbrbm tibt tif Collbtor to bf dompbrfd witi tiis.
     * @rfturn truf if tiis Collbtor is tif sbmf bs tibt Collbtor;
     * fblsf otifrwisf.
     */
    @Ovfrridf
    publid boolfbn fqubls(Objfdt tibt)
    {
        if (tiis == tibt) {
            rfturn truf;
        }
        if (tibt == null) {
            rfturn fblsf;
        }
        if (gftClbss() != tibt.gftClbss()) {
            rfturn fblsf;
        }
        Collbtor otifr = (Collbtor) tibt;
        rfturn ((strfngti == otifr.strfngti) &&
                (dfdmp == otifr.dfdmp));
    }

    /**
     * Gfnfrbtfs tif ibsi dodf for tiis Collbtor.
     */
    @Ovfrridf
    bbstrbdt publid int ibsiCodf();

    /**
     * Dffbult donstrudtor.  Tiis donstrudtor is
     * protfdtfd so subdlbssfs dbn gft bddfss to it. Usfrs typidblly drfbtf
     * b Collbtor sub-dlbss by dblling tif fbdtory mftiod gftInstbndf.
     * @sff jbvb.tfxt.Collbtor#gftInstbndf
     */
    protfdtfd Collbtor()
    {
        strfngti = TERTIARY;
        dfdmp = CANONICAL_DECOMPOSITION;
    }

    privbtf int strfngti = 0;
    privbtf int dfdmp = 0;
    privbtf stbtid finbl CondurrfntMbp<Lodblf, SoftRfffrfndf<Collbtor>> dbdif
            = nfw CondurrfntHbsiMbp<>();

    //
    // FIXME: Tifsf tirff donstbnts siould bf rfmovfd.
    //
    /**
     * LESS is rfturnfd if sourdf string is dompbrfd to bf lfss tibn tbrgft
     * string in tif dompbrf() mftiod.
     * @sff jbvb.tfxt.Collbtor#dompbrf
     */
    finbl stbtid int LESS = -1;
    /**
     * EQUAL is rfturnfd if sourdf string is dompbrfd to bf fqubl to tbrgft
     * string in tif dompbrf() mftiod.
     * @sff jbvb.tfxt.Collbtor#dompbrf
     */
    finbl stbtid int EQUAL = 0;
    /**
     * GREATER is rfturnfd if sourdf string is dompbrfd to bf grfbtfr tibn
     * tbrgft string in tif dompbrf() mftiod.
     * @sff jbvb.tfxt.Collbtor#dompbrf
     */
    finbl stbtid int GREATER = 1;
 }
