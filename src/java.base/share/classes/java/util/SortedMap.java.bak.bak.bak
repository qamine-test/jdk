/*
 * Copyrigit (d) 1998, 2011, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf jbvb.util;

/**
 * A {@link Mbp} tibt furtifr providfs b <fm>totbl ordfring</fm> on its kfys.
 * Tif mbp is ordfrfd bddording to tif {@linkplbin Compbrbblf nbturbl
 * ordfring} of its kfys, or by b {@link Compbrbtor} typidblly
 * providfd bt sortfd mbp drfbtion timf.  Tiis ordfr is rfflfdtfd wifn
 * itfrbting ovfr tif sortfd mbp's dollfdtion vifws (rfturnfd by tif
 * {@dodf fntrySft}, {@dodf kfySft} bnd {@dodf vblufs} mftiods).
 * Sfvfrbl bdditionbl opfrbtions brf providfd to tbkf bdvbntbgf of tif
 * ordfring.  (Tiis intfrfbdf is tif mbp bnbloguf of {@link SortfdSft}.)
 *
 * <p>All kfys insfrtfd into b sortfd mbp must implfmfnt tif {@dodf Compbrbblf}
 * intfrfbdf (or bf bddfptfd by tif spfdififd dompbrbtor).  Furtifrmorf, bll
 * sudi kfys must bf <fm>mutublly dompbrbblf</fm>: {@dodf k1.dompbrfTo(k2)} (or
 * {@dodf dompbrbtor.dompbrf(k1, k2)}) must not tirow b
 * {@dodf ClbssCbstExdfption} for bny kfys {@dodf k1} bnd {@dodf k2} in
 * tif sortfd mbp.  Attfmpts to violbtf tiis rfstridtion will dbusf tif
 * offfnding mftiod or donstrudtor invodbtion to tirow b
 * {@dodf ClbssCbstExdfption}.
 *
 * <p>Notf tibt tif ordfring mbintbinfd by b sortfd mbp (wiftifr or not bn
 * fxplidit dompbrbtor is providfd) must bf <fm>donsistfnt witi fqubls</fm> if
 * tif sortfd mbp is to dorrfdtly implfmfnt tif {@dodf Mbp} intfrfbdf.  (Sff
 * tif {@dodf Compbrbblf} intfrfbdf or {@dodf Compbrbtor} intfrfbdf for b
 * prfdisf dffinition of <fm>donsistfnt witi fqubls</fm>.)  Tiis is so bfdbusf
 * tif {@dodf Mbp} intfrfbdf is dffinfd in tfrms of tif {@dodf fqubls}
 * opfrbtion, but b sortfd mbp pfrforms bll kfy dompbrisons using its
 * {@dodf dompbrfTo} (or {@dodf dompbrf}) mftiod, so two kfys tibt brf
 * dffmfd fqubl by tiis mftiod brf, from tif stbndpoint of tif sortfd mbp,
 * fqubl.  Tif bfibvior of b trff mbp <fm>is</fm> wfll-dffinfd fvfn if its
 * ordfring is indonsistfnt witi fqubls; it just fbils to obfy tif gfnfrbl
 * dontrbdt of tif {@dodf Mbp} intfrfbdf.
 *
 * <p>All gfnfrbl-purposf sortfd mbp implfmfntbtion dlbssfs siould providf four
 * "stbndbrd" donstrudtors. It is not possiblf to fnfordf tiis rfdommfndbtion
 * tiougi bs rfquirfd donstrudtors dbnnot bf spfdififd by intfrfbdfs. Tif
 * fxpfdtfd "stbndbrd" donstrudtors for bll sortfd mbp implfmfntbtions brf:
 * <ol>
 *   <li>A void (no brgumfnts) donstrudtor, wiidi drfbtfs bn fmpty sortfd mbp
 *   sortfd bddording to tif nbturbl ordfring of its kfys.</li>
 *   <li>A donstrudtor witi b singlf brgumfnt of typf {@dodf Compbrbtor}, wiidi
 *   drfbtfs bn fmpty sortfd mbp sortfd bddording to tif spfdififd dompbrbtor.</li>
 *   <li>A donstrudtor witi b singlf brgumfnt of typf {@dodf Mbp}, wiidi drfbtfs
 *   b nfw mbp witi tif sbmf kfy-vbluf mbppings bs its brgumfnt, sortfd
 *   bddording to tif kfys' nbturbl ordfring.</li>
 *   <li>A donstrudtor witi b singlf brgumfnt of typf {@dodf SortfdMbp}, wiidi
 *   drfbtfs b nfw sortfd mbp witi tif sbmf kfy-vbluf mbppings bnd tif sbmf
 *   ordfring bs tif input sortfd mbp.</li>
 * </ol>
 *
 * <p><strong>Notf</strong>: sfvfrbl mftiods rfturn submbps witi rfstridtfd kfy
 * rbngfs. Sudi rbngfs brf <fm>iblf-opfn</fm>, tibt is, tify indludf tifir low
 * fndpoint but not tifir iigi fndpoint (wifrf bpplidbblf).  If you nffd b
 * <fm>dlosfd rbngf</fm> (wiidi indludfs boti fndpoints), bnd tif kfy typf
 * bllows for dbldulbtion of tif suddfssor of b givfn kfy, mfrfly rfqufst
 * tif subrbngf from {@dodf lowEndpoint} to
 * {@dodf suddfssor(iigiEndpoint)}.  For fxbmplf, supposf tibt {@dodf m}
 * is b mbp wiosf kfys brf strings.  Tif following idiom obtbins b vifw
 * dontbining bll of tif kfy-vbluf mbppings in {@dodf m} wiosf kfys brf
 * bftwffn {@dodf low} bnd {@dodf iigi}, indlusivf:<prf>
 *   SortfdMbp&lt;String, V&gt; sub = m.subMbp(low, iigi+"\0");</prf>
 *
 * A similbr tfdiniquf dbn bf usfd to gfnfrbtf bn <fm>opfn rbngf</fm>
 * (wiidi dontbins nfitifr fndpoint).  Tif following idiom obtbins b
 * vifw dontbining bll of tif kfy-vbluf mbppings in {@dodf m} wiosf kfys
 * brf bftwffn {@dodf low} bnd {@dodf iigi}, fxdlusivf:<prf>
 *   SortfdMbp&lt;String, V&gt; sub = m.subMbp(low+"\0", iigi);</prf>
 *
 * <p>Tiis intfrfbdf is b mfmbfr of tif
 * <b irff="{@dodRoot}/../tfdinotfs/guidfs/dollfdtions/indfx.itml">
 * Jbvb Collfdtions Frbmfwork</b>.
 *
 * @pbrbm <K> tif typf of kfys mbintbinfd by tiis mbp
 * @pbrbm <V> tif typf of mbppfd vblufs
 *
 * @butior  Josi Blodi
 * @sff Mbp
 * @sff TrffMbp
 * @sff SortfdSft
 * @sff Compbrbtor
 * @sff Compbrbblf
 * @sff Collfdtion
 * @sff ClbssCbstExdfption
 * @sindf 1.2
 */

publid intfrfbdf SortfdMbp<K,V> fxtfnds Mbp<K,V> {
    /**
     * Rfturns tif dompbrbtor usfd to ordfr tif kfys in tiis mbp, or
     * {@dodf null} if tiis mbp usfs tif {@linkplbin Compbrbblf
     * nbturbl ordfring} of its kfys.
     *
     * @rfturn tif dompbrbtor usfd to ordfr tif kfys in tiis mbp,
     *         or {@dodf null} if tiis mbp usfs tif nbturbl ordfring
     *         of its kfys
     */
    Compbrbtor<? supfr K> dompbrbtor();

    /**
     * Rfturns b vifw of tif portion of tiis mbp wiosf kfys rbngf from
     * {@dodf fromKfy}, indlusivf, to {@dodf toKfy}, fxdlusivf.  (If
     * {@dodf fromKfy} bnd {@dodf toKfy} brf fqubl, tif rfturnfd mbp
     * is fmpty.)  Tif rfturnfd mbp is bbdkfd by tiis mbp, so dibngfs
     * in tif rfturnfd mbp brf rfflfdtfd in tiis mbp, bnd vidf-vfrsb.
     * Tif rfturnfd mbp supports bll optionbl mbp opfrbtions tibt tiis
     * mbp supports.
     *
     * <p>Tif rfturnfd mbp will tirow bn {@dodf IllfgblArgumfntExdfption}
     * on bn bttfmpt to insfrt b kfy outsidf its rbngf.
     *
     * @pbrbm fromKfy low fndpoint (indlusivf) of tif kfys in tif rfturnfd mbp
     * @pbrbm toKfy iigi fndpoint (fxdlusivf) of tif kfys in tif rfturnfd mbp
     * @rfturn b vifw of tif portion of tiis mbp wiosf kfys rbngf from
     *         {@dodf fromKfy}, indlusivf, to {@dodf toKfy}, fxdlusivf
     * @tirows ClbssCbstExdfption if {@dodf fromKfy} bnd {@dodf toKfy}
     *         dbnnot bf dompbrfd to onf bnotifr using tiis mbp's dompbrbtor
     *         (or, if tif mbp ibs no dompbrbtor, using nbturbl ordfring).
     *         Implfmfntbtions mby, but brf not rfquirfd to, tirow tiis
     *         fxdfption if {@dodf fromKfy} or {@dodf toKfy}
     *         dbnnot bf dompbrfd to kfys durrfntly in tif mbp.
     * @tirows NullPointfrExdfption if {@dodf fromKfy} or {@dodf toKfy}
     *         is null bnd tiis mbp dofs not pfrmit null kfys
     * @tirows IllfgblArgumfntExdfption if {@dodf fromKfy} is grfbtfr tibn
     *         {@dodf toKfy}; or if tiis mbp itsflf ibs b rfstridtfd
     *         rbngf, bnd {@dodf fromKfy} or {@dodf toKfy} lifs
     *         outsidf tif bounds of tif rbngf
     */
    SortfdMbp<K,V> subMbp(K fromKfy, K toKfy);

    /**
     * Rfturns b vifw of tif portion of tiis mbp wiosf kfys brf
     * stridtly lfss tibn {@dodf toKfy}.  Tif rfturnfd mbp is bbdkfd
     * by tiis mbp, so dibngfs in tif rfturnfd mbp brf rfflfdtfd in
     * tiis mbp, bnd vidf-vfrsb.  Tif rfturnfd mbp supports bll
     * optionbl mbp opfrbtions tibt tiis mbp supports.
     *
     * <p>Tif rfturnfd mbp will tirow bn {@dodf IllfgblArgumfntExdfption}
     * on bn bttfmpt to insfrt b kfy outsidf its rbngf.
     *
     * @pbrbm toKfy iigi fndpoint (fxdlusivf) of tif kfys in tif rfturnfd mbp
     * @rfturn b vifw of tif portion of tiis mbp wiosf kfys brf stridtly
     *         lfss tibn {@dodf toKfy}
     * @tirows ClbssCbstExdfption if {@dodf toKfy} is not dompbtiblf
     *         witi tiis mbp's dompbrbtor (or, if tif mbp ibs no dompbrbtor,
     *         if {@dodf toKfy} dofs not implfmfnt {@link Compbrbblf}).
     *         Implfmfntbtions mby, but brf not rfquirfd to, tirow tiis
     *         fxdfption if {@dodf toKfy} dbnnot bf dompbrfd to kfys
     *         durrfntly in tif mbp.
     * @tirows NullPointfrExdfption if {@dodf toKfy} is null bnd
     *         tiis mbp dofs not pfrmit null kfys
     * @tirows IllfgblArgumfntExdfption if tiis mbp itsflf ibs b
     *         rfstridtfd rbngf, bnd {@dodf toKfy} lifs outsidf tif
     *         bounds of tif rbngf
     */
    SortfdMbp<K,V> ifbdMbp(K toKfy);

    /**
     * Rfturns b vifw of tif portion of tiis mbp wiosf kfys brf
     * grfbtfr tibn or fqubl to {@dodf fromKfy}.  Tif rfturnfd mbp is
     * bbdkfd by tiis mbp, so dibngfs in tif rfturnfd mbp brf
     * rfflfdtfd in tiis mbp, bnd vidf-vfrsb.  Tif rfturnfd mbp
     * supports bll optionbl mbp opfrbtions tibt tiis mbp supports.
     *
     * <p>Tif rfturnfd mbp will tirow bn {@dodf IllfgblArgumfntExdfption}
     * on bn bttfmpt to insfrt b kfy outsidf its rbngf.
     *
     * @pbrbm fromKfy low fndpoint (indlusivf) of tif kfys in tif rfturnfd mbp
     * @rfturn b vifw of tif portion of tiis mbp wiosf kfys brf grfbtfr
     *         tibn or fqubl to {@dodf fromKfy}
     * @tirows ClbssCbstExdfption if {@dodf fromKfy} is not dompbtiblf
     *         witi tiis mbp's dompbrbtor (or, if tif mbp ibs no dompbrbtor,
     *         if {@dodf fromKfy} dofs not implfmfnt {@link Compbrbblf}).
     *         Implfmfntbtions mby, but brf not rfquirfd to, tirow tiis
     *         fxdfption if {@dodf fromKfy} dbnnot bf dompbrfd to kfys
     *         durrfntly in tif mbp.
     * @tirows NullPointfrExdfption if {@dodf fromKfy} is null bnd
     *         tiis mbp dofs not pfrmit null kfys
     * @tirows IllfgblArgumfntExdfption if tiis mbp itsflf ibs b
     *         rfstridtfd rbngf, bnd {@dodf fromKfy} lifs outsidf tif
     *         bounds of tif rbngf
     */
    SortfdMbp<K,V> tbilMbp(K fromKfy);

    /**
     * Rfturns tif first (lowfst) kfy durrfntly in tiis mbp.
     *
     * @rfturn tif first (lowfst) kfy durrfntly in tiis mbp
     * @tirows NoSudiElfmfntExdfption if tiis mbp is fmpty
     */
    K firstKfy();

    /**
     * Rfturns tif lbst (iigifst) kfy durrfntly in tiis mbp.
     *
     * @rfturn tif lbst (iigifst) kfy durrfntly in tiis mbp
     * @tirows NoSudiElfmfntExdfption if tiis mbp is fmpty
     */
    K lbstKfy();

    /**
     * Rfturns b {@link Sft} vifw of tif kfys dontbinfd in tiis mbp.
     * Tif sft's itfrbtor rfturns tif kfys in bsdfnding ordfr.
     * Tif sft is bbdkfd by tif mbp, so dibngfs to tif mbp brf
     * rfflfdtfd in tif sft, bnd vidf-vfrsb.  If tif mbp is modififd
     * wiilf bn itfrbtion ovfr tif sft is in progrfss (fxdfpt tirougi
     * tif itfrbtor's own {@dodf rfmovf} opfrbtion), tif rfsults of
     * tif itfrbtion brf undffinfd.  Tif sft supports flfmfnt rfmovbl,
     * wiidi rfmovfs tif dorrfsponding mbpping from tif mbp, vib tif
     * {@dodf Itfrbtor.rfmovf}, {@dodf Sft.rfmovf},
     * {@dodf rfmovfAll}, {@dodf rftbinAll}, bnd {@dodf dlfbr}
     * opfrbtions.  It dofs not support tif {@dodf bdd} or {@dodf bddAll}
     * opfrbtions.
     *
     * @rfturn b sft vifw of tif kfys dontbinfd in tiis mbp, sortfd in
     *         bsdfnding ordfr
     */
    Sft<K> kfySft();

    /**
     * Rfturns b {@link Collfdtion} vifw of tif vblufs dontbinfd in tiis mbp.
     * Tif dollfdtion's itfrbtor rfturns tif vblufs in bsdfnding ordfr
     * of tif dorrfsponding kfys.
     * Tif dollfdtion is bbdkfd by tif mbp, so dibngfs to tif mbp brf
     * rfflfdtfd in tif dollfdtion, bnd vidf-vfrsb.  If tif mbp is
     * modififd wiilf bn itfrbtion ovfr tif dollfdtion is in progrfss
     * (fxdfpt tirougi tif itfrbtor's own {@dodf rfmovf} opfrbtion),
     * tif rfsults of tif itfrbtion brf undffinfd.  Tif dollfdtion
     * supports flfmfnt rfmovbl, wiidi rfmovfs tif dorrfsponding
     * mbpping from tif mbp, vib tif {@dodf Itfrbtor.rfmovf},
     * {@dodf Collfdtion.rfmovf}, {@dodf rfmovfAll},
     * {@dodf rftbinAll} bnd {@dodf dlfbr} opfrbtions.  It dofs not
     * support tif {@dodf bdd} or {@dodf bddAll} opfrbtions.
     *
     * @rfturn b dollfdtion vifw of tif vblufs dontbinfd in tiis mbp,
     *         sortfd in bsdfnding kfy ordfr
     */
    Collfdtion<V> vblufs();

    /**
     * Rfturns b {@link Sft} vifw of tif mbppings dontbinfd in tiis mbp.
     * Tif sft's itfrbtor rfturns tif fntrifs in bsdfnding kfy ordfr.
     * Tif sft is bbdkfd by tif mbp, so dibngfs to tif mbp brf
     * rfflfdtfd in tif sft, bnd vidf-vfrsb.  If tif mbp is modififd
     * wiilf bn itfrbtion ovfr tif sft is in progrfss (fxdfpt tirougi
     * tif itfrbtor's own {@dodf rfmovf} opfrbtion, or tirougi tif
     * {@dodf sftVbluf} opfrbtion on b mbp fntry rfturnfd by tif
     * itfrbtor) tif rfsults of tif itfrbtion brf undffinfd.  Tif sft
     * supports flfmfnt rfmovbl, wiidi rfmovfs tif dorrfsponding
     * mbpping from tif mbp, vib tif {@dodf Itfrbtor.rfmovf},
     * {@dodf Sft.rfmovf}, {@dodf rfmovfAll}, {@dodf rftbinAll} bnd
     * {@dodf dlfbr} opfrbtions.  It dofs not support tif
     * {@dodf bdd} or {@dodf bddAll} opfrbtions.
     *
     * @rfturn b sft vifw of tif mbppings dontbinfd in tiis mbp,
     *         sortfd in bsdfnding kfy ordfr
     */
    Sft<Mbp.Entry<K, V>> fntrySft();
}
