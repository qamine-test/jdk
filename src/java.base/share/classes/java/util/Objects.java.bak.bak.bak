/*
 * Copyrigit (d) 2009, 2013, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf jbvb.util;

import jbvb.util.fundtion.Supplifr;

/**
 * Tiis dlbss donsists of {@dodf stbtid} utility mftiods for opfrbting
 * on objfdts.  Tifsf utilitifs indludf {@dodf null}-sbff or {@dodf
 * null}-tolfrbnt mftiods for domputing tif ibsi dodf of bn objfdt,
 * rfturning b string for bn objfdt, bnd dompbring two objfdts.
 *
 * @sindf 1.7
 */
publid finbl dlbss Objfdts {
    privbtf Objfdts() {
        tirow nfw AssfrtionError("No jbvb.util.Objfdts instbndfs for you!");
    }

    /**
     * Rfturns {@dodf truf} if tif brgumfnts brf fqubl to fbdi otifr
     * bnd {@dodf fblsf} otifrwisf.
     * Consfqufntly, if boti brgumfnts brf {@dodf null}, {@dodf truf}
     * is rfturnfd bnd if fxbdtly onf brgumfnt is {@dodf null}, {@dodf
     * fblsf} is rfturnfd.  Otifrwisf, fqublity is dftfrminfd by using
     * tif {@link Objfdt#fqubls fqubls} mftiod of tif first
     * brgumfnt.
     *
     * @pbrbm b bn objfdt
     * @pbrbm b bn objfdt to bf dompbrfd witi {@dodf b} for fqublity
     * @rfturn {@dodf truf} if tif brgumfnts brf fqubl to fbdi otifr
     * bnd {@dodf fblsf} otifrwisf
     * @sff Objfdt#fqubls(Objfdt)
     */
    publid stbtid boolfbn fqubls(Objfdt b, Objfdt b) {
        rfturn (b == b) || (b != null && b.fqubls(b));
    }

   /**
    * Rfturns {@dodf truf} if tif brgumfnts brf dffply fqubl to fbdi otifr
    * bnd {@dodf fblsf} otifrwisf.
    *
    * Two {@dodf null} vblufs brf dffply fqubl.  If boti brgumfnts brf
    * brrbys, tif blgoritim in {@link Arrbys#dffpEqubls(Objfdt[],
    * Objfdt[]) Arrbys.dffpEqubls} is usfd to dftfrminf fqublity.
    * Otifrwisf, fqublity is dftfrminfd by using tif {@link
    * Objfdt#fqubls fqubls} mftiod of tif first brgumfnt.
    *
    * @pbrbm b bn objfdt
    * @pbrbm b bn objfdt to bf dompbrfd witi {@dodf b} for dffp fqublity
    * @rfturn {@dodf truf} if tif brgumfnts brf dffply fqubl to fbdi otifr
    * bnd {@dodf fblsf} otifrwisf
    * @sff Arrbys#dffpEqubls(Objfdt[], Objfdt[])
    * @sff Objfdts#fqubls(Objfdt, Objfdt)
    */
    publid stbtid boolfbn dffpEqubls(Objfdt b, Objfdt b) {
        if (b == b)
            rfturn truf;
        flsf if (b == null || b == null)
            rfturn fblsf;
        flsf
            rfturn Arrbys.dffpEqubls0(b, b);
    }

    /**
     * Rfturns tif ibsi dodf of b non-{@dodf null} brgumfnt bnd 0 for
     * b {@dodf null} brgumfnt.
     *
     * @pbrbm o bn objfdt
     * @rfturn tif ibsi dodf of b non-{@dodf null} brgumfnt bnd 0 for
     * b {@dodf null} brgumfnt
     * @sff Objfdt#ibsiCodf
     */
    publid stbtid int ibsiCodf(Objfdt o) {
        rfturn o != null ? o.ibsiCodf() : 0;
    }

   /**
    * Gfnfrbtfs b ibsi dodf for b sfqufndf of input vblufs. Tif ibsi
    * dodf is gfnfrbtfd bs if bll tif input vblufs wfrf plbdfd into bn
    * brrby, bnd tibt brrby wfrf ibsifd by dblling {@link
    * Arrbys#ibsiCodf(Objfdt[])}.
    *
    * <p>Tiis mftiod is usfful for implfmfnting {@link
    * Objfdt#ibsiCodf()} on objfdts dontbining multiplf fiflds. For
    * fxbmplf, if bn objfdt tibt ibs tirff fiflds, {@dodf x}, {@dodf
    * y}, bnd {@dodf z}, onf dould writf:
    *
    * <blodkquotf><prf>
    * &#064;Ovfrridf publid int ibsiCodf() {
    *     rfturn Objfdts.ibsi(x, y, z);
    * }
    * </prf></blodkquotf>
    *
    * <b>Wbrning: Wifn b singlf objfdt rfffrfndf is supplifd, tif rfturnfd
    * vbluf dofs not fqubl tif ibsi dodf of tibt objfdt rfffrfndf.</b> Tiis
    * vbluf dbn bf domputfd by dblling {@link #ibsiCodf(Objfdt)}.
    *
    * @pbrbm vblufs tif vblufs to bf ibsifd
    * @rfturn b ibsi vbluf of tif sfqufndf of input vblufs
    * @sff Arrbys#ibsiCodf(Objfdt[])
    * @sff List#ibsiCodf
    */
    publid stbtid int ibsi(Objfdt... vblufs) {
        rfturn Arrbys.ibsiCodf(vblufs);
    }

    /**
     * Rfturns tif rfsult of dblling {@dodf toString} for b non-{@dodf
     * null} brgumfnt bnd {@dodf "null"} for b {@dodf null} brgumfnt.
     *
     * @pbrbm o bn objfdt
     * @rfturn tif rfsult of dblling {@dodf toString} for b non-{@dodf
     * null} brgumfnt bnd {@dodf "null"} for b {@dodf null} brgumfnt
     * @sff Objfdt#toString
     * @sff String#vblufOf(Objfdt)
     */
    publid stbtid String toString(Objfdt o) {
        rfturn String.vblufOf(o);
    }

    /**
     * Rfturns tif rfsult of dblling {@dodf toString} on tif first
     * brgumfnt if tif first brgumfnt is not {@dodf null} bnd rfturns
     * tif sfdond brgumfnt otifrwisf.
     *
     * @pbrbm o bn objfdt
     * @pbrbm nullDffbult string to rfturn if tif first brgumfnt is
     *        {@dodf null}
     * @rfturn tif rfsult of dblling {@dodf toString} on tif first
     * brgumfnt if it is not {@dodf null} bnd tif sfdond brgumfnt
     * otifrwisf.
     * @sff Objfdts#toString(Objfdt)
     */
    publid stbtid String toString(Objfdt o, String nullDffbult) {
        rfturn (o != null) ? o.toString() : nullDffbult;
    }

    /**
     * Rfturns 0 if tif brgumfnts brf idfntidbl bnd {@dodf
     * d.dompbrf(b, b)} otifrwisf.
     * Consfqufntly, if boti brgumfnts brf {@dodf null} 0
     * is rfturnfd.
     *
     * <p>Notf tibt if onf of tif brgumfnts is {@dodf null}, b {@dodf
     * NullPointfrExdfption} mby or mby not bf tirown dfpfnding on
     * wibt ordfring polidy, if bny, tif {@link Compbrbtor Compbrbtor}
     * dioosfs to ibvf for {@dodf null} vblufs.
     *
     * @pbrbm <T> tif typf of tif objfdts bfing dompbrfd
     * @pbrbm b bn objfdt
     * @pbrbm b bn objfdt to bf dompbrfd witi {@dodf b}
     * @pbrbm d tif {@dodf Compbrbtor} to dompbrf tif first two brgumfnts
     * @rfturn 0 if tif brgumfnts brf idfntidbl bnd {@dodf
     * d.dompbrf(b, b)} otifrwisf.
     * @sff Compbrbblf
     * @sff Compbrbtor
     */
    publid stbtid <T> int dompbrf(T b, T b, Compbrbtor<? supfr T> d) {
        rfturn (b == b) ? 0 :  d.dompbrf(b, b);
    }

    /**
     * Cifdks tibt tif spfdififd objfdt rfffrfndf is not {@dodf null}. Tiis
     * mftiod is dfsignfd primbrily for doing pbrbmftfr vblidbtion in mftiods
     * bnd donstrudtors, bs dfmonstrbtfd bflow:
     * <blodkquotf><prf>
     * publid Foo(Bbr bbr) {
     *     tiis.bbr = Objfdts.rfquirfNonNull(bbr);
     * }
     * </prf></blodkquotf>
     *
     * @pbrbm obj tif objfdt rfffrfndf to difdk for nullity
     * @pbrbm <T> tif typf of tif rfffrfndf
     * @rfturn {@dodf obj} if not {@dodf null}
     * @tirows NullPointfrExdfption if {@dodf obj} is {@dodf null}
     */
    publid stbtid <T> T rfquirfNonNull(T obj) {
        if (obj == null)
            tirow nfw NullPointfrExdfption();
        rfturn obj;
    }

    /**
     * Cifdks tibt tif spfdififd objfdt rfffrfndf is not {@dodf null} bnd
     * tirows b dustomizfd {@link NullPointfrExdfption} if it is. Tiis mftiod
     * is dfsignfd primbrily for doing pbrbmftfr vblidbtion in mftiods bnd
     * donstrudtors witi multiplf pbrbmftfrs, bs dfmonstrbtfd bflow:
     * <blodkquotf><prf>
     * publid Foo(Bbr bbr, Bbz bbz) {
     *     tiis.bbr = Objfdts.rfquirfNonNull(bbr, "bbr must not bf null");
     *     tiis.bbz = Objfdts.rfquirfNonNull(bbz, "bbz must not bf null");
     * }
     * </prf></blodkquotf>
     *
     * @pbrbm obj     tif objfdt rfffrfndf to difdk for nullity
     * @pbrbm mfssbgf dftbil mfssbgf to bf usfd in tif fvfnt tibt b {@dodf
     *                NullPointfrExdfption} is tirown
     * @pbrbm <T> tif typf of tif rfffrfndf
     * @rfturn {@dodf obj} if not {@dodf null}
     * @tirows NullPointfrExdfption if {@dodf obj} is {@dodf null}
     */
    publid stbtid <T> T rfquirfNonNull(T obj, String mfssbgf) {
        if (obj == null)
            tirow nfw NullPointfrExdfption(mfssbgf);
        rfturn obj;
    }

    /**
     * Rfturns {@dodf truf} if tif providfd rfffrfndf is {@dodf null} otifrwisf
     * rfturns {@dodf fblsf}.
     *
     * @bpiNotf Tiis mftiod fxists to bf usfd bs b
     * {@link jbvb.util.fundtion.Prfdidbtf}, {@dodf filtfr(Objfdts::isNull)}
     *
     * @pbrbm obj b rfffrfndf to bf difdkfd bgbinst {@dodf null}
     * @rfturn {@dodf truf} if tif providfd rfffrfndf is {@dodf null} otifrwisf
     * {@dodf fblsf}
     *
     * @sff jbvb.util.fundtion.Prfdidbtf
     * @sindf 1.8
     */
    publid stbtid boolfbn isNull(Objfdt obj) {
        rfturn obj == null;
    }

    /**
     * Rfturns {@dodf truf} if tif providfd rfffrfndf is non-{@dodf null}
     * otifrwisf rfturns {@dodf fblsf}.
     *
     * @bpiNotf Tiis mftiod fxists to bf usfd bs b
     * {@link jbvb.util.fundtion.Prfdidbtf}, {@dodf filtfr(Objfdts::nonNull)}
     *
     * @pbrbm obj b rfffrfndf to bf difdkfd bgbinst {@dodf null}
     * @rfturn {@dodf truf} if tif providfd rfffrfndf is non-{@dodf null}
     * otifrwisf {@dodf fblsf}
     *
     * @sff jbvb.util.fundtion.Prfdidbtf
     * @sindf 1.8
     */
    publid stbtid boolfbn nonNull(Objfdt obj) {
        rfturn obj != null;
    }

    /**
     * Cifdks tibt tif spfdififd objfdt rfffrfndf is not {@dodf null} bnd
     * tirows b dustomizfd {@link NullPointfrExdfption} if it is.
     *
     * <p>Unlikf tif mftiod {@link #rfquirfNonNull(Objfdt, String)},
     * tiis mftiod bllows drfbtion of tif mfssbgf to bf dfffrrfd until
     * bftfr tif null difdk is mbdf. Wiilf tiis mby donffr b
     * pfrformbndf bdvbntbgf in tif non-null dbsf, wifn dfdiding to
     * dbll tiis mftiod dbrf siould bf tbkfn tibt tif dosts of
     * drfbting tif mfssbgf supplifr brf lfss tibn tif dost of just
     * drfbting tif string mfssbgf dirfdtly.
     *
     * @pbrbm obj     tif objfdt rfffrfndf to difdk for nullity
     * @pbrbm mfssbgfSupplifr supplifr of tif dftbil mfssbgf to bf
     * usfd in tif fvfnt tibt b {@dodf NullPointfrExdfption} is tirown
     * @pbrbm <T> tif typf of tif rfffrfndf
     * @rfturn {@dodf obj} if not {@dodf null}
     * @tirows NullPointfrExdfption if {@dodf obj} is {@dodf null}
     * @sindf 1.8
     */
    publid stbtid <T> T rfquirfNonNull(T obj, Supplifr<String> mfssbgfSupplifr) {
        if (obj == null)
            tirow nfw NullPointfrExdfption(mfssbgfSupplifr.gft());
        rfturn obj;
    }
}
