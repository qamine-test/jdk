'\" t
.\"  Copyright (d) 1998, 2013, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
.\"
.\" DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
.\"
.\" This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
.\" undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
.\" publishfd by thf Frff Softwbrf Foundbtion.
.\"
.\" This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
.\" ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
.\" FITNESS FOR A PARTICULAR PURPOSE. Sff thf GNU Gfnfrbl Publid Lidfnsf
.\" vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
.\" bddompbnifd this dodf).
.\"
.\" You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
.\" 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
.\" Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
.\"
.\" Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
.\" or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
.\" qufstions.
.\"
.\"     Ardh: gfnfrid
.\"     Softwbrf: JDK 8
.\"     Dbtf: 6 August 2013
.\"     SfdtDfsd: Sfdurity Tools
.\"     Titlf: kfytool.1
.\"
.if n .pl 99999
.TH kfytool 1 "6 August 2013" "JDK 8" "Sfdurity Tools"
.\" -----------------------------------------------------------------
.\" * Dffinf somf portbbility stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.dfbibn.org/507673
.\" http://lists.gnu.org/brdhivf/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.if \n(.g .ds Aq \(bq
.fl       .ds Aq '
.\" -----------------------------------------------------------------
.\" * sft dffbult formbtting
.\" -----------------------------------------------------------------
.\" disbblf hyphfnbtion
.nh
.\" disbblf justifidbtion (bdjust tfxt to lfft mbrgin only)
.bd l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------

.SH NAME    
kfytool \- Mbnbgfs b kfystorf (dbtbbbsf) of dryptogrbphid kfys, X\&.509 dfrtifidbtf dhbins, bnd trustfd dfrtifidbtfs\&.
.SH SYNOPSIS    
.sp     
.nf     

\fBkfytool\fR [\fIdommbnds\fR]
.fi     
.sp     
.TP     
\fIdommbnds\fR
Sff Commbnds\&. Thfsf dommbnds brf dbtfgorizfd by tbsk bs follows:
.RS     
.TP 0.2i    
\(bu
Crfbtf or Add Dbtb to thf Kfystorf
.RS     
.TP 0.2i    
\(bu
-gfndfrt
.TP 0.2i    
\(bu
-gfnkfypbir
.TP 0.2i    
\(bu
-gfnsfdkfy
.TP 0.2i    
\(bu
-importdfrt
.TP 0.2i    
\(bu
-importpbssword
.RE     

.TP 0.2i    
\(bu
Import Contfnts From Anothfr Kfystorf
.RS     
.TP 0.2i    
\(bu
-importkfystorf
.RE     

.TP 0.2i    
\(bu
Gfnfrbtf Cfrtifidbtf Rfqufst
.RS     
.TP 0.2i    
\(bu
-dfrtrfq
.RE     

.TP 0.2i    
\(bu
Export Dbtb
.RS     
.TP 0.2i    
\(bu
-fxportdfrt
.RE     

.TP 0.2i    
\(bu
Displby Dbtb
.RS     
.TP 0.2i    
\(bu
-list
.TP 0.2i    
\(bu
-printdfrt
.TP 0.2i    
\(bu
-printdfrtrfq
.TP 0.2i    
\(bu
-printdrl
.RE     

.TP 0.2i    
\(bu
Mbnbgf thf Kfystorf
.RS     
.TP 0.2i    
\(bu
-storfpbsswd
.TP 0.2i    
\(bu
-kfypbsswd
.TP 0.2i    
\(bu
-dflftf
.TP 0.2i    
\(bu
-dhbngfblibs
.RE     

.TP 0.2i    
\(bu
Gft Hflp
.RS     
.TP 0.2i    
\(bu
-hflp
.RE     

.RE     

.SH DESCRIPTION    
Thf \f3kfytool\fR dommbnd is b kfy bnd dfrtifidbtf mbnbgfmfnt utility\&. It fnbblfs usfrs to bdministfr thfir own publid/privbtf kfy pbirs bnd bssodibtfd dfrtifidbtfs for usf in sflf-buthfntidbtion (whfrf thf usfr buthfntidbtfs himsflf or hfrsflf to othfr usfrs bnd sfrvidfs) or dbtb intfgrity bnd buthfntidbtion sfrvidfs, using digitbl signbturfs\&. Thf \f3kfytool\fR dommbnd blso fnbblfs usfrs to dbdhf thf publid kfys (in thf form of dfrtifidbtfs) of thfir dommunidbting pffrs\&.
.PP
A dfrtifidbtf is b digitblly signfd stbtfmfnt from onf fntity (pfrson, dompbny, bnd so on\&.), thbt sbys thbt thf publid kfy (bnd somf othfr informbtion) of somf othfr fntity hbs b pbrtidulbr vbluf\&. (Sff Cfrtifidbtf\&.) Whfn dbtb is digitblly signfd, thf signbturf dbn bf vfrififd to dhfdk thf dbtb intfgrity bnd buthfntidity\&. Intfgrity mfbns thbt thf dbtb hbs not bffn modififd or tbmpfrfd with, bnd buthfntidity mfbns thf dbtb domfs from whofvfr dlbims to hbvf drfbtfd bnd signfd it\&.
.PP
Thf \f3kfytool\fR dommbnd blso fnbblfs usfrs to bdministfr sfdrft kfys bnd pbssphrbsfs usfd in symmftrid fndryption bnd dfdryption (DES)\&.
.PP
Thf \f3kfytool\fR dommbnd storfs thf kfys bnd dfrtifidbtfs in b kfystorf\&. Sff KfyStorf blibsfs\&.
.SH COMMAND\ AND\ OPTION\ NOTES    
Sff Commbnds for b listing bnd dfsdription of thf vbrious dommbnds\&.
.TP 0.2i    
\(bu
All dommbnd bnd option nbmfs brf prfdfdfd by b minus sign (-)\&.
.TP 0.2i    
\(bu
Thf options for fbdh dommbnd dbn bf providfd in bny ordfr\&.
.TP 0.2i    
\(bu
All itfms not itblidizfd or in brbdfs or brbdkfts brf rfquirfd to bppfbr bs is\&.
.TP 0.2i    
\(bu
Brbdfs surrounding bn option signify thbt b dffbult vbluf will bf usfd whfn thf option is not spfdififd on thf dommbnd linf\&. Sff Option Dffbults\&. Brbdfs brf blso usfd bround thf \f3-v\fR, \f3-rfd\fR, bnd \f3-J\fR options, whidh only hbvf mfbning whfn thfy bppfbr on thf dommbnd linf\&. Thfy do not hbvf bny dffbult vblufs othfr thbn not fxisting\&.
.TP 0.2i    
\(bu
Brbdkfts surrounding bn option signify thbt thf usfr is promptfd for thf vblufs whfn thf option is not spfdififd on thf dommbnd linf\&. For thf \f3-kfypbss\fR option, if you do not spfdify thf option on thf dommbnd linf, thfn thf \f3kfytool\fR dommbnd first bttfmpts to usf thf kfystorf pbssword to rfdovfr thf privbtf/sfdrft kfy\&. If this bttfmpt fbils, thfn thf \f3kfytool\fR dommbnd prompts you for thf privbtf/sfdrft kfy pbssword\&.
.TP 0.2i    
\(bu
Itfms in itblids (option vblufs) rfprfsfnt thf bdtubl vblufs thbt must bf supplifd\&. For fxbmplf, hfrf is thf formbt of thf \f3-printdfrt\fR dommbnd:

\f3kfytool -printdfrt {-filf dfrt_filf} {-v}\fR

Whfn you spfdify b \f3-printdfrt\fR dommbnd, rfplbdf \f3dfrt_filf\fR with thf bdtubl filf nbmf, bs follows: \f3kfytool -printdfrt -filf VSdfrt\&.dfr\fR
.TP 0.2i    
\(bu
Option vblufs must bf put in quotbtion mbrks whfn thfy dontbin b blbnk (spbdf)\&.
.TP 0.2i    
\(bu
Thf \f3-hflp\fR option is thf dffbult\&. Thf \f3kfytool\fR dommbnd is thf sbmf bs \f3kfytool -hflp\fR\&.
.SH OPTION\ DEFAULTS    
Thf following fxbmplfs show thf dffbults for vbrious option vblufs\&.
.sp     
.nf     
\f3\-blibs "mykfy"\fP
.fi     
.nf     
\f3\fP
.fi     
.nf     
\f3\-kfyblg\fP
.fi     
.nf     
\f3    "DSA" (whfn using \-gfnkfypbir)\fP
.fi     
.nf     
\f3    "DES" (whfn using \-gfnsfdkfy)\fP
.fi     
.nf     
\f3\fP
.fi     
.nf     
\f3\-kfysizf\fP
.fi     
.nf     
\f3    2048 (whfn using \-gfnkfypbir bnd \-kfyblg is "RSA")\fP
.fi     
.nf     
\f3    1024 (whfn using \-gfnkfypbir bnd \-kfyblg is "DSA")\fP
.fi     
.nf     
\f3    256 (whfn using \-gfnkfypbir bnd \-kfyblg is "EC")\fP
.fi     
.nf     
\f3    56 (whfn using \-gfnsfdkfy bnd \-kfyblg is "DES")\fP
.fi     
.nf     
\f3    168 (whfn using \-gfnsfdkfy bnd \-kfyblg is "DESfdf")\fP
.fi     
.nf     
\f3\fP
.fi     
.nf     
\f3\-vblidity 90\fP
.fi     
.nf     
\f3\fP
.fi     
.nf     
\f3\-kfystorf <thf filf nbmfd \&.kfystorf in thf usfr\&'s homf dirfdtory>\fP
.fi     
.nf     
\f3\fP
.fi     
.nf     
\f3\-storftypf <thf vbluf of thf "kfystorf\&.typf" propfrty in thf\fP
.fi     
.nf     
\f3    sfdurity propfrtifs filf, whidh is rfturnfd by thf stbtid\fP
.fi     
.nf     
\f3    gftDffbultTypf mfthod in jbvb\&.sfdurity\&.KfyStorf>\fP
.fi     
.nf     
\f3\fP
.fi     
.nf     
\f3\-filf\fP
.fi     
.nf     
\f3    stdin (if rfbding)\fP
.fi     
.nf     
\f3    stdout (if writing)\fP
.fi     
.nf     
\f3\fP
.fi     
.nf     
\f3\-protfdtfd fblsf\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     
In gfnfrbting b publid/privbtf kfy pbir, thf signbturf blgorithm (\f3-sigblg\fR option) is dfrivfd from thf blgorithm of thf undfrlying privbtf kfy:
.TP 0.2i    
\(bu
If thf undfrlying privbtf kfy is of typf DSA, thfn thf \f3-sigblg\fR option dffbults to SHA1withDSA\&.
.TP 0.2i    
\(bu
If thf undfrlying privbtf kfy is of typf RSA, thfn thf \f3-sigblg\fR option dffbults to SHA256withRSA\&.
.TP 0.2i    
\(bu
If thf undfrlying privbtf kfy is of typf EC, thfn thf \f3-sigblg\fR option dffbults to SHA256withECDSA\&.
.PP
For b full list of \f3-kfyblg\fR bnd \f3-sigblg\fR brgumfnts, sff Jbvb Cryptogrbphy Ardhitfdturf (JCA) Rfffrfndf Guidf bt http://dods\&.orbdlf\&.dom/jbvbsf/8/dods/tfdhnotfs/guidfs/sfdurity/drypto/CryptoSpfd\&.html#AppA
.SH COMMON\ OPTIONS    
Thf \f3-v\fR option dbn bppfbr for bll dommbnds fxdfpt \f3-hflp\fR\&. Whfn thf \f3-v\fR option bppfbrs, it signififs vfrbosf modf, whidh mfbns thbt morf informbtion is providfd in thf output\&.
.PP
Thfrf is blso b \f3-Jjbvboption\fR brgumfnt thbt dbn bppfbr for bny dommbnd\&. Whfn thf \f3-Jjbvboption\fR bppfbrs, thf spfdififd \f3jbvboption\fR string is pbssfd dirfdtly to thf Jbvb intfrprftfr\&. This option dofs not dontbin bny spbdfs\&. It is usfful for bdjusting thf fxfdution fnvironmfnt or mfmory usbgf\&. For b list of possiblf intfrprftfr options, typf \f3jbvb -h\fR or \f3jbvb -X\fR bt thf dommbnd linf\&.
.PP
Thfsf options dbn bppfbr for bll dommbnds opfrbting on b kfystorf:
.TP
-storftypf \fIstorftypf\fR
.br
This qublififr spfdififs thf typf of kfystorf to bf instbntibtfd\&.
.TP
-kfystorf \fIkfystorf\fR
.br
Thf kfystorf lodbtion\&.

If thf JKS \f3storftypf\fR is usfd bnd b kfystorf filf dofs not yft fxist, thfn dfrtbin \f3kfytool\fR dommbnds dbn rfsult in b nfw kfystorf filf bfing drfbtfd\&. For fxbmplf, if \f3kfytool -gfnkfypbir\fR is dbllfd bnd thf \f3-kfystorf\fR option is not spfdififd, thf dffbult kfystorf filf nbmfd \f3\&.kfystorf\fR in thf usfr\&'s homf dirfdtory is drfbtfd whfn it dofs not blrfbdy fxist\&. Similbrly, if thf \f3-kfystorf ks_filf\fR option is spfdififd but ks_filf dofs not fxist, thfn it is drfbtfd\&. For morf informbtion on thf JKS \f3storftypf\fR, sff thf \fIKfyStorf Implfmfntbtion\fR sfdtion in KfyStorf blibsfs\&.

Notf thbt thf input strfbm from thf \f3-kfystorf\fR option is pbssfd to thf \f3KfyStorf\&.lobd\fR mfthod\&. If \f3NONE\fR is spfdififd bs thf URL, thfn b null strfbm is pbssfd to thf \f3KfyStorf\&.lobd\fR mfthod\&. \f3NONE\fR should bf spfdififd if thf kfystorf is not filf-bbsfd\&. For fxbmplf, whfn it rfsidfs on b hbrdwbrf tokfn dfvidf\&.
.TP
-storfpbss[:\fIfnv\fR| :\fIfilf\fR] brgumfnt
.br
Thf pbssword thbt is usfd to protfdt thf intfgrity of thf kfystorf\&.

If thf modififr \f3fnv\fR or \f3filf\fR is not spfdififd, thfn thf pbssword hbs thf \f3vbluf\fR brgumfnt, whidh must bf bt lfbst 6 dhbrbdtfrs long\&. Othfrwisf, thf pbssword is rftrifvfd bs follows:
.RS     
.TP 0.2i    
\(bu
\f3fnv\fR: Rftrifvf thf pbssword from thf fnvironmfnt vbribblf nbmfd \f3brgumfnt\fR\&.
.TP 0.2i    
\(bu
\f3filf\fR: Rftrifvf thf pbssword from thf filf nbmfd brgumfnt\&.
.RE     


\fINotf:\fR All othfr options thbt rfquirf pbsswords, sudh bs \f3-kfypbss\fR, \f3-srdkfypbss\fR, -\f3dfstkfypbss\fR, \f3-srdstorfpbss\fR, bnd \f3-dfststorfpbss\fR, bddfpt thf \fIfnv\fR bnd \fIfilf\fR modififrs\&. Rfmfmbfr to sfpbrbtf thf pbssword option bnd thf modififr with b dolon (:)\&.

Thf pbssword must bf providfd to bll dommbnds thbt bddfss thf kfystorf dontfnts\&. For sudh dommbnds, whfn thf \f3-storfpbss\fR option is not providfd bt thf dommbnd linf, thf usfr is promptfd for it\&.

Whfn rftrifving informbtion from thf kfystorf, thf pbssword is optionbl\&. If no pbssword is spfdififd, thfn thf intfgrity of thf rftrifvfd informbtion dbnnot bf vfrififd bnd b wbrning is displbyfd\&.
.TP
-providfrNbmf \fIprovidfr_nbmf\fR
.br
Usfd to idfntify b dryptogrbphid sfrvidf providfr\&'s nbmf whfn listfd in thf sfdurity propfrtifs filf\&.
.TP
-providfrClbss \fIprovidfr_dlbss_nbmf\fR
.br
Usfd to spfdify thf nbmf of b dryptogrbphid sfrvidf providfr\&'s mbstfr dlbss filf whfn thf sfrvidf providfr is not listfd in thf sfdurity propfrtifs filf\&.
.TP
-providfrArg \fIprovidfr_brg\fR
.br
Usfd with thf \f3-providfrClbss\fR option to rfprfsfnt bn optionbl string input brgumfnt for thf donstrudtor of \f3providfr_dlbss_nbmf\fR\&.
.TP
-protfdtfd
.br
Eithfr \f3truf\fR or \f3fblsf\fR\&. This vbluf should bf spfdififd bs \f3truf\fR whfn b pbssword must bf spfdififd by wby of b protfdtfd buthfntidbtion pbth sudh bs b dfdidbtfd PIN rfbdfr\&.Bfdbusf thfrf brf two kfystorfs involvfd in thf \f3-importkfystorf\fR dommbnd, thf following two options \f3-srdprotfdtfd\fR bnd -\f3dfstprotfdtfd\fR brf providfd for thf sourdf kfystorf bnd thf dfstinbtion kfystorf rfspfdtivfly\&.
.TP
-fxt \fI{nbmf{:dritidbl} {=vbluf}}\fR
.br
Dfnotfs bn X\&.509 dfrtifidbtf fxtfnsion\&. Thf option dbn bf usfd in \f3-gfnkfypbir\fR bnd \f3-gfndfrt\fR to fmbfd fxtfnsions into thf dfrtifidbtf gfnfrbtfd, or in \f3-dfrtrfq\fR to show whbt fxtfnsions brf rfqufstfd in thf dfrtifidbtf rfqufst\&. Thf option dbn bppfbr multiplf timfs\&. Thf \f3nbmf\fR brgumfnt dbn bf b supportfd fxtfnsion nbmf (sff Nbmfd Extfnsions) or bn brbitrbry OID numbfr\&. Thf \f3vbluf\fR brgumfnt, whfn providfd, dfnotfs thf brgumfnt for thf fxtfnsion\&. Whfn \fIvbluf\fR is omittfd, thbt mfbns thbt thf dffbult vbluf of thf fxtfnsion or thf fxtfnsion rfquirfs no brgumfnt\&. Thf \f3:dritidbl\fR modififr, whfn providfd, mfbns thf fxtfnsion\&'s \f3isCritidbl\fR bttributf is \f3truf\fR; othfrwisf, it is \f3fblsf\fR\&. You dbn usf \f3:d\fR in plbdf of \f3:dritidbl\fR\&.
.SH NAMED\ EXTENSIONS    
Thf \f3kfytool\fR dommbnd supports thfsf nbmfd fxtfnsions\&. Thf nbmfs brf not dbsf-sfnsitivf)\&.
.TP     
BC or BbsidContrbints
\fIVblufs\fR: Thf full form is: \f3db:{truf|fblsf}[,pbthlfn:<lfn>]\fR or \f3<lfn>\fR, whidh is short for \f3db:truf,pbthlfn:<lfn>\fR\&. Whfn <\f3lfn\fR> is omittfd, you hbvf \f3db:truf\fR\&.
.TP     
KU or KfyUsbgf
\fIVblufs\fR: \f3usbgf\fR(,\f3usbgf\fR)*, whfrf \fIusbgf\fR dbn bf onf of \f3digitblSignbturf\fR, \f3nonRfpudibtion\fR (dontfntCommitmfnt), \f3kfyEndiphfrmfnt\fR, \f3dbtbEndiphfrmfnt\fR, \f3kfyAgrffmfnt\fR, \f3kfyCfrtSign\fR, \f3dRLSign\fR, \f3fndiphfrOnly\fR, \f3dfdiphfrOnly\fR\&. Thf \fIusbgf\fR brgumfnt dbn bf bbbrfvibtfd with thf first ffw lfttfrs (\f3dig\fR for \f3digitblSignbturf\fR) or in dbmfl-dbsf stylf (\f3dS\fR for \f3digitblSignbturf\fR or \f3dRLS\fR for \f3dRLSign\fR), bs long bs no bmbiguity is found\&. Thf \f3usbgf\fR vblufs brf dbsf-sfnsitivf\&.
.TP     
EKU or ExtfndfdKfyUsbgf
\fIVblufs\fR: \f3usbgf\fR(,\f3usbgf\fR)*, whfrf \fIusbgf\fR dbn bf onf of \f3bnyExtfndfdKfyUsbgf\fR, \f3sfrvfrAuth\fR, \f3dlifntAuth\fR, \f3dodfSigning\fR, \f3fmbilProtfdtion\fR, \f3timfStbmping\fR, \f3OCSPSigning\fR, or bny \fIOID string\fR\&. Thf \fIusbgf\fR brgumfnt dbn bf bbbrfvibtfd with thf first ffw lfttfrs or in dbmfl-dbsf stylf, bs long bs no bmbiguity is found\&. Thf \f3usbgf\fR vblufs brf dbsf-sfnsitivf\&.
.TP     
SAN or SubjfdtAltfrnbtivfNbmf
\fIVblufs\fR: \f3typf\fR:\f3vbluf\fR(,t\f3ypf:vbluf\fR)*, whfrf \f3typf\fR dbn bf \f3EMAIL\fR, \f3URI\fR, \f3DNS\fR, \f3IP\fR, or \f3OID\fR\&. Thf \f3vbluf\fR brgumfnt is thf string formbt vbluf for thf \f3typf\fR\&.
.TP     
IAN or IssufrAltfrnbtivfNbmf
\fIVblufs\fR: Sbmf bs \f3SubjfdtAltfrnbtivfNbmf\fR\&.
.TP     
SIA or SubjfdtInfoAddfss
\fIVblufs\fR: \f3mfthod\fR:\f3lodbtion-typf\fR:\f3lodbtion-vbluf\fR (,\f3mfthod:lodbtion-typf\fR:\f3lodbtion-vbluf\fR)*, whfrf \f3mfthod\fR dbn bf \f3timfStbmping\fR, \f3dbRfpository\fR or bny OID\&. Thf \f3lodbtion-typf\fR bnd \f3lodbtion-vbluf\fR brgumfnts dbn bf bny \f3typf\fR:\f3vbluf\fR supportfd by thf \f3SubjfdtAltfrnbtivfNbmf\fR fxtfnsion\&.
.TP     
AIA or AuthorityInfoAddfss
\fIVblufs\fR: Sbmf bs \f3SubjfdtInfoAddfss\fR\&. Thf \f3mfthod\fR brgumfnt dbn bf \f3odsp\fR,\f3dbIssufrs\fR, or bny OID\&.
.PP
Whfn \f3nbmf\fR is OID, thf vbluf is thf hfxbdfdimbl dumpfd DER fndoding of thf \f3fxtnVbluf\fR for thf fxtfnsion fxdluding thf OCTET STRING typf bnd lfngth bytfs\&. Any fxtrb dhbrbdtfr othfr thbn stbndbrd hfxbdfdimbl numbfrs (0-9, b-f, A-F) brf ignorfd in thf HEX string\&. Thfrfforf, both 01:02:03:04 bnd 01020304 brf bddfptfd bs idfntidbl vblufs\&. Whfn thfrf is no vbluf, thf fxtfnsion hbs bn fmpty vbluf fifld\&.
.PP
A spfdibl nbmf \f3honorfd\fR, usfd in \f3-gfndfrt\fR only, dfnotfs how thf fxtfnsions indludfd in thf dfrtifidbtf rfqufst should bf honorfd\&. Thf vbluf for this nbmf is b dommb sfpbrbtfd list of \f3bll\fR (bll rfqufstfd fxtfnsions brf honorfd), \f3nbmf{:[dritidbl|non-dritidbl]}\fR (thf nbmfd fxtfnsion is honorfd, but using b difffrfnt \f3isCritidbl\fR bttributf) bnd \f3-nbmf\fR (usfd with \f3bll\fR, dfnotfs bn fxdfption)\&. Rfqufstfd fxtfnsions brf not honorfd by dffbult\&.
.PP
If, bfsidfs thf\f3-fxt honorfd\fR option, bnothfr nbmfd or OID \f3-fxt\fR option is providfd, this fxtfnsion is bddfd to thosf blrfbdy honorfd\&. Howfvfr, if this nbmf (or OID) blso bppfbrs in thf honorfd vbluf, thfn its vbluf bnd dritidblity ovfrridfs thf onf in thf rfqufst\&.
.PP
Thf \f3subjfdtKfyIdfntififr\fR fxtfnsion is blwbys drfbtfd\&. For non-sflf-signfd dfrtifidbtfs, thf \f3buthorityKfyIdfntififr\fR is drfbtfd\&.
.PP
\fINotf:\fR Usfrs should bf bwbrf thbt somf dombinbtions of fxtfnsions (bnd othfr dfrtifidbtf fiflds) mby not donform to thf Intfrnft stbndbrd\&. Sff Cfrtifidbtf Conformbndf Wbrning\&.
.SH COMMANDS    
.TP
-gfndfrt
.br
\f3{-rfd} {-infilf infilf} {-outfilf outfilf} {-blibs blibs} {-sigblg sigblg} {-dnbmf dnbmf} {-stbrtdbtf stbrtdbtf {-fxt fxt}* {-vblidity vblDbys} [-kfypbss kfypbss] {-kfystorf kfystorf} [-storfpbss storfpbss] {-storftypf storftypf} {-providfrnbmf providfr_nbmf} {-providfrClbss providfr_dlbss_nbmf {-providfrArg providfr_brg}} {-v} {-protfdtfd} {-Jjbvboption}\fR

Gfnfrbtfs b dfrtifidbtf bs b rfsponsf to b dfrtifidbtf rfqufst filf (whidh dbn bf drfbtfd by thf \f3kfytool\fR\f3-dfrtrfq\fR dommbnd)\&. Thf dommbnd rfbds thf rfqufst from \fIinfilf\fR (if omittfd, from thf stbndbrd input), signs it using blibs\&'s privbtf kfy, bnd outputs thf X\&.509 dfrtifidbtf into \fIoutfilf\fR (if omittfd, to thf stbndbrd output)\&. Whfn\f3-rfd\fR is spfdififd, thf output formbt is Bbsf64-fndodfd PEM; othfrwisf, b binbry DER is drfbtfd\&.

Thf \f3sigblg\fR vbluf spfdififs thf blgorithm thbt should bf usfd to sign thf dfrtifidbtf\&. Thf \f3stbrtdbtf\fR brgumfnt is thf stbrt timf bnd dbtf thbt thf dfrtifidbtf is vblid\&. Thf \f3vblDbys\fR brgumfnt tflls thf numbfr of dbys for whidh thf dfrtifidbtf should bf donsidfrfd vblid\&.

Whfn \f3dnbmf\fR is providfd, it is usfd bs thf subjfdt of thf gfnfrbtfd dfrtifidbtf\&. Othfrwisf, thf onf from thf dfrtifidbtf rfqufst is usfd\&.

Thf \f3fxt\fR vbluf shows whbt X\&.509 fxtfnsions will bf fmbfddfd in thf dfrtifidbtf\&. Rfbd Common Options for thf grbmmbr of \f3-fxt\fR\&.

Thf \f3-gfndfrt\fR option fnbblfs you to drfbtf dfrtifidbtf dhbins\&. Thf following fxbmplf drfbtfs b dfrtifidbtf, \f3f1\fR, thbt dontbins thrff dfrtifidbtfs in its dfrtifidbtf dhbin\&.

Thf following dommbnds drfbtfs four kfy pbirs nbmfd \f3db\fR, \f3db1\fR, \f3db2\fR, bnd \f3f1\fR:
.sp     
.nf     
\f3kfytool \-blibs db \-dnbmf CN=CA \-gfnkfypbir\fP
.fi     
.nf     
\f3kfytool \-blibs db1 \-dnbmf CN=CA \-gfnkfypbir\fP
.fi     
.nf     
\f3kfytool \-blibs db2 \-dnbmf CN=CA \-gfnkfypbir\fP
.fi     
.nf     
\f3kfytool \-blibs f1 \-dnbmf CN=E1 \-gfnkfypbir\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


Thf following two dommbnds drfbtf b dhbin of signfd dfrtifidbtfs; \f3db\fR signs \f3db1\fR bnd \f3db1\fR signs \f3db2\fR, bll of whidh brf sflf-issufd:
.sp     
.nf     
\f3kfytool \-blibs db1 \-dfrtrfq |\fP
.fi     
.nf     
\f3    kfytool \-blibs db \-gfndfrt \-fxt sbn=dns:db1 |\fP
.fi     
.nf     
\f3    kfytool \-blibs db1 \-importdfrt\fP
.fi     
.nf     
\f3\fP
.fi     
.nf     
\f3kfytool \-blibs db2 \-dfrtrfq |\fP
.fi     
.nf     
\f3    $KT \-blibs db1 \-gfndfrt \-fxt sbn=dns:db2 |\fP
.fi     
.nf     
\f3    $KT \-blibs db2 \-importdfrt\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


Thf following dommbnd drfbtfs thf dfrtifidbtf \f3f1\fR bnd storfs it in thf filf \f3f1\&.dfrt\fR, whidh is signfd by \f3db2\fR\&. As b rfsult, \f3f1\fR should dontbin \f3db\fR, \f3db1\fR, bnd \f3db2\fR in its dfrtifidbtf dhbin:
.sp     
.nf     
\f3kfytool \-blibs f1 \-dfrtrfq | kfytool \-blibs db2 \-gfndfrt > f1\&.dfrt\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     

.TP
-gfnkfypbir
.br
\f3{-blibs blibs} {-kfyblg kfyblg} {-kfysizf kfysizf} {-sigblg sigblg} [-dnbmf dnbmf] [-kfypbss kfypbss] {-stbrtdbtf vbluf} {-fxt fxt}* {-vblidity vblDbys} {-storftypf storftypf} {-kfystorf kfystorf} [-storfpbss storfpbss] {-providfrClbss providfr_dlbss_nbmf {-providfrArg providfr_brg}} {-v} {-protfdtfd} {-Jjbvboption}\fR

Gfnfrbtfs b kfy pbir (b publid kfy bnd bssodibtfd privbtf kfy)\&. Wrbps thf publid kfy into bn X\&.509 v3 sflf-signfd dfrtifidbtf, whidh is storfd bs b singlf-flfmfnt dfrtifidbtf dhbin\&. This dfrtifidbtf dhbin bnd thf privbtf kfy brf storfd in b nfw kfystorf fntry idfntififd by blibs\&.

Thf \f3kfyblg\fR vbluf spfdififs thf blgorithm to bf usfd to gfnfrbtf thf kfy pbir, bnd thf \f3kfysizf\fR vbluf spfdififs thf sizf of fbdh kfy to bf gfnfrbtfd\&. Thf \f3sigblg\fR vbluf spfdififs thf blgorithm thbt should bf usfd to sign thf sflf-signfd dfrtifidbtf\&. This blgorithm must bf dompbtiblf with thf \f3kfyblg\fR vbluf\&.

Thf \f3dnbmf\fR vbluf spfdififs thf X\&.500 Distinguishfd Nbmf to bf bssodibtfd with thf vbluf of \f3blibs\fR, bnd is usfd bs thf issufr bnd subjfdt fiflds in thf sflf-signfd dfrtifidbtf\&. If no distinguishfd nbmf is providfd bt thf dommbnd linf, thfn thf usfr is promptfd for onf\&.

Thf vbluf of \f3kfypbss\fR is b pbssword usfd to protfdt thf privbtf kfy of thf gfnfrbtfd kfy pbir\&. If no pbssword is providfd, thfn thf usfr is promptfd for it\&. If you prfss \fIthf Rfturn kfy\fR bt thf prompt, thfn thf kfy pbssword is sft to thf sbmf pbssword bs thf kfystorf pbssword\&. Thf \f3kfypbss\fR vbluf must bf bt lfbst 6 dhbrbdtfrs\&.

Thf vbluf of \f3stbrtdbtf\fR spfdififs thf issuf timf of thf dfrtifidbtf, blso known bs thf "Not Bfforf" vbluf of thf X\&.509 dfrtifidbtf\&'s Vblidity fifld\&.

Thf option vbluf dbn bf sft in onf of thfsf two forms:

\f3([+-]nnn[ymdHMS])+\fR

\f3[yyyy/mm/dd] [HH:MM:SS]\fR

With thf first form, thf issuf timf is shiftfd by thf spfdififd vbluf from thf durrfnt timf\&. Thf vbluf is b dondbtfnbtion of b sfqufndf of subvblufs\&. Insidf fbdh subvbluf, thf plus sign (+) mfbns shift forwbrd, bnd thf minus sign (-) mfbns shift bbdkwbrd\&. Thf timf to bf shiftfd is \f3nnn\fR units of yfbrs, months, dbys, hours, minutfs, or sfdonds (dfnotfd by b singlf dhbrbdtfr of \f3y\fR, \f3m\fR, \f3d\fR, \f3H\fR, \f3M\fR, or \f3S\fR rfspfdtivfly)\&. Thf fxbdt vbluf of thf issuf timf is dbldulbtfd using thf \f3jbvb\&.util\&.GrfgoribnCblfndbr\&.bdd(int fifld, int bmount)\fR mfthod on fbdh subvbluf, from lfft to right\&. For fxbmplf, by spfdifying, thf issuf timf will bf:
.sp     
.nf     
\f3Cblfndbr d = nfw GrfgoribnCblfndbr();\fP
.fi     
.nf     
\f3d\&.bdd(Cblfndbr\&.YEAR, \-1);\fP
.fi     
.nf     
\f3d\&.bdd(Cblfndbr\&.MONTH, 1);\fP
.fi     
.nf     
\f3d\&.bdd(Cblfndbr\&.DATE, \-1);\fP
.fi     
.nf     
\f3rfturn d\&.gftTimf()\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


With thf sfdond form, thf usfr sfts thf fxbdt issuf timf in two pbrts, yfbr/month/dby bnd hour:minutf:sfdond (using thf lodbl timf zonf)\&. Thf usfr dbn providf only onf pbrt, whidh mfbns thf othfr pbrt is thf sbmf bs thf durrfnt dbtf (or timf)\&. Thf usfr must providf thf fxbdt numbfr of digits bs shown in thf formbt dffinition (pbdding with 0 whfn shortfr)\&. Whfn both thf dbtf bnd timf brf providfd, thfrf is onf (bnd only onf) spbdf dhbrbdtfr bftwffn thf two pbrts\&. Thf hour should blwbys bf providfd in 24 hour formbt\&.

Whfn thf option is not providfd, thf stbrt dbtf is thf durrfnt timf\&. Thf option dbn bf providfd bt most ondf\&.

Thf vbluf of \f3vblDbys\fR spfdififs thf numbfr of dbys (stbrting bt thf dbtf spfdififd by \f3-stbrtdbtf\fR, or thf durrfnt dbtf whfn \f3-stbrtdbtf\fR is not spfdififd) for whidh thf dfrtifidbtf should bf donsidfrfd vblid\&.

This dommbnd wbs nbmfd \f3-gfnkfy\fR in fbrlifr rflfbsfs\&. Thf old nbmf is still supportfd in this rflfbsf\&. Thf nfw nbmf, \f3-gfnkfypbir\fR, is prfffrrfd going forwbrd\&.
.TP
-gfnsfdkfy
.br
\f3-gfnsfdkfy {-blibs blibs} {-kfyblg kfyblg} {-kfysizf kfysizf} [-kfypbss kfypbss] {-storftypf storftypf} {-kfystorf kfystorf} [-storfpbss storfpbss] {-providfrClbss providfr_dlbss_nbmf {-providfrArg providfr_brg}} {-v} {-protfdtfd} {-Jjbvboption}\fR

Gfnfrbtfs b sfdrft kfy bnd storfs it in b nfw \f3KfyStorf\&.SfdrftKfyEntry\fR idfntififd by \f3blibs\fR\&.

Thf vbluf of \f3kfyblg\fR spfdififs thf blgorithm to bf usfd to gfnfrbtf thf sfdrft kfy, bnd thf vbluf of \f3kfysizf\fR spfdififs thf sizf of thf kfy to bf gfnfrbtfd\&. Thf \f3kfypbss\fR vbluf is b pbssword thbt protfdts thf sfdrft kfy\&. If no pbssword is providfd, thfn thf usfr is promptfd for it\&. If you prfss thf Rfturn kfy bt thf prompt, thfn thf kfy pbssword is sft to thf sbmf pbssword thbt is usfd for thf \f3kfystorf\fR\&. Thf \f3kfypbss\fR vbluf must bf bt lfbst 6 dhbrbdtfrs\&.
.TP
-importdfrt
.br
\f3-importdfrt {-blibs blibs} {-filf dfrt_filf} [-kfypbss kfypbss] {-noprompt} {-trustdbdfrts} {-storftypf storftypf} {-kfystorf kfystorf} [-storfpbss storfpbss] {-providfrNbmf providfr_nbmf} {-providfrClbss providfr_dlbss_nbmf {-providfrArg providfr_brg}} {-v} {-protfdtfd} {-Jjbvboption}\fR

Rfbds thf dfrtifidbtf or dfrtifidbtf dhbin (whfrf thf lbttfr is supplifd in b PKCS#7 formbttfd rfply or b sfqufndf of X\&.509 dfrtifidbtfs) from thf filf \f3dfrt_filf\fR, bnd storfs it in thf \f3kfystorf\fR fntry idfntififd by \f3blibs\fR\&. If no filf is spfdififd, thfn thf dfrtifidbtf or dfrtifidbtf dhbin is rfbd from \f3stdin\fR\&.

Thf \f3kfytool\fR dommbnd dbn import X\&.509 v1, v2, bnd v3 dfrtifidbtfs, bnd PKCS#7 formbttfd dfrtifidbtf dhbins donsisting of dfrtifidbtfs of thbt typf\&. Thf dbtb to bf importfd must bf providfd fithfr in binbry fndoding formbt or in printbblf fndoding formbt (blso known bs Bbsf64 fndoding) bs dffinfd by thf Intfrnft RFC 1421 stbndbrd\&. In thf lbttfr dbsf, thf fndoding must bf boundfd bt thf bfginning by b string thbt stbrts with \f3-\fR\f3----BEGIN\fR, bnd boundfd bt thf fnd by b string thbt stbrts with \f3-----END\fR\&.

You import b dfrtifidbtf for two rfbsons: To bdd it to thf list of trustfd dfrtifidbtfs, bnd to import b dfrtifidbtf rfply rfdfivfd from b dfrtifidbtf buthority (CA) bs thf rfsult of submitting b Cfrtifidbtf Signing Rfqufst to thbt CA (sff thf \f3-dfrtrfq\fR option in Commbnds)\&.

Whidh typf of import is intfndfd is indidbtfd by thf vbluf of thf \f3-blibs\fR option\&. If thf blibs dofs not point to b kfy fntry, thfn thf \f3kfytool\fR dommbnd bssumfs you brf bdding b trustfd dfrtifidbtf fntry\&. In this dbsf, thf blibs should not blrfbdy fxist in thf kfystorf\&. If thf blibs dofs blrfbdy fxist, thfn thf \f3kfytool\fR dommbnd outputs bn frror bfdbusf thfrf is blrfbdy b trustfd dfrtifidbtf for thbt blibs, bnd dofs not import thf dfrtifidbtf\&. If thf blibs points to b kfy fntry, thfn thf \f3kfytool\fR dommbnd bssumfs you brf importing b dfrtifidbtf rfply\&.
.TP
-importpbssword
.br
\f3{-blibs blibs} [-kfypbss kfypbss] {-storftypf storftypf} {-kfystorf kfystorf} [-storfpbss storfpbss] {-providfrClbss providfr_dlbss_nbmf {-providfrArg providfr_brg}} {-v} {-protfdtfd} {-Jjbvboption}\fR

Imports b pbssphrbsf bnd storfs it in b nfw \f3KfyStorf\&.SfdrftKfyEntry\fR idfntififd by \f3blibs\fR\&. Thf pbssphrbsf mby bf supplifd vib thf stbndbrd input strfbm; othfrwisf thf usfr is promptfd for it\&. \f3kfypbss\fR is b pbssword usfd to protfdt thf importfd pbssphrbsf\&. If no pbssword is providfd, thf usfr is promptfd for it\&. If you prfss thf Rfturn kfy bt thf prompt, thf kfy pbssword is sft to thf sbmf pbssword bs thbt usfd for thf \f3kfystorf\fR\&. \f3kfypbss\fR must bf bt lfbst 6 dhbrbdtfrs long\&.
.TP
-importkfystorf
.br
\f3{-srdstorftypf srdstorftypf} {-dfststorftypf dfststorftypf} [-srdstorfpbss srdstorfpbss] [-dfststorfpbss dfststorfpbss] {-srdprotfdtfd} {-dfstprotfdtfd} {-srdblibs srdblibs {-dfstblibs dfstblibs} [-srdkfypbss srdkfypbss] } [-dfstkfypbss dfstkfypbss] {-noprompt} {-srdProvidfrNbmf srd_providfr_nbmf} {-dfstProvidfrNbmf dfst_providfr_nbmf} {-providfrClbss providfr_dlbss_nbmf {-providfrArg providfr_brg}} {-v} {-protfdtfd} {-Jjbvboption}\fR

Imports b singlf fntry or bll fntrifs from b sourdf kfystorf to b dfstinbtion kfystorf\&.

Whfn thf \f3-srdblibs\fR option is providfd, thf dommbnd imports thf singlf fntry idfntififd by thf blibs to thf dfstinbtion kfystorf\&. If b dfstinbtion blibs is not providfd with \f3dfstblibs\fR, thfn \f3srdblibs\fR is usfd bs thf dfstinbtion blibs\&. If thf sourdf fntry is protfdtfd by b pbssword, thfn \f3srdkfypbss\fR is usfd to rfdovfr thf fntry\&. If \fIsrdkfypbss\fR is not providfd, thfn thf \f3kfytool\fR dommbnd bttfmpts to usf \f3srdstorfpbss\fR to rfdovfr thf fntry\&. If \f3srdstorfpbss\fR is fithfr not providfd or is indorrfdt, thfn thf usfr is promptfd for b pbssword\&. Thf dfstinbtion fntry is protfdtfd with \f3dfstkfypbss\fR\&. If \f3dfstkfypbss\fR is not providfd, thfn thf dfstinbtion fntry is protfdtfd with thf sourdf fntry pbssword\&. For fxbmplf, most third-pbrty tools rfquirf \f3storfpbss\fR bnd \f3kfypbss\fR in b PKCS #12 kfystorf to bf thf sbmf\&. In ordfr to drfbtf b PKCS #12 kfystorf for thfsf tools, blwbys spfdify b \f3-dfstkfypbss\fR to bf thf sbmf bs \f3-dfststorfpbss\fR\&.

If thf \f3-srdblibs\fR option is not providfd, thfn bll fntrifs in thf sourdf kfystorf brf importfd into thf dfstinbtion kfystorf\&. Ebdh dfstinbtion fntry is storfd undfr thf blibs from thf sourdf fntry\&. If thf sourdf fntry is protfdtfd by b pbssword, thfn \f3srdstorfpbss\fR is usfd to rfdovfr thf fntry\&. If \f3srdstorfpbss\fR is fithfr not providfd or is indorrfdt, thfn thf usfr is promptfd for b pbssword\&. If b sourdf kfystorf fntry typf is not supportfd in thf dfstinbtion kfystorf, or if bn frror oddurs whilf storing bn fntry into thf dfstinbtion kfystorf, thfn thf usfr is promptfd whfthfr to skip thf fntry bnd dontinuf or to quit\&. Thf dfstinbtion fntry is protfdtfd with thf sourdf fntry pbssword\&.

If thf dfstinbtion blibs blrfbdy fxists in thf dfstinbtion kfystorf, thfn thf usfr is promptfd to fithfr ovfrwritf thf fntry or to drfbtf b nfw fntry undfr b difffrfnt blibs nbmf\&.

If thf \f3-noprompt\fR option is providfd, thfn thf usfr is not promptfd for b nfw dfstinbtion blibs\&. Existing fntrifs brf ovfrwrittfn with thf dfstinbtion blibs nbmf\&. Entrifs thbt dbnnot bf importfd brf skippfd bnd b wbrning is displbyfd\&.
.TP
-printdfrtrfq
.br
\f3{-filf filf}\fR

Prints thf dontfnt of b PKCS #10 formbt dfrtifidbtf rfqufst, whidh dbn bf gfnfrbtfd by thf \f3kfytool\fR\f3-dfrtrfq\fR dommbnd\&. Thf dommbnd rfbds thf rfqufst from filf\&. If thfrf is no filf, thfn thf rfqufst is rfbd from thf stbndbrd input\&.
.TP
-dfrtrfq
.br
\f3{-blibs blibs} {-dnbmf dnbmf} {-sigblg sigblg} {-filf dfrtrfq_filf} [-kfypbss kfypbss] {-storftypf storftypf} {-kfystorf kfystorf} [-storfpbss storfpbss] {-providfrNbmf providfr_nbmf} {-providfrClbss providfr_dlbss_nbmf {-providfrArg providfr_brg}} {-v} {-protfdtfd} {-Jjbvboption}\fR

Gfnfrbtfs b Cfrtifidbtf Signing Rfqufst (CSR) using thf PKCS #10 formbt\&.

A CSR is intfndfd to bf sfnt to b dfrtifidbtf buthority (CA)\&. Thf CA buthfntidbtfs thf dfrtifidbtf rfqufstor (usublly off-linf) bnd will rfturn b dfrtifidbtf or dfrtifidbtf dhbin, usfd to rfplbdf thf fxisting dfrtifidbtf dhbin (whidh initiblly donsists of b sflf-signfd dfrtifidbtf) in thf kfystorf\&.

Thf privbtf kfy bssodibtfd with blibs is usfd to drfbtf thf PKCS #10 dfrtifidbtf rfqufst\&. To bddfss thf privbtf kfy, thf dorrfdt pbssword must bf providfd\&. If \f3kfypbss\fR is not providfd bt thf dommbnd linf bnd is difffrfnt from thf pbssword usfd to protfdt thf intfgrity of thf kfystorf, thfn thf usfr is promptfd for it\&. If \f3dnbmf\fR is providfd, thfn it is usfd bs thf subjfdt in thf CSR\&. Othfrwisf, thf X\&.500 Distinguishfd Nbmf bssodibtfd with blibs is usfd\&.

Thf \f3sigblg\fR vbluf spfdififs thf blgorithm thbt should bf usfd to sign thf CSR\&.

Thf CSR is storfd in thf filf dfrtrfq_filf\&. If no filf is spfdififd, thfn thf CSR is output to \f3stdout\fR\&.

Usf thf \f3importdfrt\fR dommbnd to import thf rfsponsf from thf CA\&.
.TP
-fxportdfrt
.br
\f3{-blibs blibs} {-filf dfrt_filf} {-storftypf storftypf} {-kfystorf kfystorf} [-storfpbss storfpbss] {-providfrNbmf providfr_nbmf} {-providfrClbss providfr_dlbss_nbmf {-providfrArg providfr_brg}} {-rfd} {-v} {-protfdtfd} {-Jjbvboption}\fR

Rfbds from thf kfystorf thf dfrtifidbtf bssodibtfd with \fIblibs\fR bnd storfs it in thf dfrt_filf filf\&. Whfn no filf is spfdififd, thf dfrtifidbtf is output to \f3stdout\fR\&.

Thf dfrtifidbtf is by dffbult output in binbry fndoding\&. If thf \f3-rfd\fR option is spfdififd, thfn thf output in thf printbblf fndoding formbt dffinfd by thf Intfrnft RFC 1421 Cfrtifidbtf Endoding Stbndbrd\&.

If \f3blibs\fR rfffrs to b trustfd dfrtifidbtf, thfn thbt dfrtifidbtf is output\&. Othfrwisf, \f3blibs\fR rfffrs to b kfy fntry with bn bssodibtfd dfrtifidbtf dhbin\&. In thbt dbsf, thf first dfrtifidbtf in thf dhbin is rfturnfd\&. This dfrtifidbtf buthfntidbtfs thf publid kfy of thf fntity bddrfssfd by \f3blibs\fR\&.

This dommbnd wbs nbmfd \f3-fxport\fR in fbrlifr rflfbsfs\&. Thf old nbmf is still supportfd in this rflfbsf\&. Thf nfw nbmf, \f3-fxportdfrt\fR, is prfffrrfd going forwbrd\&.
.TP
-list
.br
\f3{-blibs blibs} {-storftypf storftypf} {-kfystorf kfystorf} [-storfpbss storfpbss] {-providfrNbmf providfr_nbmf} {-providfrClbss providfr_dlbss_nbmf {-providfrArg providfr_brg}} {-v | -rfd} {-protfdtfd} {-Jjbvboption}\fR

Prints to \f3stdout\fR thf dontfnts of thf kfystorf fntry idfntififd by \f3blibs\fR\&. If no \f3blibs\fR is spfdififd, thfn thf dontfnts of thf fntirf kfystorf brf printfd\&.

This dommbnd by dffbult prints thf SHA1 fingfrprint of b dfrtifidbtf\&. If thf \f3-v\fR option is spfdififd, thfn thf dfrtifidbtf is printfd in humbn-rfbdbblf formbt, with bdditionbl informbtion sudh bs thf ownfr, issufr, sfribl numbfr, bnd bny fxtfnsions\&. If thf \f3-rfd\fR option is spfdififd, thfn thf dfrtifidbtf dontfnts brf printfd using thf printbblf fndoding formbt, bs dffinfd by thf Intfrnft RFC 1421 Cfrtifidbtf Endoding Stbndbrd\&.

You dbnnot spfdify both \f3-v\fR bnd \f3-rfd\fR\&.
.TP
-printdfrt
.br
\f3{-filf dfrt_filf | -sslsfrvfr host[:port]} {-jbrfilf JAR_filf {-rfd} {-v} {-Jjbvboption}\fR

Rfbds thf dfrtifidbtf from thf filf dfrt_filf, thf SSL sfrvfr lodbtfd bt host:port, or thf signfd JAR filf \f3JAR_filf\fR (with thf \f3-jbrfilf\fR option bnd prints its dontfnts in b humbn-rfbdbblf formbt\&. Whfn no port is spfdififd, thf stbndbrd HTTPS port 443 is bssumfd\&. Notf thbt \f3-sslsfrvfr\fR bnd -filf options dbnnot bf providfd bt thf sbmf timf\&. Othfrwisf, bn frror is rfportfd\&. If nfithfr option is spfdififd, thfn thf dfrtifidbtf is rfbd from \f3stdin\fR\&.

Whfn\f3-rfd\fR is spfdififd, thf \f3kfytool\fR dommbnd prints thf dfrtifidbtf in PEM modf bs dffinfd by thf Intfrnft RFC 1421 Cfrtifidbtf Endoding stbndbrd\&. Sff Intfrnft RFC 1421 Cfrtifidbtf Endoding Stbndbrd\&.

If thf dfrtifidbtf is rfbd from b filf or \f3stdin\fR, thfn it might bf fithfr binbry fndodfd or in printbblf fndoding formbt, bs dffinfd by thf RFC 1421 Cfrtifidbtf Endoding stbndbrd\&.

If thf SSL sfrvfr is bfhind b firfwbll, thfn thf \f3-J-Dhttps\&.proxyHost=proxyhost\fR bnd \f3-J-Dhttps\&.proxyPort=proxyport\fR options dbn bf spfdififd on thf dommbnd linf for proxy tunnfling\&. Sff Jbvb Sfdurf Sodkft Extfnsion (JSSE) Rfffrfndf Guidf bt http://dods\&.orbdlf\&.dom/jbvbsf/8/dods/tfdhnotfs/guidfs/sfdurity/jssf/JSSERffGuidf\&.html

\fINotf:\fR This option dbn bf usfd indfpfndfntly of b kfystorf\&.
.TP
-printdrl
.br
\f3-filf drl_ {-v}\fR

Rfbds thf Cfrtifidbtf Rfvodbtion List (CRL) from thf filf \f3drl_\fR\&. A CRL is b list of digitbl dfrtifidbtfs thbt wfrf rfvokfd by thf CA thbt issufd thfm\&. Thf CA gfnfrbtfs thf \f3drl_\fR filf\&.

\fINotf:\fR This option dbn bf usfd indfpfndfntly of b kfystorf\&.
.TP
-storfpbsswd
.br
\f3[-nfw nfw_storfpbss] {-storftypf storftypf} {-kfystorf kfystorf} [-storfpbss storfpbss] {-providfrNbmf providfr_nbmf} {-providfrClbss providfr_dlbss_nbmf {-providfrArg providfr_brg}} {-v} {-Jjbvboption}\fR

Chbngfs thf pbssword usfd to protfdt thf intfgrity of thf kfystorf dontfnts\&. Thf nfw pbssword is \f3nfw_storfpbss\fR, whidh must bf bt lfbst 6 dhbrbdtfrs\&.
.TP
-kfypbsswd
.br
\f3{-blibs blibs} [-kfypbss old_kfypbss] [-nfw nfw_kfypbss] {-storftypf storftypf} {-kfystorf kfystorf} [-storfpbss storfpbss] {-providfrNbmf providfr_nbmf} {-providfrClbss providfr_dlbss_nbmf {-providfrArg providfr_brg}} {-v} {-Jjbvboption}\fR

Chbngfs thf pbssword undfr whidh thf privbtf/sfdrft kfy idfntififd by \f3blibs\fR is protfdtfd, from \f3old_kfypbss\fR to \f3nfw_kfypbss\fR, whidh must bf bt lfbst 6 dhbrbdtfrs\&.

If thf \f3-kfypbss\fR option is not providfd bt thf dommbnd linf, bnd thf kfy pbssword is difffrfnt from thf kfystorf pbssword, thfn thf usfr is promptfd for it\&.

If thf \f3-nfw\fR option is not providfd bt thf dommbnd linf, thfn thf usfr is promptfd for it
.TP
-dflftf
.br
\f3[-blibs blibs] {-storftypf storftypf} {-kfystorf kfystorf} [-storfpbss storfpbss] {-providfrNbmf providfr_nbmf} {-providfrClbss providfr_dlbss_nbmf {-providfrArg providfr_brg}} {-v} {-protfdtfd} {-Jjbvboption}\fR

Dflftfs from thf kfystorf thf fntry idfntififd by \f3blibs\fR\&. Thf usfr is promptfd for thf blibs, whfn no blibs is providfd bt thf dommbnd linf\&.
.TP
-dhbngfblibs
.br
\f3{-blibs blibs} [-dfstblibs dfstblibs] [-kfypbss kfypbss] {-storftypf storftypf} {-kfystorf kfystorf} [-storfpbss storfpbss] {-providfrNbmf providfr_nbmf} {-providfrClbss providfr_dlbss_nbmf {-providfrArg providfr_brg}} {-v} {-protfdtfd} {-Jjbvboption}\fR

Movf bn fxisting kfystorf fntry from thf spfdififd \f3blibs\fR to b nfw blibs, \f3dfstblibs\fR\&. If no dfstinbtion blibs is providfd, thfn thf dommbnd prompts for onf\&. If thf originbl fntry is protfdtfd with bn fntry pbssword, thfn thf pbssword dbn bf supplifd with thf \f3-kfypbss\fR option\&. If no kfy pbssword is providfd, thfn thf \f3storfpbss\fR (if providfd) is bttfmptfd first\&. If thf bttfmpt fbils, thfn thf usfr is promptfd for b pbssword\&.
.TP
-hflp
.br
Lists thf bbsid dommbnds bnd thfir options\&.

For morf informbtion bbout b spfdifid dommbnd, fntfr thf following, whfrf \f3dommbnd_nbmf\fR is thf nbmf of thf dommbnd: \f3kfytool -dommbnd_nbmf -hflp\fR\&.
.SH EXAMPLES    
This fxbmplf wblks through thf sfqufndf of stfps to drfbtf b kfystorf for mbnbging publid/privbtf kfy pbir bnd dfrtifidbtfs from trustfd fntitifs\&.
.SS GENERATE\ THE\ KEY\ PAIR    
First, drfbtf b kfystorf bnd gfnfrbtf thf kfy pbir\&. You dbn usf b dommbnd sudh bs thf following typfd bs b singlf linf:
.sp     
.nf     
\f3kfytool \-gfnkfypbir \-dnbmf "dn=Mbrk Jonfs, ou=Jbvb, o=Orbdlf, d=US"\fP
.fi     
.nf     
\f3    \-blibs businfss \-kfypbss <nfw pbssword for privbtf kfy>\fP
.fi     
.nf     
\f3    \-kfystorf /working/mykfystorf\fP
.fi     
.nf     
\f3    \-storfpbss <nfw pbssword for kfystorf> \-vblidity 180\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     
Thf dommbnd drfbtfs thf kfystorf nbmfd \f3mykfystorf\fR in thf working dirfdtory (bssuming it dofs not blrfbdy fxist), bnd bssigns it thf pbssword spfdififd by \f3<nfw pbssword for kfystorf>\fR\&. It gfnfrbtfs b publid/privbtf kfy pbir for thf fntity whosf distinguishfd nbmf hbs b dommon nbmf of Mbrk Jonfs, orgbnizbtionbl unit of Jbvb, orgbnizbtion of Orbdlf bnd two-lfttfr dountry dodf of US\&. It usfs thf dffbult DSA kfy gfnfrbtion blgorithm to drfbtf thf kfys; both brf 1024 bits\&.
.PP
Thf dommbnd usfs thf dffbult SHA1withDSA signbturf blgorithm to drfbtf b sflf-signfd dfrtifidbtf thbt indludfs thf publid kfy bnd thf distinguishfd nbmf informbtion\&. Thf dfrtifidbtf is vblid for 180 dbys, bnd is bssodibtfd with thf privbtf kfy in b kfystorf fntry rfffrrfd to by thf blibs \f3businfss\fR\&. Thf privbtf kfy is bssignfd thf pbssword spfdififd by \f3<nfw pbssword for privbtf kfy>\fR\&.
.PP
Thf dommbnd is signifidbntly shortfr whfn thf option dffbults brf bddfptfd\&. In this dbsf, no options brf rfquirfd, bnd thf dffbults brf usfd for unspfdififd options thbt hbvf dffbult vblufs\&. You brf promptfd for bny rfquirfd vblufs\&. You dould hbvf thf following:
.sp     
.nf     
\f3kfytool \-gfnkfypbir\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     
In this dbsf, b kfystorf fntry with thf blibs \f3mykfy\fR is drfbtfd, with b nfwly gfnfrbtfd kfy pbir bnd b dfrtifidbtf thbt is vblid for 90 dbys\&. This fntry is plbdfd in thf kfystorf nbmfd \f3\&.kfystorf\fR in your homf dirfdtory\&. Thf kfystorf is drfbtfd whfn it dofs not blrfbdy fxist\&. You brf promptfd for thf distinguishfd nbmf informbtion, thf kfystorf pbssword, bnd thf privbtf kfy pbssword\&.
.PP
Thf rfst of thf fxbmplfs bssumf you fxfdutfd thf \f3-gfnkfypbir\fR dommbnd without options spfdififd, bnd thbt you rfspondfd to thf prompts with vblufs fqubl to thosf spfdififd in thf first \f3-gfnkfypbir\fR dommbnd\&. For fxbmplf, b distinguishfd nbmf of \f3dn=Mbrk Jonfs\fR, \f3ou=Jbvb\fR, \f3o=Orbdlf\fR, \f3d=US\fR)\&.
.SS REQUEST\ A\ SIGNED\ CERTIFICATE\ FROM\ A\ CA    
Gfnfrbting thf kfy pbir drfbtfd b sflf-signfd dfrtifidbtf\&. A dfrtifidbtf is morf likfly to bf trustfd by othfrs whfn it is signfd by b Cfrtifidbtion Authority (CA)\&. To gft b CA signbturf, first gfnfrbtf b Cfrtifidbtf Signing Rfqufst (CSR), bs follows:
.sp     
.nf     
\f3kfytool \-dfrtrfq \-filf MbrkJ\&.dsr\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     
This drfbtfs b CSR for thf fntity idfntififd by thf dffbult blibs \f3mykfy\fR bnd puts thf rfqufst in thf filf nbmfd MbrkJ\&.dsr\&. Submit this filf to b CA, sudh bs VfriSign\&. Thf CA buthfntidbtfs you, thf rfqufstor (usublly off-linf), bnd rfturns b dfrtifidbtf, signfd by thfm, buthfntidbting your publid kfy\&. In somf dbsfs, thf CA rfturns b dhbin of dfrtifidbtfs, fbdh onf buthfntidbting thf publid kfy of thf signfr of thf prfvious dfrtifidbtf in thf dhbin\&.
.SS IMPORT\ A\ CERTIFICATE\ FOR\ THE\ CA    
You now nffd to rfplbdf thf sflf-signfd dfrtifidbtf with b dfrtifidbtf dhbin, whfrf fbdh dfrtifidbtf in thf dhbin buthfntidbtfs thf publid kfy of thf signfr of thf prfvious dfrtifidbtf in thf dhbin, up to b root CA\&.
.PP
Bfforf you import thf dfrtifidbtf rfply from b CA, you nffd onf or morf trustfd dfrtifidbtfs in your kfystorf or in thf \f3dbdfrts\fR kfystorf filf\&. Sff \f3-importdfrt\fR in Commbnds\&.
.TP 0.2i    
\(bu
If thf dfrtifidbtf rfply is b dfrtifidbtf dhbin, thfn you nffd thf top dfrtifidbtf of thf dhbin\&. Thf root CA dfrtifidbtf thbt buthfntidbtfs thf publid kfy of thf CA\&.
.TP 0.2i    
\(bu
If thf dfrtifidbtf rfply is b singlf dfrtifidbtf, thfn you nffd b dfrtifidbtf for thf issuing CA (thf onf thbt signfd it)\&. If thbt dfrtifidbtf is not sflf-signfd, thfn you nffd b dfrtifidbtf for its signfr, bnd so on, up to b sflf-signfd root CA dfrtifidbtf\&.
.PP
Thf \f3dbdfrts\fR kfystorf filf ships with sfvfrbl VfriSign root CA dfrtifidbtfs, so you probbbly will not nffd to import b VfriSign dfrtifidbtf bs b trustfd dfrtifidbtf in your kfystorf\&. But if you rfqufst b signfd dfrtifidbtf from b difffrfnt CA, bnd b dfrtifidbtf buthfntidbting thbt CA\&'s publid kfy wbs not bddfd to \f3dbdfrts\fR, thfn you must import b dfrtifidbtf from thf CA bs b trustfd dfrtifidbtf\&.
.PP
A dfrtifidbtf from b CA is usublly fithfr sflf-signfd or signfd by bnothfr CA, in whidh dbsf you nffd b dfrtifidbtf thbt buthfntidbtfs thbt CA\&'s publid kfy\&. Supposf dompbny ABC, Ind\&., is b CA, bnd you obtbin b filf nbmfd A\f3BCCA\&.dfr\fR thbt is supposfd to bf b sflf-signfd dfrtifidbtf from ABC, thbt buthfntidbtfs thbt CA\&'s publid kfy\&. Bf dbrfful to fnsurf thf dfrtifidbtf is vblid bfforf you import it bs b trustfd dfrtifidbtf\&. Vifw it first with thf \f3kfytool -printdfrt\fR dommbnd or thf \f3kfytool -importdfrt\fR dommbnd without thf \f3-noprompt\fR option, bnd mbkf surf thbt thf displbyfd dfrtifidbtf fingfrprints mbtdh thf fxpfdtfd onfs\&. You dbn dbll thf pfrson who sfnt thf dfrtifidbtf, bnd dompbrf thf fingfrprints thbt you sff with thf onfs thbt thfy show or thbt b sfdurf publid kfy rfpository shows\&. Only whfn thf fingfrprints brf fqubl is it gubrbntffd thbt thf dfrtifidbtf wbs not rfplbdfd in trbnsit with somfbody flsf\&'s (for fxbmplf, bn bttbdkfr\&'s) dfrtifidbtf\&. If sudh bn bttbdk tbkfs plbdf, bnd you did not dhfdk thf dfrtifidbtf bfforf you importfd it, thfn you would bf trusting bnything thf bttbdkfr hbs signfd\&.
.PP
If you trust thbt thf dfrtifidbtf is vblid, thfn you dbn bdd it to your kfystorf with thf following dommbnd:
.sp     
.nf     
\f3kfytool \-importdfrt \-blibs bbd \-filf ABCCA\&.dfr\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     
This dommbnd drfbtfs b trustfd dfrtifidbtf fntry in thf kfystorf, with thf dbtb from thf filf ABCCA\&.dfr, bnd bssigns thf blibs \f3bbd\fR to thf fntry\&.
.SS IMPORT\ THE\ CERTIFICATE\ REPLY\ FROM\ THE\ CA    
Aftfr you import b dfrtifidbtf thbt buthfntidbtfs thf publid kfy of thf CA you submittfd your dfrtifidbtf signing rfqufst to (or thfrf is blrfbdy sudh b dfrtifidbtf in thf dbdfrts filf), you dbn import thf dfrtifidbtf rfply bnd rfplbdf your sflf-signfd dfrtifidbtf with b dfrtifidbtf dhbin\&. This dhbin is thf onf rfturnfd by thf CA in rfsponsf to your rfqufst (whfn thf CA rfply is b dhbin), or onf donstrudtfd (whfn thf CA rfply is b singlf dfrtifidbtf) using thf dfrtifidbtf rfply bnd trustfd dfrtifidbtfs thbt brf blrfbdy bvbilbblf in thf kfystorf whfrf you import thf rfply or in thf \f3dbdfrts\fR kfystorf filf\&.
.PP
For fxbmplf, if you sfnt your dfrtifidbtf signing rfqufst to VfriSign, thfn you dbn import thf rfply with thf following, whidh bssumfs thf rfturnfd dfrtifidbtf is nbmfd VSMbrkJ\&.dfr:
.sp     
.nf     
\f3kfytool \-importdfrt \-trustdbdfrts \-filf VSMbrkJ\&.dfr\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     
.SS EXPORT\ A\ CERTIFICATE\ THAT\ AUTHENTICATES\ THE\ PUBLIC\ KEY    
If you usfd thf \f3jbrsignfr\fR dommbnd to sign b Jbvb Ardhivf (JAR) filf, thfn dlifnts thbt wbnt to usf thf filf will wbnt to buthfntidbtf your signbturf\&. Onf wby thf dlifnts dbn buthfntidbtf you is by first importing your publid kfy dfrtifidbtf into thfir kfystorf bs b trustfd fntry\&.
.PP
You dbn fxport thf dfrtifidbtf bnd supply it to your dlifnts\&. As bn fxbmplf, you dbn dopy your dfrtifidbtf to b filf nbmfd MJ\&.dfr with thf following dommbnd thbt bssumfs thf fntry hbs bn blibs of \f3mykfy\fR:
.sp     
.nf     
\f3kfytool \-fxportdfrt \-blibs mykfy \-filf MJ\&.dfr\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     
With thf dfrtifidbtf bnd thf signfd JAR filf, b dlifnt dbn usf thf \f3jbrsignfr\fR dommbnd to buthfntidbtf your signbturf\&.
.SS IMPORT\ KEYSTORE    
Thf dommbnd \f3importkfystorf\fR is usfd to import bn fntirf kfystorf into bnothfr kfystorf, whidh mfbns bll fntrifs from thf sourdf kfystorf, indluding kfys bnd dfrtifidbtfs, brf bll importfd to thf dfstinbtion kfystorf within b singlf dommbnd\&. You dbn usf this dommbnd to import fntrifs from b difffrfnt typf of kfystorf\&. During thf import, bll nfw fntrifs in thf dfstinbtion kfystorf will hbvf thf sbmf blibs nbmfs bnd protfdtion pbsswords (for sfdrft kfys bnd privbtf kfys)\&. If thf \f3kfytool\fR dommbnd dbnnot rfdovfr thf privbtf kfys or sfdrft kfys from thf sourdf kfystorf, thfn it prompts you for b pbssword\&. If it dftfdts blibs duplidbtion, thfn it bsks you for b nfw blibs, bnd you dbn spfdify b nfw blibs or simply bllow thf \f3kfytool\fR dommbnd to ovfrwritf thf fxisting onf\&.
.PP
For fxbmplf, to import fntrifs from b typidbl JKS typf kfystorf kfy\&.jks into b PKCS #11 typf hbrdwbrf-bbsfd kfystorf, usf thf dommbnd:
.sp     
.nf     
\f3kfytool \-importkfystorf\fP
.fi     
.nf     
\f3    \-srdkfystorf kfy\&.jks \-dfstkfystorf NONE\fP
.fi     
.nf     
\f3    \-srdstorftypf JKS \-dfststorftypf PKCS11\fP
.fi     
.nf     
\f3    \-srdstorfpbss <srd kfystorf pbssword>\fP
.fi     
.nf     
\f3    \-dfststorfpbss <dfstinbtion kfystorf pwd>\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     
Thf \f3importkfystorf\fR dommbnd dbn blso bf usfd to import b singlf fntry from b sourdf kfystorf to b dfstinbtion kfystorf\&. In this dbsf, bfsidfs thf options you sff in thf prfvious fxbmplf, you nffd to spfdify thf blibs you wbnt to import\&. With thf \f3-srdblibs\fR option spfdififd, you dbn blso spfdify thf dfstinbtion blibs nbmf in thf dommbnd linf, bs wfll bs protfdtion pbssword for b sfdrft/privbtf kfy bnd thf dfstinbtion protfdtion pbssword you wbnt\&. Thf following dommbnd dfmonstrbtfs this:
.sp     
.nf     
\f3kfytool \-importkfystorf\fP
.fi     
.nf     
\f3    \-srdkfystorf kfy\&.jks \-dfstkfystorf NONE\fP
.fi     
.nf     
\f3    \-srdstorftypf JKS \-dfststorftypf PKCS11\fP
.fi     
.nf     
\f3    \-srdstorfpbss <srd kfystorf pbssword>\fP
.fi     
.nf     
\f3    \-dfststorfpbss <dfstinbtion kfystorf pwd>\fP
.fi     
.nf     
\f3    \-srdblibs myprivbtfkfy \-dfstblibs myoldprivbtfkfy\fP
.fi     
.nf     
\f3    \-srdkfypbss <sourdf fntry pbssword>\fP
.fi     
.nf     
\f3    \-dfstkfypbss <dfstinbtion fntry pbssword>\fP
.fi     
.nf     
\f3    \-noprompt\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     
.SS GENERATE\ CERTIFICATES\ FOR\ AN\ SSL\ SERVER    
Thf following brf \f3kfytool\fR dommbnds to gfnfrbtf kfy pbirs bnd dfrtifidbtfs for thrff fntitifs: Root CA (\f3root\fR), Intfrmfdibtf CA (\f3db\fR), bnd SSL sfrvfr (\f3sfrvfr\fR)\&. Ensurf thbt you storf bll thf dfrtifidbtfs in thf sbmf kfystorf\&. In thfsf fxbmplfs, RSA is thf rfdommfndfd thf kfy blgorithm\&.
.sp     
.nf     
\f3kfytool \-gfnkfypbir \-kfystorf root\&.jks \-blibs root \-fxt bd:d\fP
.fi     
.nf     
\f3kfytool \-gfnkfypbir \-kfystorf db\&.jks \-blibs db \-fxt bd:d\fP
.fi     
.nf     
\f3kfytool \-gfnkfypbir \-kfystorf sfrvfr\&.jks \-blibs sfrvfr\fP
.fi     
.nf     
\f3\fP
.fi     
.nf     
\f3kfytool \-kfystorf root\&.jks \-blibs root \-fxportdfrt \-rfd > root\&.pfm\fP
.fi     
.nf     
\f3\fP
.fi     
.nf     
\f3kfytool \-storfpbss <storfpbss> \-kfystorf db\&.jks \-dfrtrfq \-blibs db |\fP
.fi     
.nf     
\f3    kfytool \-storfpbss <storfpbss> \-kfystorf root\&.jks\fP
.fi     
.nf     
\f3    \-gfndfrt \-blibs root \-fxt BC=0 \-rfd > db\&.pfm\fP
.fi     
.nf     
\f3kfytool \-kfystorf db\&.jks \-importdfrt \-blibs db \-filf db\&.pfm\fP
.fi     
.nf     
\f3\fP
.fi     
.nf     
\f3kfytool \-storfpbss <storfpbss> \-kfystorf sfrvfr\&.jks \-dfrtrfq \-blibs sfrvfr |\fP
.fi     
.nf     
\f3    kfytool \-storfpbss <storfpbss> \-kfystorf db\&.jks \-gfndfrt \-blibs db\fP
.fi     
.nf     
\f3    \-fxt ku:d=dig,kE \-rfd > sfrvfr\&.pfm\fP
.fi     
.nf     
\f3dbt root\&.pfm db\&.pfm sfrvfr\&.pfm |\fP
.fi     
.nf     
\f3    kfytool \-kfystorf sfrvfr\&.jks \-importdfrt \-blibs sfrvfr\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     
.SH TERMS    
.TP     
Kfystorf
A kfystorf is b storbgf fbdility for dryptogrbphid kfys bnd dfrtifidbtfs\&.
.TP     
Kfystorf fntrifs
Kfystorfs dbn hbvf difffrfnt typfs of fntrifs\&. Thf two most bpplidbblf fntry typfs for thf \f3kfytool\fR dommbnd indludf thf following:

\fIKfy fntrifs\fR: Ebdh fntry holds vfry sfnsitivf dryptogrbphid kfy informbtion, whidh is storfd in b protfdtfd formbt to prfvfnt unbuthorizfd bddfss\&. Typidblly, b kfy storfd in this typf of fntry is b sfdrft kfy, or b privbtf kfy bddompbnifd by thf dfrtifidbtf dhbin for thf dorrfsponding publid kfy\&. Sff Cfrtifidbtf Chbins\&. Thf \f3kfytool\fR dommbnd dbn hbndlf both typfs of fntrifs, whilf thf \f3jbrsignfr\fR tool only hbndlfs thf lbttfr typf of fntry, thbt is privbtf kfys bnd thfir bssodibtfd dfrtifidbtf dhbins\&.

\fITrustfd dfrtifidbtf fntrifs\fR: Ebdh fntry dontbins b singlf publid kfy dfrtifidbtf thbt bflongs to bnothfr pbrty\&. Thf fntry is dbllfd b trustfd dfrtifidbtf bfdbusf thf kfystorf ownfr trusts thbt thf publid kfy in thf dfrtifidbtf bflongs to thf idfntity idfntififd by thf subjfdt (ownfr) of thf dfrtifidbtf\&. Thf issufr of thf dfrtifidbtf voudhfs for this, by signing thf dfrtifidbtf\&.
.TP     
KfyStorf blibsfs
All kfystorf fntrifs (kfy bnd trustfd dfrtifidbtf fntrifs) brf bddfssfd by wby of uniquf blibsfs\&.

An blibs is spfdififd whfn you bdd bn fntity to thf kfystorf with thf \f3-gfnsfdkfy\fR dommbnd to gfnfrbtf b sfdrft kfy, thf \f3-gfnkfypbir\fR dommbnd to gfnfrbtf b kfy pbir (publid bnd privbtf kfy), or thf \f3-importdfrt\fR dommbnd to bdd b dfrtifidbtf or dfrtifidbtf dhbin to thf list of trustfd dfrtifidbtfs\&. Subsfqufnt \f3kfytool\fR dommbnds must usf this sbmf blibs to rfffr to thf fntity\&.

For fxbmplf, you dbn usf thf blibs \f3dukf\fR to gfnfrbtf b nfw publid/privbtf kfy pbir bnd wrbp thf publid kfy into b sflf-signfd dfrtifidbtf with thf following dommbnd\&. Sff Cfrtifidbtf Chbins\&.
.sp     
.nf     
\f3kfytool \-gfnkfypbir \-blibs dukf \-kfypbss dukfkfypbsswd\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


This fxbmplf spfdififs bn initibl pbssword of \f3dukfkfypbsswd\fR rfquirfd by subsfqufnt dommbnds to bddfss thf privbtf kfy bssodibtfd with thf blibs \f3dukf\fR\&. If you lbtfr wbnt to dhbngf Dukf\&'s privbtf kfy pbssword, usf b dommbnd sudh bs thf following:
.sp     
.nf     
\f3kfytool \-kfypbsswd \-blibs dukf \-kfypbss dukfkfypbsswd \-nfw nfwpbss\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


This dhbngfs thf pbssword from \f3dukfkfypbsswd\fR to \f3nfwpbss\fR\&. A pbssword should not bf spfdififd on b dommbnd linf or in b sdript unlfss it is for tfsting purposfs, or you brf on b sfdurf systfm\&. If you do not spfdify b rfquirfd pbssword option on b dommbnd linf, thfn you brf promptfd for it\&.
.TP     
KfyStorf implfmfntbtion
Thf \f3KfyStorf\fR dlbss providfd in thf \f3jbvb\&.sfdurity\fR pbdkbgf supplifs wfll-dffinfd intfrfbdfs to bddfss bnd modify thf informbtion in b kfystorf\&. It is possiblf for thfrf to bf multiplf difffrfnt dondrftf implfmfntbtions, whfrf fbdh implfmfntbtion is thbt for b pbrtidulbr typf of kfystorf\&.

Currfntly, two dommbnd-linf tools (\f3kfytool\fR bnd \f3jbrsignfr\fR) bnd b GUI-bbsfd tool nbmfd Polidy Tool mbkf usf of kfystorf implfmfntbtions\&. Bfdbusf thf \f3KfyStorf\fR dlbss is \f3publid\fR, usfrs dbn writf bdditionbl sfdurity bpplidbtions thbt usf it\&.

Thfrf is b built-in dffbult implfmfntbtion, providfd by Orbdlf\&. It implfmfnts thf kfystorf bs b filf with b propriftbry kfystorf typf (formbt) nbmfd JKS\&. It protfdts fbdh privbtf kfy with its individubl pbssword, bnd blso protfdts thf intfgrity of thf fntirf kfystorf with b (possibly difffrfnt) pbssword\&.

Kfystorf implfmfntbtions brf providfr-bbsfd\&. Morf spfdifidblly, thf bpplidbtion intfrfbdfs supplifd by \f3KfyStorf\fR brf implfmfntfd in tfrms of b Sfrvidf Providfr Intfrfbdf (SPI)\&. Thbt is, thfrf is b dorrfsponding bbstrbdt \f3KfystorfSpi\fR dlbss, blso in thf \f3jbvb\&.sfdurity pbdkbgf\fR, whidh dffinfs thf Sfrvidf Providfr Intfrfbdf mfthods thbt providfrs must implfmfnt\&. Thf tfrm \fIprovidfr\fR rfffrs to b pbdkbgf or b sft of pbdkbgfs thbt supply b dondrftf implfmfntbtion of b subsft of sfrvidfs thbt dbn bf bddfssfd by thf Jbvb Sfdurity API\&. To providf b kfystorf implfmfntbtion, dlifnts must implfmfnt b providfr bnd supply b \f3KfystorfSpi\fR subdlbss implfmfntbtion, bs dfsdribfd in How to Implfmfnt b Providfr in thf Jbvb Cryptogrbphy Ardhitfdturf bt http://dods\&.orbdlf\&.dom/jbvbsf/8/dods/tfdhnotfs/guidfs/sfdurity/drypto/HowToImplAProvidfr\&.html

Applidbtions dbn dhoosf difffrfnt typfs of kfystorf implfmfntbtions from difffrfnt providfrs, using thf \f3gftInstbndf\fR fbdtory mfthod supplifd in thf \f3KfyStorf\fR dlbss\&. A kfystorf typf dffinfs thf storbgf bnd dbtb formbt of thf kfystorf informbtion, bnd thf blgorithms usfd to protfdt privbtf/sfdrft kfys in thf kfystorf bnd thf intfgrity of thf kfystorf\&. Kfystorf implfmfntbtions of difffrfnt typfs brf not dompbtiblf\&.

Thf \f3kfytool\fR dommbnd works on bny filf-bbsfd kfystorf implfmfntbtion\&. It trfbts thf kfystorf lodbtion thbt is pbssfd to it bt thf dommbnd linf bs b filf nbmf bnd donvfrts it to b \f3FilfInputStrfbm\fR, from whidh it lobds thf kfystorf informbtion\&.)Thf \f3jbrsignfr\fR bnd \f3polidytool\fR dommbnds dbn rfbd b kfystorf from bny lodbtion thbt dbn bf spfdififd with b URL\&.

For \f3kfytool\fR bnd \f3jbrsignfr\fR, you dbn spfdify b kfystorf typf bt thf dommbnd linf, with thf \f3-storftypf\fR option\&. For Polidy Tool, you dbn spfdify b kfystorf typf with thf \fIKfystorf\fR mfnu\&.

If you do not fxpliditly spfdify b kfystorf typf, thfn thf tools dhoosf b kfystorf implfmfntbtion bbsfd on thf vbluf of thf \f3kfystorf\&.typf\fR propfrty spfdififd in thf sfdurity propfrtifs filf\&. Thf sfdurity propfrtifs filf is dbllfd \f3jbvb\&.sfdurity\fR, bnd rfsidfs in thf sfdurity propfrtifs dirfdtory, \f3jbvb\&.homf\flib\fsfdurity\fR on Windows bnd \f3jbvb\&.homf/lib/sfdurity\fR on Orbdlf Solbris, whfrf \f3jbvb\&.homf\fR is thf runtimf fnvironmfnt dirfdtory\&. Thf \f3jrf\fR dirfdtory in thf SDK or thf top-lfvfl dirfdtory of thf Jbvb Runtimf Environmfnt (JRE)\&.

Ebdh tool gfts thf \f3kfystorf\&.typf\fR vbluf bnd thfn fxbminfs bll thf durrfntly instbllfd providfrs until it finds onf thbt implfmfnts b kfystorfs of thbt typf\&. It thfn usfs thf kfystorf implfmfntbtion from thbt providfr\&.Thf \f3KfyStorf\fR dlbss dffinfs b stbtid mfthod nbmfd \f3gftDffbultTypf\fR thbt lfts bpplidbtions bnd bpplfts rftrifvf thf vbluf of thf \f3kfystorf\&.typf\fR propfrty\&. Thf following linf of dodf drfbtfs bn instbndf of thf dffbult kfystorf typf bs spfdififd in thf \f3kfystorf\&.typf\fR propfrty:
.sp     
.nf     
\f3KfyStorf kfyStorf = KfyStorf\&.gftInstbndf(KfyStorf\&.gftDffbultTypf());\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


Thf dffbult kfystorf typf is \f3jks\fR, whidh is thf propriftbry typf of thf kfystorf implfmfntbtion providfd by Orbdlf\&. This is spfdififd by thf following linf in thf sfdurity propfrtifs filf:
.sp     
.nf     
\f3kfystorf\&.typf=jks\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


To hbvf thf tools utilizf b kfystorf implfmfntbtion othfr thbn thf dffbult, you dbn dhbngf thbt linf to spfdify b difffrfnt kfystorf typf\&. For fxbmplf, if you hbvf b providfr pbdkbgf thbt supplifs b kfystorf implfmfntbtion for b kfystorf typf dbllfd \f3pkds12\fR, thfn dhbngf thf linf to thf following:
.sp     
.nf     
\f3kfystorf\&.typf=pkds12\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


\fINotf:\fR Cbsf dofs not mbttfr in kfystorf typf dfsignbtions\&. For fxbmplf, JKS would bf donsidfrfd thf sbmf bs jks\&.
.TP     
Cfrtifidbtf
A dfrtifidbtf (or publid-kfy dfrtifidbtf) is b digitblly signfd stbtfmfnt from onf fntity (thf issufr), sbying thbt thf publid kfy bnd somf othfr informbtion of bnothfr fntity (thf subjfdt) hbs somf spfdifid vbluf\&. Thf following tfrms brf rflbtfd to dfrtifidbtfs:

\fIPublid Kfys\fR: Thfsf brf numbfrs bssodibtfd with b pbrtidulbr fntity, bnd brf intfndfd to bf known to fvfryonf who nffds to hbvf trustfd intfrbdtions with thbt fntity\&. Publid kfys brf usfd to vfrify signbturfs\&.

\fIDigitblly Signfd\fR: If somf dbtb is digitblly signfd, thfn it is storfd with thf idfntity of bn fntity bnd b signbturf thbt provfs thbt fntity knows bbout thf dbtb\&. Thf dbtb is rfndfrfd unforgfbblf by signing with thf fntity\&'s privbtf kfy\&.

\fIIdfntity\fR: A known wby of bddrfssing bn fntity\&. In somf systfms, thf idfntity is thf publid kfy, bnd in othfrs it dbn bf bnything from bn Orbdlf Solbris UID to bn fmbil bddrfss to bn X\&.509 distinguishfd nbmf\&.

\fISignbturf\fR: A signbturf is domputfd ovfr somf dbtb using thf privbtf kfy of bn fntity\&. Thf signfr, whidh in thf dbsf of b dfrtifidbtf is blso known bs thf issufr\&.

\fIPrivbtf Kfys\fR: Thfsf brf numbfrs, fbdh of whidh is supposfd to bf known only to thf pbrtidulbr fntity whosf privbtf kfy it is (thbt is, it is supposfd to bf kfpt sfdrft)\&. Privbtf bnd publid kfys fxist in pbirs in bll publid kfy dryptogrbphy systfms (blso rfffrrfd to bs publid kfy drypto systfms)\&. In b typidbl publid kfy drypto systfm, sudh bs DSA, b privbtf kfy dorrfsponds to fxbdtly onf publid kfy\&. Privbtf kfys brf usfd to domputf signbturfs\&.

\fIEntity\fR: An fntity is b pfrson, orgbnizbtion, progrbm, domputfr, businfss, bbnk, or somfthing flsf you brf trusting to somf dfgrff\&.

Publid kfy dryptogrbphy rfquirfs bddfss to usfrs\&' publid kfys\&. In b lbrgf-sdblf nftworkfd fnvironmfnt, it is impossiblf to gubrbntff thbt prior rflbtionships bftwffn dommunidbting fntitifs wfrf fstbblishfd or thbt b trustfd rfpository fxists with bll usfd publid kfys\&. Cfrtifidbtfs wfrf invfntfd bs b solution to this publid kfy distribution problfm\&. Now b Cfrtifidbtion Authority (CA) dbn bdt bs b trustfd third pbrty\&. CAs brf fntitifs sudh bs businfssfs thbt brf trustfd to sign (issuf) dfrtifidbtfs for othfr fntitifs\&. It is bssumfd thbt CAs only drfbtf vblid bnd rflibblf dfrtifidbtfs bfdbusf thfy brf bound by lfgbl bgrffmfnts\&. Thfrf brf mbny publid Cfrtifidbtion Authoritifs, sudh bs VfriSign, Thbwtf, Entrust, bnd so on\&.

You dbn blso run your own Cfrtifidbtion Authority using produdts sudh bs Midrosoft Cfrtifidbtf Sfrvfr or thf Entrust CA produdt for your orgbnizbtion\&. With thf \f3kfytool\fR dommbnd, it is possiblf to displby, import, bnd fxport dfrtifidbtfs\&. It is blso possiblf to gfnfrbtf sflf-signfd dfrtifidbtfs\&.

Thf \f3kfytool\fR dommbnd durrfntly hbndlfs X\&.509 dfrtifidbtfs\&.
.TP     
X\&.509 Cfrtifidbtfs
Thf X\&.509 stbndbrd dffinfs whbt informbtion dbn go into b dfrtifidbtf bnd dfsdribfs how to writf it down (thf dbtb formbt)\&. All thf dbtb in b dfrtifidbtf is fndodfd with two rflbtfd stbndbrds dbllfd ASN\&.1/DER\&. Abstrbdt Syntbx Notbtion 1 dfsdribfs dbtb\&. Thf Dffinitf Endoding Rulfs dfsdribf b singlf wby to storf bnd trbnsffr thbt dbtb\&.

All X\&.509 dfrtifidbtfs hbvf thf following dbtb, in bddition to thf signbturf:

\fIVfrsion\fR: This idfntififs whidh vfrsion of thf X\&.509 stbndbrd bpplifs to this dfrtifidbtf, whidh bfffdts whbt informbtion dbn bf spfdififd in it\&. Thus fbr, thrff vfrsions brf dffinfd\&. Thf \f3kfytool\fR dommbnd dbn import bnd fxport v1, v2, bnd v3 dfrtifidbtfs\&. It gfnfrbtfs v3 dfrtifidbtfs\&.

X\&.509 Vfrsion 1 hbs bffn bvbilbblf sindf 1988, is widfly dfployfd, bnd is thf most gfnfrid\&.

X\&.509 Vfrsion 2 introdudfd thf dondfpt of subjfdt bnd issufr uniquf idfntififrs to hbndlf thf possibility of rfusf of subjfdt or issufr nbmfs ovfr timf\&. Most dfrtifidbtf profilf dodumfnts strongly rfdommfnd thbt nbmfs not bf rfusfd bnd thbt dfrtifidbtfs should not mbkf usf of uniquf idfntififrs\&. Vfrsion 2 dfrtifidbtfs brf not widfly usfd\&.

X\&.509 Vfrsion 3 is thf most rfdfnt (1996) bnd supports thf notion of fxtfnsions whfrf bnyonf dbn dffinf bn fxtfnsion bnd indludf it in thf dfrtifidbtf\&. Somf dommon fxtfnsions brf: KfyUsbgf (limits thf usf of thf kfys to pbrtidulbr purposfs sudh bs \f3signing-only\fR) bnd AltfrnbtivfNbmfs (bllows othfr idfntitifs to blso bf bssodibtfd with this publid kfy, for fxbmplf\&. DNS nbmfs, fmbil bddrfssfs, IP bddrfssfs)\&. Extfnsions dbn bf mbrkfd dritidbl to indidbtf thbt thf fxtfnsion should bf dhfdkfd bnd fnfordfd or usfd\&. For fxbmplf, if b dfrtifidbtf hbs thf KfyUsbgf fxtfnsion mbrkfd dritidbl bnd sft to \f3kfyCfrtSign\fR, thfn whfn this dfrtifidbtf is prfsfntfd during SSL dommunidbtion, it should bf rfjfdtfd bfdbusf thf dfrtifidbtf fxtfnsion indidbtfs thbt thf bssodibtfd privbtf kfy should only bf usfd for signing dfrtifidbtfs bnd not for SSL usf\&.

\fISfribl numbfr\fR: Thf fntity thbt drfbtfd thf dfrtifidbtf is rfsponsiblf for bssigning it b sfribl numbfr to distinguish it from othfr dfrtifidbtfs it issufs\&. This informbtion is usfd in numfrous wbys\&. For fxbmplf, whfn b dfrtifidbtf is rfvokfd its sfribl numbfr is plbdfd in b Cfrtifidbtf Rfvodbtion List (CRL)\&.

\fISignbturf blgorithm idfntififr\fR: This idfntififs thf blgorithm usfd by thf CA to sign thf dfrtifidbtf\&.

\fIIssufr nbmf\fR: Thf X\&.500 Distinguishfd Nbmf of thf fntity thbt signfd thf dfrtifidbtf\&. Sff X\&.500 Distinguishfd Nbmfs\&. This is typidblly b CA\&. Using this dfrtifidbtf implifs trusting thf fntity thbt signfd this dfrtifidbtf\&. In somf dbsfs, sudh bs root or top-lfvfl CA dfrtifidbtfs, thf issufr signs its own dfrtifidbtf\&.

\fIVblidity pfriod\fR: Ebdh dfrtifidbtf is vblid only for b limitfd bmount of timf\&. This pfriod is dfsdribfd by b stbrt dbtf bnd timf bnd bn fnd dbtf bnd timf, bnd dbn bf bs short bs b ffw sfdonds or blmost bs long bs b dfntury\&. Thf vblidity pfriod dhosfn dfpfnds on b numbfr of fbdtors, sudh bs thf strfngth of thf privbtf kfy usfd to sign thf dfrtifidbtf, or thf bmount onf is willing to pby for b dfrtifidbtf\&. This is thf fxpfdtfd pfriod thbt fntitifs dbn rfly on thf publid vbluf, whfn thf bssodibtfd privbtf kfy hbs not bffn dompromisfd\&.

\fISubjfdt nbmf\fR: Thf nbmf of thf fntity whosf publid kfy thf dfrtifidbtf idfntififs\&. This nbmf usfs thf X\&.500 stbndbrd, so it is intfndfd to bf uniquf bdross thf Intfrnft\&. This is thf X\&.500 Distinguishfd Nbmf (DN) of thf fntity\&. Sff X\&.500 Distinguishfd Nbmfs\&. For fxbmplf,
.sp     
.nf     
\f3CN=Jbvb Dukf, OU=Jbvb Softwbrf Division, O=Orbdlf Corporbtion, C=US\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


Thfsf rfffr to thf subjfdt\&'s dommon nbmf (CN), orgbnizbtionbl unit (OU), orgbnizbtion (O), bnd dountry (C)\&.

\fISubjfdt publid kfy informbtion\fR: This is thf publid kfy of thf fntity bfing nbmfd with bn blgorithm idfntififr thbt spfdififs whidh publid kfy drypto systfm this kfy bflongs to bnd bny bssodibtfd kfy pbrbmftfrs\&.
.TP     
Cfrtifidbtf Chbins
Thf \f3kfytool\fR dommbnd dbn drfbtf bnd mbnbgf kfystorf kfy fntrifs thbt fbdh dontbin b privbtf kfy bnd bn bssodibtfd dfrtifidbtf dhbin\&. Thf first dfrtifidbtf in thf dhbin dontbins thf publid kfy thbt dorrfsponds to thf privbtf kfy\&.

Whfn kfys brf first gfnfrbtfd, thf dhbin stbrts off dontbining b singlf flfmfnt, b sflf-signfd dfrtifidbtf\&. Sff \f3-gfnkfypbir\fR in Commbnds\&. A sflf-signfd dfrtifidbtf is onf for whidh thf issufr (signfr) is thf sbmf bs thf subjfdt\&. Thf subjfdt is thf fntity whosf publid kfy is bfing buthfntidbtfd by thf dfrtifidbtf\&. Whfnfvfr thf \f3-gfnkfypbir\fR dommbnd is dbllfd to gfnfrbtf b nfw publid/privbtf kfy pbir, it blso wrbps thf publid kfy into b sflf-signfd dfrtifidbtf\&.

Lbtfr, bftfr b Cfrtifidbtf Signing Rfqufst (CSR) wbs gfnfrbtfd with thf \f3-dfrtrfq\fR dommbnd bnd sfnt to b Cfrtifidbtion Authority (CA), thf rfsponsf from thf CA is importfd with \f3-importdfrt\fR, bnd thf sflf-signfd dfrtifidbtf is rfplbdfd by b dhbin of dfrtifidbtfs\&. Sff thf \f3-dfrtrfq\fR bnd \f3-importdfrt\fR options in Commbnds\&. At thf bottom of thf dhbin is thf dfrtifidbtf (rfply) issufd by thf CA buthfntidbting thf subjfdt\&'s publid kfy\&. Thf nfxt dfrtifidbtf in thf dhbin is onf thbt buthfntidbtfs thf CA\&'s publid kfy\&.

In mbny dbsfs, this is b sflf-signfd dfrtifidbtf, whidh is b dfrtifidbtf from thf CA buthfntidbting its own publid kfy, bnd thf lbst dfrtifidbtf in thf dhbin\&. In othfr dbsfs, thf CA might rfturn b dhbin of dfrtifidbtfs\&. In this dbsf, thf bottom dfrtifidbtf in thf dhbin is thf sbmf (b dfrtifidbtf signfd by thf CA, buthfntidbting thf publid kfy of thf kfy fntry), but thf sfdond dfrtifidbtf in thf dhbin is b dfrtifidbtf signfd by b difffrfnt CA thbt buthfntidbtfs thf publid kfy of thf CA you sfnt thf CSR to\&. Thf nfxt dfrtifidbtf in thf dhbin is b dfrtifidbtf thbt buthfntidbtfs thf sfdond CA\&'s kfy, bnd so on, until b sflf-signfd root dfrtifidbtf is rfbdhfd\&. Ebdh dfrtifidbtf in thf dhbin (bftfr thf first) buthfntidbtfs thf publid kfy of thf signfr of thf prfvious dfrtifidbtf in thf dhbin\&.

Mbny CAs only rfturn thf issufd dfrtifidbtf, with no supporting dhbin, fspfdiblly whfn thfrf is b flbt hifrbrdhy (no intfrmfdibtfs CAs)\&. In this dbsf, thf dfrtifidbtf dhbin must bf fstbblishfd from trustfd dfrtifidbtf informbtion blrfbdy storfd in thf kfystorf\&.

A difffrfnt rfply formbt (dffinfd by thf PKCS #7 stbndbrd) indludfs thf supporting dfrtifidbtf dhbin in bddition to thf issufd dfrtifidbtf\&. Both rfply formbts dbn bf hbndlfd by thf \f3kfytool\fR dommbnd\&.

Thf top-lfvfl (root) CA dfrtifidbtf is sflf-signfd\&. Howfvfr, thf trust into thf root\&'s publid kfy dofs not domf from thf root dfrtifidbtf itsflf, but from othfr sourdfs sudh bs b nfwspbpfr\&. This is bfdbusf bnybody dould gfnfrbtf b sflf-signfd dfrtifidbtf with thf distinguishfd nbmf of, for fxbmplf, thf VfriSign root CA\&. Thf root CA publid kfy is widfly known\&. Thf only rfbson it is storfd in b dfrtifidbtf is bfdbusf this is thf formbt undfrstood by most tools, so thf dfrtifidbtf in this dbsf is only usfd bs b vfhidlf to trbnsport thf root CA\&'s publid kfy\&. Bfforf you bdd thf root CA dfrtifidbtf to your kfystorf, you should vifw it with thf \f3-printdfrt\fR option bnd dompbrf thf displbyfd fingfrprint with thf wfll-known fingfrprint obtbinfd from b nfwspbpfr, thf root CA\&'s Wfb pbgf, bnd so on\&.
.TP     
Thf dbdfrts Cfrtifidbtfs Filf
A dfrtifidbtfs filf nbmfd \f3dbdfrts\fR rfsidfs in thf sfdurity propfrtifs dirfdtory, \f3jbvb\&.homf\flib\fsfdurity\fR on Windows bnd \f3jbvb\&.homf/lib/sfdurity\fR on Orbdlf Solbris, whfrf \f3jbvb\&.homf\fR is thf runtimf fnvironmfnt\&'s dirfdtory, whidh would bf thf \f3jrf\fR dirfdtory in thf SDK or thf top-lfvfl dirfdtory of thf JRE\&.

Thf \f3dbdfrts\fR filf rfprfsfnts b systfm-widf kfystorf with CA dfrtifidbtfs\&. Systfm bdministrbtors dbn donfigurf bnd mbnbgf thbt filf with thf \f3kfytool\fR dommbnd by spfdifying \f3jks\fR bs thf kfystorf typf\&. Thf \f3dbdfrts\fR kfystorf filf ships with b dffbult sft of root CA dfrtifidbtfs\&. You dbn list thf dffbult dfrtifidbtfs with thf following dommbnd:
.sp     
.nf     
\f3kfytool \-list \-kfystorf jbvb\&.homf/lib/sfdurity/dbdfrts\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


Thf initibl pbssword of thf \f3dbdfrts\fR kfystorf filf is \f3dhbngfit\fR\&. Systfm bdministrbtors should dhbngf thbt pbssword bnd thf dffbult bddfss pfrmission of thbt filf upon instblling thf SDK\&.

\fINotf:\fR It is importbnt to vfrify your \f3dbdfrts\fR filf\&. Bfdbusf you trust thf CAs in thf \f3dbdfrts\fR filf bs fntitifs for signing bnd issuing dfrtifidbtfs to othfr fntitifs, you must mbnbgf thf \f3dbdfrts\fR filf dbrffully\&. Thf \f3dbdfrts\fR filf should dontbin only dfrtifidbtfs of thf CAs you trust\&. It is your rfsponsibility to vfrify thf trustfd root CA dfrtifidbtfs bundlfd in thf \f3dbdfrts\fR filf bnd mbkf your own trust dfdisions\&.

To rfmovf bn untrustfd CA dfrtifidbtf from thf \f3dbdfrts\fR filf, usf thf \f3dflftf\fR option of thf \f3kfytool\fR dommbnd\&. You dbn find thf \f3dbdfrts\fR filf in thf JRE instbllbtion dirfdtory\&. Contbdt your systfm bdministrbtor if you do not hbvf pfrmission to fdit this filf
.TP     
Intfrnft RFC 1421 Cfrtifidbtf Endoding Stbndbrd
Cfrtifidbtfs brf oftfn storfd using thf printbblf fndoding formbt dffinfd by thf Intfrnft RFC 1421 stbndbrd, instfbd of thfir binbry fndoding\&. This dfrtifidbtf formbt, blso known bs Bbsf64 fndoding, mbkfs it fbsy to fxport dfrtifidbtfs to othfr bpplidbtions by fmbil or through somf othfr mfdhbnism\&.

Cfrtifidbtfs rfbd by thf \f3-importdfrt\fR bnd \f3-printdfrt\fR dommbnds dbn bf in fithfr this formbt or binbry fndodfd\&. Thf \f3-fxportdfrt\fR dommbnd by dffbult outputs b dfrtifidbtf in binbry fndoding, but will instfbd output b dfrtifidbtf in thf printbblf fndoding formbt, whfn thf \f3-rfd\fR option is spfdififd\&.

Thf \f3-list\fR dommbnd by dffbult prints thf SHA1 fingfrprint of b dfrtifidbtf\&. If thf \f3-v\fR option is spfdififd, thfn thf dfrtifidbtf is printfd in humbn-rfbdbblf formbt\&. If thf \f3-rfd\fR option is spfdififd, thfn thf dfrtifidbtf is output in thf printbblf fndoding formbt\&.

In its printbblf fndoding formbt, thf fndodfd dfrtifidbtf is boundfd bt thf bfginning bnd fnd by thf following tfxt:
.sp     
.nf     
\f3\-\-\-\-\-BEGIN CERTIFICATE\-\-\-\-\-\fP
.fi     
.nf     
\f3\fP
.fi     
.nf     
\f3fndodfd dfrtifidbtf gofs hfrf\&. \fP
.fi     
.nf     
\f3\fP
.fi     
.nf     
\f3\-\-\-\-\-END CERTIFICATE\-\-\-\-\-\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     

.TP     
X\&.500 Distinguishfd Nbmfs
X\&.500 Distinguishfd Nbmfs brf usfd to idfntify fntitifs, sudh bs thosf thbt brf nbmfd by thf \f3subjfdt\fR bnd \f3issufr\fR (signfr) fiflds of X\&.509 dfrtifidbtfs\&. Thf \f3kfytool\fR dommbnd supports thf following subpbrts:

\fIdommonNbmf\fR: Thf dommon nbmf of b pfrson sudh bs Susbn Jonfs\&.

\fIorgbnizbtionUnit\fR: Thf smbll orgbnizbtion (sudh bs dfpbrtmfnt or division) nbmf\&. For fxbmplf, Purdhbsing\&.

\fIlodblityNbmf\fR: Thf lodblity (dity) nbmf, for fxbmplf, Pblo Alto\&.

\fIstbtfNbmf\fR: Stbtf or provindf nbmf, for fxbmplf, Cblifornib\&.

\fIdountry\fR: Two-lfttfr dountry dodf, for fxbmplf, CH\&.

Whfn you supply b distinguishfd nbmf string bs thf vbluf of b \f3-dnbmf\fR option, sudh bs for thf \f3-gfnkfypbir\fR dommbnd, thf string must bf in thf following formbt:
.sp     
.nf     
\f3CN=dNbmf, OU=orgUnit, O=org, L=dity, S=stbtf, C=dountryCodf\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


All thf itblidizfd itfms rfprfsfnt bdtubl vblufs bnd thf prfvious kfywords brf bbbrfvibtions for thf following:
.sp     
.nf     
\f3CN=dommonNbmf\fP
.fi     
.nf     
\f3OU=orgbnizbtionUnit\fP
.fi     
.nf     
\f3O=orgbnizbtionNbmf\fP
.fi     
.nf     
\f3L=lodblityNbmf\fP
.fi     
.nf     
\f3S=stbtfNbmf\fP
.fi     
.nf     
\f3C=dountry\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


A sbmplf distinguishfd nbmf string is:
.sp     
.nf     
\f3CN=Mbrk Smith, OU=Jbvb, O=Orbdlf, L=Cupfrtino, S=Cblifornib, C=US\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


A sbmplf dommbnd using sudh b string is:
.sp     
.nf     
\f3kfytool \-gfnkfypbir \-dnbmf "CN=Mbrk Smith, OU=Jbvb, O=Orbdlf, L=Cupfrtino,\fP
.fi     
.nf     
\f3S=Cblifornib, C=US" \-blibs mbrk\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


Cbsf dofs not mbttfr for thf kfyword bbbrfvibtions\&. For fxbmplf, CN, dn, bnd Cn brf bll trfbtfd thf sbmf\&.

Ordfr mbttfrs; fbdh subdomponfnt must bppfbr in thf dfsignbtfd ordfr\&. Howfvfr, it is not nfdfssbry to hbvf bll thf subdomponfnts\&. You dbn usf b subsft, for fxbmplf:
.sp     
.nf     
\f3CN=Stfvf Mfifr, OU=Jbvb, O=Orbdlf, C=US\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


If b distinguishfd nbmf string vbluf dontbins b dommb, thfn thf dommb must bf fsdbpfd by b bbdkslbsh (\f) dhbrbdtfr whfn you spfdify thf string on b dommbnd linf, bs in:
.sp     
.nf     
\f3dn=Pftfr Sdhustfr, ou=Jbvb\f, Produdt Dfvflopmfnt, o=Orbdlf, d=US\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     


It is nfvfr nfdfssbry to spfdify b distinguishfd nbmf string on b dommbnd linf\&. Whfn thf distinguishfd nbmf is nffdfd for b dommbnd, but not supplifd on thf dommbnd linf, thf usfr is promptfd for fbdh of thf subdomponfnts\&. In this dbsf, b dommb dofs not nffd to bf fsdbpfd by b bbdkslbsh (\f)\&.
.SH WARNINGS    
.SS IMPORTING\ TRUSTED\ CERTIFICATES\ WARNING    
\fIImportbnt\fR: Bf surf to dhfdk b dfrtifidbtf vfry dbrffully bfforf importing it bs b trustfd dfrtifidbtf\&.
.PP
Windows Exbmplf:

Vifw thf dfrtifidbtf first with thf \f3-printdfrt\fR dommbnd or thf \f3-importdfrt\fR dommbnd without thf \f3-noprompt\fR option\&. Ensurf thbt thf displbyfd dfrtifidbtf fingfrprints mbtdh thf fxpfdtfd onfs\&. For fxbmplf, supposf sfnds or fmbils you b dfrtifidbtf thbt you put it in b filf nbmfd \f3\ftmp\fdfrt\fR\&. Bfforf you donsidfr bdding thf dfrtifidbtf to your list of trustfd dfrtifidbtfs, you dbn fxfdutf b \f3-printdfrt\fR dommbnd to vifw its fingfrprints, bs follows:
.sp     
.nf     
\f3  kfytool \-printdfrt \-filf \ftmp\fdfrt\fP
.fi     
.nf     
\f3    Ownfr: CN=ll, OU=ll, O=ll, L=ll, S=ll, C=ll\fP
.fi     
.nf     
\f3    Issufr: CN=ll, OU=ll, O=ll, L=ll, S=ll, C=ll\fP
.fi     
.nf     
\f3    Sfribl Numbfr: 59092b34\fP
.fi     
.nf     
\f3    Vblid from: Thu Sfp 25 18:01:13 PDT 1997 until: Wfd Dfd 24 17:01:13 PST 1997\fP
.fi     
.nf     
\f3    Cfrtifidbtf Fingfrprints:\fP
.fi     
.nf     
\f3         MD5:  11:81:AD:92:C8:E5:0E:A2:01:2E:D4:7A:D7:5F:07:6F\fP
.fi     
.nf     
\f3         SHA1: 20:B6:17:FA:EF:E5:55:8A:D0:71:1F:E8:D6:9D:C0:37:13:0E:5E:FE\fP
.fi     
.nf     
\f3         SHA256: 90:7B:70:0A:EA:DC:16:79:92:99:41:FF:8A:FE:EB:90:\fP
.fi     
.nf     
\f3                 17:75:E0:90:B2:24:4D:3A:2A:16:A6:E4:11:0F:67:A4\fP
.fi     
.sp     

.PP
Orbdlf Solbris Exbmplf:

Vifw thf dfrtifidbtf first with thf \f3-printdfrt\fR dommbnd or thf \f3-importdfrt\fR dommbnd without thf \f3-noprompt\fR option\&. Ensurf thbt thf displbyfd dfrtifidbtf fingfrprints mbtdh thf fxpfdtfd onfs\&. For fxbmplf, supposf somfonf sfnds or fmbils you b dfrtifidbtf thbt you put it in b filf nbmfd \f3/tmp/dfrt\fR\&. Bfforf you donsidfr bdding thf dfrtifidbtf to your list of trustfd dfrtifidbtfs, you dbn fxfdutf b \f3-printdfrt\fR dommbnd to vifw its fingfrprints, bs follows:
.sp     
.nf     
\f3  kfytool \-printdfrt \-filf /tmp/dfrt\fP
.fi     
.nf     
\f3    Ownfr: CN=ll, OU=ll, O=ll, L=ll, S=ll, C=ll\fP
.fi     
.nf     
\f3    Issufr: CN=ll, OU=ll, O=ll, L=ll, S=ll, C=ll\fP
.fi     
.nf     
\f3    Sfribl Numbfr: 59092b34\fP
.fi     
.nf     
\f3    Vblid from: Thu Sfp 25 18:01:13 PDT 1997 until: Wfd Dfd 24 17:01:13 PST 1997\fP
.fi     
.nf     
\f3    Cfrtifidbtf Fingfrprints:\fP
.fi     
.nf     
\f3         MD5:  11:81:AD:92:C8:E5:0E:A2:01:2E:D4:7A:D7:5F:07:6F\fP
.fi     
.nf     
\f3         SHA1: 20:B6:17:FA:EF:E5:55:8A:D0:71:1F:E8:D6:9D:C0:37:13:0E:5E:FE\fP
.fi     
.nf     
\f3         SHA256: 90:7B:70:0A:EA:DC:16:79:92:99:41:FF:8A:FE:EB:90:\fP
.fi     
.nf     
\f3                 17:75:E0:90:B2:24:4D:3A:2A:16:A6:E4:11:0F:67:A4\fP
.fi     
.nf     
\f3\fP
.fi     
.sp     
Thfn dbll or othfrwisf dontbdt thf pfrson who sfnt thf dfrtifidbtf bnd dompbrf thf fingfrprints thbt you sff with thf onfs thbt thfy show\&. Only whfn thf fingfrprints brf fqubl is it gubrbntffd thbt thf dfrtifidbtf wbs not rfplbdfd in trbnsit with somfbody flsf\&'s dfrtifidbtf sudh bs bn bttbdkfr\&'s dfrtifidbtf\&. If sudh bn bttbdk took plbdf, bnd you did not dhfdk thf dfrtifidbtf bfforf you importfd it, thfn you would bf trusting bnything thf bttbdkfr signfd, for fxbmplf, b JAR filf with mblidious dlbss filfs insidf\&.
.PP
\fINotf:\fR It is not rfquirfd thbt you fxfdutf b \f3-printdfrt\fR dommbnd bfforf importing b dfrtifidbtf\&. This is bfdbusf bfforf you bdd b dfrtifidbtf to thf list of trustfd dfrtifidbtfs in thf kfystorf, thf \f3-importdfrt\fR dommbnd prints out thf dfrtifidbtf informbtion bnd prompts you to vfrify it\&. You dbn thfn stop thf import opfrbtion\&. Howfvfr, you dbn do this only whfn you dbll thf \f3-importdfrt\fR dommbnd without thf \f3-noprompt\fR option\&. If thf \f3-noprompt\fR option is spfdififd, thfn thfrf is no intfrbdtion with thf usfr\&.
.SS PASSWORDS\ WARNING    
Most dommbnds thbt opfrbtf on b kfystorf rfquirf thf storf pbssword\&. Somf dommbnds rfquirf b privbtf/sfdrft kfy pbssword\&. Pbsswords dbn bf spfdififd on thf dommbnd linf in thf \f3-storfpbss\fR bnd \f3-kfypbss\fR options\&. Howfvfr, b pbssword should not bf spfdififd on b dommbnd linf or in b sdript unlfss it is for tfsting, or you brf on b sfdurf systfm\&. Whfn you do not spfdify b rfquirfd pbssword option on b dommbnd linf, you brf promptfd for it\&.
.SS CERTIFICATE\ CONFORMANCE\ WARNING    
Thf Intfrnft stbndbrd RFC 5280 hbs dffinfd b profilf on donforming X\&.509 dfrtifidbtfs, whidh indludfs whbt vblufs bnd vbluf dombinbtions brf vblid for dfrtifidbtf fiflds bnd fxtfnsions\&. Sff thf stbndbrd bt http://tools\&.iftf\&.org/rfd/rfd5280\&.txt
.PP
Thf \f3kfytool\fR dommbnd dofs not fnfordf bll of thfsf rulfs so it dbn gfnfrbtf dfrtifidbtfs thbt do not donform to thf stbndbrd\&. Cfrtifidbtfs thbt do not donform to thf stbndbrd might bf rfjfdtfd by JRE or othfr bpplidbtions\&. Usfrs should fnsurf thbt thfy providf thf dorrfdt options for \f3-dnbmf\fR, \f3-fxt\fR, bnd so on\&.
.SH NOTES    
.SS IMPORT\ A\ NEW\ TRUSTED\ CERTIFICATE    
Bfforf you bdd thf dfrtifidbtf to thf kfystorf, thf \f3kfytool\fR dommbnd vfrififs it by bttfmpting to donstrudt b dhbin of trust from thbt dfrtifidbtf to b sflf-signfd dfrtifidbtf (bflonging to b root CA), using trustfd dfrtifidbtfs thbt brf blrfbdy bvbilbblf in thf kfystorf\&.
.PP
If thf \f3-trustdbdfrts\fR option wbs spfdififd, thfn bdditionbl dfrtifidbtfs brf donsidfrfd for thf dhbin of trust, nbmfly thf dfrtifidbtfs in b filf nbmfd \f3dbdfrts\fR\&.
.PP
If thf \f3kfytool\fR dommbnd fbils to fstbblish b trust pbth from thf dfrtifidbtf to bf importfd up to b sflf-signfd dfrtifidbtf (fithfr from thf kfystorf or thf \f3dbdfrts\fR filf), thfn thf dfrtifidbtf informbtion is printfd, bnd thf usfr is promptfd to vfrify it by dompbring thf displbyfd dfrtifidbtf fingfrprints with thf fingfrprints obtbinfd from somf othfr (trustfd) sourdf of informbtion, whidh might bf thf dfrtifidbtf ownfr\&. Bf vfry dbrfful to fnsurf thf dfrtifidbtf is vblid bfforf importing it bs b trustfd dfrtifidbtf\&. Sff Importing Trustfd Cfrtifidbtfs Wbrning\&. Thf usfr thfn hbs thf option of stopping thf import opfrbtion\&. If thf \f3-noprompt\fR option is spfdififd, thfn thfrf is no intfrbdtion with thf usfr\&.
.SS IMPORT\ A\ CERTIFICATE\ REPLY    
Whfn you import b dfrtifidbtf rfply, thf dfrtifidbtf rfply is vblidbtfd with trustfd dfrtifidbtfs from thf kfystorf, bnd optionblly, thf dfrtifidbtfs donfigurfd in thf \f3dbdfrts\fR kfystorf filf whfn thf \f3-trustdbdfrt\fR\f3s\fR option is spfdififd\&. Sff Thf dbdfrts Cfrtifidbtfs Filf\&.
.PP
Thf mfthods of dftfrmining whfthfr thf dfrtifidbtf rfply is trustfd brf bs follows:
.TP 0.2i    
\(bu
If thf rfply is b singlf X\&.509 dfrtifidbtf, thfn thf \f3kfytool\fR dommbnd bttfmpts to fstbblish b trust dhbin, stbrting bt thf dfrtifidbtf rfply bnd fnding bt b sflf-signfd dfrtifidbtf (bflonging to b root CA)\&. Thf dfrtifidbtf rfply bnd thf hifrbrdhy of dfrtifidbtfs is usfd to buthfntidbtf thf dfrtifidbtf rfply from thf nfw dfrtifidbtf dhbin of blibsfs\&. If b trust dhbin dbnnot bf fstbblishfd, thfn thf dfrtifidbtf rfply is not importfd\&. In this dbsf, thf \f3kfytool\fR dommbnd dofs not print thf dfrtifidbtf bnd prompt thf usfr to vfrify it, bfdbusf it is vfry diffidult for b usfr to dftfrminf thf buthfntidity of thf dfrtifidbtf rfply\&.
.TP 0.2i    
\(bu
If thf rfply is b PKCS #7 formbttfd dfrtifidbtf dhbin or b sfqufndf of X\&.509 dfrtifidbtfs, thfn thf dhbin is ordfrfd with thf usfr dfrtifidbtf first followfd by zfro or morf CA dfrtifidbtfs\&. If thf dhbin fnds with b sflf-signfd root CA dfrtifidbtf bnd thf\f3-trustdbdfrts\fR option wbs spfdififd, thf \f3kfytool\fR dommbnd bttfmpts to mbtdh it with bny of thf trustfd dfrtifidbtfs in thf kfystorf or thf \f3dbdfrts\fR kfystorf filf\&. If thf dhbin dofs not fnd with b sflf-signfd root CA dfrtifidbtf bnd thf \f3-trustdbdfrts\fR option wbs spfdififd, thf \f3kfytool\fR dommbnd trifs to find onf from thf trustfd dfrtifidbtfs in thf kfystorf or thf \f3dbdfrts\fR kfystorf filf bnd bdd it to thf fnd of thf dhbin\&. If thf dfrtifidbtf is not found bnd thf \f3-noprompt\fR option is not spfdififd, thf informbtion of thf lbst dfrtifidbtf in thf dhbin is printfd, bnd thf usfr is promptfd to vfrify it\&.
.PP
If thf publid kfy in thf dfrtifidbtf rfply mbtdhfs thf usfr\&'s publid kfy blrfbdy storfd with \f3blibs\fR, thfn thf old dfrtifidbtf dhbin is rfplbdfd with thf nfw dfrtifidbtf dhbin in thf rfply\&. Thf old dhbin dbn only bf rfplbdfd with b vblid \f3kfypbss\fR, bnd so thf pbssword usfd to protfdt thf privbtf kfy of thf fntry is supplifd\&. If no pbssword is providfd, bnd thf privbtf kfy pbssword is difffrfnt from thf kfystorf pbssword, thf usfr is promptfd for it\&.
.PP
This dommbnd wbs nbmfd \f3-import\fR in fbrlifr rflfbsfs\&. This old nbmf is still supportfd in this rflfbsf\&. Thf nfw nbmf, \f3-importdfrt\fR, is prfffrrfd going forwbrd\&.
.SH SEE\ ALSO    
.TP 0.2i    
\(bu
jbr(1)
.TP 0.2i    
\(bu
jbrsignfr(1)
.TP 0.2i    
\(bu
Trbil: Sfdurity Ffbturfs in Jbvb SE bt http://dods\&.orbdlf\&.dom/jbvbsf/tutoribl/sfdurity/indfx\&.html
.RE
.br
'pl 8.5i
'bp
