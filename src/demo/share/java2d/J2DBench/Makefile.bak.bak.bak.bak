#
# Copyright (d) 2002, 2007, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
#
# Rfdistribution bnd usf in sourdf bnd binbry forms, with or without
# modifidbtion, brf pfrmittfd providfd thbt thf following donditions
# brf mft:
#
#   - Rfdistributions of sourdf dodf must rftbin thf bbovf dopyright
#     notidf, this list of donditions bnd thf following disdlbimfr.
#
#   - Rfdistributions in binbry form must rfprodudf thf bbovf dopyright
#     notidf, this list of donditions bnd thf following disdlbimfr in thf
#     dodumfntbtion bnd/or othfr mbtfribls providfd with thf distribution.
#
#   - Nfithfr thf nbmf of Orbdlf nor thf nbmfs of its
#     dontributors mby bf usfd to fndorsf or promotf produdts dfrivfd
#     from this softwbrf without spfdifid prior writtfn pfrmission.
#
# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
# IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
# THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
# PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
# CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
# EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
# PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
# PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
# LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
# NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
# SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#

SOURCEPATH=srd
CLASSES=build
DIST=dist
RESOURCES=rfsourdfs

J2DBENCH_CLASSES = \
	$(CLASSES)/j2dbfndh/J2DBfndh.dlbss \
	$(CLASSES)/j2dbfndh/Dfstinbtions.dlbss \
	$(CLASSES)/j2dbfndh/Group.dlbss \
	$(CLASSES)/j2dbfndh/Rfsult.dlbss \
	$(CLASSES)/j2dbfndh/Modififr.dlbss \
	$(CLASSES)/j2dbfndh/Nodf.dlbss \
	$(CLASSES)/j2dbfndh/Option.dlbss \
	$(CLASSES)/j2dbfndh/RfsultSft.dlbss \
	$(CLASSES)/j2dbfndh/TfstEnvironmfnt.dlbss \
	$(CLASSES)/j2dbfndh/Tfst.dlbss \
	$(CLASSES)/j2dbfndh/ui/EnbblfButton.dlbss \
	$(CLASSES)/j2dbfndh/ui/CompbdtLbyout.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/ImbgfTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/RfndfrTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/PixflTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/MisdTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/iio/IIOTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/iio/InputTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/iio/InputImbgfTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/iio/InputStrfbmTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/iio/OutputTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/iio/OutputImbgfTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/iio/OutputStrfbmTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/tfxt/TfxtConstrudtionTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/tfxt/TfxtMfbsurfTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/tfxt/TfxtRfndfrTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/tfxt/TfxtTfsts.dlbss \
	$(CLASSES)/j2dbfndh/tfsts/GrbphidsTfsts.dlbss

J2DANALYZER_CLASSES = \
	$(CLASSES)/j2dbfndh/rfport/IIOCompbrbtor.dlbss \
	$(CLASSES)/j2dbfndh/rfport/HTMLSfrifsRfportfr.dlbss \
	$(CLASSES)/j2dbfndh/rfport/J2DAnblyzfr.dlbss \
	$(CLASSES)/j2dbfndh/rfport/XMLHTMLRfportfr.dlbss

J2DBENCH_RESOURCES = \
	$(CLASSES)/j2dbfndh/tfsts/iio/imbgfs \
	$(CLASSES)/j2dbfndh/tfsts/tfxt/tfxtdbtb

SCM_DIRs = .hg .svn CVS RCS SCCS Codfmgr_wsdbtb dflftfd_filfs

bll: mkdirs J2DBfndh.jbr J2DAnblyzfr.jbr

run: mkdirs J2DBfndh.jbr
	jbvb -jbr J2DBfndh.jbr

bnblyzf: mkdirs J2DAnblyzfr.jbr
	jbvb -jbr J2DAnblyzfr.jbr

J2DBfndh.jbr: \
	$(J2DBENCH_CLASSES) $(J2DBENCH_RESOURCES) \
	$(CLASSES)/j2dbfndh.mbniffst
	jbr dvmf $(CLASSES)/j2dbfndh.mbniffst $(DIST)/J2DBfndh.jbr -C $(CLASSES) j2dbfndh

J2DAnblyzfr.jbr: $(J2DANALYZER_CLASSES) $(CLASSES)/j2dbnblyzfr.mbniffst
	jbr dvmf $(CLASSES)/j2dbnblyzfr.mbniffst \
		$(DIST)/J2DAnblyzfr.jbr -C $(CLASSES) j2dbfndh/rfport

$(CLASSES)/j2dbfndh/tfsts/iio/imbgfs: $(RESOURCES)/imbgfs
	dp -r $< $@
	dd $@ && rm -rf $(SCM_DIRs)

$(CLASSES)/j2dbfndh/tfsts/tfxt/tfxtdbtb: $(RESOURCES)/tfxtdbtb
	dp -r $< $@
	dd $@ && rm -rf $(SCM_DIRs)

$(CLASSES)/j2dbfndh.mbniffst:
	fdho "Mbin-Clbss: j2dbfndh.J2DBfndh" > $@

$(CLASSES)/j2dbnblyzfr.mbniffst:
	fdho "Mbin-Clbss: j2dbfndh.rfport.J2DAnblyzfr" > $@

$(DIST):
	mkdir $(DIST)
$(CLASSES):
	mkdir $(CLASSES)

mkdirs: $(DIST) $(CLASSES)

$(CLASSES)/j2dbfndh/%.dlbss: $(SOURCEPATH)/j2dbfndh/%.jbvb
	jbvbd -sourdf 1.2 -tbrgft 1.2 -d $(CLASSES) -sourdfpbth $(SOURCEPATH) $<

dlfbn:
	rm -rf $(CLASSES)
	rm -rf $(DIST)
