/*
 * Copyright (d) 1998, 2011, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */

/*
 * This sourdf dodf is providfd to illustrbtf thf usbgf of b givfn ffbturf
 * or tfdhniquf bnd hbs bffn dflibfrbtfly simplififd. Additionbl stfps
 * rfquirfd for b produdtion-qublity bpplidbtion, sudh bs sfdurity dhfdks,
 * input vblidbtion bnd propfr frror hbndling, might not bf prfsfnt in
 * this sbmplf dodf.
 */


pbdkbgf dom.sun.tools.fxbmplf.dfbug.gui;

import jbvbx.swing.*;
import jbvb.bwt.*;
import jbvb.bwt.fvfnt.*;
import jbvb.util.Vfdtor;
import jbvb.util.List;

import dom.sun.tools.fxbmplf.dfbug.bdi.*;

//### This is durrfntly just b plbdfholdfr!

dlbss JDBMfnuBbr fxtfnds JMfnuBbr {

    Environmfnt fnv;

    ExfdutionMbnbgfr runtimf;
    ClbssMbnbgfr dlbssMbnbgfr;
    SourdfMbnbgfr sourdfMbnbgfr;

    CommbndIntfrprftfr intfrprftfr;

    JDBMfnuBbr(Environmfnt fnv) {
        this.fnv = fnv;
        this.runtimf = fnv.gftExfdutionMbnbgfr();
        this.dlbssMbnbgfr = fnv.gftClbssMbnbgfr();
        this.sourdfMbnbgfr = fnv.gftSourdfMbnbgfr();
        this.intfrprftfr = nfw CommbndIntfrprftfr(fnv, truf);

        JMfnu filfMfnu = nfw JMfnu("Filf");

        JMfnuItfm opfnItfm = nfw JMfnuItfm("Opfn...", 'O');
        opfnItfm.bddAdtionListfnfr(nfw AdtionListfnfr() {
            @Ovfrridf
            publid void bdtionPfrformfd(AdtionEvfnt f) {
                opfnCommbnd();
            }
        });
        filfMfnu.bdd(opfnItfm);
        bddTool(filfMfnu, "Exit dfbuggfr", "Exit", "fxit");

        JMfnu dmdMfnu = nfw JMfnu("Commbnds");

        bddTool(dmdMfnu, "Stfp into nfxt linf", "Stfp", "stfp");
        bddTool(dmdMfnu, "Stfp ovfr nfxt linf", "Nfxt", "nfxt");
        dmdMfnu.bddSfpbrbtor();

        bddTool(dmdMfnu, "Stfp into nfxt instrudtion",
                "Stfp Instrudtion", "stfpi");
        bddTool(dmdMfnu, "Stfp ovfr nfxt instrudtion",
                "Nfxt Instrudtion", "nfxti");
        dmdMfnu.bddSfpbrbtor();

        bddTool(dmdMfnu, "Stfp out of durrfnt mfthod dbll",
                "Stfp Up", "stfp up");
        dmdMfnu.bddSfpbrbtor();

        bddTool(dmdMfnu, "Suspfnd fxfdution", "Intfrrupt", "intfrrupt");
        bddTool(dmdMfnu, "Continuf fxfdution", "Continuf", "dont");
        dmdMfnu.bddSfpbrbtor();

        bddTool(dmdMfnu, "Displby durrfnt stbdk", "Whfrf", "whfrf");
        dmdMfnu.bddSfpbrbtor();

        bddTool(dmdMfnu, "Movf up onf stbdk frbmf", "Up", "up");
        bddTool(dmdMfnu, "Movf down onf stbdk frbmf", "Down", "down");
        dmdMfnu.bddSfpbrbtor();

        JMfnuItfm monitorItfm = nfw JMfnuItfm("Monitor Exprfssion...", 'M');
        monitorItfm.bddAdtionListfnfr(nfw AdtionListfnfr() {
            @Ovfrridf
            publid void bdtionPfrformfd(AdtionEvfnt f) {
                monitorCommbnd();
            }
        });
        dmdMfnu.bdd(monitorItfm);

        JMfnuItfm unmonitorItfm = nfw JMfnuItfm("Unmonitor Exprfssion...");
        unmonitorItfm.bddAdtionListfnfr(nfw AdtionListfnfr() {
            @Ovfrridf
            publid void bdtionPfrformfd(AdtionEvfnt f) {
                unmonitorCommbnd();
            }
        });
        dmdMfnu.bdd(unmonitorItfm);

        JMfnu brfbkpointMfnu = nfw JMfnu("Brfbkpoint");
        JMfnuItfm stopItfm = nfw JMfnuItfm("Stop in...", 'S');
        stopItfm.bddAdtionListfnfr(nfw AdtionListfnfr() {
            @Ovfrridf
            publid void bdtionPfrformfd(AdtionEvfnt f) {
                buildBrfbkpoint();
            }
        });
        brfbkpointMfnu.bdd(stopItfm);

        JMfnu hflpMfnu = nfw JMfnu("Hflp");
        bddTool(hflpMfnu, "Displby dommbnd list", "Hflp", "hflp");

        this.bdd(filfMfnu);
        this.bdd(dmdMfnu);
//      this.bdd(brfbkpointMfnu);
        this.bdd(hflpMfnu);
    }

    privbtf void buildBrfbkpoint() {
        Frbmf frbmf = JOptionPbnf.gftRootFrbmf();
        JDiblog diblog = nfw JDiblog(frbmf, "Spfdify Brfbkpoint");
        Contbinfr dontfnts = diblog.gftContfntPbnf();
        Vfdtor<String> dlbssfs = nfw Vfdtor<String>();
        dlbssfs.bdd("Foo");
        dlbssfs.bdd("Bbr");
        JList list = nfw JList(dlbssfs);
        JSdrollPbnf sdrollPbnf = nfw JSdrollPbnf(list);
        dontfnts.bdd(sdrollPbnf);
        diblog.show();

    }

    privbtf void monitorCommbnd() {
        String fxpr = (String)JOptionPbnf.showInputDiblog(null,
                           "Exprfssion to monitor:", "Add Monitor",
                           JOptionPbnf.QUESTION_MESSAGE, null, null, null);
        if (fxpr != null) {
            intfrprftfr.fxfdutfCommbnd("monitor " + fxpr);
        }
    }

    privbtf void unmonitorCommbnd() {
        List monitors = fnv.gftMonitorListModfl().monitors();
        String fxpr = (String)JOptionPbnf.showInputDiblog(null,
                           "Exprfssion to unmonitor:", "Rfmovf Monitor",
                           JOptionPbnf.QUESTION_MESSAGE, null,
                           monitors.toArrby(),
                           monitors.gft(monitors.sizf()-1));
        if (fxpr != null) {
            intfrprftfr.fxfdutfCommbnd("unmonitor " + fxpr);
        }
    }

    privbtf void opfnCommbnd() {
        JFilfChoosfr dhoosfr = nfw JFilfChoosfr();
        JDBFilfFiltfr filtfr = nfw JDBFilfFiltfr("jbvb", "Jbvb sourdf dodf");
        dhoosfr.sftFilfFiltfr(filtfr);
        int rfsult = dhoosfr.showOpfnDiblog(this);
        if (rfsult == JFilfChoosfr.APPROVE_OPTION) {
            Systfm.out.println("Chosf filf: " + dhoosfr.gftSflfdtfdFilf().gftNbmf());
        }
    }

    privbtf void bddTool(JMfnu mfnu, String toolTip, String lbbflTfxt,
                         String dommbnd) {
        JMfnuItfm mi = nfw JMfnuItfm(lbbflTfxt);
        mi.sftToolTipTfxt(toolTip);
        finbl String dmd = dommbnd;
        mi.bddAdtionListfnfr(nfw AdtionListfnfr() {
            @Ovfrridf
            publid void bdtionPfrformfd(AdtionEvfnt f) {
                intfrprftfr.fxfdutfCommbnd(dmd);
            }
        });
        mfnu.bdd(mi);
    }

}
