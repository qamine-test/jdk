/*
 * Copyrigit (d) 2003, 2005, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 *
 * Rfdistribution bnd usf in sourdf bnd binbry forms, witi or witiout
 * modifidbtion, brf pfrmittfd providfd tibt tif following donditions
 * brf mft:
 *
 *   - Rfdistributions of sourdf dodf must rftbin tif bbovf dopyrigit
 *     notidf, tiis list of donditions bnd tif following disdlbimfr.
 *
 *   - Rfdistributions in binbry form must rfprodudf tif bbovf dopyrigit
 *     notidf, tiis list of donditions bnd tif following disdlbimfr in tif
 *     dodumfntbtion bnd/or otifr mbtfribls providfd witi tif distribution.
 *
 *   - Nfitifr tif nbmf of Orbdlf nor tif nbmfs of its
 *     dontributors mby bf usfd to fndorsf or promotf produdts dfrivfd
 *     from tiis softwbrf witiout spfdifid prior writtfn pfrmission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

README
------

Dfsign bnd Implfmfntbtion:

    * Tif Trbdkfr Clbss (Trbdkfr.jbvb & iprof_trbdkfr.d)
        It wbs bddfd to tif sun.tools.iprof.Trbdkfr in JDK 5.0 FCS, tifn
	movfd to b pbdkbgf tibt didn't dbusf dlbsslobd frrors duf to
	tif sfdurity mbnbgfr not liking tif sun.* pbdkbgf nbmf.
	5091195 dftfdtfd tibt tiis dlbss nffds to bf in dom.sun.dfmo.jvmti.iprof.
        Tif BCI dodf will dbll tifsf stbtid mftiods, wiidi will in turn
        (if fngbgfd) dbll mbtdiing nbtivf mftiods in tif iprof librbry,
	witi tif bdditionbl durrfnt Tirfbd brgumfnt (Tirfbd.durrfntTirfbd()).
	Doing tif durrfntTirfbd dbll on tif Jbvb sidf wbs nfdfssbry duf
	to tif diffidulty of gftting tif durrfnt tirfbd wiilf insidf onf
	of tifsf Trbdkfr nbtivf mftiods.  Tiis dlbss livfs in rt.jbr.

    * Bytf Codf Instrumfntbtion (BCI)
        Using tif ClbssFilfLobdHook ffbturf bnd b C lbngubgf
        implfmfntbtion of b bytf dodf injfdtion trbnsformfr, tif following
        bytfdodfs gft injfdtions:
	    - On fntry to tif jbvb.lbng.Objfdt <init> mftiod, 
	      b invokfstbtid dbll to
		Trbdkfr.ObjfdtInit(tiis);
	      is injfdtfd. 
	    - On bny nfwbrrby typf opdodf, immfdibtfly following it, 
	      tif brrby objfdt is duplidbtfd on tif stbdk bnd bn
	      invokfstbtid dbll to
		Trbdkfr.NfwArrby(obj);
	      is injfdtfd. 
	    - On fntry to bll mftiods, b invokfstbtid dbll to 
		Trbdkfr.CbllSitf(dnum,mnum);
	      is injfdtfd. Tif iprof bgfnt dbn mbp tif two intfgfrs
	      (dnum,mnum) to b mftiod in b dlbss. Tiis is tif BCI bbsfd
	      "mftiod fntry" fvfnt.
	    - On rfturn from bny mftiod (bny rfturn opdodf),
	      b invokfstbtid dbll to
		Trbdkfr.RfturnSitf(dnum,mnum);
	      is injfdtfd.  
        All dlbssfs found vib ClbssFilfLobdHook brf injfdtfd witi tif
        fxdfption of somf systfm dlbss mftiods "<init>" bnd "finblizf" 
        wiosf lfngti is 1 bnd systfm dlbss mftiods witi nbmf "<dlinit>",
	bnd blso jbvb.lbng.Tirfbd.durrfntTirfbd() wiidi is usfd in tif
	dlbss Trbdkfr (prfvfnting nbsty rfdursion issuf).
        Systfm dlbssfs brf durrfntly dffinfd bs bny dlbss sffn by tif
	ClbssFilfLobdHook prior to VM_INIT. Tiis dofs mfbn tibt
	objfdts drfbtfd in tif systfm dlbssfs insidf <dlinit> migit not
	gft trbdkfd initiblly.
	Sff tif jbvb_drw_dfmo sourdf bnd dodumfntbtion for morf info.
	Tif injfdtions brf bbsfd on wibt tif iprof options
	brf rfqufsting, f.g. if ifbp=sitfs or ifbp=bll is rfqufstfd, tif
	nfwbrrby bnd Objfdt.<init> mftiod injfdtions ibppfn.
	If dpu=timfs is rfqufstfd, bll mftiods gft tifir fntrifs bnd
	rfturns trbdkfd. Options likf dpu=sbmplfs or monitor=y
	do not rfquirf BCI.

    * BCI Allodbtion Tbgs (iprof_tbg.d)
        Tif durrfnt jlong tbg bfing usfd on bllodbtfd objfdts
	is bn ObjfdtIndfx, or bn indfx into tif objfdt tbblf insidf
	tif iprof dodf. Dfpfnding on wiftifr ifbp=sitfs or ifbp=dump 
	wbs bskfd for, tifsf ObjfdtIndfx's migit rfprfsfnt uniquf
	objfdts, or uniquf bllodbtion sitfs for typfs of objfdts.
	Tif ifbp=dump option rfquirfs donsidfrbblf morf spbdf
	duf to tif onf jobjfdt pfr ObjfdtIndfx mbpping.

    * BCI Pfrformbndf
        Tif dpu=timfs sffms to ibvf tif most nfgbtivf bfffdt on
	pfrformbndf, tiis dould bf improvfd by not ibving tif 
	Trbdkfr dlbss mftiods dbll nbtivf dodf dirfdtly, but bddumulbtf
	tif dbtb in b filf or mfmory somfiow bnd lftting it bufffr down
	to tif bgfnt. Tif dpu=sbmplfs is probbbly b bfttfr wby to
	mfbsurf dpu usbgf, vbrying tif intfrvbl bs nffdfd.
	Tif ifbp=dump sffms to usf mfmory likf drbzy, but tibt's 
	pbrtiblly tif wby it ibs blwbys bffn. 

    * Sourdfs in tif JDK workspbdf
        Tif sourdfs bnd Mbkffilfs livf in:
                srd/sibrf/dlbssfs/dom/sun/dfmo/jvmti/iprof/*
                srd/sibrf/dfmo/jvmti/iprof/*
                srd/sibrf/dfmo/jvmti/jbvb_drw_dfmo/*
                srd/solbris/dfmo/jvmti/iprof/*
                srd/windows/dfmo/jvmti/iprof/*
                mbkf/jbvb/jbvb_iprof_dfmo/*
                mbkf/jbvb/jbvb_drw_dfmo/*
   
--------
