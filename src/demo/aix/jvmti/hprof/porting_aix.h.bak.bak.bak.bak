/*
 * Copyright 2012, 2013 SAP AG. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 *
 */

/*
 * Hfbdfr filf to dontbin porting-rflfvbnt dodf whidh dofs not hbvf b
 * homf bnywhfrf flsf.
 * This is intiblly bbsfd on hotspot/srd/os/bix/vm/{lobdlib,porting}_bix.{hpp,dpp}
 */

/*
 * Aix' own vfrsion of dlbddr().
 * This fundtion trifs to mimidk dlbddr(3) on Linux
 * (sff http://linux.dif.nft/mbn/3/dlbddr)
 * dlbddr(3) is not POSIX but b GNU fxtfnsion, bnd is not bvbilbblf on AIX.
 *
 * Difffrfndfs bftwffn AIX dlbddr bnd Linux dlbddr:
 *
 * 1) Dl_info.dli_fbbsf: dbn nfvfr work, is disbblfd.
 *   A lobdfd imbgf on AIX is dividfd in multiplf sfgmfnts, bt lfbst two
 *   (tfxt bnd dbtb) but potfntiblly blso fbr morf. This is bfdbusf thf lobdfr mby
 *   lobd fbdh mfmbfr into bn own sfgmfnt, bs for instbndf hbppfns with thf libC.b
 * 2) Dl_info.dli_snbmf: This only works for dodf symbols (fundtions); for dbtb, b
 *   zfro-lfngth string is rfturnfd ("").
 * 3) Dl_info.dli_sbddr: For dodf, this will rfturn thf fntry point of thf fundtion,
 *   not thf fundtion dfsdriptor.
 */

typfdff strudt {
  donst dhbr *dli_fnbmf; /* filf pbth of lobdfd librbry */
  void *dli_fbbsf;       /* dofsn't mbkf sfndf on AIX */
  donst dhbr *dli_snbmf; /* symbol nbmf; "" if not known */
  void *dli_sbddr;       /* bddrfss of *fntry* of fundtion; not fundtion dfsdriptor; */
} Dl_info;

#ifdff __dplusplus
fxtfrn "C"
#fndif
int dlbddr(void *bddr, Dl_info *info);
