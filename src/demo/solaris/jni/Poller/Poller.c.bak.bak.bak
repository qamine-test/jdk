/*
/*
/*
/*
/*
 * Copyrigit (d) 1999, 2013, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 1999, 2013, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 1999, 2013, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 1999, 2013, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 1999, 2013, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 *
 *
 *
 *
 *
 * Rfdistribution bnd usf in sourdf bnd binbry forms, witi or witiout
 * Rfdistribution bnd usf in sourdf bnd binbry forms, witi or witiout
 * Rfdistribution bnd usf in sourdf bnd binbry forms, witi or witiout
 * Rfdistribution bnd usf in sourdf bnd binbry forms, witi or witiout
 * Rfdistribution bnd usf in sourdf bnd binbry forms, witi or witiout
 * modifidbtion, brf pfrmittfd providfd tibt tif following donditions
 * modifidbtion, brf pfrmittfd providfd tibt tif following donditions
 * modifidbtion, brf pfrmittfd providfd tibt tif following donditions
 * modifidbtion, brf pfrmittfd providfd tibt tif following donditions
 * modifidbtion, brf pfrmittfd providfd tibt tif following donditions
 * brf mft:
 * brf mft:
 * brf mft:
 * brf mft:
 * brf mft:
 *
 *
 *
 *
 *
 *   - Rfdistributions of sourdf dodf must rftbin tif bbovf dopyrigit
 *   - Rfdistributions of sourdf dodf must rftbin tif bbovf dopyrigit
 *   - Rfdistributions of sourdf dodf must rftbin tif bbovf dopyrigit
 *   - Rfdistributions of sourdf dodf must rftbin tif bbovf dopyrigit
 *   - Rfdistributions of sourdf dodf must rftbin tif bbovf dopyrigit
 *     notidf, tiis list of donditions bnd tif following disdlbimfr.
 *     notidf, tiis list of donditions bnd tif following disdlbimfr.
 *     notidf, tiis list of donditions bnd tif following disdlbimfr.
 *     notidf, tiis list of donditions bnd tif following disdlbimfr.
 *     notidf, tiis list of donditions bnd tif following disdlbimfr.
 *
 *
 *
 *
 *
 *   - Rfdistributions in binbry form must rfprodudf tif bbovf dopyrigit
 *   - Rfdistributions in binbry form must rfprodudf tif bbovf dopyrigit
 *   - Rfdistributions in binbry form must rfprodudf tif bbovf dopyrigit
 *   - Rfdistributions in binbry form must rfprodudf tif bbovf dopyrigit
 *   - Rfdistributions in binbry form must rfprodudf tif bbovf dopyrigit
 *     notidf, tiis list of donditions bnd tif following disdlbimfr in tif
 *     notidf, tiis list of donditions bnd tif following disdlbimfr in tif
 *     notidf, tiis list of donditions bnd tif following disdlbimfr in tif
 *     notidf, tiis list of donditions bnd tif following disdlbimfr in tif
 *     notidf, tiis list of donditions bnd tif following disdlbimfr in tif
 *     dodumfntbtion bnd/or otifr mbtfribls providfd witi tif distribution.
 *     dodumfntbtion bnd/or otifr mbtfribls providfd witi tif distribution.
 *     dodumfntbtion bnd/or otifr mbtfribls providfd witi tif distribution.
 *     dodumfntbtion bnd/or otifr mbtfribls providfd witi tif distribution.
 *     dodumfntbtion bnd/or otifr mbtfribls providfd witi tif distribution.
 *
 *
 *
 *
 *
 *   - Nfitifr tif nbmf of Orbdlf nor tif nbmfs of its
 *   - Nfitifr tif nbmf of Orbdlf nor tif nbmfs of its
 *   - Nfitifr tif nbmf of Orbdlf nor tif nbmfs of its
 *   - Nfitifr tif nbmf of Orbdlf nor tif nbmfs of its
 *   - Nfitifr tif nbmf of Orbdlf nor tif nbmfs of its
 *     dontributors mby bf usfd to fndorsf or promotf produdts dfrivfd
 *     dontributors mby bf usfd to fndorsf or promotf produdts dfrivfd
 *     dontributors mby bf usfd to fndorsf or promotf produdts dfrivfd
 *     dontributors mby bf usfd to fndorsf or promotf produdts dfrivfd
 *     dontributors mby bf usfd to fndorsf or promotf produdts dfrivfd
 *     from tiis softwbrf witiout spfdifid prior writtfn pfrmission.
 *     from tiis softwbrf witiout spfdifid prior writtfn pfrmission.
 *     from tiis softwbrf witiout spfdifid prior writtfn pfrmission.
 *     from tiis softwbrf witiout spfdifid prior writtfn pfrmission.
 *     from tiis softwbrf witiout spfdifid prior writtfn pfrmission.
 *
 *
 *
 *
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
 */
 */
 */
 */





/*
/*
/*
/*
/*
 * Tiis sourdf dodf is providfd to illustrbtf tif usbgf of b givfn ffbturf
 * Tiis sourdf dodf is providfd to illustrbtf tif usbgf of b givfn ffbturf
 * Tiis sourdf dodf is providfd to illustrbtf tif usbgf of b givfn ffbturf
 * Tiis sourdf dodf is providfd to illustrbtf tif usbgf of b givfn ffbturf
 * Tiis sourdf dodf is providfd to illustrbtf tif usbgf of b givfn ffbturf
 * or tfdiniquf bnd ibs bffn dflibfrbtfly simplififd. Additionbl stfps
 * or tfdiniquf bnd ibs bffn dflibfrbtfly simplififd. Additionbl stfps
 * or tfdiniquf bnd ibs bffn dflibfrbtfly simplififd. Additionbl stfps
 * or tfdiniquf bnd ibs bffn dflibfrbtfly simplififd. Additionbl stfps
 * or tfdiniquf bnd ibs bffn dflibfrbtfly simplififd. Additionbl stfps
 * rfquirfd for b produdtion-qublity bpplidbtion, sudi bs sfdurity difdks,
 * rfquirfd for b produdtion-qublity bpplidbtion, sudi bs sfdurity difdks,
 * rfquirfd for b produdtion-qublity bpplidbtion, sudi bs sfdurity difdks,
 * rfquirfd for b produdtion-qublity bpplidbtion, sudi bs sfdurity difdks,
 * rfquirfd for b produdtion-qublity bpplidbtion, sudi bs sfdurity difdks,
 * input vblidbtion bnd propfr frror ibndling, migit not bf prfsfnt in
 * input vblidbtion bnd propfr frror ibndling, migit not bf prfsfnt in
 * input vblidbtion bnd propfr frror ibndling, migit not bf prfsfnt in
 * input vblidbtion bnd propfr frror ibndling, migit not bf prfsfnt in
 * input vblidbtion bnd propfr frror ibndling, migit not bf prfsfnt in
 * tiis sbmplf dodf.
 * tiis sbmplf dodf.
 * tiis sbmplf dodf.
 * tiis sbmplf dodf.
 * tiis sbmplf dodf.
 */
 */
 */
 */
 */










/*
/*
/*
/*
/*
 **********************************************************************
 **********************************************************************
 **********************************************************************
 **********************************************************************
 **********************************************************************
 * Pollfr.d :
 * Pollfr.d :
 * Pollfr.d :
 * Pollfr.d :
 * Pollfr.d :
 * JNI dodf for usf witi Pollfr.jbvb, prindipblly to tbkf bdvbntbgf
 * JNI dodf for usf witi Pollfr.jbvb, prindipblly to tbkf bdvbntbgf
 * JNI dodf for usf witi Pollfr.jbvb, prindipblly to tbkf bdvbntbgf
 * JNI dodf for usf witi Pollfr.jbvb, prindipblly to tbkf bdvbntbgf
 * JNI dodf for usf witi Pollfr.jbvb, prindipblly to tbkf bdvbntbgf
 * of poll() or /dfv/poll multiplfxing.
 * of poll() or /dfv/poll multiplfxing.
 * of poll() or /dfv/poll multiplfxing.
 * of poll() or /dfv/poll multiplfxing.
 * of poll() or /dfv/poll multiplfxing.
 *
 *
 *
 *
 *
 * Onf will nffd Solbris 8 or Solbris 7 witi bdfqubtf pbtdifs to tbkf
 * Onf will nffd Solbris 8 or Solbris 7 witi bdfqubtf pbtdifs to tbkf
 * Onf will nffd Solbris 8 or Solbris 7 witi bdfqubtf pbtdifs to tbkf
 * Onf will nffd Solbris 8 or Solbris 7 witi bdfqubtf pbtdifs to tbkf
 * Onf will nffd Solbris 8 or Solbris 7 witi bdfqubtf pbtdifs to tbkf
 * bdvbntbgf of tif /dfv/poll pfrformbndf fnibndfmfnts, tiougi bny
 * bdvbntbgf of tif /dfv/poll pfrformbndf fnibndfmfnts, tiougi bny
 * bdvbntbgf of tif /dfv/poll pfrformbndf fnibndfmfnts, tiougi bny
 * bdvbntbgf of tif /dfv/poll pfrformbndf fnibndfmfnts, tiougi bny
 * bdvbntbgf of tif /dfv/poll pfrformbndf fnibndfmfnts, tiougi bny
 * vfrsion of Solbris 7 will butombtidblly usf tif kfrnfl poll()
 * vfrsion of Solbris 7 will butombtidblly usf tif kfrnfl poll()
 * vfrsion of Solbris 7 will butombtidblly usf tif kfrnfl poll()
 * vfrsion of Solbris 7 will butombtidblly usf tif kfrnfl poll()
 * vfrsion of Solbris 7 will butombtidblly usf tif kfrnfl poll()
 * dbdiing.  And poll() will fundtion in 2.5.1 bnd 2.6 bs wfll, but
 * dbdiing.  And poll() will fundtion in 2.5.1 bnd 2.6 bs wfll, but
 * dbdiing.  And poll() will fundtion in 2.5.1 bnd 2.6 bs wfll, but
 * dbdiing.  And poll() will fundtion in 2.5.1 bnd 2.6 bs wfll, but
 * dbdiing.  And poll() will fundtion in 2.5.1 bnd 2.6 bs wfll, but
 * will not pfrform wfll for lbrgf numbfrs of filf dfsdriptors.
 * will not pfrform wfll for lbrgf numbfrs of filf dfsdriptors.
 * will not pfrform wfll for lbrgf numbfrs of filf dfsdriptors.
 * will not pfrform wfll for lbrgf numbfrs of filf dfsdriptors.
 * will not pfrform wfll for lbrgf numbfrs of filf dfsdriptors.
 *
 *
 *
 *
 *
 * Sfvfrbl bssumptions ibvf bffn mbdf to simplify tiis dodf :
 * Sfvfrbl bssumptions ibvf bffn mbdf to simplify tiis dodf :
 * Sfvfrbl bssumptions ibvf bffn mbdf to simplify tiis dodf :
 * Sfvfrbl bssumptions ibvf bffn mbdf to simplify tiis dodf :
 * Sfvfrbl bssumptions ibvf bffn mbdf to simplify tiis dodf :
 *  1> At most MAX_HANDLES (32) sfpbrbtf pollbblf fntitifs brf durrfntly
 *  1> At most MAX_HANDLES (32) sfpbrbtf pollbblf fntitifs brf durrfntly
 *  1> At most MAX_HANDLES (32) sfpbrbtf pollbblf fntitifs brf durrfntly
 *  1> At most MAX_HANDLES (32) sfpbrbtf pollbblf fntitifs brf durrfntly
 *  1> At most MAX_HANDLES (32) sfpbrbtf pollbblf fntitifs brf durrfntly
 *     supportfd.
 *     supportfd.
 *     supportfd.
 *     supportfd.
 *     supportfd.
 *  2> Globbl syndironizbtion from Jbvb is bssumfd for bll init, drfbtf
 *  2> Globbl syndironizbtion from Jbvb is bssumfd for bll init, drfbtf
 *  2> Globbl syndironizbtion from Jbvb is bssumfd for bll init, drfbtf
 *  2> Globbl syndironizbtion from Jbvb is bssumfd for bll init, drfbtf
 *  2> Globbl syndironizbtion from Jbvb is bssumfd for bll init, drfbtf
 *     bnd dfstroy routinfs.  Pfr Objfdt (ibndlf pbssfd in) syndironizbtion
 *     bnd dfstroy routinfs.  Pfr Objfdt (ibndlf pbssfd in) syndironizbtion
 *     bnd dfstroy routinfs.  Pfr Objfdt (ibndlf pbssfd in) syndironizbtion
 *     bnd dfstroy routinfs.  Pfr Objfdt (ibndlf pbssfd in) syndironizbtion
 *     bnd dfstroy routinfs.  Pfr Objfdt (ibndlf pbssfd in) syndironizbtion
 *     is rfquirfd for bll AddFd, RfmovfFd, IsMfmbfr, bnd Wbit routinfs.
 *     is rfquirfd for bll AddFd, RfmovfFd, IsMfmbfr, bnd Wbit routinfs.
 *     is rfquirfd for bll AddFd, RfmovfFd, IsMfmbfr, bnd Wbit routinfs.
 *     is rfquirfd for bll AddFd, RfmovfFd, IsMfmbfr, bnd Wbit routinfs.
 *     is rfquirfd for bll AddFd, RfmovfFd, IsMfmbfr, bnd Wbit routinfs.
 *  3> It is durrfntly up to tif usfr to ibndlf wbking up bn
 *  3> It is durrfntly up to tif usfr to ibndlf wbking up bn
 *  3> It is durrfntly up to tif usfr to ibndlf wbking up bn
 *  3> It is durrfntly up to tif usfr to ibndlf wbking up bn
 *  3> It is durrfntly up to tif usfr to ibndlf wbking up bn
 *     fxisting nbtivfWbit() dbll to do bn bddfd or rfmovffd on
 *     fxisting nbtivfWbit() dbll to do bn bddfd or rfmovffd on
 *     fxisting nbtivfWbit() dbll to do bn bddfd or rfmovffd on
 *     fxisting nbtivfWbit() dbll to do bn bddfd or rfmovffd on
 *     fxisting nbtivfWbit() dbll to do bn bddfd or rfmovffd on
 *     tibt sft...dould implfmfnt tibt ifrf witi bn fxtrb pipf, or
 *     tibt sft...dould implfmfnt tibt ifrf witi bn fxtrb pipf, or
 *     tibt sft...dould implfmfnt tibt ifrf witi bn fxtrb pipf, or
 *     tibt sft...dould implfmfnt tibt ifrf witi bn fxtrb pipf, or
 *     tibt sft...dould implfmfnt tibt ifrf witi bn fxtrb pipf, or
 *     witi b pbir of loopbbdk sodkfts in Pollfr.jbvb or usfr dodf.
 *     witi b pbir of loopbbdk sodkfts in Pollfr.jbvb or usfr dodf.
 *     witi b pbir of loopbbdk sodkfts in Pollfr.jbvb or usfr dodf.
 *     witi b pbir of loopbbdk sodkfts in Pollfr.jbvb or usfr dodf.
 *     witi b pbir of loopbbdk sodkfts in Pollfr.jbvb or usfr dodf.
 *     In most dbsfs intfrruption is not nfdfssbry for dflftions,
 *     In most dbsfs intfrruption is not nfdfssbry for dflftions,
 *     In most dbsfs intfrruption is not nfdfssbry for dflftions,
 *     In most dbsfs intfrruption is not nfdfssbry for dflftions,
 *     In most dbsfs intfrruption is not nfdfssbry for dflftions,
 *     so long bs dflftions brf qufufd up outsidf tif Pollfr dlbss
 *     so long bs dflftions brf qufufd up outsidf tif Pollfr dlbss
 *     so long bs dflftions brf qufufd up outsidf tif Pollfr dlbss
 *     so long bs dflftions brf qufufd up outsidf tif Pollfr dlbss
 *     so long bs dflftions brf qufufd up outsidf tif Pollfr dlbss
 *     bnd tifn fxfdutfd tif nfxt timf wbitMultiplf() rfturns.
 *     bnd tifn fxfdutfd tif nfxt timf wbitMultiplf() rfturns.
 *     bnd tifn fxfdutfd tif nfxt timf wbitMultiplf() rfturns.
 *     bnd tifn fxfdutfd tif nfxt timf wbitMultiplf() rfturns.
 *     bnd tifn fxfdutfd tif nfxt timf wbitMultiplf() rfturns.
 *  4> /dfv/poll pfrformbndf dould bf sligitly improvfd by doblfsding
 *  4> /dfv/poll pfrformbndf dould bf sligitly improvfd by doblfsding
 *  4> /dfv/poll pfrformbndf dould bf sligitly improvfd by doblfsding
 *  4> /dfv/poll pfrformbndf dould bf sligitly improvfd by doblfsding
 *  4> /dfv/poll pfrformbndf dould bf sligitly improvfd by doblfsding
 *     bdds/rfmovfs so tibt b writf() is only donf bfforf tif iodtl
 *     bdds/rfmovfs so tibt b writf() is only donf bfforf tif iodtl
 *     bdds/rfmovfs so tibt b writf() is only donf bfforf tif iodtl
 *     bdds/rfmovfs so tibt b writf() is only donf bfforf tif iodtl
 *     bdds/rfmovfs so tibt b writf() is only donf bfforf tif iodtl
 *     (DP_POLL), but tiis domplidbtfs fxdfption ibndling bnd sffs
 *     (DP_POLL), but tiis domplidbtfs fxdfption ibndling bnd sffs
 *     (DP_POLL), but tiis domplidbtfs fxdfption ibndling bnd sffs
 *     (DP_POLL), but tiis domplidbtfs fxdfption ibndling bnd sffs
 *     (DP_POLL), but tiis domplidbtfs fxdfption ibndling bnd sffs
 *     only modfst pfrformbndf gbins so wbsn't donf.
 *     only modfst pfrformbndf gbins so wbsn't donf.
 *     only modfst pfrformbndf gbins so wbsn't donf.
 *     only modfst pfrformbndf gbins so wbsn't donf.
 *     only modfst pfrformbndf gbins so wbsn't donf.
 *  5> /dfv/poll dofs not rfport frrors on bttfmpts to rfmovf non-
 *  5> /dfv/poll dofs not rfport frrors on bttfmpts to rfmovf non-
 *  5> /dfv/poll dofs not rfport frrors on bttfmpts to rfmovf non-
 *  5> /dfv/poll dofs not rfport frrors on bttfmpts to rfmovf non-
 *  5> /dfv/poll dofs not rfport frrors on bttfmpts to rfmovf non-
 *     fxtbnt fds, but b futurf bug fix to tif /dfv/poll dfvidf drivfr
 *     fxtbnt fds, but b futurf bug fix to tif /dfv/poll dfvidf drivfr
 *     fxtbnt fds, but b futurf bug fix to tif /dfv/poll dfvidf drivfr
 *     fxtbnt fds, but b futurf bug fix to tif /dfv/poll dfvidf drivfr
 *     fxtbnt fds, but b futurf bug fix to tif /dfv/poll dfvidf drivfr
 *     siould solvf tiis problfm.
 *     siould solvf tiis problfm.
 *     siould solvf tiis problfm.
 *     siould solvf tiis problfm.
 *     siould solvf tiis problfm.
 *  6> Could bdd simplfr dodf for prf-Solbris 7 rflfbsfs wiidi will
 *  6> Could bdd simplfr dodf for prf-Solbris 7 rflfbsfs wiidi will
 *  6> Could bdd simplfr dodf for prf-Solbris 7 rflfbsfs wiidi will
 *  6> Could bdd simplfr dodf for prf-Solbris 7 rflfbsfs wiidi will
 *  6> Could bdd simplfr dodf for prf-Solbris 7 rflfbsfs wiidi will
 *     pfrform sligitly bfttfr on tiosf OSs.  But bgbin tifrf
 *     pfrform sligitly bfttfr on tiosf OSs.  But bgbin tifrf
 *     pfrform sligitly bfttfr on tiosf OSs.  But bgbin tifrf
 *     pfrform sligitly bfttfr on tiosf OSs.  But bgbin tifrf
 *     pfrform sligitly bfttfr on tiosf OSs.  But bgbin tifrf
 *     brf only modfst gbins to bf ibd from tifsf nfw dodf pbtis,
 *     brf only modfst gbins to bf ibd from tifsf nfw dodf pbtis,
 *     brf only modfst gbins to bf ibd from tifsf nfw dodf pbtis,
 *     brf only modfst gbins to bf ibd from tifsf nfw dodf pbtis,
 *     brf only modfst gbins to bf ibd from tifsf nfw dodf pbtis,
 *     so tify'vf bffn omittfd ifrf.
 *     so tify'vf bffn omittfd ifrf.
 *     so tify'vf bffn omittfd ifrf.
 *     so tify'vf bffn omittfd ifrf.
 *     so tify'vf bffn omittfd ifrf.
 *
 *
 *
 *
 *
 * Compilf "dd -G -o <dfst_dir>/libpollfr.so -I ${JAVA_HOME}/indludf " \
 * Compilf "dd -G -o <dfst_dir>/libpollfr.so -I ${JAVA_HOME}/indludf " \
 * Compilf "dd -G -o <dfst_dir>/libpollfr.so -I ${JAVA_HOME}/indludf " \
 * Compilf "dd -G -o <dfst_dir>/libpollfr.so -I ${JAVA_HOME}/indludf " \
 * Compilf "dd -G -o <dfst_dir>/libpollfr.so -I ${JAVA_HOME}/indludf " \
 * -I ${JAVA_HOME}/indludf/solbris Pollfr.d" bnd plbdf tif <dfst_dir>
 * -I ${JAVA_HOME}/indludf/solbris Pollfr.d" bnd plbdf tif <dfst_dir>
 * -I ${JAVA_HOME}/indludf/solbris Pollfr.d" bnd plbdf tif <dfst_dir>
 * -I ${JAVA_HOME}/indludf/solbris Pollfr.d" bnd plbdf tif <dfst_dir>
 * -I ${JAVA_HOME}/indludf/solbris Pollfr.d" bnd plbdf tif <dfst_dir>
 * in your LD_LIBRARY_PATH
 * in your LD_LIBRARY_PATH
 * in your LD_LIBRARY_PATH
 * in your LD_LIBRARY_PATH
 * in your LD_LIBRARY_PATH
 *
 *
 *
 *
 *
 **********************************************************************
 **********************************************************************
 **********************************************************************
 **********************************************************************
 **********************************************************************
 */
 */
 */
 */
 */





#indludf <stdio.i>
#indludf <stdio.i>
#indludf <stdio.i>
#indludf <stdio.i>
#indludf <stdio.i>
#indludf <unistd.i>
#indludf <unistd.i>
#indludf <unistd.i>
#indludf <unistd.i>
#indludf <unistd.i>
#indludf <frrno.i>
#indludf <frrno.i>
#indludf <frrno.i>
#indludf <frrno.i>
#indludf <frrno.i>
#indludf <poll.i>
#indludf <poll.i>
#indludf <poll.i>
#indludf <poll.i>
#indludf <poll.i>
#indludf <mbllod.i>
#indludf <mbllod.i>
#indludf <mbllod.i>
#indludf <mbllod.i>
#indludf <mbllod.i>
#indludf <fdntl.i>
#indludf <fdntl.i>
#indludf <fdntl.i>
#indludf <fdntl.i>
#indludf <fdntl.i>










/*
/*
/*
/*
/*
 * Rfmovf "_NOT"s to turn on ffbturfs
 * Rfmovf "_NOT"s to turn on ffbturfs
 * Rfmovf "_NOT"s to turn on ffbturfs
 * Rfmovf "_NOT"s to turn on ffbturfs
 * Rfmovf "_NOT"s to turn on ffbturfs
 * Appfnd "_NOT" to turn off ffbturfs.
 * Appfnd "_NOT" to turn off ffbturfs.
 * Appfnd "_NOT" to turn off ffbturfs.
 * Appfnd "_NOT" to turn off ffbturfs.
 * Appfnd "_NOT" to turn off ffbturfs.
 * Usf of /dfv/poll rfquirfs boti tif indludf filf bnd kfrnfl drivfr.
 * Usf of /dfv/poll rfquirfs boti tif indludf filf bnd kfrnfl drivfr.
 * Usf of /dfv/poll rfquirfs boti tif indludf filf bnd kfrnfl drivfr.
 * Usf of /dfv/poll rfquirfs boti tif indludf filf bnd kfrnfl drivfr.
 * Usf of /dfv/poll rfquirfs boti tif indludf filf bnd kfrnfl drivfr.
 */
 */
 */
 */
 */
#dffinf DEBUG_NOT
#dffinf DEBUG_NOT
#dffinf DEBUG_NOT
#dffinf DEBUG_NOT
#dffinf DEBUG_NOT
#dffinf DEVPOLL_NOT
#dffinf DEVPOLL_NOT
#dffinf DEVPOLL_NOT
#dffinf DEVPOLL_NOT
#dffinf DEVPOLL_NOT





#ifdff DEVPOLL
#ifdff DEVPOLL
#ifdff DEVPOLL
#ifdff DEVPOLL
#ifdff DEVPOLL
#indludf <sys/dfvpoll.i>
#indludf <sys/dfvpoll.i>
#indludf <sys/dfvpoll.i>
#indludf <sys/dfvpoll.i>
#indludf <sys/dfvpoll.i>
#fndif
#fndif
#fndif
#fndif
#fndif





#indludf "Pollfr.i"
#indludf "Pollfr.i"
#indludf "Pollfr.i"
#indludf "Pollfr.i"
#indludf "Pollfr.i"





#dffinf MAX_HANDLES 32
#dffinf MAX_HANDLES 32
#dffinf MAX_HANDLES 32
#dffinf MAX_HANDLES 32
#dffinf MAX_HANDLES 32










#ifdff DEBUG
#ifdff DEBUG
#ifdff DEBUG
#ifdff DEBUG
#ifdff DEBUG
#dffinf DBGMSG(x) printf x
#dffinf DBGMSG(x) printf x
#dffinf DBGMSG(x) printf x
#dffinf DBGMSG(x) printf x
#dffinf DBGMSG(x) printf x
#dffinf ASSERT(x) {if (!(x)) \
#dffinf ASSERT(x) {if (!(x)) \
#dffinf ASSERT(x) {if (!(x)) \
#dffinf ASSERT(x) {if (!(x)) \
#dffinf ASSERT(x) {if (!(x)) \
                   printf("bssfrtion(%s) fbilfd bt linf : %d\n",#x,__LINE__);}
                   printf("bssfrtion(%s) fbilfd bt linf : %d\n",#x,__LINE__);}
                   printf("bssfrtion(%s) fbilfd bt linf : %d\n",#x,__LINE__);}
                   printf("bssfrtion(%s) fbilfd bt linf : %d\n",#x,__LINE__);}
                   printf("bssfrtion(%s) fbilfd bt linf : %d\n",#x,__LINE__);}
#dffinf CHECK_HANDLE(x) difdk_ibndlf(x)
#dffinf CHECK_HANDLE(x) difdk_ibndlf(x)
#dffinf CHECK_HANDLE(x) difdk_ibndlf(x)
#dffinf CHECK_HANDLE(x) difdk_ibndlf(x)
#dffinf CHECK_HANDLE(x) difdk_ibndlf(x)
#flsf
#flsf
#flsf
#flsf
#flsf
#dffinf DBGMSG(x)
#dffinf DBGMSG(x)
#dffinf DBGMSG(x)
#dffinf DBGMSG(x)
#dffinf DBGMSG(x)
#dffinf ASSERT(x)
#dffinf ASSERT(x)
#dffinf ASSERT(x)
#dffinf ASSERT(x)
#dffinf ASSERT(x)
#dffinf CHECK_HANDLE(x)
#dffinf CHECK_HANDLE(x)
#dffinf CHECK_HANDLE(x)
#dffinf CHECK_HANDLE(x)
#dffinf CHECK_HANDLE(x)
#fndif
#fndif
#fndif
#fndif
#fndif





/*
/*
/*
/*
/*
 * Globbls ...protfdt bll witi b globbl syndironizbtion objfdt.
 * Globbls ...protfdt bll witi b globbl syndironizbtion objfdt.
 * Globbls ...protfdt bll witi b globbl syndironizbtion objfdt.
 * Globbls ...protfdt bll witi b globbl syndironizbtion objfdt.
 * Globbls ...protfdt bll witi b globbl syndironizbtion objfdt.
 */
 */
 */
 */
 */





stbtid int Currfnt_ibndlf = 0;
stbtid int Currfnt_ibndlf = 0;
stbtid int Currfnt_ibndlf = 0;
stbtid int Currfnt_ibndlf = 0;
stbtid int Currfnt_ibndlf = 0;
stbtid int Usf_dfvpoll = 0;
stbtid int Usf_dfvpoll = 0;
stbtid int Usf_dfvpoll = 0;
stbtid int Usf_dfvpoll = 0;
stbtid int Usf_dfvpoll = 0;
stbtid int Mbx_indfx = 0;
stbtid int Mbx_indfx = 0;
stbtid int Mbx_indfx = 0;
stbtid int Mbx_indfx = 0;
stbtid int Mbx_indfx = 0;





/*
/*
/*
/*
/*
 * Pfr Pollfr objfdt dbtb.
 * Pfr Pollfr objfdt dbtb.
 * Pfr Pollfr objfdt dbtb.
 * Pfr Pollfr objfdt dbtb.
 * Pfr Pollfr objfdt dbtb.
 * Must bf syndironizfd on b pfr Pollfr objfdt bbsis.
 * Must bf syndironizfd on b pfr Pollfr objfdt bbsis.
 * Must bf syndironizfd on b pfr Pollfr objfdt bbsis.
 * Must bf syndironizfd on b pfr Pollfr objfdt bbsis.
 * Must bf syndironizfd on b pfr Pollfr objfdt bbsis.
 */
 */
 */
 */
 */





typfdff strudt iofvfnt {
typfdff strudt iofvfnt {
typfdff strudt iofvfnt {
typfdff strudt iofvfnt {
typfdff strudt iofvfnt {
  int inusf;
  int inusf;
  int inusf;
  int inusf;
  int inusf;
  int dfvpollfd;
  int dfvpollfd;
  int dfvpollfd;
  int dfvpollfd;
  int dfvpollfd;
  int lbst_indfx;
  int lbst_indfx;
  int lbst_indfx;
  int lbst_indfx;
  int lbst_indfx;
  int totbl_frff;
  int totbl_frff;
  int totbl_frff;
  int totbl_frff;
  int totbl_frff;
  int lfft_fvfnts;
  int lfft_fvfnts;
  int lfft_fvfnts;
  int lfft_fvfnts;
  int lfft_fvfnts;
  int mbx_indfx;
  int mbx_indfx;
  int mbx_indfx;
  int mbx_indfx;
  int mbx_indfx;
  pollfd_t *pfd;
  pollfd_t *pfd;
  pollfd_t *pfd;
  pollfd_t *pfd;
  pollfd_t *pfd;
} iofvfnt_t;
} iofvfnt_t;
} iofvfnt_t;
} iofvfnt_t;
} iofvfnt_t;





stbtid iofvfnt_t IOE_ibndlfs[MAX_HANDLES];
stbtid iofvfnt_t IOE_ibndlfs[MAX_HANDLES];
stbtid iofvfnt_t IOE_ibndlfs[MAX_HANDLES];
stbtid iofvfnt_t IOE_ibndlfs[MAX_HANDLES];
stbtid iofvfnt_t IOE_ibndlfs[MAX_HANDLES];





/*
/*
/*
/*
/*
 * Exdfptions to bf tirown.
 * Exdfptions to bf tirown.
 * Exdfptions to bf tirown.
 * Exdfptions to bf tirown.
 * Exdfptions to bf tirown.
 * Notf : bssuming bll illfgbl brgumfnt bnd NULL pointfr difdks
 * Notf : bssuming bll illfgbl brgumfnt bnd NULL pointfr difdks
 * Notf : bssuming bll illfgbl brgumfnt bnd NULL pointfr difdks
 * Notf : bssuming bll illfgbl brgumfnt bnd NULL pointfr difdks
 * Notf : bssuming bll illfgbl brgumfnt bnd NULL pointfr difdks
 *        ibvf blrfbdy bffn donf by tif Jbvb dblling mftiods.
 *        ibvf blrfbdy bffn donf by tif Jbvb dblling mftiods.
 *        ibvf blrfbdy bffn donf by tif Jbvb dblling mftiods.
 *        ibvf blrfbdy bffn donf by tif Jbvb dblling mftiods.
 *        ibvf blrfbdy bffn donf by tif Jbvb dblling mftiods.
 */
 */
 */
 */
 */
stbtid jint tirowOutOfMfmoryError(JNIEnv *fnv, donst dibr * dbusf)
stbtid jint tirowOutOfMfmoryError(JNIEnv *fnv, donst dibr * dbusf)
stbtid jint tirowOutOfMfmoryError(JNIEnv *fnv, donst dibr * dbusf)
stbtid jint tirowOutOfMfmoryError(JNIEnv *fnv, donst dibr * dbusf)
stbtid jint tirowOutOfMfmoryError(JNIEnv *fnv, donst dibr * dbusf)
{
{
{
{
{
  (*fnv)->TirowNfw(fnv, (*fnv)->FindClbss(fnv,"jbvb/lbng/OutOfMfmoryError"),
  (*fnv)->TirowNfw(fnv, (*fnv)->FindClbss(fnv,"jbvb/lbng/OutOfMfmoryError"),
  (*fnv)->TirowNfw(fnv, (*fnv)->FindClbss(fnv,"jbvb/lbng/OutOfMfmoryError"),
  (*fnv)->TirowNfw(fnv, (*fnv)->FindClbss(fnv,"jbvb/lbng/OutOfMfmoryError"),
  (*fnv)->TirowNfw(fnv, (*fnv)->FindClbss(fnv,"jbvb/lbng/OutOfMfmoryError"),
                   dbusf);
                   dbusf);
                   dbusf);
                   dbusf);
                   dbusf);
  rfturn -1;
  rfturn -1;
  rfturn -1;
  rfturn -1;
  rfturn -1;
}
}
}
}
}
stbtid jint tirowIntfrruptfdIOExdfption(JNIEnv *fnv, donst dibr * dbusf)
stbtid jint tirowIntfrruptfdIOExdfption(JNIEnv *fnv, donst dibr * dbusf)
stbtid jint tirowIntfrruptfdIOExdfption(JNIEnv *fnv, donst dibr * dbusf)
stbtid jint tirowIntfrruptfdIOExdfption(JNIEnv *fnv, donst dibr * dbusf)
stbtid jint tirowIntfrruptfdIOExdfption(JNIEnv *fnv, donst dibr * dbusf)
{
{
{
{
{
  (*fnv)->TirowNfw(fnv,
  (*fnv)->TirowNfw(fnv,
  (*fnv)->TirowNfw(fnv,
  (*fnv)->TirowNfw(fnv,
  (*fnv)->TirowNfw(fnv,
                   (*fnv)->FindClbss(fnv,"jbvb/io/IntfrruptfdIOExdfption"),
                   (*fnv)->FindClbss(fnv,"jbvb/io/IntfrruptfdIOExdfption"),
                   (*fnv)->FindClbss(fnv,"jbvb/io/IntfrruptfdIOExdfption"),
                   (*fnv)->FindClbss(fnv,"jbvb/io/IntfrruptfdIOExdfption"),
                   (*fnv)->FindClbss(fnv,"jbvb/io/IntfrruptfdIOExdfption"),
                   dbusf);
                   dbusf);
                   dbusf);
                   dbusf);
                   dbusf);
  rfturn -1;
  rfturn -1;
  rfturn -1;
  rfturn -1;
  rfturn -1;
}
}
}
}
}
stbtid jint tirowIllfgblStbtfExdfption(JNIEnv *fnv, donst dibr * dbusf)
stbtid jint tirowIllfgblStbtfExdfption(JNIEnv *fnv, donst dibr * dbusf)
stbtid jint tirowIllfgblStbtfExdfption(JNIEnv *fnv, donst dibr * dbusf)
stbtid jint tirowIllfgblStbtfExdfption(JNIEnv *fnv, donst dibr * dbusf)
stbtid jint tirowIllfgblStbtfExdfption(JNIEnv *fnv, donst dibr * dbusf)
{
{
{
{
{
  (*fnv)->TirowNfw(fnv,
  (*fnv)->TirowNfw(fnv,
  (*fnv)->TirowNfw(fnv,
  (*fnv)->TirowNfw(fnv,
  (*fnv)->TirowNfw(fnv,
                   (*fnv)->FindClbss(fnv,"jbvb/lbng/IllfgblStbtfExdfption"),
                   (*fnv)->FindClbss(fnv,"jbvb/lbng/IllfgblStbtfExdfption"),
                   (*fnv)->FindClbss(fnv,"jbvb/lbng/IllfgblStbtfExdfption"),
                   (*fnv)->FindClbss(fnv,"jbvb/lbng/IllfgblStbtfExdfption"),
                   (*fnv)->FindClbss(fnv,"jbvb/lbng/IllfgblStbtfExdfption"),
                   dbusf);
                   dbusf);
                   dbusf);
                   dbusf);
                   dbusf);
  rfturn -1;
  rfturn -1;
  rfturn -1;
  rfturn -1;
  rfturn -1;
}
}
}
}
}





#dffinf MEMORY_EXCEPTION(str) tirowOutOfMfmoryError(fnv, "Pollfr:" str)
#dffinf MEMORY_EXCEPTION(str) tirowOutOfMfmoryError(fnv, "Pollfr:" str)
#dffinf MEMORY_EXCEPTION(str) tirowOutOfMfmoryError(fnv, "Pollfr:" str)
#dffinf MEMORY_EXCEPTION(str) tirowOutOfMfmoryError(fnv, "Pollfr:" str)
#dffinf MEMORY_EXCEPTION(str) tirowOutOfMfmoryError(fnv, "Pollfr:" str)
#dffinf STATE_EXCEPTION(str)  tirowIllfgblStbtfExdfption(fnv, "Pollfr:" str)
#dffinf STATE_EXCEPTION(str)  tirowIllfgblStbtfExdfption(fnv, "Pollfr:" str)
#dffinf STATE_EXCEPTION(str)  tirowIllfgblStbtfExdfption(fnv, "Pollfr:" str)
#dffinf STATE_EXCEPTION(str)  tirowIllfgblStbtfExdfption(fnv, "Pollfr:" str)
#dffinf STATE_EXCEPTION(str)  tirowIllfgblStbtfExdfption(fnv, "Pollfr:" str)
#dffinf INTERRUPT_EXCEPTION(str) tirowIntfrruptfdIOExdfption(fnv, \
#dffinf INTERRUPT_EXCEPTION(str) tirowIntfrruptfdIOExdfption(fnv, \
#dffinf INTERRUPT_EXCEPTION(str) tirowIntfrruptfdIOExdfption(fnv, \
#dffinf INTERRUPT_EXCEPTION(str) tirowIntfrruptfdIOExdfption(fnv, \
#dffinf INTERRUPT_EXCEPTION(str) tirowIntfrruptfdIOExdfption(fnv, \
                                                             "Pollfr:" str)
                                                             "Pollfr:" str)
                                                             "Pollfr:" str)
                                                             "Pollfr:" str)
                                                             "Pollfr:" str)
jint bddfd(JNIEnv *, iofvfnt_t *, jint, jsiort);
jint bddfd(JNIEnv *, iofvfnt_t *, jint, jsiort);
jint bddfd(JNIEnv *, iofvfnt_t *, jint, jsiort);
jint bddfd(JNIEnv *, iofvfnt_t *, jint, jsiort);
jint bddfd(JNIEnv *, iofvfnt_t *, jint, jsiort);
jint rfmovffd(JNIEnv *, iofvfnt_t *, jint);
jint rfmovffd(JNIEnv *, iofvfnt_t *, jint);
jint rfmovffd(JNIEnv *, iofvfnt_t *, jint);
jint rfmovffd(JNIEnv *, iofvfnt_t *, jint);
jint rfmovffd(JNIEnv *, iofvfnt_t *, jint);





/*
/*
/*
/*
/*
 * Clbss Pollfr
 * Clbss Pollfr
 * Clbss Pollfr
 * Clbss Pollfr
 * Clbss Pollfr
 * Mftiod: nbtivfInit
 * Mftiod: nbtivfInit
 * Mftiod: nbtivfInit
 * Mftiod: nbtivfInit
 * Mftiod: nbtivfInit
 * Signbturf: ()I
 * Signbturf: ()I
 * Signbturf: ()I
 * Signbturf: ()I
 * Signbturf: ()I
 *
 *
 *
 *
 *
 * Only to bf dbllfd ondf, rigit bftfr tiis librbry is lobdfd,
 * Only to bf dbllfd ondf, rigit bftfr tiis librbry is lobdfd,
 * Only to bf dbllfd ondf, rigit bftfr tiis librbry is lobdfd,
 * Only to bf dbllfd ondf, rigit bftfr tiis librbry is lobdfd,
 * Only to bf dbllfd ondf, rigit bftfr tiis librbry is lobdfd,
 * so no nffd to dfbl witi rffntrbndy ifrf.
 * so no nffd to dfbl witi rffntrbndy ifrf.
 * so no nffd to dfbl witi rffntrbndy ifrf.
 * so no nffd to dfbl witi rffntrbndy ifrf.
 * so no nffd to dfbl witi rffntrbndy ifrf.
 * Could do bs b prbgmb ini, but tibt isn't bs portbblf.
 * Could do bs b prbgmb ini, but tibt isn't bs portbblf.
 * Could do bs b prbgmb ini, but tibt isn't bs portbblf.
 * Could do bs b prbgmb ini, but tibt isn't bs portbblf.
 * Could do bs b prbgmb ini, but tibt isn't bs portbblf.
 */
 */
 */
 */
 */
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfInit(JNIEnv *fnv, jdlbss dls)
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfInit(JNIEnv *fnv, jdlbss dls)
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfInit(JNIEnv *fnv, jdlbss dls)
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfInit(JNIEnv *fnv, jdlbss dls)
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfInit(JNIEnv *fnv, jdlbss dls)
{
{
{
{
{
  int tfstdfvpollfd;
  int tfstdfvpollfd;
  int tfstdfvpollfd;
  int tfstdfvpollfd;
  int tfstdfvpollfd;
  int i;
  int i;
  int i;
  int i;
  int i;





#ifdff DEVPOLL
#ifdff DEVPOLL
#ifdff DEVPOLL
#ifdff DEVPOLL
#ifdff DEVPOLL
  /*
  /*
  /*
  /*
  /*
   * Sff if wf dbn usf tiis mudi fbstfr mftiod
   * Sff if wf dbn usf tiis mudi fbstfr mftiod
   * Sff if wf dbn usf tiis mudi fbstfr mftiod
   * Sff if wf dbn usf tiis mudi fbstfr mftiod
   * Sff if wf dbn usf tiis mudi fbstfr mftiod
   * Notf : must ibvf fix for BUGID # 4223353 or OS dbn drbsi!
   * Notf : must ibvf fix for BUGID # 4223353 or OS dbn drbsi!
   * Notf : must ibvf fix for BUGID # 4223353 or OS dbn drbsi!
   * Notf : must ibvf fix for BUGID # 4223353 or OS dbn drbsi!
   * Notf : must ibvf fix for BUGID # 4223353 or OS dbn drbsi!
   */
   */
   */
   */
   */
  tfstdfvpollfd = opfn("/dfv/poll",O_RDWR);
  tfstdfvpollfd = opfn("/dfv/poll",O_RDWR);
  tfstdfvpollfd = opfn("/dfv/poll",O_RDWR);
  tfstdfvpollfd = opfn("/dfv/poll",O_RDWR);
  tfstdfvpollfd = opfn("/dfv/poll",O_RDWR);
  if (tfstdfvpollfd >= 0) {
  if (tfstdfvpollfd >= 0) {
  if (tfstdfvpollfd >= 0) {
  if (tfstdfvpollfd >= 0) {
  if (tfstdfvpollfd >= 0) {
    /*
    /*
    /*
    /*
    /*
     * If Solbris 7, wf nffd b pbtdi
     * If Solbris 7, wf nffd b pbtdi
     * If Solbris 7, wf nffd b pbtdi
     * If Solbris 7, wf nffd b pbtdi
     * If Solbris 7, wf nffd b pbtdi
     * Until wf know wibt string to sfbrdi for, wf'll plby it
     * Until wf know wibt string to sfbrdi for, wf'll plby it
     * Until wf know wibt string to sfbrdi for, wf'll plby it
     * Until wf know wibt string to sfbrdi for, wf'll plby it
     * Until wf know wibt string to sfbrdi for, wf'll plby it
     * sbff bnd disbblf tiis for Solbris 7.
     * sbff bnd disbblf tiis for Solbris 7.
     * sbff bnd disbblf tiis for Solbris 7.
     * sbff bnd disbblf tiis for Solbris 7.
     * sbff bnd disbblf tiis for Solbris 7.
     */
     */
     */
     */
     */





    if (!strdmp(nbmf.rflfbsf,"5.7"))
    if (!strdmp(nbmf.rflfbsf,"5.7"))
    if (!strdmp(nbmf.rflfbsf,"5.7"))
    if (!strdmp(nbmf.rflfbsf,"5.7"))
    if (!strdmp(nbmf.rflfbsf,"5.7"))
      {
      {
      {
      {
      {
        Usf_dfvpoll = 0;
        Usf_dfvpoll = 0;
        Usf_dfvpoll = 0;
        Usf_dfvpoll = 0;
        Usf_dfvpoll = 0;
      }
      }
      }
      }
      }
    flsf
    flsf
    flsf
    flsf
    flsf
      {
      {
      {
      {
      {
        Usf_dfvpoll = 1;
        Usf_dfvpoll = 1;
        Usf_dfvpoll = 1;
        Usf_dfvpoll = 1;
        Usf_dfvpoll = 1;
      }
      }
      }
      }
      }
  }
  }
  }
  }
  }





  DBGMSG(("Usf_dfvpoll=%d\n" ,Usf_dfvpoll));
  DBGMSG(("Usf_dfvpoll=%d\n" ,Usf_dfvpoll));
  DBGMSG(("Usf_dfvpoll=%d\n" ,Usf_dfvpoll));
  DBGMSG(("Usf_dfvpoll=%d\n" ,Usf_dfvpoll));
  DBGMSG(("Usf_dfvpoll=%d\n" ,Usf_dfvpoll));
  dlosf(tfstdfvpollfd);
  dlosf(tfstdfvpollfd);
  dlosf(tfstdfvpollfd);
  dlosf(tfstdfvpollfd);
  dlosf(tfstdfvpollfd);
#fndif
#fndif
#fndif
#fndif
#fndif





  /*
  /*
  /*
  /*
  /*
   * For now, wf optimizf for Solbris 7 if /dfv/poll isn't
   * For now, wf optimizf for Solbris 7 if /dfv/poll isn't
   * For now, wf optimizf for Solbris 7 if /dfv/poll isn't
   * For now, wf optimizf for Solbris 7 if /dfv/poll isn't
   * For now, wf optimizf for Solbris 7 if /dfv/poll isn't
   * bvbilbblf, bs it is only b smbll % iit for Solbris < 7.
   * bvbilbblf, bs it is only b smbll % iit for Solbris < 7.
   * bvbilbblf, bs it is only b smbll % iit for Solbris < 7.
   * bvbilbblf, bs it is only b smbll % iit for Solbris < 7.
   * bvbilbblf, bs it is only b smbll % iit for Solbris < 7.
   * if ( (Usf_dfvpoll == 0) && !strdmp(nbmf.rflfbsf,"5.6") )
   * if ( (Usf_dfvpoll == 0) && !strdmp(nbmf.rflfbsf,"5.6") )
   * if ( (Usf_dfvpoll == 0) && !strdmp(nbmf.rflfbsf,"5.6") )
   * if ( (Usf_dfvpoll == 0) && !strdmp(nbmf.rflfbsf,"5.6") )
   * if ( (Usf_dfvpoll == 0) && !strdmp(nbmf.rflfbsf,"5.6") )
   *      Usf_sol7opt = 0;
   *      Usf_sol7opt = 0;
   *      Usf_sol7opt = 0;
   *      Usf_sol7opt = 0;
   *      Usf_sol7opt = 0;
   */
   */
   */
   */
   */
  Currfnt_ibndlf = 0;
  Currfnt_ibndlf = 0;
  Currfnt_ibndlf = 0;
  Currfnt_ibndlf = 0;
  Currfnt_ibndlf = 0;
  for (i = 0; i < MAX_HANDLES; i++) {
  for (i = 0; i < MAX_HANDLES; i++) {
  for (i = 0; i < MAX_HANDLES; i++) {
  for (i = 0; i < MAX_HANDLES; i++) {
  for (i = 0; i < MAX_HANDLES; i++) {
    IOE_ibndlfs[i].dfvpollfd = -1;
    IOE_ibndlfs[i].dfvpollfd = -1;
    IOE_ibndlfs[i].dfvpollfd = -1;
    IOE_ibndlfs[i].dfvpollfd = -1;
    IOE_ibndlfs[i].dfvpollfd = -1;
    IOE_ibndlfs[i].pfd = NULL;
    IOE_ibndlfs[i].pfd = NULL;
    IOE_ibndlfs[i].pfd = NULL;
    IOE_ibndlfs[i].pfd = NULL;
    IOE_ibndlfs[i].pfd = NULL;
  }
  }
  }
  }
  }





  /*
  /*
  /*
  /*
  /*
   * tiis tflls mf tif mbx numbfr of opfn filfdfsdriptors
   * tiis tflls mf tif mbx numbfr of opfn filfdfsdriptors
   * tiis tflls mf tif mbx numbfr of opfn filfdfsdriptors
   * tiis tflls mf tif mbx numbfr of opfn filfdfsdriptors
   * tiis tflls mf tif mbx numbfr of opfn filfdfsdriptors
   */
   */
   */
   */
   */
  Mbx_indfx = sysdonf(_SC_OPEN_MAX);
  Mbx_indfx = sysdonf(_SC_OPEN_MAX);
  Mbx_indfx = sysdonf(_SC_OPEN_MAX);
  Mbx_indfx = sysdonf(_SC_OPEN_MAX);
  Mbx_indfx = sysdonf(_SC_OPEN_MAX);
  if (Mbx_indfx < 0) {
  if (Mbx_indfx < 0) {
  if (Mbx_indfx < 0) {
  if (Mbx_indfx < 0) {
  if (Mbx_indfx < 0) {
    Mbx_indfx = 1024;
    Mbx_indfx = 1024;
    Mbx_indfx = 1024;
    Mbx_indfx = 1024;
    Mbx_indfx = 1024;
  }
  }
  }
  }
  }





  DBGMSG(("got sysdonf(_SC_OPEN_MAX)=%d filf dfsd\n",Mbx_indfx));
  DBGMSG(("got sysdonf(_SC_OPEN_MAX)=%d filf dfsd\n",Mbx_indfx));
  DBGMSG(("got sysdonf(_SC_OPEN_MAX)=%d filf dfsd\n",Mbx_indfx));
  DBGMSG(("got sysdonf(_SC_OPEN_MAX)=%d filf dfsd\n",Mbx_indfx));
  DBGMSG(("got sysdonf(_SC_OPEN_MAX)=%d filf dfsd\n",Mbx_indfx));





  rfturn 0;
  rfturn 0;
  rfturn 0;
  rfturn 0;
  rfturn 0;
}
}
}
}
}





JNIEXPORT jint JNICALL Jbvb_Pollfr_gftNumCPUs(JNIEnv *fnv, jdlbss dls)
JNIEXPORT jint JNICALL Jbvb_Pollfr_gftNumCPUs(JNIEnv *fnv, jdlbss dls)
JNIEXPORT jint JNICALL Jbvb_Pollfr_gftNumCPUs(JNIEnv *fnv, jdlbss dls)
JNIEXPORT jint JNICALL Jbvb_Pollfr_gftNumCPUs(JNIEnv *fnv, jdlbss dls)
JNIEXPORT jint JNICALL Jbvb_Pollfr_gftNumCPUs(JNIEnv *fnv, jdlbss dls)
{
{
{
{
{
  rfturn sysdonf(_SC_NPROCESSORS_ONLN);
  rfturn sysdonf(_SC_NPROCESSORS_ONLN);
  rfturn sysdonf(_SC_NPROCESSORS_ONLN);
  rfturn sysdonf(_SC_NPROCESSORS_ONLN);
  rfturn sysdonf(_SC_NPROCESSORS_ONLN);
}
}
}
}
}





/*
/*
/*
/*
/*
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Mftiod:    nbtivfCrfbtfPollfr
 * Mftiod:    nbtivfCrfbtfPollfr
 * Mftiod:    nbtivfCrfbtfPollfr
 * Mftiod:    nbtivfCrfbtfPollfr
 * Mftiod:    nbtivfCrfbtfPollfr
 * Signbturf: (I)I
 * Signbturf: (I)I
 * Signbturf: (I)I
 * Signbturf: (I)I
 * Signbturf: (I)I
 * Notf : in tif dbsf wifrf /dfv/poll dofsn't fxist,
 * Notf : in tif dbsf wifrf /dfv/poll dofsn't fxist,
 * Notf : in tif dbsf wifrf /dfv/poll dofsn't fxist,
 * Notf : in tif dbsf wifrf /dfv/poll dofsn't fxist,
 * Notf : in tif dbsf wifrf /dfv/poll dofsn't fxist,
 *        using morf tibn onf poll brrby dould iurt
 *        using morf tibn onf poll brrby dould iurt
 *        using morf tibn onf poll brrby dould iurt
 *        using morf tibn onf poll brrby dould iurt
 *        using morf tibn onf poll brrby dould iurt
 *        Solbris 7 pfrformbndf duf to kfrnfl dbdiing.
 *        Solbris 7 pfrformbndf duf to kfrnfl dbdiing.
 *        Solbris 7 pfrformbndf duf to kfrnfl dbdiing.
 *        Solbris 7 pfrformbndf duf to kfrnfl dbdiing.
 *        Solbris 7 pfrformbndf duf to kfrnfl dbdiing.
 */
 */
 */
 */
 */





JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfCrfbtfPollfr
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfCrfbtfPollfr
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfCrfbtfPollfr
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfCrfbtfPollfr
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfCrfbtfPollfr
  (JNIEnv *fnv, jobjfdt obj, jint mbximum_fds)
  (JNIEnv *fnv, jobjfdt obj, jint mbximum_fds)
  (JNIEnv *fnv, jobjfdt obj, jint mbximum_fds)
  (JNIEnv *fnv, jobjfdt obj, jint mbximum_fds)
  (JNIEnv *fnv, jobjfdt obj, jint mbximum_fds)
{
{
{
{
{
  int ibndlf, rftvbl, i;
  int ibndlf, rftvbl, i;
  int ibndlf, rftvbl, i;
  int ibndlf, rftvbl, i;
  int ibndlf, rftvbl, i;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;





  if (mbximum_fds == -1) {
  if (mbximum_fds == -1) {
  if (mbximum_fds == -1) {
  if (mbximum_fds == -1) {
  if (mbximum_fds == -1) {
    mbximum_fds = Mbx_indfx;
    mbximum_fds = Mbx_indfx;
    mbximum_fds = Mbx_indfx;
    mbximum_fds = Mbx_indfx;
    mbximum_fds = Mbx_indfx;
  }
  }
  }
  }
  }
  ibndlf = Currfnt_ibndlf;
  ibndlf = Currfnt_ibndlf;
  ibndlf = Currfnt_ibndlf;
  ibndlf = Currfnt_ibndlf;
  ibndlf = Currfnt_ibndlf;
  if (Currfnt_ibndlf >= MAX_HANDLES) {
  if (Currfnt_ibndlf >= MAX_HANDLES) {
  if (Currfnt_ibndlf >= MAX_HANDLES) {
  if (Currfnt_ibndlf >= MAX_HANDLES) {
  if (Currfnt_ibndlf >= MAX_HANDLES) {
    for (i = 0; i < MAX_HANDLES; i++) {
    for (i = 0; i < MAX_HANDLES; i++) {
    for (i = 0; i < MAX_HANDLES; i++) {
    for (i = 0; i < MAX_HANDLES; i++) {
    for (i = 0; i < MAX_HANDLES; i++) {
      if (IOE_ibndlfs[i].inusf == 0) {
      if (IOE_ibndlfs[i].inusf == 0) {
      if (IOE_ibndlfs[i].inusf == 0) {
      if (IOE_ibndlfs[i].inusf == 0) {
      if (IOE_ibndlfs[i].inusf == 0) {
        ibndlf = i;
        ibndlf = i;
        ibndlf = i;
        ibndlf = i;
        ibndlf = i;
        brfbk;
        brfbk;
        brfbk;
        brfbk;
        brfbk;
      }
      }
      }
      }
      }
    }
    }
    }
    }
    }
    if (ibndlf >= MAX_HANDLES) {
    if (ibndlf >= MAX_HANDLES) {
    if (ibndlf >= MAX_HANDLES) {
    if (ibndlf >= MAX_HANDLES) {
    if (ibndlf >= MAX_HANDLES) {
      rfturn MEMORY_EXCEPTION("CrfbtfPollfr - MAX_HANDLES fxdffdfd");
      rfturn MEMORY_EXCEPTION("CrfbtfPollfr - MAX_HANDLES fxdffdfd");
      rfturn MEMORY_EXCEPTION("CrfbtfPollfr - MAX_HANDLES fxdffdfd");
      rfturn MEMORY_EXCEPTION("CrfbtfPollfr - MAX_HANDLES fxdffdfd");
      rfturn MEMORY_EXCEPTION("CrfbtfPollfr - MAX_HANDLES fxdffdfd");
    }
    }
    }
    }
    }
  } flsf {
  } flsf {
  } flsf {
  } flsf {
  } flsf {
    Currfnt_ibndlf++;
    Currfnt_ibndlf++;
    Currfnt_ibndlf++;
    Currfnt_ibndlf++;
    Currfnt_ibndlf++;
  }
  }
  }
  }
  }





  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];





  iofi->inusf      = 1;
  iofi->inusf      = 1;
  iofi->inusf      = 1;
  iofi->inusf      = 1;
  iofi->inusf      = 1;





  iofi->lbst_indfx = 0;
  iofi->lbst_indfx = 0;
  iofi->lbst_indfx = 0;
  iofi->lbst_indfx = 0;
  iofi->lbst_indfx = 0;
  iofi->totbl_frff = 0;
  iofi->totbl_frff = 0;
  iofi->totbl_frff = 0;
  iofi->totbl_frff = 0;
  iofi->totbl_frff = 0;
  iofi->lfft_fvfnts = 0;
  iofi->lfft_fvfnts = 0;
  iofi->lfft_fvfnts = 0;
  iofi->lfft_fvfnts = 0;
  iofi->lfft_fvfnts = 0;
  iofi->mbx_indfx = mbximum_fds;
  iofi->mbx_indfx = mbximum_fds;
  iofi->mbx_indfx = mbximum_fds;
  iofi->mbx_indfx = mbximum_fds;
  iofi->mbx_indfx = mbximum_fds;





  rftvbl = ibndlf;
  rftvbl = ibndlf;
  rftvbl = ibndlf;
  rftvbl = ibndlf;
  rftvbl = ibndlf;
  if (Usf_dfvpoll) {
  if (Usf_dfvpoll) {
  if (Usf_dfvpoll) {
  if (Usf_dfvpoll) {
  if (Usf_dfvpoll) {
    iofi->dfvpollfd = opfn("/dfv/poll",O_RDWR);
    iofi->dfvpollfd = opfn("/dfv/poll",O_RDWR);
    iofi->dfvpollfd = opfn("/dfv/poll",O_RDWR);
    iofi->dfvpollfd = opfn("/dfv/poll",O_RDWR);
    iofi->dfvpollfd = opfn("/dfv/poll",O_RDWR);
    DBGMSG(("Opfnfd /dfv/poll, sft dfvpollfd = %d\n",iofi->dfvpollfd));
    DBGMSG(("Opfnfd /dfv/poll, sft dfvpollfd = %d\n",iofi->dfvpollfd));
    DBGMSG(("Opfnfd /dfv/poll, sft dfvpollfd = %d\n",iofi->dfvpollfd));
    DBGMSG(("Opfnfd /dfv/poll, sft dfvpollfd = %d\n",iofi->dfvpollfd));
    DBGMSG(("Opfnfd /dfv/poll, sft dfvpollfd = %d\n",iofi->dfvpollfd));
    if (iofi->dfvpollfd < 0) {
    if (iofi->dfvpollfd < 0) {
    if (iofi->dfvpollfd < 0) {
    if (iofi->dfvpollfd < 0) {
    if (iofi->dfvpollfd < 0) {
      Currfnt_ibndlf--;
      Currfnt_ibndlf--;
      Currfnt_ibndlf--;
      Currfnt_ibndlf--;
      Currfnt_ibndlf--;
      rfturn MEMORY_EXCEPTION("CrfbtfPollfr - dbn\'t opfn /dfv/poll");
      rfturn MEMORY_EXCEPTION("CrfbtfPollfr - dbn\'t opfn /dfv/poll");
      rfturn MEMORY_EXCEPTION("CrfbtfPollfr - dbn\'t opfn /dfv/poll");
      rfturn MEMORY_EXCEPTION("CrfbtfPollfr - dbn\'t opfn /dfv/poll");
      rfturn MEMORY_EXCEPTION("CrfbtfPollfr - dbn\'t opfn /dfv/poll");
    }
    }
    }
    }
    }
  }
  }
  }
  }
  }
  iofi->pfd = mbllod(mbximum_fds * sizfof(pollfd_t));
  iofi->pfd = mbllod(mbximum_fds * sizfof(pollfd_t));
  iofi->pfd = mbllod(mbximum_fds * sizfof(pollfd_t));
  iofi->pfd = mbllod(mbximum_fds * sizfof(pollfd_t));
  iofi->pfd = mbllod(mbximum_fds * sizfof(pollfd_t));
  if (iofi->pfd == NULL) {
  if (iofi->pfd == NULL) {
  if (iofi->pfd == NULL) {
  if (iofi->pfd == NULL) {
  if (iofi->pfd == NULL) {
    Currfnt_ibndlf--;
    Currfnt_ibndlf--;
    Currfnt_ibndlf--;
    Currfnt_ibndlf--;
    Currfnt_ibndlf--;
    rfturn MEMORY_EXCEPTION("CrfbtfPollfr - mbllod fbilurf");
    rfturn MEMORY_EXCEPTION("CrfbtfPollfr - mbllod fbilurf");
    rfturn MEMORY_EXCEPTION("CrfbtfPollfr - mbllod fbilurf");
    rfturn MEMORY_EXCEPTION("CrfbtfPollfr - mbllod fbilurf");
    rfturn MEMORY_EXCEPTION("CrfbtfPollfr - mbllod fbilurf");
  }
  }
  }
  }
  }





  rfturn rftvbl;
  rfturn rftvbl;
  rfturn rftvbl;
  rfturn rftvbl;
  rfturn rftvbl;
}
}
}
}
}





/*
/*
/*
/*
/*
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Mftiod:    nbtivfDfstroyPollfr
 * Mftiod:    nbtivfDfstroyPollfr
 * Mftiod:    nbtivfDfstroyPollfr
 * Mftiod:    nbtivfDfstroyPollfr
 * Mftiod:    nbtivfDfstroyPollfr
 * Signbturf: (I)V
 * Signbturf: (I)V
 * Signbturf: (I)V
 * Signbturf: (I)V
 * Signbturf: (I)V
 */
 */
 */
 */
 */
JNIEXPORT void JNICALL Jbvb_Pollfr_nbtivfDfstroyPollfr
JNIEXPORT void JNICALL Jbvb_Pollfr_nbtivfDfstroyPollfr
JNIEXPORT void JNICALL Jbvb_Pollfr_nbtivfDfstroyPollfr
JNIEXPORT void JNICALL Jbvb_Pollfr_nbtivfDfstroyPollfr
JNIEXPORT void JNICALL Jbvb_Pollfr_nbtivfDfstroyPollfr
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf)
{
{
{
{
{





  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;





  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
    {
    {
    {
    {
    {
      STATE_EXCEPTION("DfstroyPollfr - ibndlf out of rbngf");
      STATE_EXCEPTION("DfstroyPollfr - ibndlf out of rbngf");
      STATE_EXCEPTION("DfstroyPollfr - ibndlf out of rbngf");
      STATE_EXCEPTION("DfstroyPollfr - ibndlf out of rbngf");
      STATE_EXCEPTION("DfstroyPollfr - ibndlf out of rbngf");
      rfturn;
      rfturn;
      rfturn;
      rfturn;
      rfturn;
    }
    }
    }
    }
    }





  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi->inusf = 0;
  iofi->inusf = 0;
  iofi->inusf = 0;
  iofi->inusf = 0;
  iofi->inusf = 0;
  if (Usf_dfvpoll) {
  if (Usf_dfvpoll) {
  if (Usf_dfvpoll) {
  if (Usf_dfvpoll) {
  if (Usf_dfvpoll) {
    dlosf(iofi->dfvpollfd);
    dlosf(iofi->dfvpollfd);
    dlosf(iofi->dfvpollfd);
    dlosf(iofi->dfvpollfd);
    dlosf(iofi->dfvpollfd);
  }
  }
  }
  }
  }
  frff(iofi->pfd);
  frff(iofi->pfd);
  frff(iofi->pfd);
  frff(iofi->pfd);
  frff(iofi->pfd);
}
}
}
}
}





#ifdff DEBUG
#ifdff DEBUG
#ifdff DEBUG
#ifdff DEBUG
#ifdff DEBUG
stbtid void difdk_ibndlf(iofvfnt_t *iofi)
stbtid void difdk_ibndlf(iofvfnt_t *iofi)
stbtid void difdk_ibndlf(iofvfnt_t *iofi)
stbtid void difdk_ibndlf(iofvfnt_t *iofi)
stbtid void difdk_ibndlf(iofvfnt_t *iofi)
{
{
{
{
{
  int i,usfd,unusfd;
  int i,usfd,unusfd;
  int i,usfd,unusfd;
  int i,usfd,unusfd;
  int i,usfd,unusfd;





  usfd=unusfd=0;
  usfd=unusfd=0;
  usfd=unusfd=0;
  usfd=unusfd=0;
  usfd=unusfd=0;
  for (i = 0; i < iofi->lbst_indfx; i++)
  for (i = 0; i < iofi->lbst_indfx; i++)
  for (i = 0; i < iofi->lbst_indfx; i++)
  for (i = 0; i < iofi->lbst_indfx; i++)
  for (i = 0; i < iofi->lbst_indfx; i++)
    {
    {
    {
    {
    {
      if (iofi->pfd[i].fd == -1)
      if (iofi->pfd[i].fd == -1)
      if (iofi->pfd[i].fd == -1)
      if (iofi->pfd[i].fd == -1)
      if (iofi->pfd[i].fd == -1)
        unusfd++;
        unusfd++;
        unusfd++;
        unusfd++;
        unusfd++;
      flsf
      flsf
      flsf
      flsf
      flsf
        usfd++;
        usfd++;
        usfd++;
        usfd++;
        usfd++;
    }
    }
    }
    }
    }
  if (unusfd != iofi->totbl_frff)
  if (unusfd != iofi->totbl_frff)
  if (unusfd != iofi->totbl_frff)
  if (unusfd != iofi->totbl_frff)
  if (unusfd != iofi->totbl_frff)
    printf("WARNING : found %d frff, dlbimfd %d.  Usfd : %d\n",
    printf("WARNING : found %d frff, dlbimfd %d.  Usfd : %d\n",
    printf("WARNING : found %d frff, dlbimfd %d.  Usfd : %d\n",
    printf("WARNING : found %d frff, dlbimfd %d.  Usfd : %d\n",
    printf("WARNING : found %d frff, dlbimfd %d.  Usfd : %d\n",
           unusfd, iofi->totbl_frff, usfd);
           unusfd, iofi->totbl_frff, usfd);
           unusfd, iofi->totbl_frff, usfd);
           unusfd, iofi->totbl_frff, usfd);
           unusfd, iofi->totbl_frff, usfd);
}
}
}
}
}
#fndif
#fndif
#fndif
#fndif
#fndif





/*
/*
/*
/*
/*
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Mftiod:    nbtivfAddFd
 * Mftiod:    nbtivfAddFd
 * Mftiod:    nbtivfAddFd
 * Mftiod:    nbtivfAddFd
 * Mftiod:    nbtivfAddFd
 * Signbturf: (IIS)I
 * Signbturf: (IIS)I
 * Signbturf: (IIS)I
 * Signbturf: (IIS)I
 * Signbturf: (IIS)I
 *
 *
 *
 *
 *
 * Currfntly dofsn't difdk to mbkf surf wf brfn't bdding
 * Currfntly dofsn't difdk to mbkf surf wf brfn't bdding
 * Currfntly dofsn't difdk to mbkf surf wf brfn't bdding
 * Currfntly dofsn't difdk to mbkf surf wf brfn't bdding
 * Currfntly dofsn't difdk to mbkf surf wf brfn't bdding
 * bn fd blrfbdy bddfd (no problfm for /dfv/poll...just
 * bn fd blrfbdy bddfd (no problfm for /dfv/poll...just
 * bn fd blrfbdy bddfd (no problfm for /dfv/poll...just
 * bn fd blrfbdy bddfd (no problfm for /dfv/poll...just
 * bn fd blrfbdy bddfd (no problfm for /dfv/poll...just
 * bn brrby wbstfr for poll()).
 * bn brrby wbstfr for poll()).
 * bn brrby wbstfr for poll()).
 * bn brrby wbstfr for poll()).
 * bn brrby wbstfr for poll()).
 */
 */
 */
 */
 */
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfAddFd
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfAddFd
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfAddFd
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfAddFd
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfAddFd
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd, jsiort fvfnts)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd, jsiort fvfnts)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd, jsiort fvfnts)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd, jsiort fvfnts)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd, jsiort fvfnts)
{
{
{
{
{
  int rftvbl;
  int rftvbl;
  int rftvbl;
  int rftvbl;
  int rftvbl;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;





  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
    rfturn STATE_EXCEPTION("AddFd - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("AddFd - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("AddFd - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("AddFd - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("AddFd - ibndlf out of rbngf");





  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];





  CHECK_HANDLE(iofi);
  CHECK_HANDLE(iofi);
  CHECK_HANDLE(iofi);
  CHECK_HANDLE(iofi);
  CHECK_HANDLE(iofi);





  #ifdff DEVPOLL
  #ifdff DEVPOLL
  #ifdff DEVPOLL
  #ifdff DEVPOLL
  #ifdff DEVPOLL
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
    {
    {
    {
    {
    {
      int i;
      int i;
      int i;
      int i;
      int i;
      pollfd_t pollflt;
      pollfd_t pollflt;
      pollfd_t pollflt;
      pollfd_t pollflt;
      pollfd_t pollflt;





      /*
      /*
      /*
      /*
      /*
       * usf /dfv/poll
       * usf /dfv/poll
       * usf /dfv/poll
       * usf /dfv/poll
       * usf /dfv/poll
       */
       */
       */
       */
       */
      pollflt.fd = fd;
      pollflt.fd = fd;
      pollflt.fd = fd;
      pollflt.fd = fd;
      pollflt.fd = fd;
      pollflt.fvfnts = fvfnts;
      pollflt.fvfnts = fvfnts;
      pollflt.fvfnts = fvfnts;
      pollflt.fvfnts = fvfnts;
      pollflt.fvfnts = fvfnts;
      if ((i = writf(iofi->dfvpollfd, &pollflt, sizfof(pollfd_t))) !=
      if ((i = writf(iofi->dfvpollfd, &pollflt, sizfof(pollfd_t))) !=
      if ((i = writf(iofi->dfvpollfd, &pollflt, sizfof(pollfd_t))) !=
      if ((i = writf(iofi->dfvpollfd, &pollflt, sizfof(pollfd_t))) !=
      if ((i = writf(iofi->dfvpollfd, &pollflt, sizfof(pollfd_t))) !=
          sizfof(pollfd_t)) {
          sizfof(pollfd_t)) {
          sizfof(pollfd_t)) {
          sizfof(pollfd_t)) {
          sizfof(pollfd_t)) {
        DBGMSG(("writf to dfvpollfd=%d siowfd %d bytfs out of %d\n",
        DBGMSG(("writf to dfvpollfd=%d siowfd %d bytfs out of %d\n",
        DBGMSG(("writf to dfvpollfd=%d siowfd %d bytfs out of %d\n",
        DBGMSG(("writf to dfvpollfd=%d siowfd %d bytfs out of %d\n",
        DBGMSG(("writf to dfvpollfd=%d siowfd %d bytfs out of %d\n",
                iofi->dfvpollfd,i,sizfof(pollfd_t)));
                iofi->dfvpollfd,i,sizfof(pollfd_t)));
                iofi->dfvpollfd,i,sizfof(pollfd_t)));
                iofi->dfvpollfd,i,sizfof(pollfd_t)));
                iofi->dfvpollfd,i,sizfof(pollfd_t)));
        rfturn STATE_EXCEPTION("AddFd - /dfv/poll bdd fbilurf");
        rfturn STATE_EXCEPTION("AddFd - /dfv/poll bdd fbilurf");
        rfturn STATE_EXCEPTION("AddFd - /dfv/poll bdd fbilurf");
        rfturn STATE_EXCEPTION("AddFd - /dfv/poll bdd fbilurf");
        rfturn STATE_EXCEPTION("AddFd - /dfv/poll bdd fbilurf");
      }
      }
      }
      }
      }
    flsf
    flsf
    flsf
    flsf
    flsf
      {
      {
      {
      {
      {
        rftvbl = fd;
        rftvbl = fd;
        rftvbl = fd;
        rftvbl = fd;
        rftvbl = fd;
      }
      }
      }
      }
      }
    }
    }
    }
    }
    }
  flsf
  flsf
  flsf
  flsf
  flsf
  #fndif
  #fndif
  #fndif
  #fndif
  #fndif
    { /* no /dfv/poll bvbilbblf */
    { /* no /dfv/poll bvbilbblf */
    { /* no /dfv/poll bvbilbblf */
    { /* no /dfv/poll bvbilbblf */
    { /* no /dfv/poll bvbilbblf */
      rftvbl = bddfd(fnv, iofi, fd, fvfnts);
      rftvbl = bddfd(fnv, iofi, fd, fvfnts);
      rftvbl = bddfd(fnv, iofi, fd, fvfnts);
      rftvbl = bddfd(fnv, iofi, fd, fvfnts);
      rftvbl = bddfd(fnv, iofi, fd, fvfnts);
    }
    }
    }
    }
    }
  rfturn rftvbl;
  rfturn rftvbl;
  rfturn rftvbl;
  rfturn rftvbl;
  rfturn rftvbl;
}
}
}
}
}





/*
/*
/*
/*
/*
 * Addfd to pollfd brrby...optimizfd for Solbris 7
 * Addfd to pollfd brrby...optimizfd for Solbris 7
 * Addfd to pollfd brrby...optimizfd for Solbris 7
 * Addfd to pollfd brrby...optimizfd for Solbris 7
 * Addfd to pollfd brrby...optimizfd for Solbris 7
 */
 */
 */
 */
 */
jint bddfd(JNIEnv *fnv, iofvfnt_t *iofi, jint fd, jsiort fvfnts)
jint bddfd(JNIEnv *fnv, iofvfnt_t *iofi, jint fd, jsiort fvfnts)
jint bddfd(JNIEnv *fnv, iofvfnt_t *iofi, jint fd, jsiort fvfnts)
jint bddfd(JNIEnv *fnv, iofvfnt_t *iofi, jint fd, jsiort fvfnts)
jint bddfd(JNIEnv *fnv, iofvfnt_t *iofi, jint fd, jsiort fvfnts)
{
{
{
{
{
  int idx;
  int idx;
  int idx;
  int idx;
  int idx;





  if (iofi->totbl_frff)
  if (iofi->totbl_frff)
  if (iofi->totbl_frff)
  if (iofi->totbl_frff)
  if (iofi->totbl_frff)
    {
    {
    {
    {
    {
      /*
      /*
      /*
      /*
      /*
       * Trbvfrsing from fnd bfdbusf tibt's wifrf wf pbd.
       * Trbvfrsing from fnd bfdbusf tibt's wifrf wf pbd.
       * Trbvfrsing from fnd bfdbusf tibt's wifrf wf pbd.
       * Trbvfrsing from fnd bfdbusf tibt's wifrf wf pbd.
       * Trbvfrsing from fnd bfdbusf tibt's wifrf wf pbd.
       */
       */
       */
       */
       */
      iofi->totbl_frff--;
      iofi->totbl_frff--;
      iofi->totbl_frff--;
      iofi->totbl_frff--;
      iofi->totbl_frff--;
      for (idx = iofi->lbst_indfx - 1; idx >= 0; idx--) {
      for (idx = iofi->lbst_indfx - 1; idx >= 0; idx--) {
      for (idx = iofi->lbst_indfx - 1; idx >= 0; idx--) {
      for (idx = iofi->lbst_indfx - 1; idx >= 0; idx--) {
      for (idx = iofi->lbst_indfx - 1; idx >= 0; idx--) {
        if (iofi->pfd[idx].fd == -1)
        if (iofi->pfd[idx].fd == -1)
        if (iofi->pfd[idx].fd == -1)
        if (iofi->pfd[idx].fd == -1)
        if (iofi->pfd[idx].fd == -1)
          brfbk;
          brfbk;
          brfbk;
          brfbk;
          brfbk;
      }
      }
      }
      }
      }
    }
    }
    }
    }
    }
  flsf if (iofi->lbst_indfx >= iofi->mbx_indfx)
  flsf if (iofi->lbst_indfx >= iofi->mbx_indfx)
  flsf if (iofi->lbst_indfx >= iofi->mbx_indfx)
  flsf if (iofi->lbst_indfx >= iofi->mbx_indfx)
  flsf if (iofi->lbst_indfx >= iofi->mbx_indfx)
    {
    {
    {
    {
    {
      rfturn MEMORY_EXCEPTION("AddFd - too mbny fds");
      rfturn MEMORY_EXCEPTION("AddFd - too mbny fds");
      rfturn MEMORY_EXCEPTION("AddFd - too mbny fds");
      rfturn MEMORY_EXCEPTION("AddFd - too mbny fds");
      rfturn MEMORY_EXCEPTION("AddFd - too mbny fds");
    }
    }
    }
    }
    }
  flsf
  flsf
  flsf
  flsf
  flsf
    {
    {
    {
    {
    {
      int i;
      int i;
      int i;
      int i;
      int i;
      int nfw_totbl;
      int nfw_totbl;
      int nfw_totbl;
      int nfw_totbl;
      int nfw_totbl;
      /*
      /*
      /*
      /*
      /*
       * For Solbris 7, wbnt to bdd somf growti spbdf
       * For Solbris 7, wbnt to bdd somf growti spbdf
       * For Solbris 7, wbnt to bdd somf growti spbdf
       * For Solbris 7, wbnt to bdd somf growti spbdf
       * For Solbris 7, wbnt to bdd somf growti spbdf
       * bnd fill fxtrbs witi fd=-1.  Tiis bllows for
       * bnd fill fxtrbs witi fd=-1.  Tiis bllows for
       * bnd fill fxtrbs witi fd=-1.  Tiis bllows for
       * bnd fill fxtrbs witi fd=-1.  Tiis bllows for
       * bnd fill fxtrbs witi fd=-1.  Tiis bllows for
       * kfrnfl poll() implfmfntbtion to pfrform optimblly.
       * kfrnfl poll() implfmfntbtion to pfrform optimblly.
       * kfrnfl poll() implfmfntbtion to pfrform optimblly.
       * kfrnfl poll() implfmfntbtion to pfrform optimblly.
       * kfrnfl poll() implfmfntbtion to pfrform optimblly.
       */
       */
       */
       */
       */
      nfw_totbl = iofi->lbst_indfx;
      nfw_totbl = iofi->lbst_indfx;
      nfw_totbl = iofi->lbst_indfx;
      nfw_totbl = iofi->lbst_indfx;
      nfw_totbl = iofi->lbst_indfx;
      nfw_totbl += (nfw_totbl/10) + 1; /* bump sizf by 10% */
      nfw_totbl += (nfw_totbl/10) + 1; /* bump sizf by 10% */
      nfw_totbl += (nfw_totbl/10) + 1; /* bump sizf by 10% */
      nfw_totbl += (nfw_totbl/10) + 1; /* bump sizf by 10% */
      nfw_totbl += (nfw_totbl/10) + 1; /* bump sizf by 10% */
      if (nfw_totbl > iofi->mbx_indfx)
      if (nfw_totbl > iofi->mbx_indfx)
      if (nfw_totbl > iofi->mbx_indfx)
      if (nfw_totbl > iofi->mbx_indfx)
      if (nfw_totbl > iofi->mbx_indfx)
        nfw_totbl = iofi->mbx_indfx;
        nfw_totbl = iofi->mbx_indfx;
        nfw_totbl = iofi->mbx_indfx;
        nfw_totbl = iofi->mbx_indfx;
        nfw_totbl = iofi->mbx_indfx;
      for (i = iofi->lbst_indfx; i <= nfw_totbl; i++)
      for (i = iofi->lbst_indfx; i <= nfw_totbl; i++)
      for (i = iofi->lbst_indfx; i <= nfw_totbl; i++)
      for (i = iofi->lbst_indfx; i <= nfw_totbl; i++)
      for (i = iofi->lbst_indfx; i <= nfw_totbl; i++)
        {
        {
        {
        {
        {
          iofi->pfd[i].fd = -1;
          iofi->pfd[i].fd = -1;
          iofi->pfd[i].fd = -1;
          iofi->pfd[i].fd = -1;
          iofi->pfd[i].fd = -1;
        }
        }
        }
        }
        }
      idx = iofi->lbst_indfx;
      idx = iofi->lbst_indfx;
      idx = iofi->lbst_indfx;
      idx = iofi->lbst_indfx;
      idx = iofi->lbst_indfx;
      iofi->totbl_frff = nfw_totbl - iofi->lbst_indfx - 1;
      iofi->totbl_frff = nfw_totbl - iofi->lbst_indfx - 1;
      iofi->totbl_frff = nfw_totbl - iofi->lbst_indfx - 1;
      iofi->totbl_frff = nfw_totbl - iofi->lbst_indfx - 1;
      iofi->totbl_frff = nfw_totbl - iofi->lbst_indfx - 1;
      DBGMSG(("Just grfw from %d to %d in sizf\n",
      DBGMSG(("Just grfw from %d to %d in sizf\n",
      DBGMSG(("Just grfw from %d to %d in sizf\n",
      DBGMSG(("Just grfw from %d to %d in sizf\n",
      DBGMSG(("Just grfw from %d to %d in sizf\n",
              iofi->lbst_indfx, nfw_totbl));
              iofi->lbst_indfx, nfw_totbl));
              iofi->lbst_indfx, nfw_totbl));
              iofi->lbst_indfx, nfw_totbl));
              iofi->lbst_indfx, nfw_totbl));
      iofi->lbst_indfx = nfw_totbl;
      iofi->lbst_indfx = nfw_totbl;
      iofi->lbst_indfx = nfw_totbl;
      iofi->lbst_indfx = nfw_totbl;
      iofi->lbst_indfx = nfw_totbl;
    }
    }
    }
    }
    }
  ASSERT((idx >= 0) && (idx <= iofi->mbx_indfx));
  ASSERT((idx >= 0) && (idx <= iofi->mbx_indfx));
  ASSERT((idx >= 0) && (idx <= iofi->mbx_indfx));
  ASSERT((idx >= 0) && (idx <= iofi->mbx_indfx));
  ASSERT((idx >= 0) && (idx <= iofi->mbx_indfx));
  ASSERT(iofi->pfd[idx].fd == -1);
  ASSERT(iofi->pfd[idx].fd == -1);
  ASSERT(iofi->pfd[idx].fd == -1);
  ASSERT(iofi->pfd[idx].fd == -1);
  ASSERT(iofi->pfd[idx].fd == -1);
  iofi->pfd[idx].fd = fd;
  iofi->pfd[idx].fd = fd;
  iofi->pfd[idx].fd = fd;
  iofi->pfd[idx].fd = fd;
  iofi->pfd[idx].fd = fd;
  iofi->pfd[idx].fvfnts = fvfnts;
  iofi->pfd[idx].fvfnts = fvfnts;
  iofi->pfd[idx].fvfnts = fvfnts;
  iofi->pfd[idx].fvfnts = fvfnts;
  iofi->pfd[idx].fvfnts = fvfnts;
  iofi->pfd[idx].rfvfnts = 0;
  iofi->pfd[idx].rfvfnts = 0;
  iofi->pfd[idx].rfvfnts = 0;
  iofi->pfd[idx].rfvfnts = 0;
  iofi->pfd[idx].rfvfnts = 0;





  CHECK_HANDLE(iofi);
  CHECK_HANDLE(iofi);
  CHECK_HANDLE(iofi);
  CHECK_HANDLE(iofi);
  CHECK_HANDLE(iofi);





  rfturn fd;
  rfturn fd;
  rfturn fd;
  rfturn fd;
  rfturn fd;
}
}
}
}
}





/*
/*
/*
/*
/*
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Mftiod:    nbtivfRfmovfFd
 * Mftiod:    nbtivfRfmovfFd
 * Mftiod:    nbtivfRfmovfFd
 * Mftiod:    nbtivfRfmovfFd
 * Mftiod:    nbtivfRfmovfFd
 * Signbturf: (II)I
 * Signbturf: (II)I
 * Signbturf: (II)I
 * Signbturf: (II)I
 * Signbturf: (II)I
 */
 */
 */
 */
 */
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfRfmovfFd
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfRfmovfFd
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfRfmovfFd
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfRfmovfFd
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfRfmovfFd
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd)
{
{
{
{
{
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;





  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
    rfturn STATE_EXCEPTION("RfmovfFd - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("RfmovfFd - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("RfmovfFd - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("RfmovfFd - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("RfmovfFd - ibndlf out of rbngf");





  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];





  #ifdff DEVPOLL
  #ifdff DEVPOLL
  #ifdff DEVPOLL
  #ifdff DEVPOLL
  #ifdff DEVPOLL
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
    {
    {
    {
    {
    {
      /*
      /*
      /*
      /*
      /*
       * usf /dfv/poll - durrfntly no nffd for lodking ifrf.
       * usf /dfv/poll - durrfntly no nffd for lodking ifrf.
       * usf /dfv/poll - durrfntly no nffd for lodking ifrf.
       * usf /dfv/poll - durrfntly no nffd for lodking ifrf.
       * usf /dfv/poll - durrfntly no nffd for lodking ifrf.
       */
       */
       */
       */
       */
      pollfd_t pollflt;
      pollfd_t pollflt;
      pollfd_t pollflt;
      pollfd_t pollflt;
      pollfd_t pollflt;





      pollflt.fd = fd;
      pollflt.fd = fd;
      pollflt.fd = fd;
      pollflt.fd = fd;
      pollflt.fd = fd;
      pollflt.fvfnts = POLLREMOVE;
      pollflt.fvfnts = POLLREMOVE;
      pollflt.fvfnts = POLLREMOVE;
      pollflt.fvfnts = POLLREMOVE;
      pollflt.fvfnts = POLLREMOVE;
      if (writf(iofi->dfvpollfd, &pollflt,
      if (writf(iofi->dfvpollfd, &pollflt,
      if (writf(iofi->dfvpollfd, &pollflt,
      if (writf(iofi->dfvpollfd, &pollflt,
      if (writf(iofi->dfvpollfd, &pollflt,
                sizfof(pollfd_t) ) != sizfof(pollfd_t))
                sizfof(pollfd_t) ) != sizfof(pollfd_t))
                sizfof(pollfd_t) ) != sizfof(pollfd_t))
                sizfof(pollfd_t) ) != sizfof(pollfd_t))
                sizfof(pollfd_t) ) != sizfof(pollfd_t))
        {
        {
        {
        {
        {
          rfturn STATE_EXCEPTION("RfmovfFd - /dfv/poll fbilurf");
          rfturn STATE_EXCEPTION("RfmovfFd - /dfv/poll fbilurf");
          rfturn STATE_EXCEPTION("RfmovfFd - /dfv/poll fbilurf");
          rfturn STATE_EXCEPTION("RfmovfFd - /dfv/poll fbilurf");
          rfturn STATE_EXCEPTION("RfmovfFd - /dfv/poll fbilurf");
        }
        }
        }
        }
        }
    }
    }
    }
    }
    }
  flsf
  flsf
  flsf
  flsf
  flsf
  #fndif DEVPOLL
  #fndif DEVPOLL
  #fndif DEVPOLL
  #fndif DEVPOLL
  #fndif DEVPOLL
    {
    {
    {
    {
    {
      rfturn rfmovffd(fnv, iofi,fd);
      rfturn rfmovffd(fnv, iofi,fd);
      rfturn rfmovffd(fnv, iofi,fd);
      rfturn rfmovffd(fnv, iofi,fd);
      rfturn rfmovffd(fnv, iofi,fd);
    }
    }
    }
    }
    }
}
}
}
}
}
/*
/*
/*
/*
/*
 * rfmovf from pollfd brrby...optimizf for Solbris 7
 * rfmovf from pollfd brrby...optimizf for Solbris 7
 * rfmovf from pollfd brrby...optimizf for Solbris 7
 * rfmovf from pollfd brrby...optimizf for Solbris 7
 * rfmovf from pollfd brrby...optimizf for Solbris 7
 */
 */
 */
 */
 */
jint rfmovffd(JNIEnv *fnv, iofvfnt_t *iofi, jint fd)
jint rfmovffd(JNIEnv *fnv, iofvfnt_t *iofi, jint fd)
jint rfmovffd(JNIEnv *fnv, iofvfnt_t *iofi, jint fd)
jint rfmovffd(JNIEnv *fnv, iofvfnt_t *iofi, jint fd)
jint rfmovffd(JNIEnv *fnv, iofvfnt_t *iofi, jint fd)
{
{
{
{
{
  int i;
  int i;
  int i;
  int i;
  int i;
  int found = 0;
  int found = 0;
  int found = 0;
  int found = 0;
  int found = 0;





    { /* !Usf_dfvpoll */
    { /* !Usf_dfvpoll */
    { /* !Usf_dfvpoll */
    { /* !Usf_dfvpoll */
    { /* !Usf_dfvpoll */
      for (i = 0; i < iofi->lbst_indfx; i++)
      for (i = 0; i < iofi->lbst_indfx; i++)
      for (i = 0; i < iofi->lbst_indfx; i++)
      for (i = 0; i < iofi->lbst_indfx; i++)
      for (i = 0; i < iofi->lbst_indfx; i++)
        {
        {
        {
        {
        {
          if (iofi->pfd[i].fd == fd)
          if (iofi->pfd[i].fd == fd)
          if (iofi->pfd[i].fd == fd)
          if (iofi->pfd[i].fd == fd)
          if (iofi->pfd[i].fd == fd)
            {
            {
            {
            {
            {
              iofi->pfd[i].fd = -1;
              iofi->pfd[i].fd = -1;
              iofi->pfd[i].fd = -1;
              iofi->pfd[i].fd = -1;
              iofi->pfd[i].fd = -1;
              found = 1;
              found = 1;
              found = 1;
              found = 1;
              found = 1;
              brfbk;
              brfbk;
              brfbk;
              brfbk;
              brfbk;
            }
            }
            }
            }
            }
        }
        }
        }
        }
        }
      if (!found)
      if (!found)
      if (!found)
      if (!found)
      if (!found)
        {
        {
        {
        {
        {
          rfturn STATE_EXCEPTION("RfmovfFd - no sudi fd");
          rfturn STATE_EXCEPTION("RfmovfFd - no sudi fd");
          rfturn STATE_EXCEPTION("RfmovfFd - no sudi fd");
          rfturn STATE_EXCEPTION("RfmovfFd - no sudi fd");
          rfturn STATE_EXCEPTION("RfmovfFd - no sudi fd");
        }
        }
        }
        }
        }
      iofi->lfft_fvfnts = 0; /* Hbvf to go bbdk to tif kfrnfl */
      iofi->lfft_fvfnts = 0; /* Hbvf to go bbdk to tif kfrnfl */
      iofi->lfft_fvfnts = 0; /* Hbvf to go bbdk to tif kfrnfl */
      iofi->lfft_fvfnts = 0; /* Hbvf to go bbdk to tif kfrnfl */
      iofi->lfft_fvfnts = 0; /* Hbvf to go bbdk to tif kfrnfl */
      iofi->totbl_frff++;
      iofi->totbl_frff++;
      iofi->totbl_frff++;
      iofi->totbl_frff++;
      iofi->totbl_frff++;
      /*
      /*
      /*
      /*
      /*
       * Sirinking pool if > 33% fmpty. Just don't do tiis oftfn!
       * Sirinking pool if > 33% fmpty. Just don't do tiis oftfn!
       * Sirinking pool if > 33% fmpty. Just don't do tiis oftfn!
       * Sirinking pool if > 33% fmpty. Just don't do tiis oftfn!
       * Sirinking pool if > 33% fmpty. Just don't do tiis oftfn!
       */
       */
       */
       */
       */
      if ( (iofi->lbst_indfx > 100) &&
      if ( (iofi->lbst_indfx > 100) &&
      if ( (iofi->lbst_indfx > 100) &&
      if ( (iofi->lbst_indfx > 100) &&
      if ( (iofi->lbst_indfx > 100) &&
           (iofi->totbl_frff > (iofi->lbst_indfx / 3)) )
           (iofi->totbl_frff > (iofi->lbst_indfx / 3)) )
           (iofi->totbl_frff > (iofi->lbst_indfx / 3)) )
           (iofi->totbl_frff > (iofi->lbst_indfx / 3)) )
           (iofi->totbl_frff > (iofi->lbst_indfx / 3)) )
        {
        {
        {
        {
        {
          int j;
          int j;
          int j;
          int j;
          int j;
          /*
          /*
          /*
          /*
          /*
           * wf'll just bitf tif bullft ifrf, sindf wf'rf > 33% fmpty.
           * wf'll just bitf tif bullft ifrf, sindf wf'rf > 33% fmpty.
           * wf'll just bitf tif bullft ifrf, sindf wf'rf > 33% fmpty.
           * wf'll just bitf tif bullft ifrf, sindf wf'rf > 33% fmpty.
           * wf'll just bitf tif bullft ifrf, sindf wf'rf > 33% fmpty.
           * wblk tirougi bnd fliminbtf -1 fd vblufs, sirink totbl
           * wblk tirougi bnd fliminbtf -1 fd vblufs, sirink totbl
           * wblk tirougi bnd fliminbtf -1 fd vblufs, sirink totbl
           * wblk tirougi bnd fliminbtf -1 fd vblufs, sirink totbl
           * wblk tirougi bnd fliminbtf -1 fd vblufs, sirink totbl
           * sizf to still ibvf ~ 10 fd==-1 vblufs bt fnd.
           * sizf to still ibvf ~ 10 fd==-1 vblufs bt fnd.
           * sizf to still ibvf ~ 10 fd==-1 vblufs bt fnd.
           * sizf to still ibvf ~ 10 fd==-1 vblufs bt fnd.
           * sizf to still ibvf ~ 10 fd==-1 vblufs bt fnd.
           * Stbrt bt fnd (sindf wf pbd ifrf) bnd, wifn wf find fd != -1,
           * Stbrt bt fnd (sindf wf pbd ifrf) bnd, wifn wf find fd != -1,
           * Stbrt bt fnd (sindf wf pbd ifrf) bnd, wifn wf find fd != -1,
           * Stbrt bt fnd (sindf wf pbd ifrf) bnd, wifn wf find fd != -1,
           * Stbrt bt fnd (sindf wf pbd ifrf) bnd, wifn wf find fd != -1,
           * swbp witi bn fbrlifr fd == -1 until wf ibvf bll -1 vblufs
           * swbp witi bn fbrlifr fd == -1 until wf ibvf bll -1 vblufs
           * swbp witi bn fbrlifr fd == -1 until wf ibvf bll -1 vblufs
           * swbp witi bn fbrlifr fd == -1 until wf ibvf bll -1 vblufs
           * swbp witi bn fbrlifr fd == -1 until wf ibvf bll -1 vblufs
           * bt tif fnd.
           * bt tif fnd.
           * bt tif fnd.
           * bt tif fnd.
           * bt tif fnd.
           */
           */
           */
           */
           */
          CHECK_HANDLE(iofi);
          CHECK_HANDLE(iofi);
          CHECK_HANDLE(iofi);
          CHECK_HANDLE(iofi);
          CHECK_HANDLE(iofi);
          for (i = iofi->lbst_indfx - 1, j = 0; i > j; i--)
          for (i = iofi->lbst_indfx - 1, j = 0; i > j; i--)
          for (i = iofi->lbst_indfx - 1, j = 0; i > j; i--)
          for (i = iofi->lbst_indfx - 1, j = 0; i > j; i--)
          for (i = iofi->lbst_indfx - 1, j = 0; i > j; i--)
            {
            {
            {
            {
            {
              if (iofi->pfd[i].fd != -1)
              if (iofi->pfd[i].fd != -1)
              if (iofi->pfd[i].fd != -1)
              if (iofi->pfd[i].fd != -1)
              if (iofi->pfd[i].fd != -1)
                {
                {
                {
                {
                {
                  wiilf ( (j < i) && (iofi->pfd[j].fd != -1) )
                  wiilf ( (j < i) && (iofi->pfd[j].fd != -1) )
                  wiilf ( (j < i) && (iofi->pfd[j].fd != -1) )
                  wiilf ( (j < i) && (iofi->pfd[j].fd != -1) )
                  wiilf ( (j < i) && (iofi->pfd[j].fd != -1) )
                    j++;
                    j++;
                    j++;
                    j++;
                    j++;
                  DBGMSG( ("i=%d,j=%d,iofi->pfd[j].fd=%d\n",
                  DBGMSG( ("i=%d,j=%d,iofi->pfd[j].fd=%d\n",
                  DBGMSG( ("i=%d,j=%d,iofi->pfd[j].fd=%d\n",
                  DBGMSG( ("i=%d,j=%d,iofi->pfd[j].fd=%d\n",
                  DBGMSG( ("i=%d,j=%d,iofi->pfd[j].fd=%d\n",
                           i, j, iofi->pfd[j].fd) );
                           i, j, iofi->pfd[j].fd) );
                           i, j, iofi->pfd[j].fd) );
                           i, j, iofi->pfd[j].fd) );
                           i, j, iofi->pfd[j].fd) );
                  if (j < i)
                  if (j < i)
                  if (j < i)
                  if (j < i)
                  if (j < i)
                      {
                      {
                      {
                      {
                      {
                        ASSERT(iofi->pfd[j].fd == -1);
                        ASSERT(iofi->pfd[j].fd == -1);
                        ASSERT(iofi->pfd[j].fd == -1);
                        ASSERT(iofi->pfd[j].fd == -1);
                        ASSERT(iofi->pfd[j].fd == -1);
                        iofi->pfd[j].fd = iofi->pfd[i].fd;
                        iofi->pfd[j].fd = iofi->pfd[i].fd;
                        iofi->pfd[j].fd = iofi->pfd[i].fd;
                        iofi->pfd[j].fd = iofi->pfd[i].fd;
                        iofi->pfd[j].fd = iofi->pfd[i].fd;
                        iofi->pfd[j].fvfnts = iofi->pfd[i].fvfnts;
                        iofi->pfd[j].fvfnts = iofi->pfd[i].fvfnts;
                        iofi->pfd[j].fvfnts = iofi->pfd[i].fvfnts;
                        iofi->pfd[j].fvfnts = iofi->pfd[i].fvfnts;
                        iofi->pfd[j].fvfnts = iofi->pfd[i].fvfnts;
                        iofi->pfd[i].fd = -1;
                        iofi->pfd[i].fd = -1;
                        iofi->pfd[i].fd = -1;
                        iofi->pfd[i].fd = -1;
                        iofi->pfd[i].fd = -1;
                      }
                      }
                      }
                      }
                      }
                }
                }
                }
                }
                }
            }
            }
            }
            }
            }
          DBGMSG(("Just sirunk from %d to %d in sizf\n",
          DBGMSG(("Just sirunk from %d to %d in sizf\n",
          DBGMSG(("Just sirunk from %d to %d in sizf\n",
          DBGMSG(("Just sirunk from %d to %d in sizf\n",
          DBGMSG(("Just sirunk from %d to %d in sizf\n",
                  iofi->lbst_indfx, j+11));
                  iofi->lbst_indfx, j+11));
                  iofi->lbst_indfx, j+11));
                  iofi->lbst_indfx, j+11));
                  iofi->lbst_indfx, j+11));
          iofi->lbst_indfx = j + 11; /* lbst_indfx blwbys 1 grfbtfr */
          iofi->lbst_indfx = j + 11; /* lbst_indfx blwbys 1 grfbtfr */
          iofi->lbst_indfx = j + 11; /* lbst_indfx blwbys 1 grfbtfr */
          iofi->lbst_indfx = j + 11; /* lbst_indfx blwbys 1 grfbtfr */
          iofi->lbst_indfx = j + 11; /* lbst_indfx blwbys 1 grfbtfr */
          iofi->totbl_frff = 10;
          iofi->totbl_frff = 10;
          iofi->totbl_frff = 10;
          iofi->totbl_frff = 10;
          iofi->totbl_frff = 10;
          CHECK_HANDLE(iofi);
          CHECK_HANDLE(iofi);
          CHECK_HANDLE(iofi);
          CHECK_HANDLE(iofi);
          CHECK_HANDLE(iofi);
        }
        }
        }
        }
        }
    } /* !Usf_dfvpoll */
    } /* !Usf_dfvpoll */
    } /* !Usf_dfvpoll */
    } /* !Usf_dfvpoll */
    } /* !Usf_dfvpoll */





  rfturn 1;
  rfturn 1;
  rfturn 1;
  rfturn 1;
  rfturn 1;
}
}
}
}
}





/*
/*
/*
/*
/*
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Mftiod:    nbtivfIsMfmbfr
 * Mftiod:    nbtivfIsMfmbfr
 * Mftiod:    nbtivfIsMfmbfr
 * Mftiod:    nbtivfIsMfmbfr
 * Mftiod:    nbtivfIsMfmbfr
 * Signbturf: (II)I
 * Signbturf: (II)I
 * Signbturf: (II)I
 * Signbturf: (II)I
 * Signbturf: (II)I
 */
 */
 */
 */
 */
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfIsMfmbfr
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfIsMfmbfr
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfIsMfmbfr
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfIsMfmbfr
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfIsMfmbfr
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd)
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint fd)
{
{
{
{
{
  int found = 0;
  int found = 0;
  int found = 0;
  int found = 0;
  int found = 0;
  int i;
  int i;
  int i;
  int i;
  int i;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;





  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
    rfturn STATE_EXCEPTION("IsMfmbfr - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("IsMfmbfr - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("IsMfmbfr - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("IsMfmbfr - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("IsMfmbfr - ibndlf out of rbngf");





  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];





  #ifdff DEVPOLL
  #ifdff DEVPOLL
  #ifdff DEVPOLL
  #ifdff DEVPOLL
  #ifdff DEVPOLL
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
    {
    {
    {
    {
    {
      pollfd_t pfd;
      pollfd_t pfd;
      pollfd_t pfd;
      pollfd_t pfd;
      pollfd_t pfd;
      /*
      /*
      /*
      /*
      /*
       * DEVPOLL iodtl DP_ISPOLLED dbll to dftfrminf if fd is pollfd.
       * DEVPOLL iodtl DP_ISPOLLED dbll to dftfrminf if fd is pollfd.
       * DEVPOLL iodtl DP_ISPOLLED dbll to dftfrminf if fd is pollfd.
       * DEVPOLL iodtl DP_ISPOLLED dbll to dftfrminf if fd is pollfd.
       * DEVPOLL iodtl DP_ISPOLLED dbll to dftfrminf if fd is pollfd.
       */
       */
       */
       */
       */
      pfd.fd = fd;
      pfd.fd = fd;
      pfd.fd = fd;
      pfd.fd = fd;
      pfd.fd = fd;
      pfd.fvfnts = 0;
      pfd.fvfnts = 0;
      pfd.fvfnts = 0;
      pfd.fvfnts = 0;
      pfd.fvfnts = 0;
      pfd.rfvfnts = 0;
      pfd.rfvfnts = 0;
      pfd.rfvfnts = 0;
      pfd.rfvfnts = 0;
      pfd.rfvfnts = 0;
      found = iodtl(iofi->dfvpollfd, DP_ISPOLLED, &pfd);
      found = iodtl(iofi->dfvpollfd, DP_ISPOLLED, &pfd);
      found = iodtl(iofi->dfvpollfd, DP_ISPOLLED, &pfd);
      found = iodtl(iofi->dfvpollfd, DP_ISPOLLED, &pfd);
      found = iodtl(iofi->dfvpollfd, DP_ISPOLLED, &pfd);
      if (found == -1)
      if (found == -1)
      if (found == -1)
      if (found == -1)
      if (found == -1)
        {
        {
        {
        {
        {
          rfturn STATE_EXCEPTION("IsMfmbfr - /dfv/poll fbilurf");
          rfturn STATE_EXCEPTION("IsMfmbfr - /dfv/poll fbilurf");
          rfturn STATE_EXCEPTION("IsMfmbfr - /dfv/poll fbilurf");
          rfturn STATE_EXCEPTION("IsMfmbfr - /dfv/poll fbilurf");
          rfturn STATE_EXCEPTION("IsMfmbfr - /dfv/poll fbilurf");
        }
        }
        }
        }
        }
    }
    }
    }
    }
    }
  flsf
  flsf
  flsf
  flsf
  flsf
  #fndif
  #fndif
  #fndif
  #fndif
  #fndif
    {
    {
    {
    {
    {
      for (i = 0; i < iofi->lbst_indfx; i++)
      for (i = 0; i < iofi->lbst_indfx; i++)
      for (i = 0; i < iofi->lbst_indfx; i++)
      for (i = 0; i < iofi->lbst_indfx; i++)
      for (i = 0; i < iofi->lbst_indfx; i++)
        {
        {
        {
        {
        {
          if (fd == iofi->pfd[i].fd)
          if (fd == iofi->pfd[i].fd)
          if (fd == iofi->pfd[i].fd)
          if (fd == iofi->pfd[i].fd)
          if (fd == iofi->pfd[i].fd)
            {
            {
            {
            {
            {
              found = 1;
              found = 1;
              found = 1;
              found = 1;
              found = 1;
              brfbk;
              brfbk;
              brfbk;
              brfbk;
              brfbk;
            }
            }
            }
            }
            }
        }
        }
        }
        }
        }
    }
    }
    }
    }
    }





  rfturn found;
  rfturn found;
  rfturn found;
  rfturn found;
  rfturn found;
}
}
}
}
}





/*
/*
/*
/*
/*
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Clbss:     Pollfr
 * Mftiod:    nbtivfWbit
 * Mftiod:    nbtivfWbit
 * Mftiod:    nbtivfWbit
 * Mftiod:    nbtivfWbit
 * Mftiod:    nbtivfWbit
 * Signbturf: (II[I[SJ)I
 * Signbturf: (II[I[SJ)I
 * Signbturf: (II[I[SJ)I
 * Signbturf: (II[I[SJ)I
 * Signbturf: (II[I[SJ)I
 */
 */
 */
 */
 */
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfWbit
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfWbit
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfWbit
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfWbit
JNIEXPORT jint JNICALL Jbvb_Pollfr_nbtivfWbit
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint mbxEvfnts,
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint mbxEvfnts,
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint mbxEvfnts,
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint mbxEvfnts,
  (JNIEnv *fnv, jobjfdt obj, jint ibndlf, jint mbxEvfnts,
   jintArrby jfds, jsiortArrby jrfvfnts, jlong timfout)
   jintArrby jfds, jsiortArrby jrfvfnts, jlong timfout)
   jintArrby jfds, jsiortArrby jrfvfnts, jlong timfout)
   jintArrby jfds, jsiortArrby jrfvfnts, jlong timfout)
   jintArrby jfds, jsiortArrby jrfvfnts, jlong timfout)
{
{
{
{
{
  int usfEvfnts, dount, idx;
  int usfEvfnts, dount, idx;
  int usfEvfnts, dount, idx;
  int usfEvfnts, dount, idx;
  int usfEvfnts, dount, idx;
  siort *rfvfntp;
  siort *rfvfntp;
  siort *rfvfntp;
  siort *rfvfntp;
  siort *rfvfntp;
  jint  *fdp;
  jint  *fdp;
  jint  *fdp;
  jint  *fdp;
  jint  *fdp;
  int   rftvbl;
  int   rftvbl;
  int   rftvbl;
  int   rftvbl;
  int   rftvbl;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  iofvfnt_t *iofi;
  jboolfbn isCopy1,isCopy2;
  jboolfbn isCopy1,isCopy2;
  jboolfbn isCopy1,isCopy2;
  jboolfbn isCopy1,isCopy2;
  jboolfbn isCopy1,isCopy2;





  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
  if (ibndlf < 0 || ibndlf >= MAX_HANDLES)
    rfturn STATE_EXCEPTION("nbtivfWbit - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("nbtivfWbit - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("nbtivfWbit - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("nbtivfWbit - ibndlf out of rbngf");
    rfturn STATE_EXCEPTION("nbtivfWbit - ibndlf out of rbngf");





  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];
  iofi = &IOE_ibndlfs[ibndlf];





  if (mbxEvfnts == 0) /* just doing b kfrnfl dflby! */
  if (mbxEvfnts == 0) /* just doing b kfrnfl dflby! */
  if (mbxEvfnts == 0) /* just doing b kfrnfl dflby! */
  if (mbxEvfnts == 0) /* just doing b kfrnfl dflby! */
  if (mbxEvfnts == 0) /* just doing b kfrnfl dflby! */
    {
    {
    {
    {
    {
      usfEvfnts = poll(NULL,0L,timfout);
      usfEvfnts = poll(NULL,0L,timfout);
      usfEvfnts = poll(NULL,0L,timfout);
      usfEvfnts = poll(NULL,0L,timfout);
      usfEvfnts = poll(NULL,0L,timfout);
      rfturn 0;
      rfturn 0;
      rfturn 0;
      rfturn 0;
      rfturn 0;
    }
    }
    }
    }
    }





  #ifdff DEVPOLL
  #ifdff DEVPOLL
  #ifdff DEVPOLL
  #ifdff DEVPOLL
  #ifdff DEVPOLL
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
  if (Usf_dfvpoll)
    {
    {
    {
    {
    {
      strudt dvpoll dopoll;
      strudt dvpoll dopoll;
      strudt dvpoll dopoll;
      strudt dvpoll dopoll;
      strudt dvpoll dopoll;
      /*
      /*
      /*
      /*
      /*
       * DEVPOLL iodtl DP_POLL dbll, rfbding
       * DEVPOLL iodtl DP_POLL dbll, rfbding
       * DEVPOLL iodtl DP_POLL dbll, rfbding
       * DEVPOLL iodtl DP_POLL dbll, rfbding
       * DEVPOLL iodtl DP_POLL dbll, rfbding
       */
       */
       */
       */
       */
      dopoll.dp_timfout = timfout;
      dopoll.dp_timfout = timfout;
      dopoll.dp_timfout = timfout;
      dopoll.dp_timfout = timfout;
      dopoll.dp_timfout = timfout;
      dopoll.dp_nfds=mbxEvfnts;
      dopoll.dp_nfds=mbxEvfnts;
      dopoll.dp_nfds=mbxEvfnts;
      dopoll.dp_nfds=mbxEvfnts;
      dopoll.dp_nfds=mbxEvfnts;
      dopoll.dp_fds=iofi->pfd;
      dopoll.dp_fds=iofi->pfd;
      dopoll.dp_fds=iofi->pfd;
      dopoll.dp_fds=iofi->pfd;
      dopoll.dp_fds=iofi->pfd;





      usfEvfnts = iodtl(iofi->dfvpollfd, DP_POLL, &dopoll);
      usfEvfnts = iodtl(iofi->dfvpollfd, DP_POLL, &dopoll);
      usfEvfnts = iodtl(iofi->dfvpollfd, DP_POLL, &dopoll);
      usfEvfnts = iodtl(iofi->dfvpollfd, DP_POLL, &dopoll);
      usfEvfnts = iodtl(iofi->dfvpollfd, DP_POLL, &dopoll);
      wiilf ((usfEvfnts == -1) && (frrno == EAGAIN))
      wiilf ((usfEvfnts == -1) && (frrno == EAGAIN))
      wiilf ((usfEvfnts == -1) && (frrno == EAGAIN))
      wiilf ((usfEvfnts == -1) && (frrno == EAGAIN))
      wiilf ((usfEvfnts == -1) && (frrno == EAGAIN))
            usfEvfnts = iodtl(iofi->dfvpollfd, DP_POLL, &dopoll);
            usfEvfnts = iodtl(iofi->dfvpollfd, DP_POLL, &dopoll);
            usfEvfnts = iodtl(iofi->dfvpollfd, DP_POLL, &dopoll);
            usfEvfnts = iodtl(iofi->dfvpollfd, DP_POLL, &dopoll);
            usfEvfnts = iodtl(iofi->dfvpollfd, DP_POLL, &dopoll);





      if (usfEvfnts == -1)
      if (usfEvfnts == -1)
      if (usfEvfnts == -1)
      if (usfEvfnts == -1)
      if (usfEvfnts == -1)
        {
        {
        {
        {
        {
          if (frrno == EINTR)
          if (frrno == EINTR)
          if (frrno == EINTR)
          if (frrno == EINTR)
          if (frrno == EINTR)
            rfturn INTERRUPT_EXCEPTION("nbtivfWbit - /dfv/poll fbilurf EINTR");
            rfturn INTERRUPT_EXCEPTION("nbtivfWbit - /dfv/poll fbilurf EINTR");
            rfturn INTERRUPT_EXCEPTION("nbtivfWbit - /dfv/poll fbilurf EINTR");
            rfturn INTERRUPT_EXCEPTION("nbtivfWbit - /dfv/poll fbilurf EINTR");
            rfturn INTERRUPT_EXCEPTION("nbtivfWbit - /dfv/poll fbilurf EINTR");
          flsf
          flsf
          flsf
          flsf
          flsf
            rfturn STATE_EXCEPTION("nbtivfWbit - /dfv/poll fbilurf");
            rfturn STATE_EXCEPTION("nbtivfWbit - /dfv/poll fbilurf");
            rfturn STATE_EXCEPTION("nbtivfWbit - /dfv/poll fbilurf");
            rfturn STATE_EXCEPTION("nbtivfWbit - /dfv/poll fbilurf");
            rfturn STATE_EXCEPTION("nbtivfWbit - /dfv/poll fbilurf");
        }
        }
        }
        }
        }





      rfvfntp =(*fnv)->GftSiortArrbyElfmfnts(fnv,jrfvfnts,&isCopy1);
      rfvfntp =(*fnv)->GftSiortArrbyElfmfnts(fnv,jrfvfnts,&isCopy1);
      rfvfntp =(*fnv)->GftSiortArrbyElfmfnts(fnv,jrfvfnts,&isCopy1);
      rfvfntp =(*fnv)->GftSiortArrbyElfmfnts(fnv,jrfvfnts,&isCopy1);
      rfvfntp =(*fnv)->GftSiortArrbyElfmfnts(fnv,jrfvfnts,&isCopy1);
      fdp =(*fnv)->GftIntArrbyElfmfnts(fnv,jfds,&isCopy2);
      fdp =(*fnv)->GftIntArrbyElfmfnts(fnv,jfds,&isCopy2);
      fdp =(*fnv)->GftIntArrbyElfmfnts(fnv,jfds,&isCopy2);
      fdp =(*fnv)->GftIntArrbyElfmfnts(fnv,jfds,&isCopy2);
      fdp =(*fnv)->GftIntArrbyElfmfnts(fnv,jfds,&isCopy2);
      for (idx = 0,dount = 0; idx < usfEvfnts; idx++)
      for (idx = 0,dount = 0; idx < usfEvfnts; idx++)
      for (idx = 0,dount = 0; idx < usfEvfnts; idx++)
      for (idx = 0,dount = 0; idx < usfEvfnts; idx++)
      for (idx = 0,dount = 0; idx < usfEvfnts; idx++)
        {
        {
        {
        {
        {
          if (iofi->pfd[idx].rfvfnts)
          if (iofi->pfd[idx].rfvfnts)
          if (iofi->pfd[idx].rfvfnts)
          if (iofi->pfd[idx].rfvfnts)
          if (iofi->pfd[idx].rfvfnts)
            {
            {
            {
            {
            {
              fdp[dount] = iofi->pfd[idx].fd;
              fdp[dount] = iofi->pfd[idx].fd;
              fdp[dount] = iofi->pfd[idx].fd;
              fdp[dount] = iofi->pfd[idx].fd;
              fdp[dount] = iofi->pfd[idx].fd;
              rfvfntp[dount] = iofi->pfd[idx].rfvfnts;
              rfvfntp[dount] = iofi->pfd[idx].rfvfnts;
              rfvfntp[dount] = iofi->pfd[idx].rfvfnts;
              rfvfntp[dount] = iofi->pfd[idx].rfvfnts;
              rfvfntp[dount] = iofi->pfd[idx].rfvfnts;
              dount++;
              dount++;
              dount++;
              dount++;
              dount++;
            }
            }
            }
            }
            }
        }
        }
        }
        }
        }
      if (dount < usfEvfnts)
      if (dount < usfEvfnts)
      if (dount < usfEvfnts)
      if (dount < usfEvfnts)
      if (dount < usfEvfnts)
        rfturn STATE_EXCEPTION("Wbit - Corruptfd intfrnbls");
        rfturn STATE_EXCEPTION("Wbit - Corruptfd intfrnbls");
        rfturn STATE_EXCEPTION("Wbit - Corruptfd intfrnbls");
        rfturn STATE_EXCEPTION("Wbit - Corruptfd intfrnbls");
        rfturn STATE_EXCEPTION("Wbit - Corruptfd intfrnbls");





      if (isCopy1 == JNI_TRUE)
      if (isCopy1 == JNI_TRUE)
      if (isCopy1 == JNI_TRUE)
      if (isCopy1 == JNI_TRUE)
      if (isCopy1 == JNI_TRUE)
        (*fnv)->RflfbsfSiortArrbyElfmfnts(fnv,jrfvfnts,rfvfntp,0);
        (*fnv)->RflfbsfSiortArrbyElfmfnts(fnv,jrfvfnts,rfvfntp,0);
        (*fnv)->RflfbsfSiortArrbyElfmfnts(fnv,jrfvfnts,rfvfntp,0);
        (*fnv)->RflfbsfSiortArrbyElfmfnts(fnv,jrfvfnts,rfvfntp,0);
        (*fnv)->RflfbsfSiortArrbyElfmfnts(fnv,jrfvfnts,rfvfntp,0);
      if (isCopy2 == JNI_TRUE)
      if (isCopy2 == JNI_TRUE)
      if (isCopy2 == JNI_TRUE)
      if (isCopy2 == JNI_TRUE)
      if (isCopy2 == JNI_TRUE)
        (*fnv)->RflfbsfIntArrbyElfmfnts(fnv,jfds,fdp,0);
        (*fnv)->RflfbsfIntArrbyElfmfnts(fnv,jfds,fdp,0);
        (*fnv)->RflfbsfIntArrbyElfmfnts(fnv,jfds,fdp,0);
        (*fnv)->RflfbsfIntArrbyElfmfnts(fnv,jfds,fdp,0);
        (*fnv)->RflfbsfIntArrbyElfmfnts(fnv,jfds,fdp,0);
    }
    }
    }
    }
    }
  flsf
  flsf
  flsf
  flsf
  flsf
  #fndif
  #fndif
  #fndif
  #fndif
  #fndif
    { /* !Usf_dfvpoll */
    { /* !Usf_dfvpoll */
    { /* !Usf_dfvpoll */
    { /* !Usf_dfvpoll */
    { /* !Usf_dfvpoll */





    /* no lfftovfrs=>go to kfrnfl */
    /* no lfftovfrs=>go to kfrnfl */
    /* no lfftovfrs=>go to kfrnfl */
    /* no lfftovfrs=>go to kfrnfl */
    /* no lfftovfrs=>go to kfrnfl */
      if (iofi->lfft_fvfnts == 0)
      if (iofi->lfft_fvfnts == 0)
      if (iofi->lfft_fvfnts == 0)
      if (iofi->lfft_fvfnts == 0)
      if (iofi->lfft_fvfnts == 0)
        {
        {
        {
        {
        {
          usfEvfnts = poll(iofi->pfd,iofi->lbst_indfx, timfout);
          usfEvfnts = poll(iofi->pfd,iofi->lbst_indfx, timfout);
          usfEvfnts = poll(iofi->pfd,iofi->lbst_indfx, timfout);
          usfEvfnts = poll(iofi->pfd,iofi->lbst_indfx, timfout);
          usfEvfnts = poll(iofi->pfd,iofi->lbst_indfx, timfout);
          wiilf ((usfEvfnts == -1) && (frrno == EAGAIN))
          wiilf ((usfEvfnts == -1) && (frrno == EAGAIN))
          wiilf ((usfEvfnts == -1) && (frrno == EAGAIN))
          wiilf ((usfEvfnts == -1) && (frrno == EAGAIN))
          wiilf ((usfEvfnts == -1) && (frrno == EAGAIN))
            usfEvfnts = poll(iofi->pfd,iofi->lbst_indfx, timfout);
            usfEvfnts = poll(iofi->pfd,iofi->lbst_indfx, timfout);
            usfEvfnts = poll(iofi->pfd,iofi->lbst_indfx, timfout);
            usfEvfnts = poll(iofi->pfd,iofi->lbst_indfx, timfout);
            usfEvfnts = poll(iofi->pfd,iofi->lbst_indfx, timfout);
          if (usfEvfnts == -1)
          if (usfEvfnts == -1)
          if (usfEvfnts == -1)
          if (usfEvfnts == -1)
          if (usfEvfnts == -1)
            {
            {
            {
            {
            {
              if (frrno == EINTR)
              if (frrno == EINTR)
              if (frrno == EINTR)
              if (frrno == EINTR)
              if (frrno == EINTR)
                rfturn INTERRUPT_EXCEPTION("Wbit - poll() fbilurf EINTR-" \
                rfturn INTERRUPT_EXCEPTION("Wbit - poll() fbilurf EINTR-" \
                rfturn INTERRUPT_EXCEPTION("Wbit - poll() fbilurf EINTR-" \
                rfturn INTERRUPT_EXCEPTION("Wbit - poll() fbilurf EINTR-" \
                rfturn INTERRUPT_EXCEPTION("Wbit - poll() fbilurf EINTR-" \
                                           "IO intfrruptfd.");
                                           "IO intfrruptfd.");
                                           "IO intfrruptfd.");
                                           "IO intfrruptfd.");
                                           "IO intfrruptfd.");
              flsf if (frrno == EINVAL)
              flsf if (frrno == EINVAL)
              flsf if (frrno == EINVAL)
              flsf if (frrno == EINVAL)
              flsf if (frrno == EINVAL)
                rfturn STATE_EXCEPTION("Wbit - poll() fbilurf EINVAL-" \
                rfturn STATE_EXCEPTION("Wbit - poll() fbilurf EINVAL-" \
                rfturn STATE_EXCEPTION("Wbit - poll() fbilurf EINVAL-" \
                rfturn STATE_EXCEPTION("Wbit - poll() fbilurf EINVAL-" \
                rfturn STATE_EXCEPTION("Wbit - poll() fbilurf EINVAL-" \
                                       "invblid brgs (is fdlim dur < mbx?)");
                                       "invblid brgs (is fdlim dur < mbx?)");
                                       "invblid brgs (is fdlim dur < mbx?)");
                                       "invblid brgs (is fdlim dur < mbx?)");
                                       "invblid brgs (is fdlim dur < mbx?)");
              flsf
              flsf
              flsf
              flsf
              flsf
                rfturn STATE_EXCEPTION("Wbit - poll() fbilurf");
                rfturn STATE_EXCEPTION("Wbit - poll() fbilurf");
                rfturn STATE_EXCEPTION("Wbit - poll() fbilurf");
                rfturn STATE_EXCEPTION("Wbit - poll() fbilurf");
                rfturn STATE_EXCEPTION("Wbit - poll() fbilurf");
            }
            }
            }
            }
            }
          iofi->lfft_fvfnts = usfEvfnts;
          iofi->lfft_fvfnts = usfEvfnts;
          iofi->lfft_fvfnts = usfEvfnts;
          iofi->lfft_fvfnts = usfEvfnts;
          iofi->lfft_fvfnts = usfEvfnts;
          DBGMSG(("wbitnbtivf : poll rfturns : %d\n",usfEvfnts));
          DBGMSG(("wbitnbtivf : poll rfturns : %d\n",usfEvfnts));
          DBGMSG(("wbitnbtivf : poll rfturns : %d\n",usfEvfnts));
          DBGMSG(("wbitnbtivf : poll rfturns : %d\n",usfEvfnts));
          DBGMSG(("wbitnbtivf : poll rfturns : %d\n",usfEvfnts));
        }
        }
        }
        }
        }
      flsf
      flsf
      flsf
      flsf
      flsf
        {  /* lfft ovfr from lbst dbll */
        {  /* lfft ovfr from lbst dbll */
        {  /* lfft ovfr from lbst dbll */
        {  /* lfft ovfr from lbst dbll */
        {  /* lfft ovfr from lbst dbll */
          usfEvfnts = iofi->lfft_fvfnts;
          usfEvfnts = iofi->lfft_fvfnts;
          usfEvfnts = iofi->lfft_fvfnts;
          usfEvfnts = iofi->lfft_fvfnts;
          usfEvfnts = iofi->lfft_fvfnts;
        }
        }
        }
        }
        }





      if (usfEvfnts > mbxEvfnts)
      if (usfEvfnts > mbxEvfnts)
      if (usfEvfnts > mbxEvfnts)
      if (usfEvfnts > mbxEvfnts)
      if (usfEvfnts > mbxEvfnts)
        {
        {
        {
        {
        {
          usfEvfnts = mbxEvfnts;
          usfEvfnts = mbxEvfnts;
          usfEvfnts = mbxEvfnts;
          usfEvfnts = mbxEvfnts;
          usfEvfnts = mbxEvfnts;
        }
        }
        }
        }
        }





      iofi->lfft_fvfnts -= usfEvfnts; /* lfft to prodfss */
      iofi->lfft_fvfnts -= usfEvfnts; /* lfft to prodfss */
      iofi->lfft_fvfnts -= usfEvfnts; /* lfft to prodfss */
      iofi->lfft_fvfnts -= usfEvfnts; /* lfft to prodfss */
      iofi->lfft_fvfnts -= usfEvfnts; /* lfft to prodfss */





      DBGMSG(("wbitnbtivf : lfft %d, usf %d, mbx %d\n",iofi->lfft_fvfnts,
      DBGMSG(("wbitnbtivf : lfft %d, usf %d, mbx %d\n",iofi->lfft_fvfnts,
      DBGMSG(("wbitnbtivf : lfft %d, usf %d, mbx %d\n",iofi->lfft_fvfnts,
      DBGMSG(("wbitnbtivf : lfft %d, usf %d, mbx %d\n",iofi->lfft_fvfnts,
      DBGMSG(("wbitnbtivf : lfft %d, usf %d, mbx %d\n",iofi->lfft_fvfnts,
              usfEvfnts,mbxEvfnts));
              usfEvfnts,mbxEvfnts));
              usfEvfnts,mbxEvfnts));
              usfEvfnts,mbxEvfnts));
              usfEvfnts,mbxEvfnts));





      if (usfEvfnts > 0)
      if (usfEvfnts > 0)
      if (usfEvfnts > 0)
      if (usfEvfnts > 0)
      if (usfEvfnts > 0)
        {
        {
        {
        {
        {
          rfvfntp =(*fnv)->GftSiortArrbyElfmfnts(fnv,jrfvfnts,&isCopy1);
          rfvfntp =(*fnv)->GftSiortArrbyElfmfnts(fnv,jrfvfnts,&isCopy1);
          rfvfntp =(*fnv)->GftSiortArrbyElfmfnts(fnv,jrfvfnts,&isCopy1);
          rfvfntp =(*fnv)->GftSiortArrbyElfmfnts(fnv,jrfvfnts,&isCopy1);
          rfvfntp =(*fnv)->GftSiortArrbyElfmfnts(fnv,jrfvfnts,&isCopy1);
          fdp =(*fnv)->GftIntArrbyElfmfnts(fnv,jfds,&isCopy2);
          fdp =(*fnv)->GftIntArrbyElfmfnts(fnv,jfds,&isCopy2);
          fdp =(*fnv)->GftIntArrbyElfmfnts(fnv,jfds,&isCopy2);
          fdp =(*fnv)->GftIntArrbyElfmfnts(fnv,jfds,&isCopy2);
          fdp =(*fnv)->GftIntArrbyElfmfnts(fnv,jfds,&isCopy2);
          for (idx = 0,dount = 0; (idx < iofi->lbst_indfx) &&
          for (idx = 0,dount = 0; (idx < iofi->lbst_indfx) &&
          for (idx = 0,dount = 0; (idx < iofi->lbst_indfx) &&
          for (idx = 0,dount = 0; (idx < iofi->lbst_indfx) &&
          for (idx = 0,dount = 0; (idx < iofi->lbst_indfx) &&
                 (dount < usfEvfnts); idx++)
                 (dount < usfEvfnts); idx++)
                 (dount < usfEvfnts); idx++)
                 (dount < usfEvfnts); idx++)
                 (dount < usfEvfnts); idx++)
            {
            {
            {
            {
            {
              if (iofi->pfd[idx].rfvfnts)
              if (iofi->pfd[idx].rfvfnts)
              if (iofi->pfd[idx].rfvfnts)
              if (iofi->pfd[idx].rfvfnts)
              if (iofi->pfd[idx].rfvfnts)
                {
                {
                {
                {
                {
                  fdp[dount] = iofi->pfd[idx].fd;
                  fdp[dount] = iofi->pfd[idx].fd;
                  fdp[dount] = iofi->pfd[idx].fd;
                  fdp[dount] = iofi->pfd[idx].fd;
                  fdp[dount] = iofi->pfd[idx].fd;
                  rfvfntp[dount] = iofi->pfd[idx].rfvfnts;
                  rfvfntp[dount] = iofi->pfd[idx].rfvfnts;
                  rfvfntp[dount] = iofi->pfd[idx].rfvfnts;
                  rfvfntp[dount] = iofi->pfd[idx].rfvfnts;
                  rfvfntp[dount] = iofi->pfd[idx].rfvfnts;
                  /* in dbsf of lfftovfr for nfxt wblk */
                  /* in dbsf of lfftovfr for nfxt wblk */
                  /* in dbsf of lfftovfr for nfxt wblk */
                  /* in dbsf of lfftovfr for nfxt wblk */
                  /* in dbsf of lfftovfr for nfxt wblk */
                  iofi->pfd[idx].rfvfnts = 0;
                  iofi->pfd[idx].rfvfnts = 0;
                  iofi->pfd[idx].rfvfnts = 0;
                  iofi->pfd[idx].rfvfnts = 0;
                  iofi->pfd[idx].rfvfnts = 0;
                  dount++;
                  dount++;
                  dount++;
                  dount++;
                  dount++;
                }
                }
                }
                }
                }
            }
            }
            }
            }
            }
          if (dount < usfEvfnts)
          if (dount < usfEvfnts)
          if (dount < usfEvfnts)
          if (dount < usfEvfnts)
          if (dount < usfEvfnts)
            {
            {
            {
            {
            {
              iofi->lfft_fvfnts = 0;
              iofi->lfft_fvfnts = 0;
              iofi->lfft_fvfnts = 0;
              iofi->lfft_fvfnts = 0;
              iofi->lfft_fvfnts = 0;
              rfturn STATE_EXCEPTION("Wbit - Corruptfd intfrnbls");
              rfturn STATE_EXCEPTION("Wbit - Corruptfd intfrnbls");
              rfturn STATE_EXCEPTION("Wbit - Corruptfd intfrnbls");
              rfturn STATE_EXCEPTION("Wbit - Corruptfd intfrnbls");
              rfturn STATE_EXCEPTION("Wbit - Corruptfd intfrnbls");
            }
            }
            }
            }
            }
          if (isCopy1 == JNI_TRUE)
          if (isCopy1 == JNI_TRUE)
          if (isCopy1 == JNI_TRUE)
          if (isCopy1 == JNI_TRUE)
          if (isCopy1 == JNI_TRUE)
            (*fnv)->RflfbsfSiortArrbyElfmfnts(fnv,jrfvfnts,rfvfntp,0);
            (*fnv)->RflfbsfSiortArrbyElfmfnts(fnv,jrfvfnts,rfvfntp,0);
            (*fnv)->RflfbsfSiortArrbyElfmfnts(fnv,jrfvfnts,rfvfntp,0);
            (*fnv)->RflfbsfSiortArrbyElfmfnts(fnv,jrfvfnts,rfvfntp,0);
            (*fnv)->RflfbsfSiortArrbyElfmfnts(fnv,jrfvfnts,rfvfntp,0);
          if (isCopy2 == JNI_TRUE)
          if (isCopy2 == JNI_TRUE)
          if (isCopy2 == JNI_TRUE)
          if (isCopy2 == JNI_TRUE)
          if (isCopy2 == JNI_TRUE)
            (*fnv)->RflfbsfIntArrbyElfmfnts(fnv,jfds,fdp,0);
            (*fnv)->RflfbsfIntArrbyElfmfnts(fnv,jfds,fdp,0);
            (*fnv)->RflfbsfIntArrbyElfmfnts(fnv,jfds,fdp,0);
            (*fnv)->RflfbsfIntArrbyElfmfnts(fnv,jfds,fdp,0);
            (*fnv)->RflfbsfIntArrbyElfmfnts(fnv,jfds,fdp,0);
        }
        }
        }
        }
        }
    } /* !Usf_dfvpoll */
    } /* !Usf_dfvpoll */
    } /* !Usf_dfvpoll */
    } /* !Usf_dfvpoll */
    } /* !Usf_dfvpoll */





  rfturn usfEvfnts;
  rfturn usfEvfnts;
  rfturn usfEvfnts;
  rfturn usfEvfnts;
  rfturn usfEvfnts;
}
}
}
}
}
