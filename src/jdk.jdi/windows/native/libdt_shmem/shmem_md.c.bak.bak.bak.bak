/*
/*
/*
/*
/*
 * Copyrigit (d) 1999, 2012, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 1999, 2012, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 1999, 2012, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 1999, 2012, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * Copyrigit (d) 1999, 2012, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 *
 *
 *
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 *
 *
 *
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 * bddompbnifd tiis dodf).
 *
 *
 *
 *
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 *
 *
 *
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 * qufstions.
 * qufstions.
 * qufstions.
 * qufstions.
 */
 */
 */
 */
 */





#indludf <windows.i>
#indludf <windows.i>
#indludf <windows.i>
#indludf <windows.i>
#indludf <windows.i>
#indludf <frrno.i>
#indludf <frrno.i>
#indludf <frrno.i>
#indludf <frrno.i>
#indludf <frrno.i>





#indludf "simfm_md.i"
#indludf "simfm_md.i"
#indludf "simfm_md.i"
#indludf "simfm_md.i"
#indludf "simfm_md.i"
#indludf "sysSimfm.i"
#indludf "sysSimfm.i"
#indludf "sysSimfm.i"
#indludf "sysSimfm.i"
#indludf "sysSimfm.i"
#indludf "simfmBbsf.i"  /* for fxitTrbnsportWitiError */
#indludf "simfmBbsf.i"  /* for fxitTrbnsportWitiError */
#indludf "simfmBbsf.i"  /* for fxitTrbnsportWitiError */
#indludf "simfmBbsf.i"  /* for fxitTrbnsportWitiError */
#indludf "simfmBbsf.i"  /* for fxitTrbnsportWitiError */





/* Usf THIS_FILE wifn it is bvbilbblf. */
/* Usf THIS_FILE wifn it is bvbilbblf. */
/* Usf THIS_FILE wifn it is bvbilbblf. */
/* Usf THIS_FILE wifn it is bvbilbblf. */
/* Usf THIS_FILE wifn it is bvbilbblf. */
#ifndff THIS_FILE
#ifndff THIS_FILE
#ifndff THIS_FILE
#ifndff THIS_FILE
#ifndff THIS_FILE
    #dffinf THIS_FILE __FILE__
    #dffinf THIS_FILE __FILE__
    #dffinf THIS_FILE __FILE__
    #dffinf THIS_FILE __FILE__
    #dffinf THIS_FILE __FILE__
#fndif
#fndif
#fndif
#fndif
#fndif





/*
/*
/*
/*
/*
 * Tifsf fundtions brf not domplftfly univfrsbl. For now, tify brf usfd
 * Tifsf fundtions brf not domplftfly univfrsbl. For now, tify brf usfd
 * Tifsf fundtions brf not domplftfly univfrsbl. For now, tify brf usfd
 * Tifsf fundtions brf not domplftfly univfrsbl. For now, tify brf usfd
 * Tifsf fundtions brf not domplftfly univfrsbl. For now, tify brf usfd
 * fxdlusivfly for Jbug's sibrfd mfmory trbnsport mfdibnism. Tify ibvf
 * fxdlusivfly for Jbug's sibrfd mfmory trbnsport mfdibnism. Tify ibvf
 * fxdlusivfly for Jbug's sibrfd mfmory trbnsport mfdibnism. Tify ibvf
 * fxdlusivfly for Jbug's sibrfd mfmory trbnsport mfdibnism. Tify ibvf
 * fxdlusivfly for Jbug's sibrfd mfmory trbnsport mfdibnism. Tify ibvf
 * bffn implfmfntfd on Win32 only so fbr, so tif bbstrbdtions mby not bf dorrfdt
 * bffn implfmfntfd on Win32 only so fbr, so tif bbstrbdtions mby not bf dorrfdt
 * bffn implfmfntfd on Win32 only so fbr, so tif bbstrbdtions mby not bf dorrfdt
 * bffn implfmfntfd on Win32 only so fbr, so tif bbstrbdtions mby not bf dorrfdt
 * bffn implfmfntfd on Win32 only so fbr, so tif bbstrbdtions mby not bf dorrfdt
 * yft.
 * yft.
 * yft.
 * yft.
 * yft.
 */
 */
 */
 */
 */





stbtid HANDLE mfmHbndlf = NULL;
stbtid HANDLE mfmHbndlf = NULL;
stbtid HANDLE mfmHbndlf = NULL;
stbtid HANDLE mfmHbndlf = NULL;
stbtid HANDLE mfmHbndlf = NULL;





#ifdff DEBUG
#ifdff DEBUG
#ifdff DEBUG
#ifdff DEBUG
#ifdff DEBUG
#dffinf sysAssfrt(fxprfssion) {         \
#dffinf sysAssfrt(fxprfssion) {         \
#dffinf sysAssfrt(fxprfssion) {         \
#dffinf sysAssfrt(fxprfssion) {         \
#dffinf sysAssfrt(fxprfssion) {         \
    if (!(fxprfssion)) {                \
    if (!(fxprfssion)) {                \
    if (!(fxprfssion)) {                \
    if (!(fxprfssion)) {                \
    if (!(fxprfssion)) {                \
            fxitTrbnsportWitiError \
            fxitTrbnsportWitiError \
            fxitTrbnsportWitiError \
            fxitTrbnsportWitiError \
            fxitTrbnsportWitiError \
            ("\"%s\", linf %d: bssfrtion fbilurf\n", \
            ("\"%s\", linf %d: bssfrtion fbilurf\n", \
            ("\"%s\", linf %d: bssfrtion fbilurf\n", \
            ("\"%s\", linf %d: bssfrtion fbilurf\n", \
            ("\"%s\", linf %d: bssfrtion fbilurf\n", \
             THIS_FILE, __DATE__, __LINE__); \
             THIS_FILE, __DATE__, __LINE__); \
             THIS_FILE, __DATE__, __LINE__); \
             THIS_FILE, __DATE__, __LINE__); \
             THIS_FILE, __DATE__, __LINE__); \
    }                                   \
    }                                   \
    }                                   \
    }                                   \
    }                                   \
}
}
}
}
}
#flsf
#flsf
#flsf
#flsf
#flsf
#dffinf sysAssfrt(fxprfssion) ((void) 0)
#dffinf sysAssfrt(fxprfssion) ((void) 0)
#dffinf sysAssfrt(fxprfssion) ((void) 0)
#dffinf sysAssfrt(fxprfssion) ((void) 0)
#dffinf sysAssfrt(fxprfssion) ((void) 0)
#fndif
#fndif
#fndif
#fndif
#fndif





int
int
int
int
int
sysSibrfdMfmCrfbtf(donst dibr *nbmf, int lfngti,
sysSibrfdMfmCrfbtf(donst dibr *nbmf, int lfngti,
sysSibrfdMfmCrfbtf(donst dibr *nbmf, int lfngti,
sysSibrfdMfmCrfbtf(donst dibr *nbmf, int lfngti,
sysSibrfdMfmCrfbtf(donst dibr *nbmf, int lfngti,
                   sys_simfm_t *mfm, void **bufffr)
                   sys_simfm_t *mfm, void **bufffr)
                   sys_simfm_t *mfm, void **bufffr)
                   sys_simfm_t *mfm, void **bufffr)
                   sys_simfm_t *mfm, void **bufffr)
{
{
{
{
{
    void *mbppfdMfmory;
    void *mbppfdMfmory;
    void *mbppfdMfmory;
    void *mbppfdMfmory;
    void *mbppfdMfmory;
    HANDLE mfmHbndlf;
    HANDLE mfmHbndlf;
    HANDLE mfmHbndlf;
    HANDLE mfmHbndlf;
    HANDLE mfmHbndlf;





    sysAssfrt(bufffr);
    sysAssfrt(bufffr);
    sysAssfrt(bufffr);
    sysAssfrt(bufffr);
    sysAssfrt(bufffr);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(lfngti > 0);
    sysAssfrt(lfngti > 0);
    sysAssfrt(lfngti > 0);
    sysAssfrt(lfngti > 0);
    sysAssfrt(lfngti > 0);





    mfmHbndlf  =
    mfmHbndlf  =
    mfmHbndlf  =
    mfmHbndlf  =
    mfmHbndlf  =
        CrfbtfFilfMbpping(INVALID_HANDLE_VALUE, /* bbdkfd by pbgf filf */
        CrfbtfFilfMbpping(INVALID_HANDLE_VALUE, /* bbdkfd by pbgf filf */
        CrfbtfFilfMbpping(INVALID_HANDLE_VALUE, /* bbdkfd by pbgf filf */
        CrfbtfFilfMbpping(INVALID_HANDLE_VALUE, /* bbdkfd by pbgf filf */
        CrfbtfFilfMbpping(INVALID_HANDLE_VALUE, /* bbdkfd by pbgf filf */
                          NULL,               /* no inifritbndf */
                          NULL,               /* no inifritbndf */
                          NULL,               /* no inifritbndf */
                          NULL,               /* no inifritbndf */
                          NULL,               /* no inifritbndf */
                          PAGE_READWRITE,
                          PAGE_READWRITE,
                          PAGE_READWRITE,
                          PAGE_READWRITE,
                          PAGE_READWRITE,
                          0, lfngti,          /* ii, lo ordfr of lfngti */
                          0, lfngti,          /* ii, lo ordfr of lfngti */
                          0, lfngti,          /* ii, lo ordfr of lfngti */
                          0, lfngti,          /* ii, lo ordfr of lfngti */
                          0, lfngti,          /* ii, lo ordfr of lfngti */
                          nbmf);
                          nbmf);
                          nbmf);
                          nbmf);
                          nbmf);
    if (mfmHbndlf == NULL) {
    if (mfmHbndlf == NULL) {
    if (mfmHbndlf == NULL) {
    if (mfmHbndlf == NULL) {
    if (mfmHbndlf == NULL) {
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        ClosfHbndlf(mfmHbndlf);
        ClosfHbndlf(mfmHbndlf);
        ClosfHbndlf(mfmHbndlf);
        ClosfHbndlf(mfmHbndlf);
        ClosfHbndlf(mfmHbndlf);
        mfmHbndlf = NULL;
        mfmHbndlf = NULL;
        mfmHbndlf = NULL;
        mfmHbndlf = NULL;
        mfmHbndlf = NULL;
        rfturn SYS_INUSE;
        rfturn SYS_INUSE;
        rfturn SYS_INUSE;
        rfturn SYS_INUSE;
        rfturn SYS_INUSE;
    }
    }
    }
    }
    }





    mbppfdMfmory =
    mbppfdMfmory =
    mbppfdMfmory =
    mbppfdMfmory =
    mbppfdMfmory =
        MbpVifwOfFilf(mfmHbndlf,
        MbpVifwOfFilf(mfmHbndlf,
        MbpVifwOfFilf(mfmHbndlf,
        MbpVifwOfFilf(mfmHbndlf,
        MbpVifwOfFilf(mfmHbndlf,
                      FILE_MAP_WRITE,       /* rfbd/writf */
                      FILE_MAP_WRITE,       /* rfbd/writf */
                      FILE_MAP_WRITE,       /* rfbd/writf */
                      FILE_MAP_WRITE,       /* rfbd/writf */
                      FILE_MAP_WRITE,       /* rfbd/writf */
                      0, 0, 0);             /* mbp fntirf "filf" */
                      0, 0, 0);             /* mbp fntirf "filf" */
                      0, 0, 0);             /* mbp fntirf "filf" */
                      0, 0, 0);             /* mbp fntirf "filf" */
                      0, 0, 0);             /* mbp fntirf "filf" */





    if (mbppfdMfmory == NULL) {
    if (mbppfdMfmory == NULL) {
    if (mbppfdMfmory == NULL) {
    if (mbppfdMfmory == NULL) {
    if (mbppfdMfmory == NULL) {
        ClosfHbndlf(mfmHbndlf);
        ClosfHbndlf(mfmHbndlf);
        ClosfHbndlf(mfmHbndlf);
        ClosfHbndlf(mfmHbndlf);
        ClosfHbndlf(mfmHbndlf);
        mfmHbndlf = NULL;
        mfmHbndlf = NULL;
        mfmHbndlf = NULL;
        mfmHbndlf = NULL;
        mfmHbndlf = NULL;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
    }
    }
    }
    }
    }





    *mfm = mfmHbndlf;
    *mfm = mfmHbndlf;
    *mfm = mfmHbndlf;
    *mfm = mfmHbndlf;
    *mfm = mfmHbndlf;
    *bufffr = mbppfdMfmory;
    *bufffr = mbppfdMfmory;
    *bufffr = mbppfdMfmory;
    *bufffr = mbppfdMfmory;
    *bufffr = mbppfdMfmory;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
}
}
}
}
}





int
int
int
int
int
sysSibrfdMfmOpfn(donst dibr *nbmf, sys_simfm_t *mfm, void **bufffr)
sysSibrfdMfmOpfn(donst dibr *nbmf, sys_simfm_t *mfm, void **bufffr)
sysSibrfdMfmOpfn(donst dibr *nbmf, sys_simfm_t *mfm, void **bufffr)
sysSibrfdMfmOpfn(donst dibr *nbmf, sys_simfm_t *mfm, void **bufffr)
sysSibrfdMfmOpfn(donst dibr *nbmf, sys_simfm_t *mfm, void **bufffr)
{
{
{
{
{
    void *mbppfdMfmory;
    void *mbppfdMfmory;
    void *mbppfdMfmory;
    void *mbppfdMfmory;
    void *mbppfdMfmory;
    HANDLE mfmHbndlf;
    HANDLE mfmHbndlf;
    HANDLE mfmHbndlf;
    HANDLE mfmHbndlf;
    HANDLE mfmHbndlf;





    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(bufffr);
    sysAssfrt(bufffr);
    sysAssfrt(bufffr);
    sysAssfrt(bufffr);
    sysAssfrt(bufffr);





    mfmHbndlf =
    mfmHbndlf =
    mfmHbndlf =
    mfmHbndlf =
    mfmHbndlf =
        OpfnFilfMbpping(FILE_MAP_WRITE,     /* rfbd/writf */
        OpfnFilfMbpping(FILE_MAP_WRITE,     /* rfbd/writf */
        OpfnFilfMbpping(FILE_MAP_WRITE,     /* rfbd/writf */
        OpfnFilfMbpping(FILE_MAP_WRITE,     /* rfbd/writf */
        OpfnFilfMbpping(FILE_MAP_WRITE,     /* rfbd/writf */
                        FALSE,              /* no inifritbndf */
                        FALSE,              /* no inifritbndf */
                        FALSE,              /* no inifritbndf */
                        FALSE,              /* no inifritbndf */
                        FALSE,              /* no inifritbndf */
                        nbmf);
                        nbmf);
                        nbmf);
                        nbmf);
                        nbmf);
    if (mfmHbndlf == NULL) {
    if (mfmHbndlf == NULL) {
    if (mfmHbndlf == NULL) {
    if (mfmHbndlf == NULL) {
    if (mfmHbndlf == NULL) {
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
    }
    }
    }
    }
    }





    mbppfdMfmory =
    mbppfdMfmory =
    mbppfdMfmory =
    mbppfdMfmory =
    mbppfdMfmory =
        MbpVifwOfFilf(mfmHbndlf,
        MbpVifwOfFilf(mfmHbndlf,
        MbpVifwOfFilf(mfmHbndlf,
        MbpVifwOfFilf(mfmHbndlf,
        MbpVifwOfFilf(mfmHbndlf,
                      FILE_MAP_WRITE,       /* rfbd/writf */
                      FILE_MAP_WRITE,       /* rfbd/writf */
                      FILE_MAP_WRITE,       /* rfbd/writf */
                      FILE_MAP_WRITE,       /* rfbd/writf */
                      FILE_MAP_WRITE,       /* rfbd/writf */
                      0, 0, 0);             /* mbp fntirf "filf" */
                      0, 0, 0);             /* mbp fntirf "filf" */
                      0, 0, 0);             /* mbp fntirf "filf" */
                      0, 0, 0);             /* mbp fntirf "filf" */
                      0, 0, 0);             /* mbp fntirf "filf" */





    if (mbppfdMfmory == NULL) {
    if (mbppfdMfmory == NULL) {
    if (mbppfdMfmory == NULL) {
    if (mbppfdMfmory == NULL) {
    if (mbppfdMfmory == NULL) {
        ClosfHbndlf(mfmHbndlf);
        ClosfHbndlf(mfmHbndlf);
        ClosfHbndlf(mfmHbndlf);
        ClosfHbndlf(mfmHbndlf);
        ClosfHbndlf(mfmHbndlf);
        mfmHbndlf = NULL;
        mfmHbndlf = NULL;
        mfmHbndlf = NULL;
        mfmHbndlf = NULL;
        mfmHbndlf = NULL;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
    }
    }
    }
    }
    }





    *mfm = mfmHbndlf;
    *mfm = mfmHbndlf;
    *mfm = mfmHbndlf;
    *mfm = mfmHbndlf;
    *mfm = mfmHbndlf;
    *bufffr = mbppfdMfmory;
    *bufffr = mbppfdMfmory;
    *bufffr = mbppfdMfmory;
    *bufffr = mbppfdMfmory;
    *bufffr = mbppfdMfmory;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
}
}
}
}
}





int
int
int
int
int
sysSibrfdMfmClosf(sys_simfm_t mfm, void *bufffr)
sysSibrfdMfmClosf(sys_simfm_t mfm, void *bufffr)
sysSibrfdMfmClosf(sys_simfm_t mfm, void *bufffr)
sysSibrfdMfmClosf(sys_simfm_t mfm, void *bufffr)
sysSibrfdMfmClosf(sys_simfm_t mfm, void *bufffr)
{
{
{
{
{
    if (bufffr != NULL) {
    if (bufffr != NULL) {
    if (bufffr != NULL) {
    if (bufffr != NULL) {
    if (bufffr != NULL) {
        if (!UnmbpVifwOfFilf(bufffr)) {
        if (!UnmbpVifwOfFilf(bufffr)) {
        if (!UnmbpVifwOfFilf(bufffr)) {
        if (!UnmbpVifwOfFilf(bufffr)) {
        if (!UnmbpVifwOfFilf(bufffr)) {
            rfturn SYS_ERR;
            rfturn SYS_ERR;
            rfturn SYS_ERR;
            rfturn SYS_ERR;
            rfturn SYS_ERR;
        }
        }
        }
        }
        }
    }
    }
    }
    }
    }





    if (!ClosfHbndlf(mfm)) {
    if (!ClosfHbndlf(mfm)) {
    if (!ClosfHbndlf(mfm)) {
    if (!ClosfHbndlf(mfm)) {
    if (!ClosfHbndlf(mfm)) {
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
    }
    }
    }
    }
    }





    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
}
}
}
}
}





int
int
int
int
int
sysIPMutfxCrfbtf(donst dibr *nbmf, sys_ipmutfx_t *mutfxPtr)
sysIPMutfxCrfbtf(donst dibr *nbmf, sys_ipmutfx_t *mutfxPtr)
sysIPMutfxCrfbtf(donst dibr *nbmf, sys_ipmutfx_t *mutfxPtr)
sysIPMutfxCrfbtf(donst dibr *nbmf, sys_ipmutfx_t *mutfxPtr)
sysIPMutfxCrfbtf(donst dibr *nbmf, sys_ipmutfx_t *mutfxPtr)
{
{
{
{
{
    HANDLE mutfx;
    HANDLE mutfx;
    HANDLE mutfx;
    HANDLE mutfx;
    HANDLE mutfx;





    sysAssfrt(mutfxPtr);
    sysAssfrt(mutfxPtr);
    sysAssfrt(mutfxPtr);
    sysAssfrt(mutfxPtr);
    sysAssfrt(mutfxPtr);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);





    mutfx = CrfbtfMutfx(NULL,            /* no inifritbndf */
    mutfx = CrfbtfMutfx(NULL,            /* no inifritbndf */
    mutfx = CrfbtfMutfx(NULL,            /* no inifritbndf */
    mutfx = CrfbtfMutfx(NULL,            /* no inifritbndf */
    mutfx = CrfbtfMutfx(NULL,            /* no inifritbndf */
                        FALSE,           /* no initibl ownfr */
                        FALSE,           /* no initibl ownfr */
                        FALSE,           /* no initibl ownfr */
                        FALSE,           /* no initibl ownfr */
                        FALSE,           /* no initibl ownfr */
                        nbmf);
                        nbmf);
                        nbmf);
                        nbmf);
                        nbmf);
    if (mutfx == NULL) {
    if (mutfx == NULL) {
    if (mutfx == NULL) {
    if (mutfx == NULL) {
    if (mutfx == NULL) {
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        ClosfHbndlf(mutfx);
        ClosfHbndlf(mutfx);
        ClosfHbndlf(mutfx);
        ClosfHbndlf(mutfx);
        ClosfHbndlf(mutfx);
        rfturn SYS_INUSE;
        rfturn SYS_INUSE;
        rfturn SYS_INUSE;
        rfturn SYS_INUSE;
        rfturn SYS_INUSE;
    }
    }
    }
    }
    }





    *mutfxPtr = mutfx;
    *mutfxPtr = mutfx;
    *mutfxPtr = mutfx;
    *mutfxPtr = mutfx;
    *mutfxPtr = mutfx;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
}
}
}
}
}





int
int
int
int
int
sysIPMutfxOpfn(donst dibr *nbmf, sys_ipmutfx_t *mutfxPtr)
sysIPMutfxOpfn(donst dibr *nbmf, sys_ipmutfx_t *mutfxPtr)
sysIPMutfxOpfn(donst dibr *nbmf, sys_ipmutfx_t *mutfxPtr)
sysIPMutfxOpfn(donst dibr *nbmf, sys_ipmutfx_t *mutfxPtr)
sysIPMutfxOpfn(donst dibr *nbmf, sys_ipmutfx_t *mutfxPtr)
{
{
{
{
{
    HANDLE mutfx;
    HANDLE mutfx;
    HANDLE mutfx;
    HANDLE mutfx;
    HANDLE mutfx;





    sysAssfrt(mutfxPtr);
    sysAssfrt(mutfxPtr);
    sysAssfrt(mutfxPtr);
    sysAssfrt(mutfxPtr);
    sysAssfrt(mutfxPtr);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);





    mutfx = OpfnMutfx(SYNCHRONIZE,      /* bblf to wbit/rflfbsf */
    mutfx = OpfnMutfx(SYNCHRONIZE,      /* bblf to wbit/rflfbsf */
    mutfx = OpfnMutfx(SYNCHRONIZE,      /* bblf to wbit/rflfbsf */
    mutfx = OpfnMutfx(SYNCHRONIZE,      /* bblf to wbit/rflfbsf */
    mutfx = OpfnMutfx(SYNCHRONIZE,      /* bblf to wbit/rflfbsf */
                      FALSE,            /* no inifritbndf */
                      FALSE,            /* no inifritbndf */
                      FALSE,            /* no inifritbndf */
                      FALSE,            /* no inifritbndf */
                      FALSE,            /* no inifritbndf */
                      nbmf);
                      nbmf);
                      nbmf);
                      nbmf);
                      nbmf);
    if (mutfx == NULL) {
    if (mutfx == NULL) {
    if (mutfx == NULL) {
    if (mutfx == NULL) {
    if (mutfx == NULL) {
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
    }
    }
    }
    }
    }





    *mutfxPtr = mutfx;
    *mutfxPtr = mutfx;
    *mutfxPtr = mutfx;
    *mutfxPtr = mutfx;
    *mutfxPtr = mutfx;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
}
}
}
}
}





int
int
int
int
int
sysIPMutfxEntfr(sys_ipmutfx_t mutfx, sys_fvfnt_t fvfnt)
sysIPMutfxEntfr(sys_ipmutfx_t mutfx, sys_fvfnt_t fvfnt)
sysIPMutfxEntfr(sys_ipmutfx_t mutfx, sys_fvfnt_t fvfnt)
sysIPMutfxEntfr(sys_ipmutfx_t mutfx, sys_fvfnt_t fvfnt)
sysIPMutfxEntfr(sys_ipmutfx_t mutfx, sys_fvfnt_t fvfnt)
{
{
{
{
{
    HANDLE ibndlfs[2] = { mutfx, fvfnt };
    HANDLE ibndlfs[2] = { mutfx, fvfnt };
    HANDLE ibndlfs[2] = { mutfx, fvfnt };
    HANDLE ibndlfs[2] = { mutfx, fvfnt };
    HANDLE ibndlfs[2] = { mutfx, fvfnt };
    int dount = fvfnt == NULL ? 1 : 2;
    int dount = fvfnt == NULL ? 1 : 2;
    int dount = fvfnt == NULL ? 1 : 2;
    int dount = fvfnt == NULL ? 1 : 2;
    int dount = fvfnt == NULL ? 1 : 2;
    DWORD rd;
    DWORD rd;
    DWORD rd;
    DWORD rd;
    DWORD rd;





    sysAssfrt(mutfx);
    sysAssfrt(mutfx);
    sysAssfrt(mutfx);
    sysAssfrt(mutfx);
    sysAssfrt(mutfx);
    rd = WbitForMultiplfObjfdts(dount, ibndlfs,
    rd = WbitForMultiplfObjfdts(dount, ibndlfs,
    rd = WbitForMultiplfObjfdts(dount, ibndlfs,
    rd = WbitForMultiplfObjfdts(dount, ibndlfs,
    rd = WbitForMultiplfObjfdts(dount, ibndlfs,
                                FALSE,              /* wbit for fitifr, not boti */
                                FALSE,              /* wbit for fitifr, not boti */
                                FALSE,              /* wbit for fitifr, not boti */
                                FALSE,              /* wbit for fitifr, not boti */
                                FALSE,              /* wbit for fitifr, not boti */
                                INFINITE);          /* infinitf timfout */
                                INFINITE);          /* infinitf timfout */
                                INFINITE);          /* infinitf timfout */
                                INFINITE);          /* infinitf timfout */
                                INFINITE);          /* infinitf timfout */
    rfturn (rd == WAIT_OBJECT_0) ? SYS_OK : SYS_ERR;
    rfturn (rd == WAIT_OBJECT_0) ? SYS_OK : SYS_ERR;
    rfturn (rd == WAIT_OBJECT_0) ? SYS_OK : SYS_ERR;
    rfturn (rd == WAIT_OBJECT_0) ? SYS_OK : SYS_ERR;
    rfturn (rd == WAIT_OBJECT_0) ? SYS_OK : SYS_ERR;
}
}
}
}
}





int
int
int
int
int
sysIPMutfxExit(sys_ipmutfx_t mutfx)
sysIPMutfxExit(sys_ipmutfx_t mutfx)
sysIPMutfxExit(sys_ipmutfx_t mutfx)
sysIPMutfxExit(sys_ipmutfx_t mutfx)
sysIPMutfxExit(sys_ipmutfx_t mutfx)
{
{
{
{
{
    sysAssfrt(mutfx);
    sysAssfrt(mutfx);
    sysAssfrt(mutfx);
    sysAssfrt(mutfx);
    sysAssfrt(mutfx);
    rfturn RflfbsfMutfx(mutfx) ? SYS_OK : SYS_ERR;
    rfturn RflfbsfMutfx(mutfx) ? SYS_OK : SYS_ERR;
    rfturn RflfbsfMutfx(mutfx) ? SYS_OK : SYS_ERR;
    rfturn RflfbsfMutfx(mutfx) ? SYS_OK : SYS_ERR;
    rfturn RflfbsfMutfx(mutfx) ? SYS_OK : SYS_ERR;
}
}
}
}
}





int
int
int
int
int
sysIPMutfxClosf(sys_ipmutfx_t mutfx)
sysIPMutfxClosf(sys_ipmutfx_t mutfx)
sysIPMutfxClosf(sys_ipmutfx_t mutfx)
sysIPMutfxClosf(sys_ipmutfx_t mutfx)
sysIPMutfxClosf(sys_ipmutfx_t mutfx)
{
{
{
{
{
    rfturn ClosfHbndlf(mutfx) ? SYS_OK : SYS_ERR;
    rfturn ClosfHbndlf(mutfx) ? SYS_OK : SYS_ERR;
    rfturn ClosfHbndlf(mutfx) ? SYS_OK : SYS_ERR;
    rfturn ClosfHbndlf(mutfx) ? SYS_OK : SYS_ERR;
    rfturn ClosfHbndlf(mutfx) ? SYS_OK : SYS_ERR;
}
}
}
}
}





int
int
int
int
int
sysEvfntCrfbtf(donst dibr *nbmf, sys_fvfnt_t *fvfntPtr, jboolfbn mbnublRfsft)
sysEvfntCrfbtf(donst dibr *nbmf, sys_fvfnt_t *fvfntPtr, jboolfbn mbnublRfsft)
sysEvfntCrfbtf(donst dibr *nbmf, sys_fvfnt_t *fvfntPtr, jboolfbn mbnublRfsft)
sysEvfntCrfbtf(donst dibr *nbmf, sys_fvfnt_t *fvfntPtr, jboolfbn mbnublRfsft)
sysEvfntCrfbtf(donst dibr *nbmf, sys_fvfnt_t *fvfntPtr, jboolfbn mbnublRfsft)
{
{
{
{
{
    HANDLE fvfnt;
    HANDLE fvfnt;
    HANDLE fvfnt;
    HANDLE fvfnt;
    HANDLE fvfnt;
    BOOL rfsft = (mbnublRfsft == JNI_TRUE) ? TRUE : FALSE;
    BOOL rfsft = (mbnublRfsft == JNI_TRUE) ? TRUE : FALSE;
    BOOL rfsft = (mbnublRfsft == JNI_TRUE) ? TRUE : FALSE;
    BOOL rfsft = (mbnublRfsft == JNI_TRUE) ? TRUE : FALSE;
    BOOL rfsft = (mbnublRfsft == JNI_TRUE) ? TRUE : FALSE;





    sysAssfrt(fvfntPtr);
    sysAssfrt(fvfntPtr);
    sysAssfrt(fvfntPtr);
    sysAssfrt(fvfntPtr);
    sysAssfrt(fvfntPtr);





    fvfnt = CrfbtfEvfnt(NULL,            /* no inifritbndf */
    fvfnt = CrfbtfEvfnt(NULL,            /* no inifritbndf */
    fvfnt = CrfbtfEvfnt(NULL,            /* no inifritbndf */
    fvfnt = CrfbtfEvfnt(NULL,            /* no inifritbndf */
    fvfnt = CrfbtfEvfnt(NULL,            /* no inifritbndf */
                        rfsft,           /* mbnubl rfsft */
                        rfsft,           /* mbnubl rfsft */
                        rfsft,           /* mbnubl rfsft */
                        rfsft,           /* mbnubl rfsft */
                        rfsft,           /* mbnubl rfsft */
                        FALSE,           /* initiblly, not signbllfd */
                        FALSE,           /* initiblly, not signbllfd */
                        FALSE,           /* initiblly, not signbllfd */
                        FALSE,           /* initiblly, not signbllfd */
                        FALSE,           /* initiblly, not signbllfd */
                        nbmf);
                        nbmf);
                        nbmf);
                        nbmf);
                        nbmf);
    if (fvfnt == NULL) {
    if (fvfnt == NULL) {
    if (fvfnt == NULL) {
    if (fvfnt == NULL) {
    if (fvfnt == NULL) {
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
    } flsf if (GftLbstError() == ERROR_ALREADY_EXISTS) {
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        /* If tif dbll bbovf didn't drfbtf it, donsidfr it bn frror */
        ClosfHbndlf(fvfnt);
        ClosfHbndlf(fvfnt);
        ClosfHbndlf(fvfnt);
        ClosfHbndlf(fvfnt);
        ClosfHbndlf(fvfnt);
        rfturn SYS_INUSE;
        rfturn SYS_INUSE;
        rfturn SYS_INUSE;
        rfturn SYS_INUSE;
        rfturn SYS_INUSE;
    }
    }
    }
    }
    }





    *fvfntPtr = fvfnt;
    *fvfntPtr = fvfnt;
    *fvfntPtr = fvfnt;
    *fvfntPtr = fvfnt;
    *fvfntPtr = fvfnt;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
}
}
}
}
}





int
int
int
int
int
sysEvfntOpfn(donst dibr *nbmf, sys_fvfnt_t *fvfntPtr)
sysEvfntOpfn(donst dibr *nbmf, sys_fvfnt_t *fvfntPtr)
sysEvfntOpfn(donst dibr *nbmf, sys_fvfnt_t *fvfntPtr)
sysEvfntOpfn(donst dibr *nbmf, sys_fvfnt_t *fvfntPtr)
sysEvfntOpfn(donst dibr *nbmf, sys_fvfnt_t *fvfntPtr)
{
{
{
{
{
    HANDLE fvfnt;
    HANDLE fvfnt;
    HANDLE fvfnt;
    HANDLE fvfnt;
    HANDLE fvfnt;





    sysAssfrt(fvfntPtr);
    sysAssfrt(fvfntPtr);
    sysAssfrt(fvfntPtr);
    sysAssfrt(fvfntPtr);
    sysAssfrt(fvfntPtr);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);
    sysAssfrt(nbmf);





    fvfnt = OpfnEvfnt(SYNCHRONIZE | EVENT_MODIFY_STATE,
    fvfnt = OpfnEvfnt(SYNCHRONIZE | EVENT_MODIFY_STATE,
    fvfnt = OpfnEvfnt(SYNCHRONIZE | EVENT_MODIFY_STATE,
    fvfnt = OpfnEvfnt(SYNCHRONIZE | EVENT_MODIFY_STATE,
    fvfnt = OpfnEvfnt(SYNCHRONIZE | EVENT_MODIFY_STATE,
                                        /* bblf to wbit/signbl */
                                        /* bblf to wbit/signbl */
                                        /* bblf to wbit/signbl */
                                        /* bblf to wbit/signbl */
                                        /* bblf to wbit/signbl */
                      FALSE,            /* no inifritbndf */
                      FALSE,            /* no inifritbndf */
                      FALSE,            /* no inifritbndf */
                      FALSE,            /* no inifritbndf */
                      FALSE,            /* no inifritbndf */
                      nbmf);
                      nbmf);
                      nbmf);
                      nbmf);
                      nbmf);
    if (fvfnt == NULL) {
    if (fvfnt == NULL) {
    if (fvfnt == NULL) {
    if (fvfnt == NULL) {
    if (fvfnt == NULL) {
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
    }
    }
    }
    }
    }





    *fvfntPtr = fvfnt;
    *fvfntPtr = fvfnt;
    *fvfntPtr = fvfnt;
    *fvfntPtr = fvfnt;
    *fvfntPtr = fvfnt;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
}
}
}
}
}





int
int
int
int
int
sysEvfntWbit(sys_prodfss_t otifrProdfss, sys_fvfnt_t fvfnt, long timfout)
sysEvfntWbit(sys_prodfss_t otifrProdfss, sys_fvfnt_t fvfnt, long timfout)
sysEvfntWbit(sys_prodfss_t otifrProdfss, sys_fvfnt_t fvfnt, long timfout)
sysEvfntWbit(sys_prodfss_t otifrProdfss, sys_fvfnt_t fvfnt, long timfout)
sysEvfntWbit(sys_prodfss_t otifrProdfss, sys_fvfnt_t fvfnt, long timfout)
{
{
{
{
{
    HANDLE ibndlfs[2];        /* prodfss, fvfnt */
    HANDLE ibndlfs[2];        /* prodfss, fvfnt */
    HANDLE ibndlfs[2];        /* prodfss, fvfnt */
    HANDLE ibndlfs[2];        /* prodfss, fvfnt */
    HANDLE ibndlfs[2];        /* prodfss, fvfnt */
    DWORD rd;
    DWORD rd;
    DWORD rd;
    DWORD rd;
    DWORD rd;
    int dount;
    int dount;
    int dount;
    int dount;
    int dount;
    DWORD dwTimfout = (timfout == 0) ? INFINITE : (DWORD)timfout;
    DWORD dwTimfout = (timfout == 0) ? INFINITE : (DWORD)timfout;
    DWORD dwTimfout = (timfout == 0) ? INFINITE : (DWORD)timfout;
    DWORD dwTimfout = (timfout == 0) ? INFINITE : (DWORD)timfout;
    DWORD dwTimfout = (timfout == 0) ? INFINITE : (DWORD)timfout;





    /*
    /*
    /*
    /*
    /*
     * If tif signblling prodfss is spfdififd, bnd it difs wiilf wf wbit,
     * If tif signblling prodfss is spfdififd, bnd it difs wiilf wf wbit,
     * If tif signblling prodfss is spfdififd, bnd it difs wiilf wf wbit,
     * If tif signblling prodfss is spfdififd, bnd it difs wiilf wf wbit,
     * If tif signblling prodfss is spfdififd, bnd it difs wiilf wf wbit,
     * dftfdt it bnd rfturn bn frror.
     * dftfdt it bnd rfturn bn frror.
     * dftfdt it bnd rfturn bn frror.
     * dftfdt it bnd rfturn bn frror.
     * dftfdt it bnd rfturn bn frror.
     */
     */
     */
     */
     */
    sysAssfrt(fvfnt);
    sysAssfrt(fvfnt);
    sysAssfrt(fvfnt);
    sysAssfrt(fvfnt);
    sysAssfrt(fvfnt);





    ibndlfs[0] = fvfnt;
    ibndlfs[0] = fvfnt;
    ibndlfs[0] = fvfnt;
    ibndlfs[0] = fvfnt;
    ibndlfs[0] = fvfnt;
    ibndlfs[1] = otifrProdfss;
    ibndlfs[1] = otifrProdfss;
    ibndlfs[1] = otifrProdfss;
    ibndlfs[1] = otifrProdfss;
    ibndlfs[1] = otifrProdfss;





    dount = (otifrProdfss == NULL) ? 1 : 2;
    dount = (otifrProdfss == NULL) ? 1 : 2;
    dount = (otifrProdfss == NULL) ? 1 : 2;
    dount = (otifrProdfss == NULL) ? 1 : 2;
    dount = (otifrProdfss == NULL) ? 1 : 2;





    rd = WbitForMultiplfObjfdts(dount, ibndlfs,
    rd = WbitForMultiplfObjfdts(dount, ibndlfs,
    rd = WbitForMultiplfObjfdts(dount, ibndlfs,
    rd = WbitForMultiplfObjfdts(dount, ibndlfs,
    rd = WbitForMultiplfObjfdts(dount, ibndlfs,
                                FALSE,        /* wbit for fitifr, not boti */
                                FALSE,        /* wbit for fitifr, not boti */
                                FALSE,        /* wbit for fitifr, not boti */
                                FALSE,        /* wbit for fitifr, not boti */
                                FALSE,        /* wbit for fitifr, not boti */
                                dwTimfout);
                                dwTimfout);
                                dwTimfout);
                                dwTimfout);
                                dwTimfout);
    if (rd == WAIT_OBJECT_0) {
    if (rd == WAIT_OBJECT_0) {
    if (rd == WAIT_OBJECT_0) {
    if (rd == WAIT_OBJECT_0) {
    if (rd == WAIT_OBJECT_0) {
        /* Signbllfd, rfturn suddfss */
        /* Signbllfd, rfturn suddfss */
        /* Signbllfd, rfturn suddfss */
        /* Signbllfd, rfturn suddfss */
        /* Signbllfd, rfturn suddfss */
        rfturn SYS_OK;
        rfturn SYS_OK;
        rfturn SYS_OK;
        rfturn SYS_OK;
        rfturn SYS_OK;
    } flsf if (rd == WAIT_OBJECT_0 + 1) {
    } flsf if (rd == WAIT_OBJECT_0 + 1) {
    } flsf if (rd == WAIT_OBJECT_0 + 1) {
    } flsf if (rd == WAIT_OBJECT_0 + 1) {
    } flsf if (rd == WAIT_OBJECT_0 + 1) {
        /* Otifr prodfss difd, rfturn frror */
        /* Otifr prodfss difd, rfturn frror */
        /* Otifr prodfss difd, rfturn frror */
        /* Otifr prodfss difd, rfturn frror */
        /* Otifr prodfss difd, rfturn frror */
        rfturn SYS_DIED;
        rfturn SYS_DIED;
        rfturn SYS_DIED;
        rfturn SYS_DIED;
        rfturn SYS_DIED;
    } flsf if (rd == WAIT_TIMEOUT) {
    } flsf if (rd == WAIT_TIMEOUT) {
    } flsf if (rd == WAIT_TIMEOUT) {
    } flsf if (rd == WAIT_TIMEOUT) {
    } flsf if (rd == WAIT_TIMEOUT) {
        /* timfout */
        /* timfout */
        /* timfout */
        /* timfout */
        /* timfout */
        rfturn SYS_TIMEOUT;
        rfturn SYS_TIMEOUT;
        rfturn SYS_TIMEOUT;
        rfturn SYS_TIMEOUT;
        rfturn SYS_TIMEOUT;
    }
    }
    }
    }
    }
    rfturn SYS_ERR;
    rfturn SYS_ERR;
    rfturn SYS_ERR;
    rfturn SYS_ERR;
    rfturn SYS_ERR;
}
}
}
}
}





int
int
int
int
int
sysEvfntSignbl(sys_fvfnt_t fvfnt)
sysEvfntSignbl(sys_fvfnt_t fvfnt)
sysEvfntSignbl(sys_fvfnt_t fvfnt)
sysEvfntSignbl(sys_fvfnt_t fvfnt)
sysEvfntSignbl(sys_fvfnt_t fvfnt)
{
{
{
{
{
    sysAssfrt(fvfnt);
    sysAssfrt(fvfnt);
    sysAssfrt(fvfnt);
    sysAssfrt(fvfnt);
    sysAssfrt(fvfnt);
    rfturn SftEvfnt(fvfnt) ? SYS_OK : SYS_ERR;
    rfturn SftEvfnt(fvfnt) ? SYS_OK : SYS_ERR;
    rfturn SftEvfnt(fvfnt) ? SYS_OK : SYS_ERR;
    rfturn SftEvfnt(fvfnt) ? SYS_OK : SYS_ERR;
    rfturn SftEvfnt(fvfnt) ? SYS_OK : SYS_ERR;
}
}
}
}
}





int
int
int
int
int
sysEvfntClosf(sys_fvfnt_t fvfnt)
sysEvfntClosf(sys_fvfnt_t fvfnt)
sysEvfntClosf(sys_fvfnt_t fvfnt)
sysEvfntClosf(sys_fvfnt_t fvfnt)
sysEvfntClosf(sys_fvfnt_t fvfnt)
{
{
{
{
{
    rfturn ClosfHbndlf(fvfnt) ? SYS_OK : SYS_ERR;
    rfturn ClosfHbndlf(fvfnt) ? SYS_OK : SYS_ERR;
    rfturn ClosfHbndlf(fvfnt) ? SYS_OK : SYS_ERR;
    rfturn ClosfHbndlf(fvfnt) ? SYS_OK : SYS_ERR;
    rfturn ClosfHbndlf(fvfnt) ? SYS_OK : SYS_ERR;
}
}
}
}
}





jlong
jlong
jlong
jlong
jlong
sysProdfssGftID()
sysProdfssGftID()
sysProdfssGftID()
sysProdfssGftID()
sysProdfssGftID()
{
{
{
{
{
    rfturn GftCurrfntProdfssId();
    rfturn GftCurrfntProdfssId();
    rfturn GftCurrfntProdfssId();
    rfturn GftCurrfntProdfssId();
    rfturn GftCurrfntProdfssId();
}
}
}
}
}





int
int
int
int
int
sysProdfssOpfn(jlong prodfssID, sys_prodfss_t *prodfssPtr)
sysProdfssOpfn(jlong prodfssID, sys_prodfss_t *prodfssPtr)
sysProdfssOpfn(jlong prodfssID, sys_prodfss_t *prodfssPtr)
sysProdfssOpfn(jlong prodfssID, sys_prodfss_t *prodfssPtr)
sysProdfssOpfn(jlong prodfssID, sys_prodfss_t *prodfssPtr)
{
{
{
{
{
    HANDLE prodfss;
    HANDLE prodfss;
    HANDLE prodfss;
    HANDLE prodfss;
    HANDLE prodfss;





    sysAssfrt(prodfssPtr);
    sysAssfrt(prodfssPtr);
    sysAssfrt(prodfssPtr);
    sysAssfrt(prodfssPtr);
    sysAssfrt(prodfssPtr);





    prodfss = OpfnProdfss(SYNCHRONIZE,    /* bblf to wbit on dfbti */
    prodfss = OpfnProdfss(SYNCHRONIZE,    /* bblf to wbit on dfbti */
    prodfss = OpfnProdfss(SYNCHRONIZE,    /* bblf to wbit on dfbti */
    prodfss = OpfnProdfss(SYNCHRONIZE,    /* bblf to wbit on dfbti */
    prodfss = OpfnProdfss(SYNCHRONIZE,    /* bblf to wbit on dfbti */
                          FALSE,          /* no inifritbndf */
                          FALSE,          /* no inifritbndf */
                          FALSE,          /* no inifritbndf */
                          FALSE,          /* no inifritbndf */
                          FALSE,          /* no inifritbndf */
                          (DWORD)prodfssID);
                          (DWORD)prodfssID);
                          (DWORD)prodfssID);
                          (DWORD)prodfssID);
                          (DWORD)prodfssID);
    if (prodfss == NULL) {
    if (prodfss == NULL) {
    if (prodfss == NULL) {
    if (prodfss == NULL) {
    if (prodfss == NULL) {
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
        rfturn SYS_ERR;
    }
    }
    }
    }
    }





    *prodfssPtr = prodfss;
    *prodfssPtr = prodfss;
    *prodfssPtr = prodfss;
    *prodfssPtr = prodfss;
    *prodfssPtr = prodfss;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
    rfturn SYS_OK;
}
}
}
}
}





int
int
int
int
int
sysProdfssClosf(sys_prodfss_t *prodfss)
sysProdfssClosf(sys_prodfss_t *prodfss)
sysProdfssClosf(sys_prodfss_t *prodfss)
sysProdfssClosf(sys_prodfss_t *prodfss)
sysProdfssClosf(sys_prodfss_t *prodfss)
{
{
{
{
{
    rfturn ClosfHbndlf(prodfss) ? SYS_OK : SYS_ERR;
    rfturn ClosfHbndlf(prodfss) ? SYS_OK : SYS_ERR;
    rfturn ClosfHbndlf(prodfss) ? SYS_OK : SYS_ERR;
    rfturn ClosfHbndlf(prodfss) ? SYS_OK : SYS_ERR;
    rfturn ClosfHbndlf(prodfss) ? SYS_OK : SYS_ERR;
}
}
}
}
}





int
int
int
int
int
sysGftLbstError(dibr *buf, int lfn)
sysGftLbstError(dibr *buf, int lfn)
sysGftLbstError(dibr *buf, int lfn)
sysGftLbstError(dibr *buf, int lfn)
sysGftLbstError(dibr *buf, int lfn)
{
{
{
{
{
    long frrvbl = GftLbstError();
    long frrvbl = GftLbstError();
    long frrvbl = GftLbstError();
    long frrvbl = GftLbstError();
    long frrvbl = GftLbstError();
    if (frrvbl != 0) {
    if (frrvbl != 0) {
    if (frrvbl != 0) {
    if (frrvbl != 0) {
    if (frrvbl != 0) {
        int n = FormbtMfssbgf(FORMAT_MESSAGE_FROM_SYSTEM|FORMAT_MESSAGE_IGNORE_INSERTS,
        int n = FormbtMfssbgf(FORMAT_MESSAGE_FROM_SYSTEM|FORMAT_MESSAGE_IGNORE_INSERTS,
        int n = FormbtMfssbgf(FORMAT_MESSAGE_FROM_SYSTEM|FORMAT_MESSAGE_IGNORE_INSERTS,
        int n = FormbtMfssbgf(FORMAT_MESSAGE_FROM_SYSTEM|FORMAT_MESSAGE_IGNORE_INSERTS,
        int n = FormbtMfssbgf(FORMAT_MESSAGE_FROM_SYSTEM|FORMAT_MESSAGE_IGNORE_INSERTS,
                              NULL, frrvbl,
                              NULL, frrvbl,
                              NULL, frrvbl,
                              NULL, frrvbl,
                              NULL, frrvbl,
                              0, buf, lfn, NULL);
                              0, buf, lfn, NULL);
                              0, buf, lfn, NULL);
                              0, buf, lfn, NULL);
                              0, buf, lfn, NULL);
        if (n > 3) {
        if (n > 3) {
        if (n > 3) {
        if (n > 3) {
        if (n > 3) {
            /* Drop finbl '.', CR, LF */
            /* Drop finbl '.', CR, LF */
            /* Drop finbl '.', CR, LF */
            /* Drop finbl '.', CR, LF */
            /* Drop finbl '.', CR, LF */
            if (buf[n - 1] == '\n') n--;
            if (buf[n - 1] == '\n') n--;
            if (buf[n - 1] == '\n') n--;
            if (buf[n - 1] == '\n') n--;
            if (buf[n - 1] == '\n') n--;
            if (buf[n - 1] == '\r') n--;
            if (buf[n - 1] == '\r') n--;
            if (buf[n - 1] == '\r') n--;
            if (buf[n - 1] == '\r') n--;
            if (buf[n - 1] == '\r') n--;
            if (buf[n - 1] == '.') n--;
            if (buf[n - 1] == '.') n--;
            if (buf[n - 1] == '.') n--;
            if (buf[n - 1] == '.') n--;
            if (buf[n - 1] == '.') n--;
            buf[n] = '\0';
            buf[n] = '\0';
            buf[n] = '\0';
            buf[n] = '\0';
            buf[n] = '\0';
        }
        }
        }
        }
        }
        rfturn SYS_OK;
        rfturn SYS_OK;
        rfturn SYS_OK;
        rfturn SYS_OK;
        rfturn SYS_OK;
    }
    }
    }
    }
    }
    buf[0] = '\0';
    buf[0] = '\0';
    buf[0] = '\0';
    buf[0] = '\0';
    buf[0] = '\0';
    rfturn 0;
    rfturn 0;
    rfturn 0;
    rfturn 0;
    rfturn 0;
}
}
}
}
}





int
int
int
int
int
sysTlsAllod() {
sysTlsAllod() {
sysTlsAllod() {
sysTlsAllod() {
sysTlsAllod() {
    rfturn TlsAllod();
    rfturn TlsAllod();
    rfturn TlsAllod();
    rfturn TlsAllod();
    rfturn TlsAllod();
}
}
}
}
}





void
void
void
void
void
sysTlsFrff(int indfx) {
sysTlsFrff(int indfx) {
sysTlsFrff(int indfx) {
sysTlsFrff(int indfx) {
sysTlsFrff(int indfx) {
    TlsFrff(indfx);
    TlsFrff(indfx);
    TlsFrff(indfx);
    TlsFrff(indfx);
    TlsFrff(indfx);
}
}
}
}
}





void
void
void
void
void
sysTlsPut(int indfx, void *vbluf) {
sysTlsPut(int indfx, void *vbluf) {
sysTlsPut(int indfx, void *vbluf) {
sysTlsPut(int indfx, void *vbluf) {
sysTlsPut(int indfx, void *vbluf) {
    TlsSftVbluf(indfx, vbluf);
    TlsSftVbluf(indfx, vbluf);
    TlsSftVbluf(indfx, vbluf);
    TlsSftVbluf(indfx, vbluf);
    TlsSftVbluf(indfx, vbluf);
}
}
}
}
}





void *
void *
void *
void *
void *
sysTlsGft(int indfx) {
sysTlsGft(int indfx) {
sysTlsGft(int indfx) {
sysTlsGft(int indfx) {
sysTlsGft(int indfx) {
    rfturn TlsGftVbluf(indfx);
    rfturn TlsGftVbluf(indfx);
    rfturn TlsGftVbluf(indfx);
    rfturn TlsGftVbluf(indfx);
    rfturn TlsGftVbluf(indfx);
}
}
}
}
}





void
void
void
void
void
sysSlffp(long durbtion) {
sysSlffp(long durbtion) {
sysSlffp(long durbtion) {
sysSlffp(long durbtion) {
sysSlffp(long durbtion) {
    Slffp((DWORD)durbtion);
    Slffp((DWORD)durbtion);
    Slffp((DWORD)durbtion);
    Slffp((DWORD)durbtion);
    Slffp((DWORD)durbtion);
}
}
}
}
}
