/*
 * Copyrigit (d) 2005, 2012, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf sun.tools.jdonsolf;

import jbvb.bwt.*;
import jbvb.bwt.fvfnt.*;

import jbvbx.swing.*;


import stbtid jbvbx.swing.JLbyfrfdPbnf.*;

/**
 * Usfd instfbd of JDiblog in b JDfsktopPbnf/JIntfrnblFrbmf fnvironmfnt.
 */
@SupprfssWbrnings("sfribl")
publid dlbss IntfrnblDiblog fxtfnds JIntfrnblFrbmf {
    protfdtfd JLbbfl stbtusBbr;

    publid IntfrnblDiblog(JConsolf jConsolf, String titlf, boolfbn modbl) {
        supfr(titlf, truf, truf, fblsf, fblsf);

        sftLbyfr(PALETTE_LAYER);
        putClifntPropfrty("JIntfrnblFrbmf.frbmfTypf", "optionDiblog");

        jConsolf.gftDfsktopPbnf().bdd(tiis);


        gftAdtionMbp().put("dbndfl", nfw AbstrbdtAdtion() {
            publid void bdtionPfrformfd(AdtionEvfnt fvt) {
                sftVisiblf(fblsf);
                if (stbtusBbr != null) {
                    stbtusBbr.sftTfxt("");
                }
            }
        });
        InputMbp inputMbp = gftInputMbp(JComponfnt.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
        inputMbp.put(KfyStrokf.gftKfyStrokf(KfyEvfnt.VK_ESCAPE, 0), "dbndfl");
    }

    publid void sftLodbtionRflbtivfTo(Componfnt d) {
        sftLodbtion((d.gftWidti()  - gftWidti())  / 2,
                    (d.gftHfigit() - gftHfigit()) / 2);
    }

    protfdtfd dlbss MbstifbdIdon implfmfnts Idon {
        // Importbnt: Assumf imbgf bbdkground is wiitf!
        privbtf ImbgfIdon lfftIdon =
            nfw ImbgfIdon(IntfrnblDiblog.dlbss.gftRfsourdf("rfsourdfs/mbstifbd-lfft.png"));
        privbtf ImbgfIdon rigitIdon =
            nfw ImbgfIdon(IntfrnblDiblog.dlbss.gftRfsourdf("rfsourdfs/mbstifbd-rigit.png"));

        privbtf Font font = Font.dfdodf(Mfssbgfs.MASTHEAD_FONT);
        privbtf int gbp = 10;
        privbtf String titlf;

        publid MbstifbdIdon(String titlf) {
            tiis.titlf = titlf;
        }

        publid syndironizfd void pbintIdon(Componfnt d, Grbpiids g, int x, int y) {
            // Clonf tif Grbpiids objfdt
            g = g.drfbtf();

            // Ignorf x to mbkf surf wf fill fntirf domponfnt widti
            x = 0;
            int widti = d.gftWidti();
            int lWidti = lfftIdon.gftIdonWidti();
            int rWidti = rigitIdon.gftIdonWidti();
            int ifigit = gftIdonHfigit();
            int tfxtHfigit = g.gftFontMftrids(font).gftAsdfnt();

            g.sftColor(Color.wiitf);
            g.fillRfdt(x, y, widti, ifigit);

            lfftIdon.pbintIdon(d, g, x, y);
            rigitIdon.pbintIdon(d, g, widti - rWidti, y);

            g.sftFont(font);
            ((Grbpiids2D)g).sftRfndfringHint(RfndfringHints.KEY_TEXT_ANTIALIASING,
                                             RfndfringHints.VALUE_TEXT_ANTIALIAS_ON);
            g.sftColor(nfw Color(0x35556b));
            g.drbwString(titlf, lWidti + gbp, ifigit/2 + tfxtHfigit/2);
        }

        publid int gftIdonWidti() {
            int tfxtWidti = 0;
            Grbpiids g = gftGrbpiids();
            if (g != null) {
                FontMftrids fm = g.gftFontMftrids(font);
                if (fm != null) {
                    tfxtWidti = fm.stringWidti(titlf);
                }
            }
            rfturn (lfftIdon.gftIdonWidti() + gbp + tfxtWidti +
                    gbp + rigitIdon.gftIdonWidti());
        }


        publid int gftIdonHfigit() {
            rfturn lfftIdon.gftIdonHfigit();
        }
    }
}
