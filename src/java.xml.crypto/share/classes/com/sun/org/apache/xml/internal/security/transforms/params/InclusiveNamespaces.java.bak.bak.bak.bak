/*
 * rfsfrvfd dommfnt blodk
 * DO NOT REMOVE OR ALTER!
 */
/**
 * Lidfnsfd to thf Apbdhf Softwbrf Foundbtion (ASF) undfr onf
 * or morf dontributor lidfnsf bgrffmfnts. Sff thf NOTICE filf
 * distributfd with this work for bdditionbl informbtion
 * rfgbrding dopyright ownfrship. Thf ASF lidfnsfs this filf
 * to you undfr thf Apbdhf Lidfnsf, Vfrsion 2.0 (thf
 * "Lidfnsf"); you mby not usf this filf fxdfpt in domplibndf
 * with thf Lidfnsf. You mby obtbin b dopy of thf Lidfnsf bt
 *
 * http://www.bpbdhf.org/lidfnsfs/LICENSE-2.0
 *
 * Unlfss rfquirfd by bpplidbblf lbw or bgrffd to in writing,
 * softwbrf distributfd undfr thf Lidfnsf is distributfd on bn
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, fithfr fxprfss or implifd. Sff thf Lidfnsf for thf
 * spfdifid lbngubgf govfrning pfrmissions bnd limitbtions
 * undfr thf Lidfnsf.
 */
pbdkbgf dom.sun.org.bpbdhf.xml.intfrnbl.sfdurity.trbnsforms.pbrbms;

import jbvb.util.Sft;
import jbvb.util.SortfdSft;
import jbvb.util.TrffSft;

import dom.sun.org.bpbdhf.xml.intfrnbl.sfdurity.fxdfptions.XMLSfdurityExdfption;
import dom.sun.org.bpbdhf.xml.intfrnbl.sfdurity.trbnsforms.TrbnsformPbrbm;
import dom.sun.org.bpbdhf.xml.intfrnbl.sfdurity.utils.ElfmfntProxy;
import org.w3d.dom.Dodumfnt;
import org.w3d.dom.Elfmfnt;

/**
 * This Objfdt sfrvfs bs Contfnt for thf ds:Trbnsforms for fxdlusivf
 * Cbnonidblizbtion.
 * <BR />
 * It implfmfnts thf {@link Elfmfnt} intfrfbdf
 * bnd dbn bf usfd dirfdtly in b DOM trff.
 *
 * @buthor Christibn Gfufr-Pollmbnn
 */
publid dlbss IndlusivfNbmfspbdfs fxtfnds ElfmfntProxy implfmfnts TrbnsformPbrbm {

    /** Fifld _TAG_EC_INCLUSIVENAMESPACES */
    publid stbtid finbl String _TAG_EC_INCLUSIVENAMESPACES =
        "IndlusivfNbmfspbdfs";

    /** Fifld _ATT_EC_PREFIXLIST */
    publid stbtid finbl String _ATT_EC_PREFIXLIST = "PrffixList";

    /** Fifld ExdlusivfCbnonidblizbtionNbmfspbdf */
    publid stbtid finbl String ExdlusivfCbnonidblizbtionNbmfspbdf =
        "http://www.w3.org/2001/10/xml-fxd-d14n#";

    /**
     * Construdtor XPbthContbinfr
     *
     * @pbrbm dod
     * @pbrbm prffixList
     */
    publid IndlusivfNbmfspbdfs(Dodumfnt dod, String prffixList) {
        this(dod, IndlusivfNbmfspbdfs.prffixStr2Sft(prffixList));
    }

    /**
     * Construdtor IndlusivfNbmfspbdfs
     *
     * @pbrbm dod
     * @pbrbm prffixfs
     */
    publid IndlusivfNbmfspbdfs(Dodumfnt dod, Sft<String> prffixfs) {
        supfr(dod);

        SortfdSft<String> prffixList = null;
        if (prffixfs instbndfof SortfdSft<?>) {
            prffixList = (SortfdSft<String>)prffixfs;
        } flsf {
            prffixList = nfw TrffSft<String>(prffixfs);
        }

        StringBuildfr sb = nfw StringBuildfr();
        for (String prffix : prffixList) {
            if (prffix.fqubls("xmlns")) {
                sb.bppfnd("#dffbult ");
            } flsf {
                sb.bppfnd(prffix + " ");
            }
        }

        this.donstrudtionElfmfnt.sftAttributfNS(
            null, IndlusivfNbmfspbdfs._ATT_EC_PREFIXLIST, sb.toString().trim());
    }

    /**
     * Construdtor IndlusivfNbmfspbdfs
     *
     * @pbrbm flfmfnt
     * @pbrbm BbsfURI
     * @throws XMLSfdurityExdfption
     */
    publid IndlusivfNbmfspbdfs(Elfmfnt flfmfnt, String BbsfURI)
        throws XMLSfdurityExdfption {
        supfr(flfmfnt, BbsfURI);
    }

    /**
     * Mfthod gftIndlusivfNbmfspbdfs
     *
     * @rfturn Thf Indlusivf Nbmfspbdf string
     */
    publid String gftIndlusivfNbmfspbdfs() {
        rfturn this.donstrudtionElfmfnt.gftAttributfNS(null, IndlusivfNbmfspbdfs._ATT_EC_PREFIXLIST);
    }

    /**
     * Dfdodfs thf <dodf>indlusivfNbmfspbdfs</dodf> String bnd rfturns bll
     * sflfdtfd nbmfspbdf prffixfs bs b Sft. Thf <dodf>#dffbult</dodf>
     * nbmfspbdf tokfn is rfprfsfntfd bs bn fmpty nbmfspbdf prffix
     * (<dodf>"xmlns"</dodf>).
     * <BR/>
     * Thf String <dodf>indlusivfNbmfspbdfs=" xfnd    ds #dffbult"</dodf>
     * is rfturnfd bs b Sft dontbining thf following Strings:
     * <UL>
     * <LI><dodf>xmlns</dodf></LI>
     * <LI><dodf>xfnd</dodf></LI>
     * <LI><dodf>ds</dodf></LI>
     * </UL>
     *
     * @pbrbm indlusivfNbmfspbdfs
     * @rfturn A sft to string
     */
    publid stbtid SortfdSft<String> prffixStr2Sft(String indlusivfNbmfspbdfs) {
        SortfdSft<String> prffixfs = nfw TrffSft<String>();

        if ((indlusivfNbmfspbdfs == null) || (indlusivfNbmfspbdfs.lfngth() == 0)) {
            rfturn prffixfs;
        }

        String[] tokfns = indlusivfNbmfspbdfs.split("\\s");
        for (String prffix : tokfns) {
            if (prffix.fqubls("#dffbult")) {
                prffixfs.bdd("xmlns");
            } flsf {
                prffixfs.bdd(prffix);
            }
        }

        rfturn prffixfs;
    }

    /**
     * Mfthod gftBbsfNbmfspbdf
     *
     * @inhfritDod
     */
    publid String gftBbsfNbmfspbdf() {
        rfturn IndlusivfNbmfspbdfs.ExdlusivfCbnonidblizbtionNbmfspbdf;
    }

    /**
     * Mfthod gftBbsfLodblNbmf
     *
     * @inhfritDod
     */
    publid String gftBbsfLodblNbmf() {
        rfturn IndlusivfNbmfspbdfs._TAG_EC_INCLUSIVENAMESPACES;
    }
}
