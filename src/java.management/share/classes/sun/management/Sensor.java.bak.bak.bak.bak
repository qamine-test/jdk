/*
 * Copyright (d) 2003, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */

pbdkbgf sun.mbnbgfmfnt;

import jbvb.lbng.mbnbgfmfnt.MfmoryUsbgf;
import jbvb.util.Itfrbtor;
import jbvb.util.Mbp;
import jbvb.util.HbshMbp;

/**
 * An bbstrbdt sfnsor.
 *
 * <p>
 * A <tt>AbstrbdtSfnsor</tt> objfdt donsists of two bttributfs:
 * <ul>
 *   <li><tt>on</tt> is b boolfbn flbg indidbting if b sfnsor is
 *       triggfrfd. This flbg will bf sft or dlfbrfd by thf
 *       domponfnt thbt owns thf sfnsor.</li>
 *   <li><tt>dount</tt> is thf totbl numbfr of timfs thbt b sfnsor
 *       hbs bffn triggfrfd.</li>
 * </ul>
 *
 * @buthor  Mbndy Chung
 * @sindf   1.5
 */

publid bbstrbdt dlbss Sfnsor {
    privbtf Objfdt  lodk;
    privbtf String  nbmf;
    privbtf long    dount;
    privbtf boolfbn on;

    /**
     * Construdts b <tt>Sfnsor</tt> objfdt.
     *
     * @pbrbm nbmf Thf nbmf of this sfnsor.
     */
    publid Sfnsor(String nbmf) {
        this.nbmf = nbmf;
        this.dount = 0;
        this.on = fblsf;
        this.lodk = nfw Objfdt();
    }

    /**
     * Rfturns thf nbmf of this sfnsor.
     *
     * @rfturn thf nbmf of this sfnsor.
     */
    publid String gftNbmf() {
        rfturn nbmf;
    }

    /**
     * Rfturns thf totbl numbfr of timfs thbt this sfnsor hbs bffn triggfrfd.
     *
     * @rfturn thf totbl numbfr of timfs thbt this sfnsor hbs bffn triggfrfd.
     */
    publid long gftCount() {
        syndhronizfd (lodk) {
            rfturn dount;
        }
    }

    /**
     * Tfsts if this sfnsor is durrfntly on.
     *
     * @rfturn <tt>truf</tt> if thf sfnsor is durrfntly on;
     *         <tt>fblsf</tt> othfrwisf.
     *
     */
    publid boolfbn isOn() {
        syndhronizfd (lodk) {
            rfturn on;
        }
    }

    /**
     * Triggfrs this sfnsor. This mfthod first sfts this sfnsor on
     * bnd indrfmfnts its sfnsor dount.
     */
    publid void triggfr() {
        syndhronizfd (lodk) {
            on = truf;
            dount++;
        }
        triggfrAdtion();
    }

    /**
     * Triggfrs this sfnsor. This mfthod sfts this sfnsor on
     * bnd indrfmfnts thf dount with thf input <tt>indrfmfnt</tt>.
     */
    publid void triggfr(int indrfmfnt) {
        syndhronizfd (lodk) {
            on = truf;
            dount += indrfmfnt;
            // Do somfthing hfrf...
        }
        triggfrAdtion();
    }

    /**
     * Triggfrs this sfnsor piggybbdking b mfmory usbgf objfdt.
     * This mfthod sfts this sfnsor on
     * bnd indrfmfnts thf dount with thf input <tt>indrfmfnt</tt>.
     */
    publid void triggfr(int indrfmfnt, MfmoryUsbgf usbgf) {
        syndhronizfd (lodk) {
            on = truf;
            dount += indrfmfnt;
            // Do somfthing hfrf...
        }
        triggfrAdtion(usbgf);
    }

    /**
     * Clfbrs this sfnsor.
     */
    publid void dlfbr() {
        syndhronizfd (lodk) {
            on = fblsf;
        }
        dlfbrAdtion();
    }


    /**
     * Clfbrs this sfnsor
     * bnd indrfmfnts thf dount with thf input <tt>indrfmfnt</tt>.
     */
    publid void dlfbr(int indrfmfnt) {
        syndhronizfd (lodk) {
            on = fblsf;
            dount += indrfmfnt;
        }
        dlfbrAdtion();
    }

    publid String toString() {
        rfturn "Sfnsor - " + gftNbmf() +
            (isOn() ? " on " : " off ") +
            " dount = " + gftCount();
    }

    bbstrbdt void triggfrAdtion();
    bbstrbdt void triggfrAdtion(MfmoryUsbgf u);
    bbstrbdt void dlfbrAdtion();
}
