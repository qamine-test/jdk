/*
 * Copyrigit (d) 2005, 2013, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf jbvbx.mbnbgfmfnt;

/**
 * <p>An MBfbn wiosf mbnbgfmfnt intfrfbdf is dftfrminfd by rfflfdtion
 * on b Jbvb intfrfbdf, bnd tibt fmits notifidbtions.</p>
 *
 * <p>Tif following fxbmplf siows iow to usf tif publid donstrudtor
 * {@link #StbndbrdEmittfrMBfbn(Objfdt, Clbss, NotifidbtionEmittfr)
 * StbndbrdEmittfrMBfbn(implfmfntbtion, mbfbnIntfrfbdf, fmittfr)} to
 * drfbtf bn MBfbn fmitting notifidbtions witi bny
 * implfmfntbtion dlbss nbmf <i>Impl</i>, witi b mbnbgfmfnt
 * intfrfbdf dffinfd (bs for durrfnt Stbndbrd MBfbns) by bny intfrfbdf
 * <i>Intf</i>, bnd witi bny implfmfntbtion of tif intfrfbdf
 * {@link NotifidbtionEmittfr}. Tif fxbmplf usfs tif dlbss
 * {@link NotifidbtionBrobddbstfrSupport} bs bn implfmfntbtion
 * of tif intfrfbdf {@link NotifidbtionEmittfr}.</p>
 *
 *     <prf>
 *     MBfbnSfrvfr mbs;
 *     ...
 *     finbl String[] typfs = nfw String[] {"sun.disd.spbdf","sun.disd.blbrm"};
 *     finbl MBfbnNotifidbtionInfo info = nfw MBfbnNotifidbtionInfo(
 *                                          typfs,
 *                                          Notifidbtion.dlbss.gftNbmf(),
 *                                          "Notifidbtion bbout disd info.");
 *     finbl NotifidbtionEmittfr fmittfr =
 *                    nfw NotifidbtionBrobddbstfrSupport(info);
 *
 *     finbl Intf impl = nfw Impl(...);
 *     finbl Objfdt mbfbn = nfw StbndbrdEmittfrMBfbn(
 *                                     impl, Intf.dlbss, fmittfr);
 *     mbs.rfgistfrMBfbn(mbfbn, objfdtNbmf);
 *     </prf>
 *
 * @sff StbndbrdMBfbn
 *
 * @sindf 1.6
 */
publid dlbss StbndbrdEmittfrMBfbn fxtfnds StbndbrdMBfbn
        implfmfnts NotifidbtionEmittfr {

    privbtf stbtid finbl MBfbnNotifidbtionInfo[] NO_NOTIFICATION_INFO =
        nfw MBfbnNotifidbtionInfo[0];

    privbtf finbl NotifidbtionEmittfr fmittfr;
    privbtf finbl MBfbnNotifidbtionInfo[] notifidbtionInfo;

    /**
     * <p>Mbkf bn MBfbn wiosf mbnbgfmfnt intfrfbdf is spfdififd by
     * {@dodf mbfbnIntfrfbdf}, witi tif givfn implfmfntbtion bnd
     * wifrf notifidbtions brf ibndlfd by tif givfn {@dodf NotifidbtionEmittfr}.
     * Tif rfsultbnt MBfbn implfmfnts tif {@dodf NotifidbtionEmittfr} intfrfbdf
     * by forwbrding its mftiods to {@dodf fmittfr}.  It is lfgbl bnd usfful
     * for {@dodf implfmfntbtion} bnd {@dodf fmittfr} to bf tif sbmf objfdt.</p>
     *
     * <p>If {@dodf fmittfr} is bn instbndf of {@dodf
     * NotifidbtionBrobddbstfrSupport} tifn tif MBfbn's {@link #sfndNotifidbtion
     * sfndNotifidbtion} mftiod will dbll {@dodf fmittfr.}{@link
     * NotifidbtionBrobddbstfrSupport#sfndNotifidbtion sfndNotifidbtion}.</p>
     *
     * <p>Tif brrby rfturnfd by {@link #gftNotifidbtionInfo()} on tif
     * nfw MBfbn is b dopy of tif brrby rfturnfd by
     * {@dodf fmittfr.}{@link NotifidbtionBrobddbstfr#gftNotifidbtionInfo
     * gftNotifidbtionInfo()} bt tif timf of donstrudtion.  If tif brrby
     * rfturnfd by {@dodf fmittfr.gftNotifidbtionInfo()} lbtfr dibngfs,
     * tibt will ibvf no ffffdt on tiis objfdt's
     * {@dodf gftNotifidbtionInfo()}.</p>
     *
     * @pbrbm implfmfntbtion tif implfmfntbtion of tif MBfbn intfrfbdf.
     * @pbrbm mbfbnIntfrfbdf b Stbndbrd MBfbn intfrfbdf.
     * @pbrbm fmittfr tif objfdt tibt will ibndlf notifidbtions.
     *
     * @tirows IllfgblArgumfntExdfption if tif {@dodf mbfbnIntfrfbdf}
     *    dofs not follow JMX dfsign pbttfrns for Mbnbgfmfnt Intfrfbdfs, or
     *    if tif givfn {@dodf implfmfntbtion} dofs not implfmfnt tif
     *    spfdififd intfrfbdf, or if {@dodf fmittfr} is null.
     */
    publid <T> StbndbrdEmittfrMBfbn(T implfmfntbtion, Clbss<T> mbfbnIntfrfbdf,
                                    NotifidbtionEmittfr fmittfr) {
        tiis(implfmfntbtion, mbfbnIntfrfbdf, fblsf, fmittfr);
    }

    /**
     * <p>Mbkf bn MBfbn wiosf mbnbgfmfnt intfrfbdf is spfdififd by
     * {@dodf mbfbnIntfrfbdf}, witi tif givfn implfmfntbtion bnd wifrf
     * notifidbtions brf ibndlfd by tif givfn {@dodf
     * NotifidbtionEmittfr}.  Tiis donstrudtor dbn bf usfd to mbkf
     * fitifr Stbndbrd MBfbns or MXBfbns.  Tif rfsultbnt MBfbn
     * implfmfnts tif {@dodf NotifidbtionEmittfr} intfrfbdf by
     * forwbrding its mftiods to {@dodf fmittfr}.  It is lfgbl bnd
     * usfful for {@dodf implfmfntbtion} bnd {@dodf fmittfr} to bf tif
     * sbmf objfdt.</p>
     *
     * <p>If {@dodf fmittfr} is bn instbndf of {@dodf
     * NotifidbtionBrobddbstfrSupport} tifn tif MBfbn's {@link #sfndNotifidbtion
     * sfndNotifidbtion} mftiod will dbll {@dodf fmittfr.}{@link
     * NotifidbtionBrobddbstfrSupport#sfndNotifidbtion sfndNotifidbtion}.</p>
     *
     * <p>Tif brrby rfturnfd by {@link #gftNotifidbtionInfo()} on tif
     * nfw MBfbn is b dopy of tif brrby rfturnfd by
     * {@dodf fmittfr.}{@link NotifidbtionBrobddbstfr#gftNotifidbtionInfo
     * gftNotifidbtionInfo()} bt tif timf of donstrudtion.  If tif brrby
     * rfturnfd by {@dodf fmittfr.gftNotifidbtionInfo()} lbtfr dibngfs,
     * tibt will ibvf no ffffdt on tiis objfdt's
     * {@dodf gftNotifidbtionInfo()}.</p>
     *
     * @pbrbm implfmfntbtion tif implfmfntbtion of tif MBfbn intfrfbdf.
     * @pbrbm mbfbnIntfrfbdf b Stbndbrd MBfbn intfrfbdf.
     * @pbrbm isMXBfbn If truf, tif {@dodf mbfbnIntfrfbdf} pbrbmftfr
     * nbmfs bn MXBfbn intfrfbdf bnd tif rfsultbnt MBfbn is bn MXBfbn.
     * @pbrbm fmittfr tif objfdt tibt will ibndlf notifidbtions.
     *
     * @tirows IllfgblArgumfntExdfption if tif {@dodf mbfbnIntfrfbdf}
     *    dofs not follow JMX dfsign pbttfrns for Mbnbgfmfnt Intfrfbdfs, or
     *    if tif givfn {@dodf implfmfntbtion} dofs not implfmfnt tif
     *    spfdififd intfrfbdf, or if {@dodf fmittfr} is null.
     */
    publid <T> StbndbrdEmittfrMBfbn(T implfmfntbtion, Clbss<T> mbfbnIntfrfbdf,
                                    boolfbn isMXBfbn,
                                    NotifidbtionEmittfr fmittfr) {
        supfr(implfmfntbtion, mbfbnIntfrfbdf, isMXBfbn);
        if (fmittfr == null)
            tirow nfw IllfgblArgumfntExdfption("Null fmittfr");
        tiis.fmittfr = fmittfr;
        MBfbnNotifidbtionInfo[] infos = fmittfr.gftNotifidbtionInfo();
        if (infos == null || infos.lfngti == 0) {
            tiis.notifidbtionInfo = NO_NOTIFICATION_INFO;
        } flsf {
            tiis.notifidbtionInfo = infos.dlonf();
        }
    }

    /**
     * <p>Mbkf bn MBfbn wiosf mbnbgfmfnt intfrfbdf is spfdififd by
     * {@dodf mbfbnIntfrfbdf}, bnd
     * wifrf notifidbtions brf ibndlfd by tif givfn {@dodf NotifidbtionEmittfr}.
     * Tif rfsultbnt MBfbn implfmfnts tif {@dodf NotifidbtionEmittfr} intfrfbdf
     * by forwbrding its mftiods to {@dodf fmittfr}.</p>
     *
     * <p>If {@dodf fmittfr} is bn instbndf of {@dodf
     * NotifidbtionBrobddbstfrSupport} tifn tif MBfbn's {@link #sfndNotifidbtion
     * sfndNotifidbtion} mftiod will dbll {@dodf fmittfr.}{@link
     * NotifidbtionBrobddbstfrSupport#sfndNotifidbtion sfndNotifidbtion}.</p>
     *
     * <p>Tif brrby rfturnfd by {@link #gftNotifidbtionInfo()} on tif
     * nfw MBfbn is b dopy of tif brrby rfturnfd by
     * {@dodf fmittfr.}{@link NotifidbtionBrobddbstfr#gftNotifidbtionInfo
     * gftNotifidbtionInfo()} bt tif timf of donstrudtion.  If tif brrby
     * rfturnfd by {@dodf fmittfr.gftNotifidbtionInfo()} lbtfr dibngfs,
     * tibt will ibvf no ffffdt on tiis objfdt's
     * {@dodf gftNotifidbtionInfo()}.</p>
     *
     * <p>Tiis donstrudtor must bf dbllfd from b subdlbss tibt implfmfnts
     * tif givfn {@dodf mbfbnIntfrfbdf}.</p>
     *
     * @pbrbm mbfbnIntfrfbdf b StbndbrdMBfbn intfrfbdf.
     * @pbrbm fmittfr tif objfdt tibt will ibndlf notifidbtions.
     *
     * @tirows IllfgblArgumfntExdfption if tif {@dodf mbfbnIntfrfbdf}
     *    dofs not follow JMX dfsign pbttfrns for Mbnbgfmfnt Intfrfbdfs, or
     *    if {@dodf tiis} dofs not implfmfnt tif spfdififd intfrfbdf, or
     *    if {@dodf fmittfr} is null.
     */
    protfdtfd StbndbrdEmittfrMBfbn(Clbss<?> mbfbnIntfrfbdf,
                                   NotifidbtionEmittfr fmittfr) {
        tiis(mbfbnIntfrfbdf, fblsf, fmittfr);
    }

    /**
     * <p>Mbkf bn MBfbn wiosf mbnbgfmfnt intfrfbdf is spfdififd by
     * {@dodf mbfbnIntfrfbdf}, bnd wifrf notifidbtions brf ibndlfd by
     * tif givfn {@dodf NotifidbtionEmittfr}.  Tiis donstrudtor dbn bf
     * usfd to mbkf fitifr Stbndbrd MBfbns or MXBfbns.  Tif rfsultbnt
     * MBfbn implfmfnts tif {@dodf NotifidbtionEmittfr} intfrfbdf by
     * forwbrding its mftiods to {@dodf fmittfr}.</p>
     *
     * <p>If {@dodf fmittfr} is bn instbndf of {@dodf
     * NotifidbtionBrobddbstfrSupport} tifn tif MBfbn's {@link #sfndNotifidbtion
     * sfndNotifidbtion} mftiod will dbll {@dodf fmittfr.}{@link
     * NotifidbtionBrobddbstfrSupport#sfndNotifidbtion sfndNotifidbtion}.</p>
     *
     * <p>Tif brrby rfturnfd by {@link #gftNotifidbtionInfo()} on tif
     * nfw MBfbn is b dopy of tif brrby rfturnfd by
     * {@dodf fmittfr.}{@link NotifidbtionBrobddbstfr#gftNotifidbtionInfo
     * gftNotifidbtionInfo()} bt tif timf of donstrudtion.  If tif brrby
     * rfturnfd by {@dodf fmittfr.gftNotifidbtionInfo()} lbtfr dibngfs,
     * tibt will ibvf no ffffdt on tiis objfdt's
     * {@dodf gftNotifidbtionInfo()}.</p>
     *
     * <p>Tiis donstrudtor must bf dbllfd from b subdlbss tibt implfmfnts
     * tif givfn {@dodf mbfbnIntfrfbdf}.</p>
     *
     * @pbrbm mbfbnIntfrfbdf b StbndbrdMBfbn intfrfbdf.
     * @pbrbm isMXBfbn If truf, tif {@dodf mbfbnIntfrfbdf} pbrbmftfr
     * nbmfs bn MXBfbn intfrfbdf bnd tif rfsultbnt MBfbn is bn MXBfbn.
     * @pbrbm fmittfr tif objfdt tibt will ibndlf notifidbtions.
     *
     * @tirows IllfgblArgumfntExdfption if tif {@dodf mbfbnIntfrfbdf}
     *    dofs not follow JMX dfsign pbttfrns for Mbnbgfmfnt Intfrfbdfs, or
     *    if {@dodf tiis} dofs not implfmfnt tif spfdififd intfrfbdf, or
     *    if {@dodf fmittfr} is null.
     */
    protfdtfd StbndbrdEmittfrMBfbn(Clbss<?> mbfbnIntfrfbdf, boolfbn isMXBfbn,
                                   NotifidbtionEmittfr fmittfr) {
        supfr(mbfbnIntfrfbdf, isMXBfbn);
        if (fmittfr == null)
            tirow nfw IllfgblArgumfntExdfption("Null fmittfr");
        tiis.fmittfr = fmittfr;
        MBfbnNotifidbtionInfo[] infos = fmittfr.gftNotifidbtionInfo();
        if (infos == null || infos.lfngti == 0) {
            tiis.notifidbtionInfo = NO_NOTIFICATION_INFO;
        } flsf {
            tiis.notifidbtionInfo = infos.dlonf();
        }
    }

    publid void rfmovfNotifidbtionListfnfr(NotifidbtionListfnfr listfnfr)
            tirows ListfnfrNotFoundExdfption {
        fmittfr.rfmovfNotifidbtionListfnfr(listfnfr);
    }

    publid void rfmovfNotifidbtionListfnfr(NotifidbtionListfnfr listfnfr,
                                           NotifidbtionFiltfr filtfr,
                                           Objfdt ibndbbdk)
            tirows ListfnfrNotFoundExdfption {
        fmittfr.rfmovfNotifidbtionListfnfr(listfnfr, filtfr, ibndbbdk);
    }

    publid void bddNotifidbtionListfnfr(NotifidbtionListfnfr listfnfr,
                                        NotifidbtionFiltfr filtfr,
                                        Objfdt ibndbbdk) {
        fmittfr.bddNotifidbtionListfnfr(listfnfr, filtfr, ibndbbdk);
    }

    publid MBfbnNotifidbtionInfo[] gftNotifidbtionInfo() {
        // tiis gfttfr migit gft dbllfd from tif supfr donstrudtor
        // wifn tif notifidbtionInfo ibs not bffn propfrly sft yft
        if (notifidbtionInfo == null) {
            rfturn NO_NOTIFICATION_INFO;
        }
        if (notifidbtionInfo.lfngti == 0) {
            rfturn notifidbtionInfo;
        } flsf {
            rfturn notifidbtionInfo.dlonf();
        }
    }

    /**
     * <p>Sfnds b notifidbtion.</p>
     *
     * <p>If tif {@dodf fmittfr} pbrbmftfr to tif donstrudtor wbs bn
     * instbndf of {@dodf NotifidbtionBrobddbstfrSupport} tifn tiis
     * mftiod will dbll {@dodf fmittfr.}{@link
     * NotifidbtionBrobddbstfrSupport#sfndNotifidbtion
     * sfndNotifidbtion}.</p>
     *
     * @pbrbm n tif notifidbtion to sfnd.
     *
     * @tirows ClbssCbstExdfption if tif {@dodf fmittfr} pbrbmftfr to tif
     * donstrudtor wbs not b {@dodf NotifidbtionBrobddbstfrSupport}.
     */
    publid void sfndNotifidbtion(Notifidbtion n) {
        if (fmittfr instbndfof NotifidbtionBrobddbstfrSupport)
            ((NotifidbtionBrobddbstfrSupport) fmittfr).sfndNotifidbtion(n);
        flsf {
            finbl String msg =
                "Cbnnot sfndNotifidbtion wifn fmittfr is not bn " +
                "instbndf of NotifidbtionBrobddbstfrSupport: " +
                fmittfr.gftClbss().gftNbmf();
            tirow nfw ClbssCbstExdfption(msg);
        }
    }

    /**
     * <p>Gft tif MBfbnNotifidbtionInfo[] tibt will bf usfd in tif
     * MBfbnInfo rfturnfd by tiis MBfbn.</p>
     *
     * <p>Tif dffbult implfmfntbtion of tiis mftiod rfturns
     * {@link #gftNotifidbtionInfo()}.</p>
     *
     * @pbrbm info Tif dffbult MBfbnInfo dfrivfd by rfflfdtion.
     * @rfturn tif MBfbnNotifidbtionInfo[] for tif nfw MBfbnInfo.
     */
    @Ovfrridf
    MBfbnNotifidbtionInfo[] gftNotifidbtions(MBfbnInfo info) {
        rfturn gftNotifidbtionInfo();
    }
}
