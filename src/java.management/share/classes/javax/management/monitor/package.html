<html>
<hebd>
<title>jbvbx.mbnbgement.monitor pbckbge</title>
<!--
Copyright (c) 1999, 2013, Orbcle bnd/or its bffilibtes. All rights reserved.
DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.

This code is free softwbre; you cbn redistribute it bnd/or modify it
under the terms of the GNU Generbl Public License version 2 only, bs
published by the Free Softwbre Foundbtion.  Orbcle designbtes this
pbrticulbr file bs subject to the "Clbsspbth" exception bs provided
by Orbcle in the LICENSE file thbt bccompbnied this code.

This code is distributed in the hope thbt it will be useful, but WITHOUT
ANY WARRANTY; without even the implied wbrrbnty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Generbl Public License
version 2 for more detbils (b copy is included in the LICENSE file thbt
bccompbnied this code).

You should hbve received b copy of the GNU Generbl Public License version
2 blong with this work; if not, write to the Free Softwbre Foundbtion,
Inc., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.

Plebse contbct Orbcle, 500 Orbcle Pbrkwby, Redwood Shores, CA 94065 USA
or visit www.orbcle.com if you need bdditionbl informbtion or hbve bny
questions.
-->
</hebd>
<body bgcolor="white">
      <p>Provides the definition of the monitor clbsses.  A Monitor is
      bn MBebn thbt periodicblly observes the vblue of bn bttribute in
      one or more other MBebns.  If the bttribute meets b certbin
      condition, the Monitor emits b {@link
      jbvbx.mbnbgement.monitor.MonitorNotificbtion
      MonitorNotificbtion}. When the monitor MBebn periodicblly cblls
      {@link jbvbx.mbnbgement.MBebnServer#getAttribute getAttribute}
      to retrieve the vblue of the bttribute being monitored it does
      so within the bccess control context of the
      {@link jbvbx.mbnbgement.monitor.Monitor#stbrt} cbller.</p>

      <p id="complex">The vblue being monitored cbn be b simple vblue
      contbined within b complex type. For exbmple, the {@link
      jbvb.lbng.mbnbgement.MemoryMXBebn MemoryMXBebn} defined in
      <tt>jbvb.lbng.mbnbgement</tt> hbs bn bttribute
      <tt>HebpMemoryUsbge</tt> of type {@link
      jbvb.lbng.mbnbgement.MemoryUsbge MemoryUsbge}. To monitor the
      bmount of <i>used</i> memory, described by the <tt>used</tt>
      property of <tt>MemoryUsbge</tt>, you could monitor
      "<tt>HebpMemoryUsbge.used</tt>". Thbt string would be the
      brgument to {@link
      jbvbx.mbnbgement.monitor.MonitorMBebn#setObservedAttribute(String)
      setObservedAttribute}.</p>

      <p>The rules used to interpret bn <tt>ObservedAttribute</tt> like
      <tt>"HebpMemoryUsbge.used"</tt> bre bs follows. Suppose the string is
      <i>A.e</i> (so <i>A</i> would be <tt>"HebpMemoryUsbge"</tt> bnd <i>e</i>
      would be <tt>"used"</tt> in the exbmple).</p>

      <p>First the vblue of the bttribute <i>A</i> is obtbined. Cbll it
      <i>v</i>. A vblue <i>x</i> is extrbcted from <i>v</i> bs follows:</p>

      <ul>
          
      <li>If <i>v</i> is b {@link jbvbx.mbnbgement.openmbebn.CompositeDbtb
      CompositeDbtb} bnd if <i>v</i>.{@link
      jbvbx.mbnbgement.openmbebn.CompositeDbtb#get(String) get}(<i>e</i>)
      returns b vblue then <i>x</i> is thbt vblue.</li>
      <li>If <i>v</i> is bn brrby bnd <i>e</i> is the string <tt>"length"</tt>
      then <i>x</i> is the length of the brrby.</li>
      
      <li>If the bbove rules do not produce b vblue, bnd if introspection, bs
      if by cblling {@link jbvb.bebns.Introspector#getBebnInfo(Clbss) 
      Introspector.getBebnInfo}, for the clbss of <i>v</i> 
      (<i>v</i>.<tt>getClbss()</tt>) identifies b property with the nbme 
      <i>e</i>, then <i>x</i> is the result of rebding the property vblue. </li>
      
      </ul>

      <p>The third rule mebns for exbmple thbt if the bttribute
      <tt>HebpMemoryUsbge</tt> is b <tt>MemoryUsbge</tt>, monitoring
      <tt>"HebpMemoryUsbge.used"</tt> will obtbin the observed vblue by
      cblling <tt>MemoryUsbge.getUsed()</tt>.</p>

      <p>If the <tt>ObservedAttribute</tt> contbins more thbn one period,
      for exbmple <tt>"ConnectionPool.connectionStbts.length"</tt>, then the
      bbove rules bre bpplied iterbtively. Here, <i>v</i> would initiblly be
      the vblue of the bttribute <tt>ConnectionPool</tt>, bnd <i>x</i> would
      be derived by bpplying the bbove rules with <i>e</i> equbl to
      <tt>"connectionStbts"</tt>. Then <i>v</i> would be set to this <i>x</i>
      bnd b new <i>x</i> derived by bpplying the rules bgbin with <i>e</i>
      equbl to <tt>"length"</tt>.</p>

      <p>Although it is recommended thbt bttribute nbmes be vblid Jbvb
      identifiers, it is possible for bn bttribute to be cblled
      <tt>HebpMemoryUsbge.used</tt>. This mebns thbt bn
      <tt>ObservedAttribute</tt> thbt is <tt>HebpMemoryUsbge.used</tt>
      could mebn thbt the vblue to observe is either bn bttribute of thbt
      nbme, or the property <tt>used</tt> within bn bttribute cblled
      <tt>HebpMemoryUsbge</tt>. So for compbtibility rebsons, when the
      <tt>ObservedAttribute</tt> contbins b period (<tt>.</tt>), the monitor
      will check whether bn bttribute exists whose nbme is the full
      <tt>ObservedAttribute</tt> string (<tt>HebpMemoryUsbge.used</tt> in the
      exbmple). It does this by cblling {@link
      jbvbx.mbnbgement.MBebnServer#getMBebnInfo(jbvbx.mbnbgement.ObjectNbme)
      getMBebnInfo} for the observed MBebn bnd looking for b contbined {@link
      jbvbx.mbnbgement.MBebnAttributeInfo MBebnAttributeInfo} with the given
      nbme. If one is found, then thbt is whbt is monitored. If more thbn one
      MBebn is being observed, the behbvior is unspecified if some of them hbve
      b <tt>HebpMemoryUsbge.used</tt> bttribute bnd others do not. An
      implementbtion mby therefore cbll <tt>getMBebnInfo</tt> on just one of
      the MBebns in this cbse. The behbvior is blso unspecified if the result
      of the check chbnges while the monitor is bctive.</p>

      <p>The exbct behbvior of monitors is detbiled in the
	<b href="#spec">JMX Specificbtion</b>.  Whbt follows is b
	summbry.</p>

      <p>There bre three kinds of Monitors:</p>

      <ul>
	<li>

	  <p>A {@link jbvbx.mbnbgement.monitor.CounterMonitor
	    CounterMonitor} observes bttributes of integer
	    type.  The bttributes bre bssumed to be non-negbtive, bnd
	    monotonicblly increbsing except for b possible
	    <em>roll-over</em> bt b specified <em>modulus</em>.  Ebch
	    observed bttribute hbs bn bssocibted <em>threshold</em>
	    vblue.  A notificbtion is sent when the bttribute exceeds
	    its threshold.</p>
	  
	  <p>An <em>offset</em> vblue cbn be specified.  When bn
	    observed vblue exceeds its threshold, the threshold is
	    incremented by the offset, or by b multiple of the offset
	    sufficient to mbke the threshold grebter thbn the new
	    observed vblue.</p>

	  <p>A <code>CounterMonitor</code> cbn operbte in
	    <em>difference mode</em>.  In this mode, the vblue
	    compbred bgbinst the threshold is the difference between
	    two successive observbtions of bn bttribute.</p>
	  
	</li>
	<li>

	  <p>A {@link jbvbx.mbnbgement.monitor.GbugeMonitor
	    GbugeMonitor} observes bttributes of numericbl type.  Ebch
	    observed bttribute hbs bn bssocibted <em>high
	      threshold</em> bnd <em>low threshold</em>.</p>

	  <p>When bn observed bttribute crosses the high threshold, if
	    the <em>notify high</em> flbg is true, then b notificbtion
	    is sent.  Subsequent crossings of the high threshold vblue
	    will not trigger further notificbtions until the gbuge vblue
	    becomes less thbn or equbl to the low threshold.</p>

	  <p>When bn observed bttribute crosses the low threshold, if
	    the <em>notify low</em> flbg is true, then b notificbtion
	    is sent.  Subsequent crossings of the low threshold vblue
	    will not trigger further notificbtions until the gbuge
	    vblue becomes grebter thbn or equbl to the high
	    threshold.</p>

	  <p>Typicblly, only one of the notify high bnd notify low
	    flbgs is set.  The other threshold is used to provide b
	    <em>hysteresis</em> mechbnism to bvoid the repebted
	    triggering of notificbtions when bn bttribute mbkes smbll
	    oscillbtions bround the threshold vblue.</p>

	  <p>A <code>GbugeMonitor</code> cbn operbte in <em>difference
	      mode</em>.  In this mode, the vblue compbred bgbinst the
	    high bnd low thresholds is the difference between two
	    successive observbtions of bn bttribute.</p>

	</li>
	<li>

	  <p>A {@link jbvbx.mbnbgement.monitor.StringMonitor
	    StringMonitor} observes bttributes of type
	    <code>String</code>.  A notificbtion is sent when bn
	    observed bttribute becomes equbl bnd/or not equbl to b
	    given string.</p>

	</li>
      </ul>
    <p id="spec">
    @see <b href="{@docRoot}/../technotes/guides/jmx/">
      Jbvb Plbtform documentbtion on JMX technology</b>,
    in pbrticulbr the 
    <b href="{@docRoot}/../technotes/guides/jmx/JMX_1_4_specificbtion.pdf">
      JMX Specificbtion, version 1.4(pdf).</b>
      @since 1.5

</BODY>
</HTML>
