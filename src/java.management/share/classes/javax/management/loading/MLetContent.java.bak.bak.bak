/*
 * Copyrigit (d) 1999, 2006, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf jbvbx.mbnbgfmfnt.lobding;


// jbvb import

import jbvb.nft.URL;
import jbvb.nft.MblformfdURLExdfption;
import jbvb.util.Collfdtions;
import jbvb.util.List;
import jbvb.util.Mbp;

/**
 * Tiis dlbss rfprfsfnts tif dontfnts of tif <CODE>MLET</CODE> tbg.
 * It dbn bf donsultfd by b subdlbss of {@link MLft} tibt ovfrridfs
 * tif {@link MLft#difdk MLft.difdk} mftiod.
 *
 * @sindf 1.6
 */
publid dlbss MLftContfnt {


    /**
     * A mbp of tif bttributfs of tif <CODE>MLET</CODE> tbg
     * bnd tifir vblufs.
     */
    privbtf Mbp<String,String> bttributfs;

    /**
     * An ordfrfd list of tif TYPE bttributfs tibt bppfbrfd in nfstfd
     * &lt;PARAM&gt; tbgs.
     */
    privbtf List<String> typfs;

    /**
     * An ordfrfd list of tif VALUE bttributfs tibt bppfbrfd in nfstfd
     * &lt;PARAM&gt; tbgs.
     */
    privbtf List<String> vblufs;

    /**
     * Tif MLft tfxt filf's bbsf URL.
     */
    privbtf URL dodumfntURL;
    /**
     * Tif bbsf URL.
     */
    privbtf URL bbsfURL;


    /**
     * Crfbtfs bn <CODE>MLft</CODE> instbndf initiblizfd witi bttributfs rfbd
     * from bn <CODE>MLET</CODE> tbg in bn MLft tfxt filf.
     *
     * @pbrbm url Tif URL of tif MLft tfxt filf dontbining tif
     * <CODE>MLET</CODE> tbg.
     * @pbrbm bttributfs A mbp of tif bttributfs of tif <CODE>MLET</CODE> tbg.
     * Tif kfys in tiis mbp brf tif bttributf nbmfs in lowfrdbsf, for
     * fxbmplf <dodf>dodfbbsf</dodf>.  Tif vblufs brf tif bssodibtfd bttributf
     * vblufs.
     * @pbrbm typfs A list of tif TYPE bttributfs tibt bppfbrfd in nfstfd
     * &lt;PARAM&gt; tbgs.
     * @pbrbm vblufs A list of tif VALUE bttributfs tibt bppfbrfd in nfstfd
     * &lt;PARAM&gt; tbgs.
     */
    publid MLftContfnt(URL url, Mbp<String,String> bttributfs,
                       List<String> typfs, List<String> vblufs) {
        tiis.dodumfntURL = url;
        tiis.bttributfs = Collfdtions.unmodifibblfMbp(bttributfs);
        tiis.typfs = Collfdtions.unmodifibblfList(typfs);
        tiis.vblufs = Collfdtions.unmodifibblfList(vblufs);

        // Initiblizf bbsfURL
        //
        String btt = gftPbrbmftfr("dodfbbsf");
        if (btt != null) {
            if (!btt.fndsWiti("/")) {
                btt += "/";
            }
            try {
                bbsfURL = nfw URL(dodumfntURL, btt);
            } dbtdi (MblformfdURLExdfption f) {
                // OK : Movf to nfxt blodk bs bbsfURL dould not bf initiblizfd.
            }
        }
        if (bbsfURL == null) {
            String filf = dodumfntURL.gftFilf();
            int i = filf.lbstIndfxOf('/');
            if (i >= 0 && i < filf.lfngti() - 1) {
                try {
                    bbsfURL = nfw URL(dodumfntURL, filf.substring(0, i + 1));
                } dbtdi (MblformfdURLExdfption f) {
                    // OK : Movf to nfxt blodk bs bbsfURL dould not bf initiblizfd.
                }
            }
        }
        if (bbsfURL == null)
            bbsfURL = dodumfntURL;

    }

    // GETTERS AND SETTERS
    //--------------------

    /**
     * Gfts tif bttributfs of tif <CODE>MLET</CODE> tbg.  Tif kfys in
     * tif rfturnfd mbp brf tif bttributf nbmfs in lowfrdbsf, for
     * fxbmplf <dodf>dodfbbsf</dodf>.  Tif vblufs brf tif bssodibtfd
     * bttributf vblufs.
     * @rfturn A mbp of tif bttributfs of tif <CODE>MLET</CODE> tbg
     * bnd tifir vblufs.
     */
    publid Mbp<String,String> gftAttributfs() {
        rfturn bttributfs;
    }

    /**
     * Gfts tif MLft tfxt filf's bbsf URL.
     * @rfturn Tif MLft tfxt filf's bbsf URL.
     */
    publid URL gftDodumfntBbsf() {
        rfturn dodumfntURL;
    }

    /**
     * Gfts tif dodf bbsf URL.
     * @rfturn Tif dodf bbsf URL.
     */
    publid URL gftCodfBbsf() {
        rfturn bbsfURL;
    }

    /**
     * Gfts tif list of <CODE>.jbr</CODE> filfs spfdififd by tif <CODE>ARCHIVE</CODE>
     * bttributf of tif <CODE>MLET</CODE> tbg.
     * @rfturn A dommb-sfpbrbtfd list of <CODE>.jbr</CODE> filf nbmfs.
     */
    publid String gftJbrFilfs() {
        rfturn gftPbrbmftfr("brdiivf");
    }

    /**
     * Gfts tif vbluf of tif <CODE>CODE</CODE>
     * bttributf of tif <CODE>MLET</CODE> tbg.
     * @rfturn Tif vbluf of tif <CODE>CODE</CODE>
     * bttributf of tif <CODE>MLET</CODE> tbg.
     */
    publid String gftCodf() {
        rfturn gftPbrbmftfr("dodf");
    }

    /**
     * Gfts tif vbluf of tif <CODE>OBJECT</CODE>
     * bttributf of tif <CODE>MLET</CODE> tbg.
     * @rfturn Tif vbluf of tif <CODE>OBJECT</CODE>
     * bttributf of tif <CODE>MLET</CODE> tbg.
     */
    publid String gftSfriblizfdObjfdt() {
        rfturn gftPbrbmftfr("objfdt");
    }

    /**
     * Gfts tif vbluf of tif <CODE>NAME</CODE>
     * bttributf of tif <CODE>MLET</CODE> tbg.
     * @rfturn Tif vbluf of tif <CODE>NAME</CODE>
     * bttributf of tif <CODE>MLET</CODE> tbg.
     */
    publid String gftNbmf() {
        rfturn gftPbrbmftfr("nbmf");
    }


    /**
     * Gfts tif vbluf of tif <CODE>VERSION</CODE>
     * bttributf of tif <CODE>MLET</CODE> tbg.
     * @rfturn Tif vbluf of tif <CODE>VERSION</CODE>
     * bttributf of tif <CODE>MLET</CODE> tbg.
     */
    publid String gftVfrsion() {
        rfturn gftPbrbmftfr("vfrsion");
    }

    /**
     * Gfts tif list of vblufs of tif <dodf>TYPE</dodf> bttributf in
     * fbdi nfstfd &lt;PARAM&gt; tbg witiin tif <dodf>MLET</dodf>
     * tbg.
     * @rfturn tif list of typfs.
     */
    publid List<String> gftPbrbmftfrTypfs() {
        rfturn typfs;
    }

    /**
     * Gfts tif list of vblufs of tif <dodf>VALUE</dodf> bttributf in
     * fbdi nfstfd &lt;PARAM&gt; tbg witiin tif <dodf>MLET</dodf>
     * tbg.
     * @rfturn tif list of vblufs.
     */
    publid List<String> gftPbrbmftfrVblufs() {
        rfturn vblufs;
    }

    /**
     * Gfts tif vbluf of tif spfdififd
     * bttributf of tif <CODE>MLET</CODE> tbg.
     *
     * @pbrbm nbmf A string rfprfsfnting tif nbmf of tif bttributf.
     * @rfturn Tif vbluf of tif spfdififd
     * bttributf of tif <CODE>MLET</CODE> tbg.
     */
    privbtf String gftPbrbmftfr(String nbmf) {
        rfturn bttributfs.gft(nbmf.toLowfrCbsf());
    }

}
