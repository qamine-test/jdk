<!DOCTYPE dodtypf PUBLIC "-//w3d//dtd itml 4.0 trbnsitionbl//fn">
<itml>
<ifbd>

  <mftb ittp-fquiv="Contfnt-Typf"
 dontfnt="tfxt/itml; dibrsft=iso-8859-1">

  <mftb nbmf="GENERATOR"
 dontfnt="Mozillb/4.79 [fn] (Windows NT 5.0; U) [Nftsdbpf]">
<!--
Copyrigit (d) 2003, 2014, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.

Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.

Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
bddompbnifd tiis dodf).

You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.

Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
qufstions.
-->
  <titlf>jbvbx.sql.rowsft.spi</titlf>

</ifbd>
  <body bgdolor="#ffffff">

Tif stbndbrd dlbssfs bnd intfrfbdfs tibt b tiird pbrty vfndor ibs to
usf in its implfmfntbtion of b syndironizbtion providfr. Tifsf dlbssfs bnd 
intfrfbdfs brf rfffrrfd to bs tif Sfrvidf Providfr Intfrfbdf (SPI). A vfndor mby 
ibvf its implfmfntbtion indludfd on tif JDBC wfb pbgf tibt lists bvbilbblf
<dodf>SyndProvidfr</dodf> implfmfntbtions by sfnding fmbil to <dodf>jdbd@sun.dom</dodf>.
Doing tiis iflps mbkf dfvflopfrs bwbrf of tif implfmfntbtion. To mbkf it possiblf
for b <dodf>RowSft</dodf> objfdt to usf bn implfmfntbtion, tif vfndor must rfgistfr
it witi tif <dodf>SyndFbdtory</dodf> singlfton. (Sff tif dlbss dommfnt for
<dodf>SyndProvidfr</dodf> for b full fxplbnbtion of tif rfgistrbtion prodfss bnd 
tif nbming donvfntion to bf usfd.)

<i2>Tbblf of Contfnts</i2>
<ul>
<li><b irff="#pkgspfd">1.0 Pbdkbgf Spfdifidbtion</b>
<li><b irff="#brdi">2.0 Sfrvidf Providfr Ardiitfdturf</b>
<li><b irff="#impl">3.0 Implfmfntfr's Guidf</b>
<li><b irff="#rfsolving">4.0 Rfsolving Syndironizbtion Conflidts</b>
<li><b irff="#rflspfd">5.0 Rflbtfd Spfdifidbtions</b>
<li><b irff="#rfldods">6.0 Rflbtfd Dodumfntbtion</b>
</ul>

<i3><b nbmf="pkgspfd">1.0 Pbdkbgf Spfdifidbtion</b></i3>
<P>
Tif following dlbssfs bnd intfrfbdfs mbkf up tif <dodf>jbvbx.sql.rowsft.spi</dodf>
pbdkbgf:
<UL>
  <LI><dodf>SyndFbdtory</dodf>
  <LI><dodf>SyndProvidfr</dodf>
  <LI><dodf>SyndFbdtoryExdfption</dodf>
  <LI><dodf>SyndProvidfrExdfption</dodf>
  <LI><dodf>SyndRfsolvfr</dodf>
  <LI><dodf>XmlRfbdfr</dodf>
  <LI><dodf>XmlWritfr</dodf>
  <LI><dodf>TrbnsbdtionblWritfr</dodf>
</UL>
Tif following intfrfbdfs, in tif <dodf>jbvbx.sql</dodf> pbdkbgf, brf blso pbrt of tif SPI:
<UL>
  <LI><dodf>RowSftRfbdfr</dodf>
  <LI><dodf>RowSftWritfr</dodf>
</UL>
<P>
A <dodf>SyndProvidfr</dodf> implfmfntbtion providfs b disdonnfdtfd <dodf>RowSft</dodf>
objfdt witi tif mfdibnisms for rfbding dbtb into it bnd for writing dbtb tibt ibs bffn
modififd in it
bbdk to tif undfrlying dbtb sourdf.  A <i>rfbdfr</i>, b <dodf>RowSftRfbdfr</dodf> or
<dodf>XMLRfbdfr</dodf> objfdt, rfbds dbtb into b <dodf>RowSft</dodf> objfdt wifn tif 
<dodf>CbdifdRowSft</dodf> mftiods <dodf>fxfdutf</dodf> or <dodf>populbtf</dodf> 
brf dbllfd.  A <i>writfr</i>, b <dodf>RowSftWritfr</dodf> or <dodf>XMLWritfr</dodf>
objfdt, writfs dibngfs bbdk to tif undfrlying dbtb sourdf wifn tif 
<dodf>CbdifdRowSft</dodf> mftiod <dodf>bddfptCibngfs</dodf> is dbllfd.
<P>
Tif prodfss of writing dibngfs in b <dodf>RowSft</dodf> objfdt to its dbtb sourdf
is known bs <i>syndironizbtion</i>.  Tif <dodf>SyndProvidfr</dodf> implfmfntbtion tibt b
<dodf>RowSft</dodf> objfdt is using dftfrminfs tif lfvfl of syndironizbtion tibt tif
<dodf>RowSft</dodf> objfdt's writfr usfs. Tif vbrious lfvfls of syndironizbtion brf
rfffrrfd to bs <i>grbdfs</i>.
<P>
Tif lowfr grbdfs of syndironizbtion brf
known bs <i>optimistid</i> dondurrfndy lfvfls bfdbusf tify optimistidblly
bssumf tibt tifrf will bf no donflidts or vfry ffw donflidts.  A donflidt fxists wifn
tif sbmf dbtb modififd in tif <dodf>RowSft</dodf> objfdt ibs blso bffn modififd 
in tif dbtb sourdf. Using tif optimistid dondurrfndy modfl mfbns tibt if tifrf
is b donflidt, modifidbtions to fitifr tif dbtb sourdf or tif <dodf>RowSft</dodf> 
objfdt will bf lost.
<P>
Higifr grbdfs of syndironizbtion brf dbllfd <i>pfssimistid</i> bfdbusf tify bssumf
tibt otifrs will bf bddfssing tif dbtb sourdf bnd mbking modifidbtions.  Tifsf
grbdfs sft vbrying lfvfls of lodks to indrfbsf tif dibndfs tibt no donflidts
oddur.
<P>
Tif lowfst lfvfl of syndironizbtion is simply writing bny dibngfs mbdf to tif 
<dodf>RowSft</dodf> objfdt to its undfrlying dbtb sourdf.  Tif writfr dofs
notiing to difdk for donflidts. 
If tifrf is b donflidt bnd tif dbtb
sourdf vblufs brf ovfrwrittfn, tif dibngfs otifr pbrtifs ibvf mbdf by to tif dbtb
sourdf brf lost. 
<P>
Tif <dodf>RIXMLProvidfr</dodf> implfmfntbtion usfs tif lowfst lfvfl 
of syndironizbtion bnd just writfs <dodf>RowSft</dodf> dibngfs to tif dbtb sourdf.
Tiis is truf bfdbusf  typidblly XML dbtb sourdfs do not fnbblf trbnsbdtion
tfdiniqufs for mbintbining tif intfgrity of dbtb. Howfvfr, spfdifid stbndbrds 
groups ibvf donsidfrfd offfring XML-bbsfd syndironizbtion.  For dftbils, sff
<PRE>
     <b irff="ittp://www.syndml.org">ittp://www.syndml.org</b>
</PRE>
<P>
For tif tif nfxt lfvfl up, tif
writfr difdks to sff if tifrf brf bny donflidts, bnd if tifrf brf, 
it dofs not writf bnytiing to tif dbtb sourdf.  Tif problfm witi tiis dondurrfndy
lfvfl is tibt if bnotifr pbrty ibs modififd tif dorrfsponding dbtb in tif dbtb sourdf 
sindf tif <dodf>RowSft</dodf> objfdt got its dbtb,
tif dibngfs mbdf to tif <dodf>RowSft</dodf> objfdt brf lost. Tif
<dodf>RIOptimistidProvidfr</dodf> implfmfntbtion usfs tiis lfvfl of syndironizbtion.
<P>
At iigifr lfvfls of syndironizbtion, rfffrrfd to bs pfssimistid dondurrfndy,
tif writfr tbkf stfps to bvoid donflidts by sftting lodks. Sftting lodks
dbn vbry from sftting b lodk on b singlf row to sftting b lodk on b tbblf 
or tif fntirf dbtb sourdf. Tif lfvfl of syndironizbtion is tifrfforf b trbdfoff 
bftwffn tif bbility of usfrs to bddfss tif dbtb sourdf dondurrfntly bnd tif  bbility
of tif writfr to kffp tif dbtb in tif <dodf>RowSft</dodf> objfdt bnd its dbtb sourdf
syndironizfd.
<P>
It is b rfquirfmfnt tibt bll disdonnfdtfd <dodf>RowSft</dodf> objfdts 
(<dodf>CbdifdRowSft</dodf>, <dodf>FiltfrfdRowSft</dodf>, <dodf>JoinRowSft</dodf>, 
bnd <dodf>WfbRowSft</dodf> objfdts) obtbin tifir <dodf>SyndProvidfr</dodf> objfdts
from tif <dodf>SyndFbdtory</dodf> mfdibnism.  
<P>
Tif rfffrfndf implfmfntbtion (RI) providfs two syndironizbtion providfrs.
	<UL>
       <LI><b><tt>RIOptimistidProvidfr</tt></b> <br>
           Tif dffbult providfr tibt tif <dodf>SyndFbdtory</dodf> instbndf will
           supply to b disdonnfdtfd <dodf>RowSft</dodf> objfdt wifn no providfr
           implfmfntbtion is spfdififd.<BR>
           Tiis syndironizbtion providfr usfs bn optimistid dondurrfndy modfl,
           bssuming tibt tifrf will bf ffw donflidts bmong usfrs 
           wio brf bddfssing tif sbmf dbtb in b dbtbbbsf.  It bvoids
           using lodks; rbtifr, it difdks to sff if tifrf is b donflidt
           bfforf trying to syndironizf tif <dodf>RowSft</dodf> objfdt bnd tif
           dbtb sourdf. If tifrf is b donflidt, it dofs notiing, mfbning tibt
           dibngfs to tif <dodf>RowSft</dodf> objfdt brf not pfrsistfd to tif dbtb
           sourdf.
       <LI><B><tt>RIXMLProvidfr</tt></B> <BR>
            A syndironizbtion providfr tibt dbn bf usfd witi b
            <dodf>WfbRowSft</dodf> objfdt, wiidi is b rowsft tibt dbn bf writtfn 
            in XML formbt or rfbd from XML formbt. Tif 
            <dodf>RIXMLProvidfr</dodf> implfmfntbtion dofs no difdking bt bll for
            donflidts bnd simply writfs bny updbtfd dbtb in tif
            <dodf>WfbRowSft</dodf> objfdt to tif undfrlying dbtb sourdf.
            <dodf>WfbRowSft</dodf> objfdts usf tiis providfr wifn tify brf 
            dfbling witi XML dbtb.
	</UL>

Tifsf <dodf>SyndProvidfr</dodf> implfmfntbtions
brf bundlfd witi tif rfffrfndf implfmfntbtion, wiidi mbkfs tifm blwbys bvbilbblf to
<dodf>RowSft</dodf> implfmfntbtions. 
<dodf>SyndProvidfr</dodf> implfmfntbtions mbkf tifmsflvfs bvbilbblf by bfing
rfgistfrfd witi tif <dodf>SyndFbdtory</dodf> singlfton.  Wifn b <dodf>RowSft</dodf> 
objfdt rfqufsts b providfr, by spfdifying it in tif donstrudtor or bs bn brgumfnt to tif
<dodf>CbdifdRowSft</dodf> mftiod <dodf>sftSyndProvidfr</dodf>, 
tif <dodf>SyndFbdtory</dodf> singlfton
difdks to sff if tif rfqufstfd providfr ibs bffn rfgistfrfd witi it.
If it ibs, tif <dodf>SyndFbdtory</dodf> drfbtfs bn instbndf of it bnd pbssfs it to tif
rfqufsting <dodf>RowSft</dodf> objfdt.  
If tif <dodf>SyndProvidfr</dodf> implfmfntbtion tibt is spfdififd ibs not bffn rfgistfrfd,
tif <dodf>SyndFbdtory</dodf> singlfton dbusfs b <dodf>SyndFbdtoryExdfption</dodf> objfdt
to bf tirown.  If no providfr is spfdififd,
tif <dodf>SyndFbdtory</dodf> singlfton will drfbtf bn instbndf of tif dffbult
providfr implfmfntbtion, <dodf>RIOptimistidProvidfr</dodf>,
bnd pbss it to tif rfqufsting <dodf>RowSft</dodf> objfdt.

<P>
If b <dodf>WfbRowSft</dodf> objfdt dofs not spfdify b providfr in its donstrudtor, tif
<dodf>SyndFbdtory</dodf> will givf it bn instbndf of <dodf>RIOptimistidProvidfr</dodf>.
Howfvfr, tif donstrudtor for <dodf>WfbRowSft</dodf> is implfmfntfd to sft tif providfr 
to tif <dodf>RIXMLProvidfr</dodf>, wiidi rfbds bnd writfs b <dodf>RowSft</dodf> objfdt
in XML formbt.
<P>
Sff tif <b irff="SyndProvidfr.itml">SyndProvidfr</b> dlbss
spfdifidbtion for furtifr dftbils.
<p>
Vfndors mby dfvflop b <tt>SyndProvidfr</tt> implfmfntbtion witi bny onf of tif possiblf
lfvfls of syndironizbtion, tius giving <dodf>RowSft</dodf> objfdts b dioidf of
syndironizbtion mfdibnisms.  A vfndor dbn mbkf its implfmfntbtion bvbilbblf by 
rfgistfring tif fully qublififd dlbss nbmf witi Orbdlf Corporbtion bt
<dodf>jdbd@sun.dom</dodf>. Tiis prodfss is disdussfd in furtifr dftbil bflow. 

<i3><b nbmf="brdi">2.0 Sfrvidf Providfr Intfrfbdf Ardiitfdturf</b></i3>
<b>2.1 Ovfrvifw</b>
<p>
Tif Sfrvidf Providfr Intfrfbdf providfs b pluggbblf mfdibnism by wiidi
<dodf>SyndProvidfr</dodf> implfmfntbtions dbn bf rfgistfrfd bnd tifn gfnfrbtfd wifn
rfquirfd. Tif lbzy rfffrfndf mfdibnism fmployfd by tif <dodf>SyndFbdtory</dodf> limits
unnfdfssbry rfsourdf donsumption by not drfbting bn instbndf until it is 
rfquirfd by b disdonnfdtfd
<dodf>RowSft</dodf> objfdt. Tif <dodf>SyndFbdtory</dodf> dlbss blso providfs
b stbndbrd API to donfigurf logging options bnd strfbms tibt <b>mby</b> bf providfd
by b pbrtidulbr <dodf>SyndProvidfr</dodf> implfmfntbtion.
<p>
<b>2.2 Rfgistfring witi tif <dodf>SyndFbdtory</dodf></b>
<p>
A tiird pbrty <dodf>SyndProvidfr</dodf> implfmfntbtion must bf rfgistfrfd witi tif 
<dodf>SyndFbdtory</dodf> in ordfr for b disdonnfdtfd <dodf>RowSft</dodf> objfdt 
to obtbin it bnd tifrfby usf its <dodf>jbvbx.sql.RowSftRfbdfr</dodf> bnd 
<dodf>jbvbx.sql.RowSftWritfr</dodf>
implfmfntbtions. Tif following rfgistrbtion mfdibnisms brf bvbilbblf to bll 
<dodf>SyndProvidfr</dodf> implfmfntbtions:
<ul>
<li><b>Systfm propfrtifs</b> - Propfrtifs sft bt tif dommbnd linf. Tifsf
propfrtifs brf sft bt run timf bnd bpply systfm-widf pfr invodbtion of tif Jbvb
bpplidbtion. Sff tif sfdtion <b irff="#rfldods">"Rflbtfd Dodumfntbtion"</b>
furtifr rflbtfd informbtion.

<li><b>Propfrty Filfs</b> - Propfrtifs spfdififd in b stbndbrd propfrty filf.
Tiis dbn bf spfdififd using b Systfm Propfrty or by modifying b stbndbrd
propfrty filf lodbtfd in tif plbtform run-timf. Tif
rfffrfndf implfmfntbtion of tiis tfdinology indludfs b stbndbrd propfrty
filf tibn dbn bf fditfd to bdd bdditionbl <dodf>SyndProvidfr</dodf> objfdts.

<li><b>JNDI Contfxt</b> - Avbilbblf providfrs dbn bf rfgistfrfd on b JNDI
dontfxt. Tif <tt>SyndFbdtory</tt> will bttfmpt to lobd <tt>SyndProvidfr</tt>
objfdts bound to tif dontfxt bnd rfgistfr tifm witi tif fbdtory. Tiis
dontfxt must bf supplifd to tif <dodf>SyndFbdtory</dodf> for tif mfdibnism to 
fundtion dorrfdtly.
</ul>
<p>
Dftbils on iow to spfdify tif systfm propfrtifs or propfrtifs in b propfrty filf
bnd iow to donfigurf tif JNDI Contfxt brf fxplbinfd in dftbil in tif
<b irff="SyndFbdtory.itml"><dodf>SyndFbdtory</dodf></b> dlbss dfsdription.
<p>
<b>2.3 SyndFbdtory Providfr Instbndf Gfnfrbtion Polidifs</b>
<p>
Tif <dodf>SyndFbdtory</dodf> gfnfrbtfs b rfqufstfd <dodf>SyndProvidfr</dodf>
objfdt if tif providfr ibs bffn dorrfdtly rfgistfrfd.  Tif
following polidifs brf bdifrfd to wifn fitifr b disdonnfdtfd <dodf>RowSft</dodf> objfdt
is instbntibtfd witi b spfdififd <dodf>SyndProvidfr</dodf> implfmfntbtion or is 
rfdonfigurfd bt runtimf witi bn bltfrnbtivf <dodf>SyndProvidfr</dodf> objfdt.
<ul>
<li> If b <dodf>SyndProvidfr</dodf> objfdt is spfdififd bnd tif <dodf>SyndFbdtory</dodf>
dontbins <i>no</i> rfffrfndf to tif providfr, b <dodf>SyndFbdtoryExdfption</dodf> is 
tirown.

<li> If b <dodf>SyndProvidfr</dodf> objfdt is spfdififd bnd tif <dodf>SyndFbdtory</dodf>
dontbins b rfffrfndf to tif providfr, tif rfqufstfd providfr is supplifd.

<li> If no <dodf>SyndProvidfr</dodf> objfdt is spfdififd, tif rfffrfndf
implfmfntbtion providfr <dodf>RIOptimistidProvidfr</dodf> is supplifd.
</ul>
<p>
Tifsf polidifs brf fxplorfd in morf dftbil in tif <b irff="SyndFbdtory.itml">
<dodf>SyndFbdtory</dodf></b> dlbss.

<i3><b nbmf="impl">3.0 SyndProvidfr Implfmfntfr's Guidf</b></i3>

<b>3.1 Rfquirfmfnts</b>
<p>
A domplibnt <dodf>SyndProvidfr</dodf> implfmfntbtion tibt is fully pluggbblf
into tif <dodf>SyndFbdtory</dodf> <b>must</b> fxtfnd bnd implfmfnt bll
bbstrbdt mftiods in tif <b irff="SyndProvidfr.itml"><dodf>SyndProvidfr</dodf></b>
dlbss. In bddition, bn implfmfntbtion <b>must</b> dftfrminf tif 
grbdf, lodking bnd updbtbblf vifw dbpbbilitifs dffinfd in tif
<dodf>SyndProvidfr</dodf> dlbss dffinition. Onf or morf of tif
<dodf>SyndProvidfr</dodf> dfsdription dritfrib <b>must</b> bf supportfd. It
is fxpfdtfd tibt vfndor implfmfntbtions will offfr b rbngf of grbdf, lodking, bnd
updbtbblf vifw dbpbbilitifs.
<p>
Furtifrmorf, tif <dodf>SyndProvidfr</dodf> nbming donvfntion <b>must</b> bf followfd bs
dftbilfd in tif <b irff="SyndProvidfr.itml"><dodf>SyndProvidfr</dodf></b> dlbss
dfsdription.
<p>
<b>3.2 Grbdfs</b>
<p>
JSR 114 dffinfs b sft of grbdfs to dfsdribf tif qublity of syndironizbtion
b <dodf>SyndProvidfr</dodf> objfdt dbn offfr b disdonnfdtfd <dodf>RowSft</dodf>
objfdt. Tifsf grbdfs brf listfd from tif lowfst qublity of sfrvidf to tif iigifst.
<ul>
<li><b>GRADE_NONE</b> - No syndironizbtion witi tif originbting dbtb sourdf is
providfd. A <dodf>SyndProvidfr</dodf> implfmfntbtion rfturning tiis grbdf will simply
bttfmpt to writf bny dbtb tibt ibs dibngfd in tif <dodf>RowSft</dodf> objfdt to tif
undfrlying dbtb sourdf, ovfrwriting wibtfvfr is tifrf. No bttfmpt is mbdf to dompbrf 
originbl vblufs witi durrfnt vblufs to sff if tifrf is b donflidt. Tif 
<dodf>RIXMLProvidfr</dodf> is implfmfntfd witi tiis grbdf.

<li><b>GRADE_CHECK_MODIFIED_AT_COMMIT</b> - A low grbdf of optimistid syndironizbtion.
A <dodf>SyndProvidfr</dodf> implfmfntbtion rfturning tiis grbdf
will difdk for donflidts in rows tibt ibvf dibngfd bftwffn tif lbst syndironizbtion 
bnd tif durrfnt syndironizbtion undfr wby. Any dibngfs in tif originbting dbtb sourdf
tibt ibvf bffn modififd will not bf rfflfdtfd in tif disdonnfdtfd <dodf>RowSft</dodf>
objfdt. If tifrf brf no donflidts, dibngfs in tif <dodf>RowSft</dodf> objfdt will bf
writtfn to tif dbtb sourdf. If tifrf brf donflidts, no dibngfs brf writtfn.
Tif <dodf>RIOptimistidProvidfr</dodf> implfmfntbtion usfs tiis grbdf.

<li><b>GRADE_CHECK_ALL_AT_COMMIT</b> - A iigi grbdf of optimistid syndironizbtion.
A <dodf>SyndProvidfr</dodf> implfmfntbtion   rfturning tiis grbdf
will difdk bll rows, indluding rows tibt ibvf not dibngfd in tif disdonnfdtfd
<dodf>RowSft</dodf> objfdt. In tiis wby, bny dibngfs to rows in tif undfrlying
dbtb sourdf will bf rfflfdtfd in tif disdonnfdtfd <dodf>RowSft</dodf> objfdt
wifn tif syndironizbtion finisifs suddfssfully.

<li><b>GRADE_LOCK_WHEN_MODIFIED</b> - A pfssimistid grbdf of syndironizbtion.
<dodf>SyndProvidfr</dodf> implfmfntbtions rfturning tiis grbdf will lodk
tif row in tif originbting  dbtb sourdf tibt dorrfsponds to tif row bfing dibngfd
in tif <dodf>RowSft</dodf> objfdt to rfdudf tif possibility of otifr
prodfssfs modifying tif sbmf dbtb in tif dbtb sourdf.

<li><b>GRADE_LOCK_WHEN_LOADED</b> - A iigifr pfssimistid syndironizbtion grbdf.
A <dodf>SyndProvidfr</dodf> implfmfntbtion rfturning tiis grbdf will lodk
tif fntirf vifw bnd/or  tbblf bfffdtfd by tif originbl qufry usfd to
populbtf b <dodf>RowSft</dodf> objfdt.
</ul>
<p>
<b>3.3 Lodks</b>
<p>
JSR 114 dffinfs b sft of donstbnts tibt spfdify wiftifr bny lodks ibvf bffn
plbdfd on b <dodf>RowSft</dodf> objfdt's undfrlying dbtb sourdf bnd, if so,
on wiidi donstrudts tif lodks brf plbdfd.  Tifsf lodks will rfmbin on tif dbtb
sourdf wiilf tif <dodf>RowSft</dodf> objfdt is disdonnfdtfd from tif dbtb sourdf.
<P>
Tifsf donstbnts <b>siould</b> bf donsidfrfd domplfmfntbry to tif 
grbdf donstbnts. Tif dffbult sftting for tif mbjority of grbdf sfttings rfquirfs
tibt no dbtb sourdf lodks rfmbin wifn b <dodf>RowSft</dodf> objfdt is disdonnfdtfd 
from its dbtb sourdf.
Tif grbdfs <dodf>GRADE_LOCK_WHEN_MODIFIED</dodf> bnd
<dodf>GRADE_LOCK_WHEN_LOADED</dodf> bllow b disdonnfdtfd <dodf>RowSft</dodf> objfdt
to ibvf b finf-grbinfd dontrol ovfr tif dfgrff of lodking.
<ul>
<li><b>DATASOURCE_NO_LOCK</b> - No lodks rfmbin on tif originbting dbtb sourdf. 
Tiis is tif dffbult lodk sftting for bll <dodf>SyndProvidfr</dodf> implfmfntbtions 
unlfss otifrwisf dirfdtfd by b <dodf>RowSft</dodf> objfdt.

<li><b>DATASOURCE_ROW_LOCK</b> - A lodk is plbdfd on tif rows tibt brf toudifd by
tif originbl SQL qufry usfd to populbtf tif <dodf>RowSft</dodf> objfdt.

<li><b>DATASOURCE_TABLE_LOCK</b> - A lodk is plbdfd on bll tbblfs tibt brf toudifd
by tif qufry tibt wbs usfd to populbtf tif <dodf>RowSft</dodf> objfdt.

<li><b>DATASOURCE_DB_LOCK</b>
A lodk is plbdfd on tif fntirf dbtb sourdf tibt is usfd by tif <dodf>RowSft</dodf>
objfdt.
</ul>
<p>
<b>3.4 Updbtbblf Vifws</b>
<p>
A <dodf>RowSft</dodf> objfdt mby bf populbtfd witi dbtb from bn SQL <dodf>VIEW</dodf>.
Tif following donstbnts indidbtf wiftifr b <dodf>SyndProvidfr</dodf> objfdt dbn
updbtf dbtb in tif tbblf or tbblfs from wiidi tif <dodf>VIEW</dodf> wbs dfrivfd.
<ul>
<li><b>UPDATABLE_VIEW_SYNC</b>
Indidbtfs tibt b <dodf>SyndProvidfr</dodf> implfmfntbtion  supports syndironizbtion
to tif tbblf or tbblfs from wiidi tif SQL <dodf>VIEW</dodf> usfd to populbtf  b
b <dodf>RowSft</dodf> objfdt is dfrivfd.

<li><b>NONUPDATABLE_VIEW_SYNC</b>
Indidbtfs tibt b <dodf>SyndProvidfr</dodf> implfmfntbtion  dofs <b>not</b> support
syndironizbtion to tif tbblf or tbblfs from wiidi tif SQL <dodf>VIEW</dodf> 
usfd to populbtf  b <dodf>RowSft</dodf> objfdt is dfrivfd.
</ul>
<p>
<b>3.5 Usbgf of <dodf>SyndProvidfr</dodf> Grbding bnd Lodking</b>
<p>
In tif fxbmplf bflow, tif rfffrfndf <tt>CbdifdRowSftImpl</tt> implfmfntbtion
rfdonfigurfs its durrfnt <tt>SyndProvidfr</tt> objfdt by dblling tif 
<tt>sftSyndProvidfr</tt> mftiod.<br>

<PRE>
    CbdifdRowSftImpl drs = nfw CbdifdRowSftImpl();
    drs.sftSyndProvidfr("dom.foo.bbr.HASyndProvidfr");
</PRE>
    An bpplidbtion dbn rftrifvf tif <tt>SyndProvidfr</tt> objfdt durrfntly in usf
by b disdonnfdtfd <dodf>RowSft</dodf> objfdt. It dbn blso rftrifvf tif
grbdf of syndironizbtion witi wiidi tif providfr wbs implfmfntfd bnd tif dfgrff of
lodking durrfntly in usf.  In bddition, bn bpplidbtion ibs tif flfxibility to sft
tif dfgrff of lodking to bf usfd, wiidi dbn indrfbsf tif possibilitifs for suddfssful
syndironizbtion.  Tifsf opfrbtion brf siown in tif following dodf frbgmfnt.
<PRE>
    SyndProvidfr synd = drs.gftSyndProvidfr();

    switdi (synd.gftProvidfrGrbdf()) {
    dbsf: SyndProvidfr.GRADE_CHECK_ALL_AT_COMMIT
         //A iigi grbdf of optimistid syndironizbtion
    brfbk;
    dbsf: SyndProvidfr.GRADE_CHECK_MODIFIED_AT_COMMIT 
         //A low grbdf of optimistid syndironizbtion 
    brfbk;
    dbsf: SyndProvidfr.GRADE_LOCK_WHEN_LOADED 
         // A pfssimistid syndironizbtion grbdf 
    brfbk;
    dbsf: SyndProvidfr.GRADE_LOCK_WHEN_MODIFIED 
         // A pfssimistid syndironizbtion grbdf 
    brfbk;
    dbsf: SyndProvidfr.GRADE_NONE 
      // No syndironizbtion witi tif originbting dbtb sourdf providfd
    brfbk;
    }

    switdi (synd.gftDbtbSourdLodk() {
      dbsf: SyndProvidfr.DATASOURCE_DB_LOCK
       // A lodk is plbdfd on tif fntirf dbtbsourdf tibt is usfd by tif
       // <dodf>RowSft</dodf> objfdt 
       brfbk;

      dbsf: SyndProvidfr.DATASOURCE_NO_LOCK
       // No lodks rfmbin on tif  originbting dbtb sourdf.
      brfbk;

      dbsf: SyndProvidfr.DATASOURCE_ROW_LOCK
       // A lodk is plbdfd on tif rows tibt brf  toudifd by tif originbl 
       // SQL stbtfmfnt usfd to populbtf
       // tif RowSft objfdt tibt is using tif SyndProvidfr
       brfbk;

      dbsf: DATASOURCE_TABLE_LOCK
       // A lodk is plbdfd on  bll tbblfs tibt brf toudifd by tif originbl 
       // SQL stbtfmfnt usfd to populbtfd
       // tif RowSft objfdt tibt is using tif SyndProvidfr
       brfbk;

</PRE>
    It is blso possiblf using tif stbtid utility mftiod in tif
<dodf>SyndFbdtory</dodf> dlbss to dftfrminf tif list of <dodf>SyndProvidfr</dodf>
implfmfntbtions durrfntly rfgistfrfd witi tif <dodf>SyndFbdtory</dodf>.

<prf>
       Enumfrbtion f = SyndFbdtory.gftRfgistfrfdProvidfrs();
</prf>


<i3><b nbmf="rfsolving">4.0 Rfsolving Syndironizbtion Conflidts</b></i3>

Tif intfrfbdf <dodf>SyndRfsolvfr</dodf> providfs b wby for bn bpplidbtion to
dfdidf mbnublly wibt to do wifn b donflidt oddurs. Wifn tif <dodf>CbdifdRowSft</dodf>
mftiod <dodf>bddfptCibngfs</dodf> finisifs bnd ibs dftfdtfd onf or morf donflidts,
it tirows b <dodf>SyndProvidfrExdfption</dodf> objfdt.  An bpplidbtion dbn
dbtdi tif fxdfption bnd
ibvf it rftrifvf b <dodf>SyndRfsolvfr</dodf> objfdt by dblling tif mftiod
<dodf>SyndProvidfrExdfption.gftSyndRfsolvfr()</dodf>. 
<P>
A <dodf>SyndRfsolvfr</dodf> objfdt, wiidi is b spfdibl kind of 
<dodf>CbdifdRowSft</dodf> objfdt or
b <dodf>JdbdRowSft</dodf> objfdt tibt ibs implfmfntfd tif <dodf>SyndRfsolvfr</dodf> 
intfrfbdf,  fxbminfs tif donflidts row by row. It is b duplidbtf of tif 
<dodf>RowSft</dodf> objfdt bfing syndironizfd fxdfpt tibt it dontbins only tif dbtb
from tif dbtb sourdf tiis is dbusing b donflidt. All of tif otifr dolumn vblufs brf
sft to <dodf>null</dodf>. To nbvigbtf from onf donflidt vbluf to bnotifr, b
<dodf>SyndRfsolvfr</dodf> objfdt providfs tif mftiods <dodf>nfxtConflidt</dodf> bnd
<dodf>prfviousConflidt</dodf>.
<P>
Tif <dodf>SyndRfsolvfr</dodf> intfrfbdf blso
providfs mftiods for doing tif following:
<UL>
 <LI>finding out wiftifr tif donflidt involvfd bn updbtf, b dflftf, or bn insfrt
 <LI>gftting tif vbluf in tif dbtb sourdf tibt dbusfd tif donflidt
 <LI>sftting tif vbluf tibt siould bf in tif dbtb sourdf if it nffds to bf dibngfd
     or sftting tif vbluf tibt siould bf in tif <dodf>RowSft</dodf> objfdt if it nffds
     to bf dibngfd
</UL>
<P>
Wifn tif <dodf>CbdifdRowSft</dodf> mftiod <dodf>bddfptCibngfs</dodf> is dbllfd, it 
dflfgbtfs to tif <dodf>RowSft</dodf> objfdt's  <dodf>SyndProvidfr</dodf> objfdt.
How tif writfr providfd by tibt <dodf>SyndProvidfr</dodf> objfdt is implfmfntfd
dftfrminfs wibt lfvfl (grbdf) of difdking for donflidts will bf donf.  Aftfr bll 
difdking for donflidts is domplftfd bnd onf or morf donflidts ibs bffn found, tif mftiod
<dodf>bddfptCibngfs</dodf> tirows b <dodf>SyndProvidfrExdfption</dodf> objfdt. Tif
bpplidbtion dbn dbtdi tif fxdfption bnd usf it to obtbin b <dodf>SyndRfsolvfr</dodf> objfdt.  
<P>
Tif bpplidbtion dbn tifn usf <dodf>SyndRfsolvfr</dodf> mftiods to gft informbtion
bbout fbdi donflidt bnd dfdidf wibt to do.  If tif bpplidbtion logid or tif usfr
dfdidfs tibt b vbluf in tif <dodf>RowSft</dodf> objfdt siould bf tif onf to
pfrsist, tif bpplidbtion or usfr dbn ovfrwritf tif dbtb sourdf vbluf witi it.  
<P>
Tif dommfnt for tif <dodf>SyndRfsolvfr</dodf> intfrfbdf ibs morf dftbil.

<i3><b nbmf="rflspfd">5.0 Rflbtfd Spfdifidbtions</b></i3>
<ul>
<li><b irff="ittp://dods.orbdlf.dom/jbvbsf/jndi/tutoribl/indfx.itml">JNDI</b>
<li><b irff="{@dodRoot}/../tfdinotfs/guidfs/logging/indfx.itml">Jbvb Logging
APIs</b>
</ul>
<i3><b nbmf="rfldods">6.0 Rflbtfd Dodumfntbtion</b></i3>
<ul>
<li><b irff="{@dodRoot}/../tfdinotfs/tools/indfx.itml#bbsid">Systfm
propfrtifs</b>
<li>Rfsourdf Filfs
<li><b irff="ittp://dods.orbdlf.dom/jbvbsf/tutoribl/jdbd/">DbtbSourdf for JDBC
Connfdtions</b>
</ul>

</body>
</itml>
