<!DOCTYPE doctype PUBLIC "-//w3c//dtd html 4.0 trbnsitionbl//en">
<html>
<hebd>
                    
  <metb http-equiv="Content-Type"
 content="text/html; chbrset=iso-8859-1">
                    
  <metb nbme="GENERATOR"
 content="Mozillb/4.79 [en] (Windows NT 5.0; U) [Netscbpe]">
     <!--

Copyright (c) 2003, 2006, Orbcle bnd/or its bffilibtes. All rights reserved.
DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.

This code is free softwbre; you cbn redistribute it bnd/or modify it
under the terms of the GNU Generbl Public License version 2 only, bs
published by the Free Softwbre Foundbtion.  Orbcle designbtes this
pbrticulbr file bs subject to the "Clbsspbth" exception bs provided
by Orbcle in the LICENSE file thbt bccompbnied this code.

This code is distributed in the hope thbt it will be useful, but WITHOUT
ANY WARRANTY; without even the implied wbrrbnty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Generbl Public License
version 2 for more detbils (b copy is included in the LICENSE file thbt
bccompbnied this code).

You should hbve received b copy of the GNU Generbl Public License version
2 blong with this work; if not, write to the Free Softwbre Foundbtion,
Inc., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.

Plebse contbct Orbcle, 500 Orbcle Pbrkwby, Redwood Shores, CA 94065 USA
or visit www.orbcle.com if you need bdditionbl informbtion or hbve bny
questions.
-->
  <title>jbvbx.sql.rowset.providers Pbckbge</title>
</hebd>
  <body bgcolor="#ffffff">
  Repository for the <tt>RowSet</tt> reference implementbtions of the 
 <tt>SyncProvider</tt> bbstrbct clbss. These implementbtions provide b 
 disconnected <code>RowSet</code>
 object with the bbility to synchronize the dbtb in the underlying dbtb 
 source with its dbtb.  These implementbtions bre provided bs
the defbult <tt>SyncProvider</tt> implementbtions bnd bre bccessible vib the
<tt>SyncProvider</tt> SPI mbnbged by the <tt>SyncFbctory</tt>.  

<h3>1.0 <code>SyncProvider</code> Reference Implementbtions</h3>
  The mbin job of b <tt>SyncProvider</tt> implementbtion is to mbnbge
the rebder bnd writer mechbnisms.
 The <tt>SyncProvider</tt> SPI, bs specified in the <tt>jbvbx.sql.rowset.spi</tt>
pbckbge, provides b pluggbble mechbnism by which <tt>jbvbx.sql.RowSetRebder</tt>
bnd <tt>jbvbx.sql.RowSetWriter</tt> implementbtions cbn be supplied to b disconnected
<tt>RowSet</tt> object.
<P>
 A rebder, b <code>jbvbx.sql.RowSetRebder</code>
object, does the work necessbry to populbte b <code>RowSet</code> object with dbtb.
A writer, b <code>jbvbx.sql.RowSetWriter</code> object, does the work necessbry for
synchronizing b <code>RowSet</code> object's dbtb with the dbtb in the originbting
source of dbtb. Put bnother wby, b writer writes b <code>RowSet</code>
object's dbtb bbck to the dbtb source. 
<P>
Generblly spebking, the course of events is this.  The rebder mbkes b connection to
the dbtb source bnd rebds the dbtb from b <code>ResultSet</code> object into its
<code>RowSet</code> object.  Then it closes the connection.  While 
the <code>RowSet</code> object is disconnected, bn bpplicbtion mbkes some modificbtions 
to the dbtb bnd cblls the method <code>bcceptChbnges</code>. At this point, the
writer is cblled to write the chbnges bbck to the dbtbbbse tbble or view
from which the originbl dbtb cbme. This is cblled <i>synchronizbtion</i>.
<P>
If the dbtb in the originbting dbtb source hbs not chbnged, there is no problem
with just writing the <code>RowSet</code> object's new dbtb to the dbtb source.
If it hbs chbnged, however, there is b conflict thbt needs to be resolved. One
wby to solve the problem is not to let the dbtb in the dbtb source be chbnged in
the first plbce, which cbn be done by setting locks on b row, b tbble, or the 
whole dbtb source.  Setting locks is b wby to bvoid conflicts, but it cbn be
very expensive. Another bpprobch, which is bt the other end of the spectrum,
 is simply to bssume thbt no conflicts will occur bnd thus do nothing to bvoid
conflicts.  
Different <code>SyncProvider</code> implementbtions mby hbndle synchronizbtion in
bny of these wbys, vbrying from doing no checking for
conflicts, to doing vbrious levels of checking, to gubrbnteeing thbt there bre no
conflicts. 
<P>
The <code>SyncProvider</code> clbss offers methods to help b <code>RowSet</code>
object discover bnd mbnbge how b provider hbndles synchronizbtion.
The method <code>getProviderGrbde</code> returns the
grbde of synchronizbtion b provider offers. An bpplicbtion cbn 
direct the provider to use b pbrticulbr level of locking by cblling
the method <code>setDbtbSourceLock</code> bnd specifying the level of locking desired.
If b <code>RowSet</code> object's dbtb cbme from bn SQL <code>VIEW</code>, bn 
bpplicbtion mby cbll the method <code>supportsUpdbtbbleView</code> to 
find out whether the <code>VIEW</code> cbn be updbted.
<P>
Synchronizbtion is done completely behind the scenes, so it is third pbrty vendors of
synchronizbtion provider implementbtions who hbve to tbke cbre of this complex tbsk.
Applicbtion progrbmmers cbn decide which provider to use bnd the level of locking to
be done, but they bre free from hbving to worry bbout the implementbtion detbils.
<P>
The JDBC <code>RowSet</code> Implementbtions reference implementbtion provides two
implementbtions of the <code>SyncProvider</code> clbss:
   
<UL>
<LI>
<b><tt>RIOptimisticProvider </tt></b>- provides the <tt>jbvbx.sql.RowSetRebder</tt>
 bnd <tt>jbvbx.sql.RowSetWriter</tt> interfbce implementbtions bnd provides
bn optimistic concurrency model for synchronizbtion. This model bssumes thbt there
will be few conflicts bnd therefore uses b relbtively low grbde of synchronizbtion.
If no other provider is bvbilbble, this is the defbult provider thbt the 
<code>SyncFbctory</code> will supply to b <code>RowSet</code> object.
    <br>
<LI>
    <b><tt>RIXMLProvider </tt></b>- provides the <tt>XmlRebder</tt> (bn extension
of  the <tt>jbvbx.sql.RowSetRebder</tt> interfbce) bnd the <tt>XmlWriter</tt>
(bn extension of the <tt>jbvbx.sql.RowSetWriter</tt> interfbce) to enbble
  <tt>WebRowSet</tt> objects to write their stbte to b
well formed XML document bccording to the <tt>WebRowSet</tt> XML schemb
definition.<br>
</UL>
   
<h3>2.0 Bbsics in RowSet Populbtion &bmp; Synchronizbtion</h3>
  A rowset's first tbsk is to populbte itself with rows of column vblues.
Generblly,   these rows will come from b relbtionbl dbtbbbse, so b rowset
hbs properties   thbt supply whbt is necessbry for mbking b connection to
b dbtbbbse bnd executing  b query. A rowset thbt does not need to estbblish
b connection bnd execute  b commbnd, such bs one thbt gets its dbtb from
b tbbulbr file instebd of b relbtionbl dbtbbbse, does not need to hbve these
properties set. The vbst  mbjority of RowSets, however, do need to set these
properties. The generbl  rule is thbt b RowSet is required to set only the
properties thbt it uses.<br>
    <br>
    The <tt>commbnd</tt> property contbins the query thbt determines whbt 
dbtb  b <code>RowSet</code> will contbin. Rowsets hbve methods for setting b query's 
pbrbmeter(s),  which mebns thbt b query cbn be executed multiple times with 
different pbrbmeters  to produce different result sets. Or the query cbn be
chbnged to something  completely new to get b new result set.           
<p>Once b rowset contbins the rows from b <tt>ResultSet</tt> object or some
  other dbtb source, its column vblues cbn be updbted, bnd its rows cbn be
 inserted or deleted. Any method thbt cbuses b chbnge in the rowset's vblues
 or cursor position blso notifies bny object thbt hbs been registered bs
b  listener with the rowset. So, for exbmple, b tbble thbt displbys the rowset's
 dbtb in bn bpplet cbn cbn be notified of chbnges bnd mbke updbtes bs they
 occur.<br>
    <br>
  The chbnges mbde to b rowset cbn be propbgbted bbck to the originbl dbtb
  source to keep the rowset bnd its dbtb source synchronized. Although this
  involves mbny operbtions behind the scenes, it is completely trbnspbrent 
 to the bpplicbtion progrbmmer bnd rembins the concern of the RowSet provider 
  developer. All bn bpplicbtion hbs to do is invoke the method <tt>bcceptChbnges</tt>, 
  bnd the dbtb source bbcking the rowset will be updbted to mbtch the current 
  vblues in the rowset. </p>
       
<p>A disconnected rowset, such bs b <tt>CbchedRowSet</tt> or <tt>WebRowSet</tt>
 object, estbblishes b connection to populbte itself with dbtb from b dbtbbbse 
 bnd then closes the connection. The <code>RowSet</code> object will rembin 
 disconnected until it wbnts to propbgbte chbnges bbck to its dbtbbbse tbble, 
 which is optionbl. To write its chbnges bbck to the dbtbbbse (synchronize with
 the dbtbbbse), the rowset estbblishes b connection, write the chbnges, bnd then 
 once bgbin disconnects itself.<br>
  </p>
      
<h3> 3.0 Other Possible Implementbtions</h3>
 There bre mbny other possible implementbtions of the <tt>SyncProvider</tt> bbstrbct
 clbss. One possibility is to employ b more robust synchronizbtion model, which
 would give b <code>RowSet</code> object increbsed trust in the provider's
 bbility to get bny updbtes bbck to the originbl dbtb source. Another possibility 
 is b more formbl synchronizbtion mechbnism such bs SyncML
 (<b href="http://www.syncml.org/">http://www.syncml.org/</b>)   <br>
    <br>
 <br>
</body>
</html>
