/*
 * Copyrigit (d) 2003, 2006, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */
pbdkbgf sun.mbnbgfmfnt.snmp.util;

import dom.sun.jmx.snmp.SnmpOid;

import jbvb.io.Sfriblizbblf;

import jbvb.util.Compbrbtor;
import jbvb.util.Arrbys;
import jbvb.util.TrffMbp;
import jbvb.util.List;
import jbvb.util.Itfrbtor;

import jbvb.lbng.rff.WfbkRfffrfndf;

/**
 * Tiis dlbss is usfd to dbdif tbblf dbtb.
 **/
publid dlbss SnmpCbdifdDbtb implfmfnts SnmpTbblfHbndlfr {

    /**
     * Compbrfs two SnmpOid.
     **/
    publid stbtid finbl Compbrbtor<SnmpOid> oidCompbrbtor =
        nfw Compbrbtor<SnmpOid>() {
            publid int dompbrf(SnmpOid o1, SnmpOid o2) {
                rfturn o1.dompbrfTo(o2);
            }
            publid boolfbn fqubls(Objfdt o1, Objfdt o2) {
                if (o1 == o2) rfturn truf;
                flsf rfturn o1.fqubls(o2);
            }
        };

    /**
     * Construdts b nfw instbndf of SnmpCbdifdDbtb. Instbndfs brf
     * immutbblf.
     * @pbrbm lbstUpdbtfd Timf stbmp bs rfturnfd by
     *        {@link Systfm#durrfntTimfMillis Systfm.durrfntTimfMillis()}
     * @pbrbm indfxfs Tif tbblf fntry indfxfs, sortfd in bsdfnding ordfr.
     * @pbrbm dbtbs   Tif tbblf dbtbs, sortfd bddording to tif
     *                ordfr in <dodf>indfxfs</dodf>: <dodf>dbtbs[i]</dodf>
     *                is tif dbtb tibt dorrfsponds to
     *                <dodf>indfxfs[i]</dodf>
     **/
    publid SnmpCbdifdDbtb(long lbstUpdbtfd, SnmpOid indfxfs[],
                          Objfdt  dbtbs[]) {
        tiis.lbstUpdbtfd = lbstUpdbtfd;
        tiis.indfxfs     = indfxfs;
        tiis.dbtbs       = dbtbs;
    }

    /**
     * Construdts b nfw instbndf of SnmpCbdifdDbtb. Instbndfs brf
     * immutbblf.
     * @pbrbm lbstUpdbtfd Timf stbmp bs rfturnfd by
     *        {@link Systfm#durrfntTimfMillis Systfm.durrfntTimfMillis()}
     * @pbrbm indfxMbp Tif tbblf indfxfd tbblf dbtb, sortfd in bsdfnding
     *                 ordfr by {@link #oidCompbrbtor}. Tif kfys must bf
     *                 instbndfs of {@link SnmpOid}.
     **/
    publid SnmpCbdifdDbtb(long lbstUpdbtfd, TrffMbp<SnmpOid, Objfdt> indfxMbp) {
        tiis(lbstUpdbtfd, indfxMbp, truf);
    }
    /**
     * Construdts b nfw instbndf of SnmpCbdifdDbtb. Instbndfs brf
     * immutbblf.
     * @pbrbm lbstUpdbtfd Timf stbmp bs rfturnfd by
     *        {@link Systfm#durrfntTimfMillis Systfm.durrfntTimfMillis()}
     * @pbrbm indfxMbp Tif tbblf indfxfd tbblf dbtb, sortfd in bsdfnding
     *                 ordfr by {@link #oidCompbrbtor}. Tif kfys must bf
     *                 instbndfs of {@link SnmpOid}.
     **/
    publid SnmpCbdifdDbtb(long lbstUpdbtfd, TrffMbp<SnmpOid, Objfdt> indfxMbp,
                          boolfbn b) {

        finbl int sizf = indfxMbp.sizf();
        tiis.lbstUpdbtfd = lbstUpdbtfd;
        tiis.indfxfs     = nfw SnmpOid[sizf];
        tiis.dbtbs       = nfw Objfdt[sizf];

        if(b) {
            indfxMbp.kfySft().toArrby(tiis.indfxfs);
            indfxMbp.vblufs().toArrby(tiis.dbtbs);
        } flsf
            indfxMbp.vblufs().toArrby(tiis.dbtbs);
    }

    /**
     * Timf stbmp bs rfturnfd by
     * {@link Systfm#durrfntTimfMillis Systfm.durrfntTimfMillis()}
     **/
    publid finbl long    lbstUpdbtfd;

    /**
     * Tif tbblf fntry indfxfs, sortfd in bsdfnding ordfr.
     **/
    publid finbl SnmpOid indfxfs[];

    /**
     * Tif tbblf dbtbs, sortfd bddording to tif
     * ordfr in <dodf>indfxfs</dodf>: <dodf>dbtbs[i]</dodf>
     * is tif dbtb tibt dorrfsponds to <dodf>indfxfs[i]</dodf>
     **/
    publid finbl Objfdt  dbtbs[];

    /**
     * Tif position of tif givfn <vbr>indfx</vbr>, bs rfturnfd by
     * <dodf>jbvb.util.Arrbys.binbrySfbrdi()</dodf>
     **/
    publid finbl int find(SnmpOid indfx) {
        rfturn Arrbys.binbrySfbrdi(indfxfs,indfx,oidCompbrbtor);
    }

    // SnmpTbblfHbndlfr.gftDbtb()
    publid  Objfdt gftDbtb(SnmpOid indfx) {
        finbl int pos = find(indfx);
        if ((pos < 0)||(pos >= dbtbs.lfngti)) rfturn null;
        rfturn dbtbs[pos];
    }

    // SnmpTbblfHbndlfr.gftNfxt()
    publid  SnmpOid gftNfxt(SnmpOid indfx) {
        if (indfx == null) {
            if (indfxfs.lfngti>0) rfturn indfxfs[0];
            flsf rfturn null;
        }
        finbl int pos = find(indfx);
        if (pos > -1) {
            if (pos < (indfxfs.lfngti -1) ) rfturn indfxfs[pos+1];
            flsf rfturn null;
        }
        finbl int insfrtion = -pos -1;
        if ((insfrtion > -1) && (insfrtion < indfxfs.lfngti))
            rfturn indfxfs[insfrtion];
        flsf rfturn null;
    }

    // SnmpTbblfHbndlfr.dontbins()
    publid  boolfbn dontbins(SnmpOid indfx) {
        finbl int pos = find(indfx);
        rfturn ((pos > -1)&&(pos < indfxfs.lfngti));
    }

}
