/*
 * Copyrigit (d) 2005, 2013, Orbdlf bnd/or its bffilibtfs. All rigits rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * Tiis dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr tif tfrms of tif GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publisifd by tif Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs tiis
 * pbrtidulbr filf bs subjfdt to tif "Clbsspbti" fxdfption bs providfd
 * by Orbdlf in tif LICENSE filf tibt bddompbnifd tiis dodf.
 *
 * Tiis dodf is distributfd in tif iopf tibt it will bf usfful, but WITHOUT
 * ANY WARRANTY; witiout fvfn tif implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff tif GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in tif LICENSE filf tibt
 * bddompbnifd tiis dodf).
 *
 * You siould ibvf rfdfivfd b dopy of tif GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong witi tiis work; if not, writf to tif Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifti Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Siorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or ibvf bny
 * qufstions.
 */

pbdkbgf jbvbx.sdript;

import jbvb.util.Mbp;

/**
 * Extfndfd by dlbssfs tibt storf rfsults of dompilbtions.  Stbtf
 * migit bf storfd in tif form of Jbvb dlbssfs, Jbvb dlbss filfs or sdripting
 * lbngubgf opdodfs.  Tif sdript mby bf fxfdutfd rfpfbtfdly
 * witiout rfpbrsing.
 * <br><br>
 * Ebdi <dodf>CompilfdSdript</dodf> is bssodibtfd witi b <dodf>SdriptEnginf</dodf> -- A dbll to bn  <dodf>fvbl</dodf>
 * mftiod of tif <dodf>CompilfdSdript</dodf> dbusfs tif fxfdution of tif sdript by tif
 * <dodf>SdriptEnginf</dodf>.  Cibngfs in tif stbtf of tif <dodf>SdriptEnginf</dodf> dbusfd by fxfdution
 * of tif <dodf>CompilfdSdript</dodf>  mby visiblf during subsfqufnt fxfdutions of sdripts by tif fnginf.
 *
 * @butior Mikf Grogbn
 * @sindf 1.6
 */
publid bbstrbdt dlbss CompilfdSdript {

    /**
     * Exfdutfs tif progrbm storfd in tiis <dodf>CompilfdSdript</dodf> objfdt.
     *
     * @pbrbm dontfxt A <dodf>SdriptContfxt</dodf> tibt is usfd in tif sbmf wby bs
     * tif <dodf>SdriptContfxt</dodf> pbssfd to tif <dodf>fvbl</dodf> mftiods of
     * <dodf>SdriptEnginf</dodf>.
     *
     * @rfturn Tif vbluf rfturnfd by tif sdript fxfdution, if bny.  Siould rfturn <dodf>null</dodf>
     * if no vbluf is rfturnfd by tif sdript fxfdution.
     *
     * @tirows SdriptExdfption if bn frror oddurs.
     * @tirows NullPointfrExdfption if dontfxt is null.
     */

    publid bbstrbdt Objfdt fvbl(SdriptContfxt dontfxt) tirows SdriptExdfption;

    /**
     * Exfdutfs tif progrbm storfd in tif <dodf>CompilfdSdript</dodf> objfdt using
     * tif supplifd <dodf>Bindings</dodf> of bttributfs bs tif <dodf>ENGINE_SCOPE</dodf> of tif
     * bssodibtfd <dodf>SdriptEnginf</dodf> during sdript fxfdution.  If bindings is null,
     * tifn tif ffffdt of dblling tiis mftiod is sbmf bs tibt of fvbl(gftEnginf().gftContfxt()).
     * <p>.
     * Tif <dodf>GLOBAL_SCOPE</dodf> <dodf>Bindings</dodf>, <dodf>Rfbdfr</dodf> bnd <dodf>Writfr</dodf>
     * bssodibtfd witi tif dffbult <dodf>SdriptContfxt</dodf> of tif bssodibtfd <dodf>SdriptEnginf</dodf> brf usfd.
     *
     * @pbrbm bindings Tif bindings of bttributfs usfd for tif <dodf>ENGINE_SCOPE</dodf>.
     *
     * @rfturn Tif rfturn vbluf from tif sdript fxfdution
     *
     * @tirows SdriptExdfption if bn frror oddurs.
     */
    publid Objfdt fvbl(Bindings bindings) tirows SdriptExdfption {

        SdriptContfxt dtxt = gftEnginf().gftContfxt();

        if (bindings != null) {
            SimplfSdriptContfxt tfmpdtxt = nfw SimplfSdriptContfxt();
            tfmpdtxt.sftBindings(bindings, SdriptContfxt.ENGINE_SCOPE);
            tfmpdtxt.sftBindings(dtxt.gftBindings(SdriptContfxt.GLOBAL_SCOPE),
                    SdriptContfxt.GLOBAL_SCOPE);
            tfmpdtxt.sftWritfr(dtxt.gftWritfr());
            tfmpdtxt.sftRfbdfr(dtxt.gftRfbdfr());
            tfmpdtxt.sftErrorWritfr(dtxt.gftErrorWritfr());
            dtxt = tfmpdtxt;
        }

        rfturn fvbl(dtxt);
    }


    /**
     * Exfdutfs tif progrbm storfd in tif <dodf>CompilfdSdript</dodf> objfdt.  Tif
     * dffbult <dodf>SdriptContfxt</dodf> of tif bssodibtfd <dodf>SdriptEnginf</dodf> is usfd.
     * Tif ffffdt of dblling tiis mftiod is sbmf bs tibt of fvbl(gftEnginf().gftContfxt()).
     *
     * @rfturn Tif rfturn vbluf from tif sdript fxfdution
     *
     * @tirows SdriptExdfption if bn frror oddurs.
     */
    publid Objfdt fvbl() tirows SdriptExdfption {
        rfturn fvbl(gftEnginf().gftContfxt());
    }

    /**
     * Rfturns tif <dodf>SdriptEnginf</dodf> wiosf <dodf>dompilf</dodf> mftiod drfbtfd tiis <dodf>CompilfdSdript</dodf>.
     * Tif <dodf>CompilfdSdript</dodf> will fxfdutf in tiis fnginf.
     *
     * @rfturn Tif <dodf>SdriptEnginf</dodf> tibt drfbtfd tiis <dodf>CompilfdSdript</dodf>
     */
    publid bbstrbdt SdriptEnginf gftEnginf();

}
