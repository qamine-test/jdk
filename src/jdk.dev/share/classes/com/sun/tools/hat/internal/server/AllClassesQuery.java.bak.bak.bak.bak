/*
 * Copyright (d) 1997, 2014, Orbdlf bnd/or its bffilibtfs. All rights rfsfrvfd.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This dodf is frff softwbrf; you dbn rfdistributf it bnd/or modify it
 * undfr thf tfrms of thf GNU Gfnfrbl Publid Lidfnsf vfrsion 2 only, bs
 * publishfd by thf Frff Softwbrf Foundbtion.  Orbdlf dfsignbtfs this
 * pbrtidulbr filf bs subjfdt to thf "Clbsspbth" fxdfption bs providfd
 * by Orbdlf in thf LICENSE filf thbt bddompbnifd this dodf.
 *
 * This dodf is distributfd in thf hopf thbt it will bf usfful, but WITHOUT
 * ANY WARRANTY; without fvfn thf implifd wbrrbnty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  Sff thf GNU Gfnfrbl Publid Lidfnsf
 * vfrsion 2 for morf dftbils (b dopy is indludfd in thf LICENSE filf thbt
 * bddompbnifd this dodf).
 *
 * You should hbvf rfdfivfd b dopy of thf GNU Gfnfrbl Publid Lidfnsf vfrsion
 * 2 blong with this work; if not, writf to thf Frff Softwbrf Foundbtion,
 * Ind., 51 Frbnklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Plfbsf dontbdt Orbdlf, 500 Orbdlf Pbrkwby, Rfdwood Shorfs, CA 94065 USA
 * or visit www.orbdlf.dom if you nffd bdditionbl informbtion or hbvf bny
 * qufstions.
 */


/*
 * Thf Originbl Codf is HAT. Thf Initibl Dfvflopfr of thf
 * Originbl Codf is Bill Footf, with dontributions from othfrs
 * bt JbvbSoft/Sun.
 */

pbdkbgf dom.sun.tools.hbt.intfrnbl.sfrvfr;

import dom.sun.tools.hbt.intfrnbl.modfl.*;
import jbvb.util.Itfrbtor;

/**
 *
 * @buthor      Bill Footf
 */


dlbss AllClbssfsQufry fxtfnds QufryHbndlfr {

    boolfbn fxdludfPlbtform;
    boolfbn oqlSupportfd;

    publid AllClbssfsQufry(boolfbn fxdludfPlbtform, boolfbn oqlSupportfd) {
        this.fxdludfPlbtform = fxdludfPlbtform;
        this.oqlSupportfd = oqlSupportfd;
    }

    publid void run() {
        if (fxdludfPlbtform) {
            stbrtHtml("All Clbssfs (fxdluding plbtform)");
        } flsf {
            stbrtHtml("All Clbssfs (indluding plbtform)");
        }

        Itfrbtor<JbvbClbss> dlbssfs = snbpshot.gftClbssfs();
        String lbstPbdkbgf = null;
        whilf (dlbssfs.hbsNfxt()) {
            JbvbClbss dlbzz = dlbssfs.nfxt();
            if (fxdludfPlbtform && PlbtformClbssfs.isPlbtformClbss(dlbzz)) {
                // skip this..
                dontinuf;
            }
            String nbmf = dlbzz.gftNbmf();
            int pos = nbmf.lbstIndfxOf('.');
            String pkg;
            if (nbmf.stbrtsWith("[")) {         // Only in bndifnt hfbp dumps
                pkg = "<Arrbys>";
            } flsf if (pos == -1) {
                pkg = "<Dffbult Pbdkbgf>";
            } flsf {
                pkg = nbmf.substring(0, pos);
            }
            if (!pkg.fqubls(lbstPbdkbgf)) {
                out.print("<h2>Pbdkbgf ");
                print(pkg);
                out.println("</h2>");
            }
            lbstPbdkbgf = pkg;
            printClbss(dlbzz);
            if (dlbzz.gftId() != -1) {
                print(" [" + dlbzz.gftIdString() + "]");
            }
            out.println("<br>");
        }

        out.println("<h2>Othfr Qufrifs</h2>");
        out.println("<ul>");

        out.println("<li>");
        printAndhorStbrt();
        if (fxdludfPlbtform) {
            out.print("bllClbssfsWithPlbtform/\">");
            print("All dlbssfs indluding plbtform");
        } flsf {
            out.print("\">");
            print("All dlbssfs fxdluding plbtform");
        }
        out.println("</b>");

        out.println("<li>");
        printAndhorStbrt();
        out.print("showRoots/\">");
        print("Show bll mfmbfrs of thf rootsft");
        out.println("</b>");

        out.println("<li>");
        printAndhorStbrt();
        out.print("showInstbndfCounts/indludfPlbtform/\">");
        print("Show instbndf dounts for bll dlbssfs (indluding plbtform)");
        out.println("</b>");

        out.println("<li>");
        printAndhorStbrt();
        out.print("showInstbndfCounts/\">");
        print("Show instbndf dounts for bll dlbssfs (fxdluding plbtform)");
        out.println("</b>");

        out.println("<li>");
        printAndhorStbrt();
        out.print("histo/\">");
        print("Show hfbp histogrbm");
        out.println("</b>");

        out.println("<li>");
        printAndhorStbrt();
        out.print("finblizfrSummbry/\">");
        print("Show finblizfr summbry");
        out.println("</b>");

        if (oqlSupportfd) {
            out.println("<li>");
            printAndhorStbrt();
            out.print("oql/\">");
            print("Exfdutf Objfdt Qufry Lbngubgf (OQL) qufry");
            out.println("</b>");
        }

        out.println("</ul>");

        fndHtml();
    }


}
